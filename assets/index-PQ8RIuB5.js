function hj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pj(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var A5={exports:{}},ew={},C5={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=Symbol.for("react.element"),mj=Symbol.for("react.portal"),vj=Symbol.for("react.fragment"),gj=Symbol.for("react.strict_mode"),yj=Symbol.for("react.profiler"),xj=Symbol.for("react.provider"),bj=Symbol.for("react.context"),wj=Symbol.for("react.forward_ref"),Sj=Symbol.for("react.suspense"),_j=Symbol.for("react.memo"),Ej=Symbol.for("react.lazy"),UR=Symbol.iterator;function Mj(t){return t===null||typeof t!="object"?null:(t=UR&&t[UR]||t["@@iterator"],typeof t=="function"?t:null)}var T5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D5=Object.assign,N5={};function bp(t,e,n){this.props=t,this.context=e,this.refs=N5,this.updater=n||T5}bp.prototype.isReactComponent={};bp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function R5(){}R5.prototype=bp.prototype;function FC(t,e,n){this.props=t,this.context=e,this.refs=N5,this.updater=n||T5}var LC=FC.prototype=new R5;LC.constructor=FC;D5(LC,bp.prototype);LC.isPureReactComponent=!0;var zR=Array.isArray,P5=Object.prototype.hasOwnProperty,BC={current:null},I5={key:!0,ref:!0,__self:!0,__source:!0};function O5(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)P5.call(e,r)&&!I5.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var u=Array(o),l=0;l<o;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:zg,type:t,key:a,ref:s,props:i,_owner:BC.current}}function Aj(t,e){return{$$typeof:zg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function UC(t){return typeof t=="object"&&t!==null&&t.$$typeof===zg}function Cj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kR=/\/+/g;function B_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cj(""+t.key):e.toString(36)}function ax(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case zg:case mj:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+B_(s,0):r,zR(i)?(n="",t!=null&&(n=t.replace(kR,"$&/")+"/"),ax(i,e,n,"",function(l){return l})):i!=null&&(UC(i)&&(i=Aj(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(kR,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",zR(t))for(var o=0;o<t.length;o++){a=t[o];var u=r+B_(a,o);s+=ax(a,e,n,u,i)}else if(u=Mj(t),typeof u=="function")for(t=u.call(t),o=0;!(a=t.next()).done;)a=a.value,u=r+B_(a,o++),s+=ax(a,e,n,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function gy(t,e,n){if(t==null)return t;var r=[],i=0;return ax(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Tj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _a={current:null},sx={transition:null},Dj={ReactCurrentDispatcher:_a,ReactCurrentBatchConfig:sx,ReactCurrentOwner:BC};An.Children={map:gy,forEach:function(t,e,n){gy(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gy(t,function(){e++}),e},toArray:function(t){return gy(t,function(e){return e})||[]},only:function(t){if(!UC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};An.Component=bp;An.Fragment=vj;An.Profiler=yj;An.PureComponent=FC;An.StrictMode=gj;An.Suspense=Sj;An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dj;An.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D5({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=BC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(u in e)P5.call(e,u)&&!I5.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&o!==void 0?o[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var l=0;l<u;l++)o[l]=arguments[l+2];r.children=o}return{$$typeof:zg,type:t.type,key:i,ref:a,props:r,_owner:s}};An.createContext=function(t){return t={$$typeof:bj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xj,_context:t},t.Consumer=t};An.createElement=O5;An.createFactory=function(t){var e=O5.bind(null,t);return e.type=t,e};An.createRef=function(){return{current:null}};An.forwardRef=function(t){return{$$typeof:wj,render:t}};An.isValidElement=UC;An.lazy=function(t){return{$$typeof:Ej,_payload:{_status:-1,_result:t},_init:Tj}};An.memo=function(t,e){return{$$typeof:_j,type:t,compare:e===void 0?null:e}};An.startTransition=function(t){var e=sx.transition;sx.transition={};try{t()}finally{sx.transition=e}};An.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};An.useCallback=function(t,e){return _a.current.useCallback(t,e)};An.useContext=function(t){return _a.current.useContext(t)};An.useDebugValue=function(){};An.useDeferredValue=function(t){return _a.current.useDeferredValue(t)};An.useEffect=function(t,e){return _a.current.useEffect(t,e)};An.useId=function(){return _a.current.useId()};An.useImperativeHandle=function(t,e,n){return _a.current.useImperativeHandle(t,e,n)};An.useInsertionEffect=function(t,e){return _a.current.useInsertionEffect(t,e)};An.useLayoutEffect=function(t,e){return _a.current.useLayoutEffect(t,e)};An.useMemo=function(t,e){return _a.current.useMemo(t,e)};An.useReducer=function(t,e,n){return _a.current.useReducer(t,e,n)};An.useRef=function(t){return _a.current.useRef(t)};An.useState=function(t){return _a.current.useState(t)};An.useSyncExternalStore=function(t,e,n){return _a.current.useSyncExternalStore(t,e,n)};An.useTransition=function(){return _a.current.useTransition()};An.version="18.2.0";C5.exports=An;var $=C5.exports;const Ae=Qs($),Nj=hj({__proto__:null,default:Ae},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rj=$,Pj=Symbol.for("react.element"),Ij=Symbol.for("react.fragment"),Oj=Object.prototype.hasOwnProperty,Fj=Rj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lj={key:!0,ref:!0,__self:!0,__source:!0};function F5(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)Oj.call(e,r)&&!Lj.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pj,type:t,key:a,ref:s,props:i,_owner:Fj.current}}ew.Fragment=Ij;ew.jsx=F5;ew.jsxs=F5;A5.exports=ew;var Je=A5.exports,zM={},L5={exports:{}},ms={},B5={exports:{}},U5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,I){var j=U.length;U.push(I);e:for(;0<j;){var ee=j-1>>>1,J=U[ee];if(0<i(J,I))U[ee]=I,U[j]=J,j=ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var I=U[0],j=U.pop();if(j!==I){U[0]=j;e:for(var ee=0,J=U.length,q=J>>>1;ee<q;){var ae=2*(ee+1)-1,be=U[ae],ue=ae+1,pe=U[ue];if(0>i(be,j))ue<J&&0>i(pe,be)?(U[ee]=pe,U[ue]=j,ee=ue):(U[ee]=be,U[ae]=j,ee=ae);else if(ue<J&&0>i(pe,j))U[ee]=pe,U[ue]=j,ee=ue;else break e}}return I}function i(U,I){var j=U.sortIndex-I.sortIndex;return j!==0?j:U.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var I=n(l);I!==null;){if(I.callback===null)r(l);else if(I.startTime<=U)r(l),I.sortIndex=I.expirationTime,e(u,I);else break;I=n(l)}}function S(U){if(v=!1,g(U),!m)if(n(u)!==null)m=!0,O(E);else{var I=n(l);I!==null&&F(S,I.startTime-U)}}function E(U,I){m=!1,v&&(v=!1,p(T),T=-1),h=!0;var j=d;try{for(g(I),f=n(u);f!==null&&(!(f.expirationTime>I)||U&&!N());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,d=f.priorityLevel;var J=ee(f.expirationTime<=I);I=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(u)&&r(u),g(I)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var ae=n(l);ae!==null&&F(S,ae.startTime-I),q=!1}return q}finally{f=null,d=j,h=!1}}var _=!1,A=null,T=-1,M=5,C=-1;function N(){return!(t.unstable_now()-C<M)}function P(){if(A!==null){var U=t.unstable_now();C=U;var I=!0;try{I=A(!0,U)}finally{I?H():(_=!1,A=null)}}else _=!1}var H;if(typeof x=="function")H=function(){x(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,z=L.port2;L.port1.onmessage=P,H=function(){z.postMessage(null)}}else H=function(){y(P,0)};function O(U){A=U,_||(_=!0,H())}function F(U,I){T=y(function(){U(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var j=d;d=I;try{return U()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,I){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=d;d=U;try{return I()}finally{d=j}},t.unstable_scheduleCallback=function(U,I,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=j+J,U={id:c++,callback:I,priorityLevel:U,startTime:j,expirationTime:J,sortIndex:-1},j>ee?(U.sortIndex=j,e(l,U),n(u)===null&&U===n(l)&&(v?(p(T),T=-1):v=!0,F(S,j-ee))):(U.sortIndex=J,e(u,U),m||h||(m=!0,O(E))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var I=d;return function(){var j=d;d=I;try{return U.apply(this,arguments)}finally{d=j}}}})(U5);B5.exports=U5;var Bj=B5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z5=$,cs=Bj;function ut(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k5=new Set,Iv={};function Yf(t,e){Wh(t,e),Wh(t+"Capture",e)}function Wh(t,e){for(Iv[t]=e,t=0;t<e.length;t++)k5.add(e[t])}var Yu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kM=Object.prototype.hasOwnProperty,Uj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$R={},HR={};function zj(t){return kM.call(HR,t)?!0:kM.call($R,t)?!1:Uj.test(t)?HR[t]=!0:($R[t]=!0,!1)}function kj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $j(t,e,n,r){if(e===null||typeof e>"u"||kj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ea(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Ri={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ri[t]=new Ea(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ri[e]=new Ea(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ri[t]=new Ea(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ri[t]=new Ea(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ri[t]=new Ea(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ri[t]=new Ea(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ri[t]=new Ea(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ri[t]=new Ea(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ri[t]=new Ea(t,5,!1,t.toLowerCase(),null,!1,!1)});var zC=/[\-:]([a-z])/g;function kC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zC,kC);Ri[e]=new Ea(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zC,kC);Ri[e]=new Ea(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zC,kC);Ri[e]=new Ea(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ri[t]=new Ea(t,1,!1,t.toLowerCase(),null,!1,!1)});Ri.xlinkHref=new Ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ri[t]=new Ea(t,1,!1,t.toLowerCase(),null,!0,!0)});function $C(t,e,n,r){var i=Ri.hasOwnProperty(e)?Ri[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($j(e,n,i,r)&&(n=null),r||i===null?zj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sl=z5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yy=Symbol.for("react.element"),uh=Symbol.for("react.portal"),lh=Symbol.for("react.fragment"),HC=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),$5=Symbol.for("react.provider"),H5=Symbol.for("react.context"),GC=Symbol.for("react.forward_ref"),HM=Symbol.for("react.suspense"),GM=Symbol.for("react.suspense_list"),VC=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),G5=Symbol.for("react.offscreen"),GR=Symbol.iterator;function bm(t){return t===null||typeof t!="object"?null:(t=GR&&t[GR]||t["@@iterator"],typeof t=="function"?t:null)}var Pr=Object.assign,U_;function Km(t){if(U_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U_=e&&e[1]||""}return`
`+U_+t}var z_=!1;function k_(t,e){if(!t||z_)return"";z_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=o);break}}}finally{z_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Km(t):""}function Hj(t){switch(t.tag){case 5:return Km(t.type);case 16:return Km("Lazy");case 13:return Km("Suspense");case 19:return Km("SuspenseList");case 0:case 2:case 15:return t=k_(t.type,!1),t;case 11:return t=k_(t.type.render,!1),t;case 1:return t=k_(t.type,!0),t;default:return""}}function VM(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lh:return"Fragment";case uh:return"Portal";case $M:return"Profiler";case HC:return"StrictMode";case HM:return"Suspense";case GM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H5:return(t.displayName||"Context")+".Consumer";case $5:return(t._context.displayName||"Context")+".Provider";case GC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VC:return e=t.displayName||null,e!==null?e:VM(t.type)||"Memo";case Ll:e=t._payload,t=t._init;try{return VM(t(e))}catch{}}return null}function Gj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VM(e);case 8:return e===HC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function V5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vj(t){var e=V5(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xy(t){t._valueTracker||(t._valueTracker=Vj(t))}function W5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V5(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function WM(t,e){var n=e.checked;return Pr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q5(t,e){e=e.checked,e!=null&&$C(t,"checked",e,!1)}function qM(t,e){q5(t,e);var n=oc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jM(t,e.type,n):e.hasOwnProperty("defaultValue")&&jM(t,e.type,oc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function WR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jM(t,e,n){(e!=="number"||Rx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qm=Array.isArray;function Rh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function XM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ut(91));return Pr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ut(92));if(Qm(n)){if(1<n.length)throw Error(ut(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oc(n)}}function j5(t,e){var n=oc(e.value),r=oc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function X5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?X5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var by,Y5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(by=by||document.createElement("div"),by.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=by.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ov(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ov={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wj=["Webkit","ms","Moz","O"];Object.keys(ov).forEach(function(t){Wj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ov[e]=ov[t]})});function Z5(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ov.hasOwnProperty(t)&&ov[t]?(""+e).trim():e+"px"}function K5(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Z5(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qj=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZM(t,e){if(e){if(qj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ut(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ut(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ut(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ut(62))}}function KM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QM=null;function WC(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var JM=null,Ph=null,Ih=null;function XR(t){if(t=Hg(t)){if(typeof JM!="function")throw Error(ut(280));var e=t.stateNode;e&&(e=aw(e),JM(t.stateNode,t.type,e))}}function Q5(t){Ph?Ih?Ih.push(t):Ih=[t]:Ph=t}function J5(){if(Ph){var t=Ph,e=Ih;if(Ih=Ph=null,XR(t),e)for(t=0;t<e.length;t++)XR(e[t])}}function ek(t,e){return t(e)}function tk(){}var $_=!1;function nk(t,e,n){if($_)return t(e,n);$_=!0;try{return ek(t,e,n)}finally{$_=!1,(Ph!==null||Ih!==null)&&(tk(),J5())}}function Fv(t,e){var n=t.stateNode;if(n===null)return null;var r=aw(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ut(231,e,typeof n));return n}var eA=!1;if(Yu)try{var wm={};Object.defineProperty(wm,"passive",{get:function(){eA=!0}}),window.addEventListener("test",wm,wm),window.removeEventListener("test",wm,wm)}catch{eA=!1}function jj(t,e,n,r,i,a,s,o,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var uv=!1,Px=null,Ix=!1,tA=null,Xj={onError:function(t){uv=!0,Px=t}};function Yj(t,e,n,r,i,a,s,o,u){uv=!1,Px=null,jj.apply(Xj,arguments)}function Zj(t,e,n,r,i,a,s,o,u){if(Yj.apply(this,arguments),uv){if(uv){var l=Px;uv=!1,Px=null}else throw Error(ut(198));Ix||(Ix=!0,tA=l)}}function Zf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YR(t){if(Zf(t)!==t)throw Error(ut(188))}function Kj(t){var e=t.alternate;if(!e){if(e=Zf(t),e===null)throw Error(ut(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return YR(i),t;if(a===r)return YR(i),e;a=a.sibling}throw Error(ut(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(ut(189))}}if(n.alternate!==r)throw Error(ut(190))}if(n.tag!==3)throw Error(ut(188));return n.stateNode.current===n?t:e}function ik(t){return t=Kj(t),t!==null?ak(t):null}function ak(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ak(t);if(e!==null)return e;t=t.sibling}return null}var sk=cs.unstable_scheduleCallback,ZR=cs.unstable_cancelCallback,Qj=cs.unstable_shouldYield,Jj=cs.unstable_requestPaint,Wr=cs.unstable_now,eX=cs.unstable_getCurrentPriorityLevel,qC=cs.unstable_ImmediatePriority,ok=cs.unstable_UserBlockingPriority,Ox=cs.unstable_NormalPriority,tX=cs.unstable_LowPriority,uk=cs.unstable_IdlePriority,tw=null,Jo=null;function nX(t){if(Jo&&typeof Jo.onCommitFiberRoot=="function")try{Jo.onCommitFiberRoot(tw,t,void 0,(t.current.flags&128)===128)}catch{}}var So=Math.clz32?Math.clz32:aX,rX=Math.log,iX=Math.LN2;function aX(t){return t>>>=0,t===0?32:31-(rX(t)/iX|0)|0}var wy=64,Sy=4194304;function Jm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Jm(o):(a&=s,a!==0&&(r=Jm(a)))}else s=n&~i,s!==0?r=Jm(s):a!==0&&(r=Jm(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-So(e),i=1<<n,r|=t[n],e&=~i;return r}function sX(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oX(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-So(a),o=1<<s,u=i[s];u===-1?(!(o&n)||o&r)&&(i[s]=sX(o,e)):u<=e&&(t.expiredLanes|=o),a&=~o}}function nA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lk(){var t=wy;return wy<<=1,!(wy&4194240)&&(wy=64),t}function H_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-So(e),t[e]=n}function uX(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-So(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function jC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-So(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var er=0;function ck(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fk,XC,dk,hk,pk,rA=!1,_y=[],Zl=null,Kl=null,Ql=null,Lv=new Map,Bv=new Map,kl=[],lX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KR(t,e){switch(t){case"focusin":case"focusout":Zl=null;break;case"dragenter":case"dragleave":Kl=null;break;case"mouseover":case"mouseout":Ql=null;break;case"pointerover":case"pointerout":Lv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bv.delete(e.pointerId)}}function Sm(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Hg(e),e!==null&&XC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cX(t,e,n,r,i){switch(e){case"focusin":return Zl=Sm(Zl,t,e,n,r,i),!0;case"dragenter":return Kl=Sm(Kl,t,e,n,r,i),!0;case"mouseover":return Ql=Sm(Ql,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Lv.set(a,Sm(Lv.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bv.set(a,Sm(Bv.get(a)||null,t,e,n,r,i)),!0}return!1}function mk(t){var e=hf(t.target);if(e!==null){var n=Zf(e);if(n!==null){if(e=n.tag,e===13){if(e=rk(n),e!==null){t.blockedOn=e,pk(t.priority,function(){dk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ox(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);QM=r,n.target.dispatchEvent(r),QM=null}else return e=Hg(n),e!==null&&XC(e),t.blockedOn=n,!1;e.shift()}return!0}function QR(t,e,n){ox(t)&&n.delete(e)}function fX(){rA=!1,Zl!==null&&ox(Zl)&&(Zl=null),Kl!==null&&ox(Kl)&&(Kl=null),Ql!==null&&ox(Ql)&&(Ql=null),Lv.forEach(QR),Bv.forEach(QR)}function _m(t,e){t.blockedOn===e&&(t.blockedOn=null,rA||(rA=!0,cs.unstable_scheduleCallback(cs.unstable_NormalPriority,fX)))}function Uv(t){function e(i){return _m(i,t)}if(0<_y.length){_m(_y[0],t);for(var n=1;n<_y.length;n++){var r=_y[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zl!==null&&_m(Zl,t),Kl!==null&&_m(Kl,t),Ql!==null&&_m(Ql,t),Lv.forEach(e),Bv.forEach(e),n=0;n<kl.length;n++)r=kl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kl.length&&(n=kl[0],n.blockedOn===null);)mk(n),n.blockedOn===null&&kl.shift()}var Oh=sl.ReactCurrentBatchConfig,Lx=!0;function dX(t,e,n,r){var i=er,a=Oh.transition;Oh.transition=null;try{er=1,YC(t,e,n,r)}finally{er=i,Oh.transition=a}}function hX(t,e,n,r){var i=er,a=Oh.transition;Oh.transition=null;try{er=4,YC(t,e,n,r)}finally{er=i,Oh.transition=a}}function YC(t,e,n,r){if(Lx){var i=iA(t,e,n,r);if(i===null)Q_(t,e,r,Bx,n),KR(t,r);else if(cX(i,t,e,n,r))r.stopPropagation();else if(KR(t,r),e&4&&-1<lX.indexOf(t)){for(;i!==null;){var a=Hg(i);if(a!==null&&fk(a),a=iA(t,e,n,r),a===null&&Q_(t,e,r,Bx,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Q_(t,e,r,null,n)}}var Bx=null;function iA(t,e,n,r){if(Bx=null,t=WC(r),t=hf(t),t!==null)if(e=Zf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bx=t,null}function vk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eX()){case qC:return 1;case ok:return 4;case Ox:case tX:return 16;case uk:return 536870912;default:return 16}default:return 16}}var Gl=null,ZC=null,ux=null;function gk(){if(ux)return ux;var t,e=ZC,n=e.length,r,i="value"in Gl?Gl.value:Gl.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return ux=i.slice(t,1<r?1-r:void 0)}function lx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ey(){return!0}function JR(){return!1}function vs(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ey:JR,this.isPropagationStopped=JR,this}return Pr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ey)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ey)},persist:function(){},isPersistent:Ey}),e}var wp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KC=vs(wp),$g=Pr({},wp,{view:0,detail:0}),pX=vs($g),G_,V_,Em,nw=Pr({},$g,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Em&&(Em&&t.type==="mousemove"?(G_=t.screenX-Em.screenX,V_=t.screenY-Em.screenY):V_=G_=0,Em=t),G_)},movementY:function(t){return"movementY"in t?t.movementY:V_}}),eP=vs(nw),mX=Pr({},nw,{dataTransfer:0}),vX=vs(mX),gX=Pr({},$g,{relatedTarget:0}),W_=vs(gX),yX=Pr({},wp,{animationName:0,elapsedTime:0,pseudoElement:0}),xX=vs(yX),bX=Pr({},wp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wX=vs(bX),SX=Pr({},wp,{data:0}),tP=vs(SX),_X={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AX(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MX[t])?!!e[t]:!1}function QC(){return AX}var CX=Pr({},$g,{key:function(t){if(t.key){var e=_X[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EX[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QC,charCode:function(t){return t.type==="keypress"?lx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TX=vs(CX),DX=Pr({},nw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nP=vs(DX),NX=Pr({},$g,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QC}),RX=vs(NX),PX=Pr({},wp,{propertyName:0,elapsedTime:0,pseudoElement:0}),IX=vs(PX),OX=Pr({},nw,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FX=vs(OX),LX=[9,13,27,32],JC=Yu&&"CompositionEvent"in window,lv=null;Yu&&"documentMode"in document&&(lv=document.documentMode);var BX=Yu&&"TextEvent"in window&&!lv,yk=Yu&&(!JC||lv&&8<lv&&11>=lv),rP=" ",iP=!1;function xk(t,e){switch(t){case"keyup":return LX.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ch=!1;function UX(t,e){switch(t){case"compositionend":return bk(e);case"keypress":return e.which!==32?null:(iP=!0,rP);case"textInput":return t=e.data,t===rP&&iP?null:t;default:return null}}function zX(t,e){if(ch)return t==="compositionend"||!JC&&xk(t,e)?(t=gk(),ux=ZC=Gl=null,ch=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yk&&e.locale!=="ko"?null:e.data;default:return null}}var kX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kX[t.type]:e==="textarea"}function wk(t,e,n,r){Q5(r),e=Ux(e,"onChange"),0<e.length&&(n=new KC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cv=null,zv=null;function $X(t){Pk(t,0)}function rw(t){var e=hh(t);if(W5(e))return t}function HX(t,e){if(t==="change")return e}var Sk=!1;if(Yu){var q_;if(Yu){var j_="oninput"in document;if(!j_){var sP=document.createElement("div");sP.setAttribute("oninput","return;"),j_=typeof sP.oninput=="function"}q_=j_}else q_=!1;Sk=q_&&(!document.documentMode||9<document.documentMode)}function oP(){cv&&(cv.detachEvent("onpropertychange",_k),zv=cv=null)}function _k(t){if(t.propertyName==="value"&&rw(zv)){var e=[];wk(e,zv,t,WC(t)),nk($X,e)}}function GX(t,e,n){t==="focusin"?(oP(),cv=e,zv=n,cv.attachEvent("onpropertychange",_k)):t==="focusout"&&oP()}function VX(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rw(zv)}function WX(t,e){if(t==="click")return rw(e)}function qX(t,e){if(t==="input"||t==="change")return rw(e)}function jX(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Co=typeof Object.is=="function"?Object.is:jX;function kv(t,e){if(Co(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kM.call(e,i)||!Co(t[i],e[i]))return!1}return!0}function uP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lP(t,e){var n=uP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uP(n)}}function Ek(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ek(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mk(){for(var t=window,e=Rx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rx(t.document)}return e}function eT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XX(t){var e=Mk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ek(n.ownerDocument.documentElement,n)){if(r!==null&&eT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=lP(n,a);var s=lP(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var YX=Yu&&"documentMode"in document&&11>=document.documentMode,fh=null,aA=null,fv=null,sA=!1;function cP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sA||fh==null||fh!==Rx(r)||(r=fh,"selectionStart"in r&&eT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fv&&kv(fv,r)||(fv=r,r=Ux(aA,"onSelect"),0<r.length&&(e=new KC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fh)))}function My(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dh={animationend:My("Animation","AnimationEnd"),animationiteration:My("Animation","AnimationIteration"),animationstart:My("Animation","AnimationStart"),transitionend:My("Transition","TransitionEnd")},X_={},Ak={};Yu&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete dh.animationend.animation,delete dh.animationiteration.animation,delete dh.animationstart.animation),"TransitionEvent"in window||delete dh.transitionend.transition);function iw(t){if(X_[t])return X_[t];if(!dh[t])return t;var e=dh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ak)return X_[t]=e[n];return t}var Ck=iw("animationend"),Tk=iw("animationiteration"),Dk=iw("animationstart"),Nk=iw("transitionend"),Rk=new Map,fP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wc(t,e){Rk.set(t,e),Yf(e,[t])}for(var Y_=0;Y_<fP.length;Y_++){var Z_=fP[Y_],ZX=Z_.toLowerCase(),KX=Z_[0].toUpperCase()+Z_.slice(1);wc(ZX,"on"+KX)}wc(Ck,"onAnimationEnd");wc(Tk,"onAnimationIteration");wc(Dk,"onAnimationStart");wc("dblclick","onDoubleClick");wc("focusin","onFocus");wc("focusout","onBlur");wc(Nk,"onTransitionEnd");Wh("onMouseEnter",["mouseout","mouseover"]);Wh("onMouseLeave",["mouseout","mouseover"]);Wh("onPointerEnter",["pointerout","pointerover"]);Wh("onPointerLeave",["pointerout","pointerover"]);Yf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ev="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QX=new Set("cancel close invalid load scroll toggle".split(" ").concat(ev));function dP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zj(r,e,void 0,t),t.currentTarget=null}function Pk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],u=o.instance,l=o.currentTarget;if(o=o.listener,u!==a&&i.isPropagationStopped())break e;dP(i,o,l),a=u}else for(s=0;s<r.length;s++){if(o=r[s],u=o.instance,l=o.currentTarget,o=o.listener,u!==a&&i.isPropagationStopped())break e;dP(i,o,l),a=u}}}if(Ix)throw t=tA,Ix=!1,tA=null,t}function hr(t,e){var n=e[fA];n===void 0&&(n=e[fA]=new Set);var r=t+"__bubble";n.has(r)||(Ik(e,t,2,!1),n.add(r))}function K_(t,e,n){var r=0;e&&(r|=4),Ik(n,t,r,e)}var Ay="_reactListening"+Math.random().toString(36).slice(2);function $v(t){if(!t[Ay]){t[Ay]=!0,k5.forEach(function(n){n!=="selectionchange"&&(QX.has(n)||K_(n,!1,t),K_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ay]||(e[Ay]=!0,K_("selectionchange",!1,e))}}function Ik(t,e,n,r){switch(vk(e)){case 1:var i=dX;break;case 4:i=hX;break;default:i=YC}n=i.bind(null,e,n,t),i=void 0,!eA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Q_(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;o!==null;){if(s=hf(o),s===null)return;if(u=s.tag,u===5||u===6){r=a=s;continue e}o=o.parentNode}}r=r.return}nk(function(){var l=a,c=WC(n),f=[];e:{var d=Rk.get(t);if(d!==void 0){var h=KC,m=t;switch(t){case"keypress":if(lx(n)===0)break e;case"keydown":case"keyup":h=TX;break;case"focusin":m="focus",h=W_;break;case"focusout":m="blur",h=W_;break;case"beforeblur":case"afterblur":h=W_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=eP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=RX;break;case Ck:case Tk:case Dk:h=xX;break;case Nk:h=IX;break;case"scroll":h=pX;break;case"wheel":h=FX;break;case"copy":case"cut":case"paste":h=wX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nP}var v=(e&4)!==0,y=!v&&t==="scroll",p=v?d!==null?d+"Capture":null:d;v=[];for(var x=l,g;x!==null;){g=x;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,p!==null&&(S=Fv(x,p),S!=null&&v.push(Hv(x,S,g)))),y)break;x=x.return}0<v.length&&(d=new h(d,m,null,n,c),f.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==QM&&(m=n.relatedTarget||n.fromElement)&&(hf(m)||m[Zu]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=l,m=m?hf(m):null,m!==null&&(y=Zf(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=l),h!==m)){if(v=eP,S="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=nP,S="onPointerLeave",p="onPointerEnter",x="pointer"),y=h==null?d:hh(h),g=m==null?d:hh(m),d=new v(S,x+"leave",h,n,c),d.target=y,d.relatedTarget=g,S=null,hf(c)===l&&(v=new v(p,x+"enter",m,n,c),v.target=g,v.relatedTarget=y,S=v),y=S,h&&m)t:{for(v=h,p=m,x=0,g=v;g;g=Dd(g))x++;for(g=0,S=p;S;S=Dd(S))g++;for(;0<x-g;)v=Dd(v),x--;for(;0<g-x;)p=Dd(p),g--;for(;x--;){if(v===p||p!==null&&v===p.alternate)break t;v=Dd(v),p=Dd(p)}v=null}else v=null;h!==null&&hP(f,d,h,v,!1),m!==null&&y!==null&&hP(f,y,m,v,!0)}}e:{if(d=l?hh(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=HX;else if(aP(d))if(Sk)E=qX;else{E=VX;var _=GX}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=WX);if(E&&(E=E(t,l))){wk(f,E,n,c);break e}_&&_(t,d,l),t==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&jM(d,"number",d.value)}switch(_=l?hh(l):window,t){case"focusin":(aP(_)||_.contentEditable==="true")&&(fh=_,aA=l,fv=null);break;case"focusout":fv=aA=fh=null;break;case"mousedown":sA=!0;break;case"contextmenu":case"mouseup":case"dragend":sA=!1,cP(f,n,c);break;case"selectionchange":if(YX)break;case"keydown":case"keyup":cP(f,n,c)}var A;if(JC)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ch?xk(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(yk&&n.locale!=="ko"&&(ch||T!=="onCompositionStart"?T==="onCompositionEnd"&&ch&&(A=gk()):(Gl=c,ZC="value"in Gl?Gl.value:Gl.textContent,ch=!0)),_=Ux(l,T),0<_.length&&(T=new tP(T,t,null,n,c),f.push({event:T,listeners:_}),A?T.data=A:(A=bk(n),A!==null&&(T.data=A)))),(A=BX?UX(t,n):zX(t,n))&&(l=Ux(l,"onBeforeInput"),0<l.length&&(c=new tP("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=A))}Pk(f,e)})}function Hv(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ux(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Fv(t,n),a!=null&&r.unshift(Hv(t,a,i)),a=Fv(t,e),a!=null&&r.push(Hv(t,a,i))),t=t.return}return r}function Dd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hP(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,u=o.alternate,l=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&l!==null&&(o=l,i?(u=Fv(n,a),u!=null&&s.unshift(Hv(n,u,o))):i||(u=Fv(n,a),u!=null&&s.push(Hv(n,u,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var JX=/\r\n?/g,eY=/\u0000|\uFFFD/g;function pP(t){return(typeof t=="string"?t:""+t).replace(JX,`
`).replace(eY,"")}function Cy(t,e,n){if(e=pP(e),pP(t)!==e&&n)throw Error(ut(425))}function zx(){}var oA=null,uA=null;function lA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cA=typeof setTimeout=="function"?setTimeout:void 0,tY=typeof clearTimeout=="function"?clearTimeout:void 0,mP=typeof Promise=="function"?Promise:void 0,nY=typeof queueMicrotask=="function"?queueMicrotask:typeof mP<"u"?function(t){return mP.resolve(null).then(t).catch(rY)}:cA;function rY(t){setTimeout(function(){throw t})}function J_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Uv(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Uv(e)}function Jl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function vP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sp=Math.random().toString(36).slice(2),Ko="__reactFiber$"+Sp,Gv="__reactProps$"+Sp,Zu="__reactContainer$"+Sp,fA="__reactEvents$"+Sp,iY="__reactListeners$"+Sp,aY="__reactHandles$"+Sp;function hf(t){var e=t[Ko];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zu]||n[Ko]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=vP(t);t!==null;){if(n=t[Ko])return n;t=vP(t)}return e}t=n,n=t.parentNode}return null}function Hg(t){return t=t[Ko]||t[Zu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ut(33))}function aw(t){return t[Gv]||null}var dA=[],ph=-1;function Sc(t){return{current:t}}function gr(t){0>ph||(t.current=dA[ph],dA[ph]=null,ph--)}function fr(t,e){ph++,dA[ph]=t.current,t.current=e}var uc={},ra=Sc(uc),Ha=Sc(!1),Of=uc;function qh(t,e){var n=t.type.contextTypes;if(!n)return uc;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ga(t){return t=t.childContextTypes,t!=null}function kx(){gr(Ha),gr(ra)}function gP(t,e,n){if(ra.current!==uc)throw Error(ut(168));fr(ra,e),fr(Ha,n)}function Ok(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ut(108,Gj(t)||"Unknown",i));return Pr({},n,r)}function $x(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uc,Of=ra.current,fr(ra,t),fr(Ha,Ha.current),!0}function yP(t,e,n){var r=t.stateNode;if(!r)throw Error(ut(169));n?(t=Ok(t,e,Of),r.__reactInternalMemoizedMergedChildContext=t,gr(Ha),gr(ra),fr(ra,t)):gr(Ha),fr(Ha,n)}var Iu=null,sw=!1,eE=!1;function Fk(t){Iu===null?Iu=[t]:Iu.push(t)}function sY(t){sw=!0,Fk(t)}function _c(){if(!eE&&Iu!==null){eE=!0;var t=0,e=er;try{var n=Iu;for(er=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Iu=null,sw=!1}catch(i){throw Iu!==null&&(Iu=Iu.slice(t+1)),sk(qC,_c),i}finally{er=e,eE=!1}}return null}var mh=[],vh=0,Hx=null,Gx=0,Fs=[],Ls=0,Ff=null,Uu=1,zu="";function nf(t,e){mh[vh++]=Gx,mh[vh++]=Hx,Hx=t,Gx=e}function Lk(t,e,n){Fs[Ls++]=Uu,Fs[Ls++]=zu,Fs[Ls++]=Ff,Ff=t;var r=Uu;t=zu;var i=32-So(r)-1;r&=~(1<<i),n+=1;var a=32-So(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Uu=1<<32-So(e)+i|n<<i|r,zu=a+t}else Uu=1<<a|n<<i|r,zu=t}function tT(t){t.return!==null&&(nf(t,1),Lk(t,1,0))}function nT(t){for(;t===Hx;)Hx=mh[--vh],mh[vh]=null,Gx=mh[--vh],mh[vh]=null;for(;t===Ff;)Ff=Fs[--Ls],Fs[Ls]=null,zu=Fs[--Ls],Fs[Ls]=null,Uu=Fs[--Ls],Fs[Ls]=null}var as=null,rs=null,wr=!1,po=null;function Bk(t,e){var n=Gs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,as=t,rs=Jl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,as=t,rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ff!==null?{id:Uu,overflow:zu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,as=t,rs=null,!0):!1;default:return!1}}function hA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pA(t){if(wr){var e=rs;if(e){var n=e;if(!xP(t,e)){if(hA(t))throw Error(ut(418));e=Jl(n.nextSibling);var r=as;e&&xP(t,e)?Bk(r,n):(t.flags=t.flags&-4097|2,wr=!1,as=t)}}else{if(hA(t))throw Error(ut(418));t.flags=t.flags&-4097|2,wr=!1,as=t}}}function bP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;as=t}function Ty(t){if(t!==as)return!1;if(!wr)return bP(t),wr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lA(t.type,t.memoizedProps)),e&&(e=rs)){if(hA(t))throw Uk(),Error(ut(418));for(;e;)Bk(t,e),e=Jl(e.nextSibling)}if(bP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ut(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rs=Jl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rs=null}}else rs=as?Jl(t.stateNode.nextSibling):null;return!0}function Uk(){for(var t=rs;t;)t=Jl(t.nextSibling)}function jh(){rs=as=null,wr=!1}function rT(t){po===null?po=[t]:po.push(t)}var oY=sl.ReactCurrentBatchConfig;function co(t,e){if(t&&t.defaultProps){e=Pr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Vx=Sc(null),Wx=null,gh=null,iT=null;function aT(){iT=gh=Wx=null}function sT(t){var e=Vx.current;gr(Vx),t._currentValue=e}function mA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fh(t,e){Wx=t,iT=gh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ka=!0),t.firstContext=null)}function js(t){var e=t._currentValue;if(iT!==t)if(t={context:t,memoizedValue:e,next:null},gh===null){if(Wx===null)throw Error(ut(308));gh=t,Wx.dependencies={lanes:0,firstContext:t}}else gh=gh.next=t;return e}var pf=null;function oT(t){pf===null?pf=[t]:pf.push(t)}function zk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,oT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ku(t,r)}function Ku(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bl=!1;function uT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ec(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Un&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ku(t,n)}return i=r.interleaved,i===null?(e.next=e,oT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ku(t,n)}function cx(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jC(t,n)}}function wP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qx(t,e,n,r){var i=t.updateQueue;Bl=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var u=o,l=u.next;u.next=null,s===null?a=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=l:o.next=l,c.lastBaseUpdate=u))}if(a!==null){var f=i.baseState;s=0,c=l=u=null,o=a;do{var d=o.lane,h=o.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,v=o;switch(d=e,h=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(h,f,d);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(h,f,d):m,d==null)break e;f=Pr({},f,d);break e;case 2:Bl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,s|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Bf|=s,t.lanes=s,t.memoizedState=f}}function SP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ut(191,i));i.call(r)}}}var $k=new z5.Component().refs;function vA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ow={isMounted:function(t){return(t=t._reactInternals)?Zf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ga(),i=nc(t),a=Vu(r,i);a.payload=e,n!=null&&(a.callback=n),e=ec(t,a,i),e!==null&&(_o(e,t,i,r),cx(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ga(),i=nc(t),a=Vu(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ec(t,a,i),e!==null&&(_o(e,t,i,r),cx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ga(),r=nc(t),i=Vu(n,r);i.tag=2,e!=null&&(i.callback=e),e=ec(t,i,r),e!==null&&(_o(e,t,r,n),cx(e,t,r))}};function _P(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!kv(n,r)||!kv(i,a):!0}function Hk(t,e,n){var r=!1,i=uc,a=e.contextType;return typeof a=="object"&&a!==null?a=js(a):(i=Ga(e)?Of:ra.current,r=e.contextTypes,a=(r=r!=null)?qh(t,i):uc),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ow,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function EP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ow.enqueueReplaceState(e,e.state,null)}function gA(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$k,uT(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=js(a):(a=Ga(e)?Of:ra.current,i.context=qh(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(vA(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ow.enqueueReplaceState(i,i.state,null),qx(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ut(309));var r=n.stateNode}if(!r)throw Error(ut(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;o===$k&&(o=i.refs={}),s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(ut(284));if(!n._owner)throw Error(ut(290,t))}return t}function Dy(t,e){throw t=Object.prototype.toString.call(e),Error(ut(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function MP(t){var e=t._init;return e(t._payload)}function Gk(t){function e(p,x){if(t){var g=p.deletions;g===null?(p.deletions=[x],p.flags|=16):g.push(x)}}function n(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function r(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function i(p,x){return p=rc(p,x),p.index=0,p.sibling=null,p}function a(p,x,g){return p.index=g,t?(g=p.alternate,g!==null?(g=g.index,g<x?(p.flags|=2,x):g):(p.flags|=2,x)):(p.flags|=1048576,x)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,x,g,S){return x===null||x.tag!==6?(x=oE(g,p.mode,S),x.return=p,x):(x=i(x,g),x.return=p,x)}function u(p,x,g,S){var E=g.type;return E===lh?c(p,x,g.props.children,S,g.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ll&&MP(E)===x.type)?(S=i(x,g.props),S.ref=Mm(p,x,g),S.return=p,S):(S=vx(g.type,g.key,g.props,null,p.mode,S),S.ref=Mm(p,x,g),S.return=p,S)}function l(p,x,g,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=uE(g,p.mode,S),x.return=p,x):(x=i(x,g.children||[]),x.return=p,x)}function c(p,x,g,S,E){return x===null||x.tag!==7?(x=Mf(g,p.mode,S,E),x.return=p,x):(x=i(x,g),x.return=p,x)}function f(p,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=oE(""+x,p.mode,g),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yy:return g=vx(x.type,x.key,x.props,null,p.mode,g),g.ref=Mm(p,null,x),g.return=p,g;case uh:return x=uE(x,p.mode,g),x.return=p,x;case Ll:var S=x._init;return f(p,S(x._payload),g)}if(Qm(x)||bm(x))return x=Mf(x,p.mode,g,null),x.return=p,x;Dy(p,x)}return null}function d(p,x,g,S){var E=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return E!==null?null:o(p,x,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case yy:return g.key===E?u(p,x,g,S):null;case uh:return g.key===E?l(p,x,g,S):null;case Ll:return E=g._init,d(p,x,E(g._payload),S)}if(Qm(g)||bm(g))return E!==null?null:c(p,x,g,S,null);Dy(p,g)}return null}function h(p,x,g,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(g)||null,o(x,p,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yy:return p=p.get(S.key===null?g:S.key)||null,u(x,p,S,E);case uh:return p=p.get(S.key===null?g:S.key)||null,l(x,p,S,E);case Ll:var _=S._init;return h(p,x,g,_(S._payload),E)}if(Qm(S)||bm(S))return p=p.get(g)||null,c(x,p,S,E,null);Dy(x,S)}return null}function m(p,x,g,S){for(var E=null,_=null,A=x,T=x=0,M=null;A!==null&&T<g.length;T++){A.index>T?(M=A,A=null):M=A.sibling;var C=d(p,A,g[T],S);if(C===null){A===null&&(A=M);break}t&&A&&C.alternate===null&&e(p,A),x=a(C,x,T),_===null?E=C:_.sibling=C,_=C,A=M}if(T===g.length)return n(p,A),wr&&nf(p,T),E;if(A===null){for(;T<g.length;T++)A=f(p,g[T],S),A!==null&&(x=a(A,x,T),_===null?E=A:_.sibling=A,_=A);return wr&&nf(p,T),E}for(A=r(p,A);T<g.length;T++)M=h(A,p,T,g[T],S),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?T:M.key),x=a(M,x,T),_===null?E=M:_.sibling=M,_=M);return t&&A.forEach(function(N){return e(p,N)}),wr&&nf(p,T),E}function v(p,x,g,S){var E=bm(g);if(typeof E!="function")throw Error(ut(150));if(g=E.call(g),g==null)throw Error(ut(151));for(var _=E=null,A=x,T=x=0,M=null,C=g.next();A!==null&&!C.done;T++,C=g.next()){A.index>T?(M=A,A=null):M=A.sibling;var N=d(p,A,C.value,S);if(N===null){A===null&&(A=M);break}t&&A&&N.alternate===null&&e(p,A),x=a(N,x,T),_===null?E=N:_.sibling=N,_=N,A=M}if(C.done)return n(p,A),wr&&nf(p,T),E;if(A===null){for(;!C.done;T++,C=g.next())C=f(p,C.value,S),C!==null&&(x=a(C,x,T),_===null?E=C:_.sibling=C,_=C);return wr&&nf(p,T),E}for(A=r(p,A);!C.done;T++,C=g.next())C=h(A,p,T,C.value,S),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?T:C.key),x=a(C,x,T),_===null?E=C:_.sibling=C,_=C);return t&&A.forEach(function(P){return e(p,P)}),wr&&nf(p,T),E}function y(p,x,g,S){if(typeof g=="object"&&g!==null&&g.type===lh&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case yy:e:{for(var E=g.key,_=x;_!==null;){if(_.key===E){if(E=g.type,E===lh){if(_.tag===7){n(p,_.sibling),x=i(_,g.props.children),x.return=p,p=x;break e}}else if(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ll&&MP(E)===_.type){n(p,_.sibling),x=i(_,g.props),x.ref=Mm(p,_,g),x.return=p,p=x;break e}n(p,_);break}else e(p,_);_=_.sibling}g.type===lh?(x=Mf(g.props.children,p.mode,S,g.key),x.return=p,p=x):(S=vx(g.type,g.key,g.props,null,p.mode,S),S.ref=Mm(p,x,g),S.return=p,p=S)}return s(p);case uh:e:{for(_=g.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){n(p,x.sibling),x=i(x,g.children||[]),x.return=p,p=x;break e}else{n(p,x);break}else e(p,x);x=x.sibling}x=uE(g,p.mode,S),x.return=p,p=x}return s(p);case Ll:return _=g._init,y(p,x,_(g._payload),S)}if(Qm(g))return m(p,x,g,S);if(bm(g))return v(p,x,g,S);Dy(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(n(p,x.sibling),x=i(x,g),x.return=p,p=x):(n(p,x),x=oE(g,p.mode,S),x.return=p,p=x),s(p)):n(p,x)}return y}var Xh=Gk(!0),Vk=Gk(!1),Gg={},eu=Sc(Gg),Vv=Sc(Gg),Wv=Sc(Gg);function mf(t){if(t===Gg)throw Error(ut(174));return t}function lT(t,e){switch(fr(Wv,e),fr(Vv,t),fr(eu,Gg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YM(e,t)}gr(eu),fr(eu,e)}function Yh(){gr(eu),gr(Vv),gr(Wv)}function Wk(t){mf(Wv.current);var e=mf(eu.current),n=YM(e,t.type);e!==n&&(fr(Vv,t),fr(eu,n))}function cT(t){Vv.current===t&&(gr(eu),gr(Vv))}var Cr=Sc(0);function jx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tE=[];function fT(){for(var t=0;t<tE.length;t++)tE[t]._workInProgressVersionPrimary=null;tE.length=0}var fx=sl.ReactCurrentDispatcher,nE=sl.ReactCurrentBatchConfig,Lf=0,Rr=null,ti=null,gi=null,Xx=!1,dv=!1,qv=0,uY=0;function $i(){throw Error(ut(321))}function dT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Co(t[n],e[n]))return!1;return!0}function hT(t,e,n,r,i,a){if(Lf=a,Rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fx.current=t===null||t.memoizedState===null?dY:hY,t=n(r,i),dv){a=0;do{if(dv=!1,qv=0,25<=a)throw Error(ut(301));a+=1,gi=ti=null,e.updateQueue=null,fx.current=pY,t=n(r,i)}while(dv)}if(fx.current=Yx,e=ti!==null&&ti.next!==null,Lf=0,gi=ti=Rr=null,Xx=!1,e)throw Error(ut(300));return t}function pT(){var t=qv!==0;return qv=0,t}function Xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Rr.memoizedState=gi=t:gi=gi.next=t,gi}function Xs(){if(ti===null){var t=Rr.alternate;t=t!==null?t.memoizedState:null}else t=ti.next;var e=gi===null?Rr.memoizedState:gi.next;if(e!==null)gi=e,ti=t;else{if(t===null)throw Error(ut(310));ti=t,t={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},gi===null?Rr.memoizedState=gi=t:gi=gi.next=t}return gi}function jv(t,e){return typeof e=="function"?e(t):e}function rE(t){var e=Xs(),n=e.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=t;var r=ti,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,u=null,l=a;do{var c=l.lane;if((Lf&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(o=u=f,s=r):u=u.next=f,Rr.lanes|=c,Bf|=c}l=l.next}while(l!==null&&l!==a);u===null?s=r:u.next=o,Co(r,e.memoizedState)||(ka=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Rr.lanes|=a,Bf|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iE(t){var e=Xs(),n=e.queue;if(n===null)throw Error(ut(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Co(a,e.memoizedState)||(ka=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function qk(){}function jk(t,e){var n=Rr,r=Xs(),i=e(),a=!Co(r.memoizedState,i);if(a&&(r.memoizedState=i,ka=!0),r=r.queue,mT(Zk.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||gi!==null&&gi.memoizedState.tag&1){if(n.flags|=2048,Xv(9,Yk.bind(null,n,r,i,e),void 0,null),wi===null)throw Error(ut(349));Lf&30||Xk(n,e,i)}return i}function Xk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Yk(t,e,n,r){e.value=n,e.getSnapshot=r,Kk(e)&&Qk(t)}function Zk(t,e,n){return n(function(){Kk(e)&&Qk(t)})}function Kk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Co(t,n)}catch{return!0}}function Qk(t){var e=Ku(t,1);e!==null&&_o(e,t,1,-1)}function AP(t){var e=Xo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jv,lastRenderedState:t},e.queue=t,t=t.dispatch=fY.bind(null,Rr,t),[e.memoizedState,t]}function Xv(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jk(){return Xs().memoizedState}function dx(t,e,n,r){var i=Xo();Rr.flags|=t,i.memoizedState=Xv(1|e,n,void 0,r===void 0?null:r)}function uw(t,e,n,r){var i=Xs();r=r===void 0?null:r;var a=void 0;if(ti!==null){var s=ti.memoizedState;if(a=s.destroy,r!==null&&dT(r,s.deps)){i.memoizedState=Xv(e,n,a,r);return}}Rr.flags|=t,i.memoizedState=Xv(1|e,n,a,r)}function CP(t,e){return dx(8390656,8,t,e)}function mT(t,e){return uw(2048,8,t,e)}function e8(t,e){return uw(4,2,t,e)}function t8(t,e){return uw(4,4,t,e)}function n8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r8(t,e,n){return n=n!=null?n.concat([t]):null,uw(4,4,n8.bind(null,e,t),n)}function vT(){}function i8(t,e){var n=Xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function a8(t,e){var n=Xs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function s8(t,e,n){return Lf&21?(Co(n,e)||(n=lk(),Rr.lanes|=n,Bf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ka=!0),t.memoizedState=n)}function lY(t,e){var n=er;er=n!==0&&4>n?n:4,t(!0);var r=nE.transition;nE.transition={};try{t(!1),e()}finally{er=n,nE.transition=r}}function o8(){return Xs().memoizedState}function cY(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},u8(t))l8(e,n);else if(n=zk(t,e,n,r),n!==null){var i=ga();_o(n,t,r,i),c8(n,e,r)}}function fY(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(u8(t))l8(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Co(o,s)){var u=e.interleaved;u===null?(i.next=i,oT(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=zk(t,e,i,r),n!==null&&(i=ga(),_o(n,t,r,i),c8(n,e,r))}}function u8(t){var e=t.alternate;return t===Rr||e!==null&&e===Rr}function l8(t,e){dv=Xx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c8(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jC(t,n)}}var Yx={readContext:js,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},dY={readContext:js,useCallback:function(t,e){return Xo().memoizedState=[t,e===void 0?null:e],t},useContext:js,useEffect:CP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,dx(4194308,4,n8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return dx(4194308,4,t,e)},useInsertionEffect:function(t,e){return dx(4,2,t,e)},useMemo:function(t,e){var n=Xo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cY.bind(null,Rr,t),[r.memoizedState,t]},useRef:function(t){var e=Xo();return t={current:t},e.memoizedState=t},useState:AP,useDebugValue:vT,useDeferredValue:function(t){return Xo().memoizedState=t},useTransition:function(){var t=AP(!1),e=t[0];return t=lY.bind(null,t[1]),Xo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rr,i=Xo();if(wr){if(n===void 0)throw Error(ut(407));n=n()}else{if(n=e(),wi===null)throw Error(ut(349));Lf&30||Xk(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,CP(Zk.bind(null,r,a,t),[t]),r.flags|=2048,Xv(9,Yk.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Xo(),e=wi.identifierPrefix;if(wr){var n=zu,r=Uu;n=(r&~(1<<32-So(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qv++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uY++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hY={readContext:js,useCallback:i8,useContext:js,useEffect:mT,useImperativeHandle:r8,useInsertionEffect:e8,useLayoutEffect:t8,useMemo:a8,useReducer:rE,useRef:Jk,useState:function(){return rE(jv)},useDebugValue:vT,useDeferredValue:function(t){var e=Xs();return s8(e,ti.memoizedState,t)},useTransition:function(){var t=rE(jv)[0],e=Xs().memoizedState;return[t,e]},useMutableSource:qk,useSyncExternalStore:jk,useId:o8,unstable_isNewReconciler:!1},pY={readContext:js,useCallback:i8,useContext:js,useEffect:mT,useImperativeHandle:r8,useInsertionEffect:e8,useLayoutEffect:t8,useMemo:a8,useReducer:iE,useRef:Jk,useState:function(){return iE(jv)},useDebugValue:vT,useDeferredValue:function(t){var e=Xs();return ti===null?e.memoizedState=t:s8(e,ti.memoizedState,t)},useTransition:function(){var t=iE(jv)[0],e=Xs().memoizedState;return[t,e]},useMutableSource:qk,useSyncExternalStore:jk,useId:o8,unstable_isNewReconciler:!1};function Zh(t,e){try{var n="",r=e;do n+=Hj(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function aE(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yA(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var mY=typeof WeakMap=="function"?WeakMap:Map;function f8(t,e,n){n=Vu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kx||(Kx=!0,TA=r),yA(t,e)},n}function d8(t,e,n){n=Vu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){yA(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){yA(t,e),typeof r!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function TP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new mY;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=DY.bind(null,t,e,n),e.then(t,t))}function DP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function NP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vu(-1,1),e.tag=2,ec(n,e,1))),n.lanes|=1),t)}var vY=sl.ReactCurrentOwner,ka=!1;function ha(t,e,n,r){e.child=t===null?Vk(e,null,n,r):Xh(e,t.child,n,r)}function RP(t,e,n,r,i){n=n.render;var a=e.ref;return Fh(e,i),r=hT(t,e,n,r,a,i),n=pT(),t!==null&&!ka?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qu(t,e,i)):(wr&&n&&tT(e),e.flags|=1,ha(t,e,r,i),e.child)}function PP(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!ET(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,h8(t,e,a,r,i)):(t=vx(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:kv,n(s,r)&&t.ref===e.ref)return Qu(t,e,i)}return e.flags|=1,t=rc(a,r),t.ref=e.ref,t.return=e,e.child=t}function h8(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(kv(a,r)&&t.ref===e.ref)if(ka=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ka=!0);else return e.lanes=t.lanes,Qu(t,e,i)}return xA(t,e,n,r,i)}function p8(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(xh,es),es|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fr(xh,es),es|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,fr(xh,es),es|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,fr(xh,es),es|=r;return ha(t,e,i,n),e.child}function m8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xA(t,e,n,r,i){var a=Ga(n)?Of:ra.current;return a=qh(e,a),Fh(e,i),n=hT(t,e,n,r,a,i),r=pT(),t!==null&&!ka?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qu(t,e,i)):(wr&&r&&tT(e),e.flags|=1,ha(t,e,n,i),e.child)}function IP(t,e,n,r,i){if(Ga(n)){var a=!0;$x(e)}else a=!1;if(Fh(e,i),e.stateNode===null)hx(t,e),Hk(e,n,r),gA(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=js(l):(l=Ga(n)?Of:ra.current,l=qh(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||u!==l)&&EP(e,s,r,l),Bl=!1;var d=e.memoizedState;s.state=d,qx(e,r,s,i),u=e.memoizedState,o!==r||d!==u||Ha.current||Bl?(typeof c=="function"&&(vA(e,n,c,r),u=e.memoizedState),(o=Bl||_P(e,n,o,r,d,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,kk(t,e),o=e.memoizedProps,l=e.type===e.elementType?o:co(e.type,o),s.props=l,f=e.pendingProps,d=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=js(u):(u=Ga(n)?Of:ra.current,u=qh(e,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||d!==u)&&EP(e,s,r,u),Bl=!1,d=e.memoizedState,s.state=d,qx(e,r,s,i);var m=e.memoizedState;o!==f||d!==m||Ha.current||Bl?(typeof h=="function"&&(vA(e,n,h,r),m=e.memoizedState),(l=Bl||_P(e,n,l,r,d,m,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return bA(t,e,n,r,a,i)}function bA(t,e,n,r,i,a){m8(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&yP(e,n,!1),Qu(t,e,a);r=e.stateNode,vY.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Xh(e,t.child,null,a),e.child=Xh(e,null,o,a)):ha(t,e,o,a),e.memoizedState=r.state,i&&yP(e,n,!0),e.child}function v8(t){var e=t.stateNode;e.pendingContext?gP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&gP(t,e.context,!1),lT(t,e.containerInfo)}function OP(t,e,n,r,i){return jh(),rT(i),e.flags|=256,ha(t,e,n,r),e.child}var wA={dehydrated:null,treeContext:null,retryLane:0};function SA(t){return{baseLanes:t,cachePool:null,transitions:null}}function g8(t,e,n){var r=e.pendingProps,i=Cr.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fr(Cr,i&1),t===null)return pA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=fw(s,r,0,null),t=Mf(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=SA(n),e.memoizedState=wA,t):gT(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return gY(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rc(i,u),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=rc(o,a):(a=Mf(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?SA(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=wA,r}return a=t.child,t=a.sibling,r=rc(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gT(t,e){return e=fw({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ny(t,e,n,r){return r!==null&&rT(r),Xh(e,t.child,null,n),t=gT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gY(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=aE(Error(ut(422))),Ny(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=fw({mode:"visible",children:r.children},i,0,null),a=Mf(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Xh(e,t.child,null,s),e.child.memoizedState=SA(s),e.memoizedState=wA,a);if(!(e.mode&1))return Ny(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(ut(419)),r=aE(a,r,void 0),Ny(t,e,s,r)}if(o=(s&t.childLanes)!==0,ka||o){if(r=wi,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ku(t,i),_o(r,t,i,-1))}return _T(),r=aE(Error(ut(421))),Ny(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NY.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,rs=Jl(i.nextSibling),as=e,wr=!0,po=null,t!==null&&(Fs[Ls++]=Uu,Fs[Ls++]=zu,Fs[Ls++]=Ff,Uu=t.id,zu=t.overflow,Ff=e),e=gT(e,r.children),e.flags|=4096,e)}function FP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mA(t.return,e,n)}function sE(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function y8(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ha(t,e,r.children,n),r=Cr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&FP(t,n,e);else if(t.tag===19)FP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fr(Cr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jx(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),sE(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jx(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}sE(e,!0,n,null,a);break;case"together":sE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qu(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ut(153));if(e.child!==null){for(t=e.child,n=rc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function yY(t,e,n){switch(e.tag){case 3:v8(e),jh();break;case 5:Wk(e);break;case 1:Ga(e.type)&&$x(e);break;case 4:lT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fr(Vx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fr(Cr,Cr.current&1),e.flags|=128,null):n&e.child.childLanes?g8(t,e,n):(fr(Cr,Cr.current&1),t=Qu(t,e,n),t!==null?t.sibling:null);fr(Cr,Cr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return y8(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fr(Cr,Cr.current),r)break;return null;case 22:case 23:return e.lanes=0,p8(t,e,n)}return Qu(t,e,n)}var x8,_A,b8,w8;x8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_A=function(){};b8=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,mf(eu.current);var a=null;switch(n){case"input":i=WM(t,i),r=WM(t,r),a=[];break;case"select":i=Pr({},i,{value:void 0}),r=Pr({},r,{value:void 0}),a=[];break;case"textarea":i=XM(t,i),r=XM(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zx)}ZM(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var o=i[l];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Iv.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(o=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==o&&(u!=null||o!=null))if(l==="style")if(o){for(s in o)!o.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&o[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Iv.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&hr("scroll",t),a||o===u||(a=[])):(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}};w8=function(t,e,n,r){n!==r&&(e.flags|=4)};function Am(t,e){if(!wr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xY(t,e,n){var r=e.pendingProps;switch(nT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hi(e),null;case 1:return Ga(e.type)&&kx(),Hi(e),null;case 3:return r=e.stateNode,Yh(),gr(Ha),gr(ra),fT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ty(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,po!==null&&(RA(po),po=null))),_A(t,e),Hi(e),null;case 5:cT(e);var i=mf(Wv.current);if(n=e.type,t!==null&&e.stateNode!=null)b8(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ut(166));return Hi(e),null}if(t=mf(eu.current),Ty(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ko]=e,r[Gv]=a,t=(e.mode&1)!==0,n){case"dialog":hr("cancel",r),hr("close",r);break;case"iframe":case"object":case"embed":hr("load",r);break;case"video":case"audio":for(i=0;i<ev.length;i++)hr(ev[i],r);break;case"source":hr("error",r);break;case"img":case"image":case"link":hr("error",r),hr("load",r);break;case"details":hr("toggle",r);break;case"input":VR(r,a),hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},hr("invalid",r);break;case"textarea":qR(r,a),hr("invalid",r)}ZM(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Cy(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Cy(r.textContent,o,t),i=["children",""+o]):Iv.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&hr("scroll",r)}switch(n){case"input":xy(r),WR(r,a,!0);break;case"textarea":xy(r),jR(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=zx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=X5(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ko]=e,t[Gv]=r,x8(t,e,!1,!1),e.stateNode=t;e:{switch(s=KM(n,r),n){case"dialog":hr("cancel",t),hr("close",t),i=r;break;case"iframe":case"object":case"embed":hr("load",t),i=r;break;case"video":case"audio":for(i=0;i<ev.length;i++)hr(ev[i],t);i=r;break;case"source":hr("error",t),i=r;break;case"img":case"image":case"link":hr("error",t),hr("load",t),i=r;break;case"details":hr("toggle",t),i=r;break;case"input":VR(t,r),i=WM(t,r),hr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pr({},r,{value:void 0}),hr("invalid",t);break;case"textarea":qR(t,r),i=XM(t,r),hr("invalid",t);break;default:i=r}ZM(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?K5(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Y5(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ov(t,u):typeof u=="number"&&Ov(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Iv.hasOwnProperty(a)?u!=null&&a==="onScroll"&&hr("scroll",t):u!=null&&$C(t,a,u,s))}switch(n){case"input":xy(t),WR(t,r,!1);break;case"textarea":xy(t),jR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oc(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Rh(t,!!r.multiple,a,!1):r.defaultValue!=null&&Rh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=zx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hi(e),null;case 6:if(t&&e.stateNode!=null)w8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ut(166));if(n=mf(Wv.current),mf(eu.current),Ty(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ko]=e,(a=r.nodeValue!==n)&&(t=as,t!==null))switch(t.tag){case 3:Cy(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cy(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ko]=e,e.stateNode=r}return Hi(e),null;case 13:if(gr(Cr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wr&&rs!==null&&e.mode&1&&!(e.flags&128))Uk(),jh(),e.flags|=98560,a=!1;else if(a=Ty(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ut(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ut(317));a[Ko]=e}else jh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hi(e),a=!1}else po!==null&&(RA(po),po=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Cr.current&1?ii===0&&(ii=3):_T())),e.updateQueue!==null&&(e.flags|=4),Hi(e),null);case 4:return Yh(),_A(t,e),t===null&&$v(e.stateNode.containerInfo),Hi(e),null;case 10:return sT(e.type._context),Hi(e),null;case 17:return Ga(e.type)&&kx(),Hi(e),null;case 19:if(gr(Cr),a=e.memoizedState,a===null)return Hi(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)Am(a,!1);else{if(ii!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jx(t),s!==null){for(e.flags|=128,Am(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fr(Cr,Cr.current&1|2),e.child}t=t.sibling}a.tail!==null&&Wr()>Kh&&(e.flags|=128,r=!0,Am(a,!1),e.lanes=4194304)}else{if(!r)if(t=jx(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Am(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!wr)return Hi(e),null}else 2*Wr()-a.renderingStartTime>Kh&&n!==1073741824&&(e.flags|=128,r=!0,Am(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Wr(),e.sibling=null,n=Cr.current,fr(Cr,r?n&1|2:n&1),e):(Hi(e),null);case 22:case 23:return ST(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?es&1073741824&&(Hi(e),e.subtreeFlags&6&&(e.flags|=8192)):Hi(e),null;case 24:return null;case 25:return null}throw Error(ut(156,e.tag))}function bY(t,e){switch(nT(e),e.tag){case 1:return Ga(e.type)&&kx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yh(),gr(Ha),gr(ra),fT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cT(e),null;case 13:if(gr(Cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ut(340));jh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gr(Cr),null;case 4:return Yh(),null;case 10:return sT(e.type._context),null;case 22:case 23:return ST(),null;case 24:return null;default:return null}}var Ry=!1,ji=!1,wY=typeof WeakSet=="function"?WeakSet:Set,Et=null;function yh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Br(t,e,r)}else n.current=null}function EA(t,e,n){try{n()}catch(r){Br(t,e,r)}}var LP=!1;function SY(t,e){if(oA=Lx,t=Mk(),eT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,u=-1,l=0,c=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++l===i&&(o=s),d===a&&++c===r&&(u=s),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uA={focusedElem:t,selectionRange:n},Lx=!1,Et=e;Et!==null;)if(e=Et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Et=t;else for(;Et!==null;){e=Et;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,y=m.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:co(e.type,v),y);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ut(163))}}catch(S){Br(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}return m=LP,LP=!1,m}function hv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&EA(e,n,a)}i=i.next}while(i!==r)}}function lw(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function MA(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function S8(t){var e=t.alternate;e!==null&&(t.alternate=null,S8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ko],delete e[Gv],delete e[fA],delete e[iY],delete e[aY])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _8(t){return t.tag===5||t.tag===3||t.tag===4}function BP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zx));else if(r!==4&&(t=t.child,t!==null))for(AA(t,e,n),t=t.sibling;t!==null;)AA(t,e,n),t=t.sibling}function CA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(CA(t,e,n),t=t.sibling;t!==null;)CA(t,e,n),t=t.sibling}var Mi=null,ho=!1;function Sl(t,e,n){for(n=n.child;n!==null;)E8(t,e,n),n=n.sibling}function E8(t,e,n){if(Jo&&typeof Jo.onCommitFiberUnmount=="function")try{Jo.onCommitFiberUnmount(tw,n)}catch{}switch(n.tag){case 5:ji||yh(n,e);case 6:var r=Mi,i=ho;Mi=null,Sl(t,e,n),Mi=r,ho=i,Mi!==null&&(ho?(t=Mi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Mi.removeChild(n.stateNode));break;case 18:Mi!==null&&(ho?(t=Mi,n=n.stateNode,t.nodeType===8?J_(t.parentNode,n):t.nodeType===1&&J_(t,n),Uv(t)):J_(Mi,n.stateNode));break;case 4:r=Mi,i=ho,Mi=n.stateNode.containerInfo,ho=!0,Sl(t,e,n),Mi=r,ho=i;break;case 0:case 11:case 14:case 15:if(!ji&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&EA(n,e,s),i=i.next}while(i!==r)}Sl(t,e,n);break;case 1:if(!ji&&(yh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Br(n,e,o)}Sl(t,e,n);break;case 21:Sl(t,e,n);break;case 22:n.mode&1?(ji=(r=ji)||n.memoizedState!==null,Sl(t,e,n),ji=r):Sl(t,e,n);break;default:Sl(t,e,n)}}function UP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wY),e.forEach(function(r){var i=RY.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ao(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:Mi=o.stateNode,ho=!1;break e;case 3:Mi=o.stateNode.containerInfo,ho=!0;break e;case 4:Mi=o.stateNode.containerInfo,ho=!0;break e}o=o.return}if(Mi===null)throw Error(ut(160));E8(a,s,i),Mi=null,ho=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Br(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)M8(e,t),e=e.sibling}function M8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ao(e,t),qo(t),r&4){try{hv(3,t,t.return),lw(3,t)}catch(v){Br(t,t.return,v)}try{hv(5,t,t.return)}catch(v){Br(t,t.return,v)}}break;case 1:ao(e,t),qo(t),r&512&&n!==null&&yh(n,n.return);break;case 5:if(ao(e,t),qo(t),r&512&&n!==null&&yh(n,n.return),t.flags&32){var i=t.stateNode;try{Ov(i,"")}catch(v){Br(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&q5(i,a),KM(o,s);var l=KM(o,a);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?K5(i,f):c==="dangerouslySetInnerHTML"?Y5(i,f):c==="children"?Ov(i,f):$C(i,c,f,l)}switch(o){case"input":qM(i,a);break;case"textarea":j5(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Rh(i,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?Rh(i,!!a.multiple,a.defaultValue,!0):Rh(i,!!a.multiple,a.multiple?[]:"",!1))}i[Gv]=a}catch(v){Br(t,t.return,v)}}break;case 6:if(ao(e,t),qo(t),r&4){if(t.stateNode===null)throw Error(ut(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){Br(t,t.return,v)}}break;case 3:if(ao(e,t),qo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uv(e.containerInfo)}catch(v){Br(t,t.return,v)}break;case 4:ao(e,t),qo(t);break;case 13:ao(e,t),qo(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bT=Wr())),r&4&&UP(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ji=(l=ji)||c,ao(e,t),ji=l):ao(e,t),qo(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(Et=t,c=t.child;c!==null;){for(f=Et=c;Et!==null;){switch(d=Et,h=d.child,d.tag){case 0:case 11:case 14:case 15:hv(4,d,d.return);break;case 1:yh(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Br(r,n,v)}}break;case 5:yh(d,d.return);break;case 22:if(d.memoizedState!==null){kP(f);continue}}h!==null?(h.return=d,Et=h):kP(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=Z5("display",s))}catch(v){Br(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){Br(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ao(e,t),qo(t),r&4&&UP(t);break;case 21:break;default:ao(e,t),qo(t)}}function qo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_8(n)){var r=n;break e}n=n.return}throw Error(ut(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ov(i,""),r.flags&=-33);var a=BP(t);CA(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=BP(t);AA(t,o,s);break;default:throw Error(ut(161))}}catch(u){Br(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _Y(t,e,n){Et=t,A8(t)}function A8(t,e,n){for(var r=(t.mode&1)!==0;Et!==null;){var i=Et,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ry;if(!s){var o=i.alternate,u=o!==null&&o.memoizedState!==null||ji;o=Ry;var l=ji;if(Ry=s,(ji=u)&&!l)for(Et=i;Et!==null;)s=Et,u=s.child,s.tag===22&&s.memoizedState!==null?$P(i):u!==null?(u.return=s,Et=u):$P(i);for(;a!==null;)Et=a,A8(a),a=a.sibling;Et=i,Ry=o,ji=l}zP(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Et=a):zP(t)}}function zP(t){for(;Et!==null;){var e=Et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ji||lw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ji)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:co(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&SP(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}SP(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Uv(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ut(163))}ji||e.flags&512&&MA(e)}catch(d){Br(e,e.return,d)}}if(e===t){Et=null;break}if(n=e.sibling,n!==null){n.return=e.return,Et=n;break}Et=e.return}}function kP(t){for(;Et!==null;){var e=Et;if(e===t){Et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Et=n;break}Et=e.return}}function $P(t){for(;Et!==null;){var e=Et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lw(4,e)}catch(u){Br(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Br(e,i,u)}}var a=e.return;try{MA(e)}catch(u){Br(e,a,u)}break;case 5:var s=e.return;try{MA(e)}catch(u){Br(e,s,u)}}}catch(u){Br(e,e.return,u)}if(e===t){Et=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Et=o;break}Et=e.return}}var EY=Math.ceil,Zx=sl.ReactCurrentDispatcher,yT=sl.ReactCurrentOwner,Ws=sl.ReactCurrentBatchConfig,Un=0,wi=null,Jr=null,Ti=0,es=0,xh=Sc(0),ii=0,Yv=null,Bf=0,cw=0,xT=0,pv=null,Ba=null,bT=0,Kh=1/0,Ru=null,Kx=!1,TA=null,tc=null,Py=!1,Vl=null,Qx=0,mv=0,DA=null,px=-1,mx=0;function ga(){return Un&6?Wr():px!==-1?px:px=Wr()}function nc(t){return t.mode&1?Un&2&&Ti!==0?Ti&-Ti:oY.transition!==null?(mx===0&&(mx=lk()),mx):(t=er,t!==0||(t=window.event,t=t===void 0?16:vk(t.type)),t):1}function _o(t,e,n,r){if(50<mv)throw mv=0,DA=null,Error(ut(185));kg(t,n,r),(!(Un&2)||t!==wi)&&(t===wi&&(!(Un&2)&&(cw|=n),ii===4&&$l(t,Ti)),Va(t,r),n===1&&Un===0&&!(e.mode&1)&&(Kh=Wr()+500,sw&&_c()))}function Va(t,e){var n=t.callbackNode;oX(t,e);var r=Fx(t,t===wi?Ti:0);if(r===0)n!==null&&ZR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ZR(n),e===1)t.tag===0?sY(HP.bind(null,t)):Fk(HP.bind(null,t)),nY(function(){!(Un&6)&&_c()}),n=null;else{switch(ck(r)){case 1:n=qC;break;case 4:n=ok;break;case 16:n=Ox;break;case 536870912:n=uk;break;default:n=Ox}n=O8(n,C8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C8(t,e){if(px=-1,mx=0,Un&6)throw Error(ut(327));var n=t.callbackNode;if(Lh()&&t.callbackNode!==n)return null;var r=Fx(t,t===wi?Ti:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jx(t,r);else{e=r;var i=Un;Un|=2;var a=D8();(wi!==t||Ti!==e)&&(Ru=null,Kh=Wr()+500,Ef(t,e));do try{CY();break}catch(o){T8(t,o)}while(!0);aT(),Zx.current=a,Un=i,Jr!==null?e=0:(wi=null,Ti=0,e=ii)}if(e!==0){if(e===2&&(i=nA(t),i!==0&&(r=i,e=NA(t,i))),e===1)throw n=Yv,Ef(t,0),$l(t,r),Va(t,Wr()),n;if(e===6)$l(t,r);else{if(i=t.current.alternate,!(r&30)&&!MY(i)&&(e=Jx(t,r),e===2&&(a=nA(t),a!==0&&(r=a,e=NA(t,a))),e===1))throw n=Yv,Ef(t,0),$l(t,r),Va(t,Wr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ut(345));case 2:rf(t,Ba,Ru);break;case 3:if($l(t,r),(r&130023424)===r&&(e=bT+500-Wr(),10<e)){if(Fx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ga(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cA(rf.bind(null,t,Ba,Ru),e);break}rf(t,Ba,Ru);break;case 4:if($l(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-So(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=Wr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EY(r/1960))-r,10<r){t.timeoutHandle=cA(rf.bind(null,t,Ba,Ru),r);break}rf(t,Ba,Ru);break;case 5:rf(t,Ba,Ru);break;default:throw Error(ut(329))}}}return Va(t,Wr()),t.callbackNode===n?C8.bind(null,t):null}function NA(t,e){var n=pv;return t.current.memoizedState.isDehydrated&&(Ef(t,e).flags|=256),t=Jx(t,e),t!==2&&(e=Ba,Ba=n,e!==null&&RA(e)),t}function RA(t){Ba===null?Ba=t:Ba.push.apply(Ba,t)}function MY(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Co(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $l(t,e){for(e&=~xT,e&=~cw,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-So(e),r=1<<n;t[n]=-1,e&=~r}}function HP(t){if(Un&6)throw Error(ut(327));Lh();var e=Fx(t,0);if(!(e&1))return Va(t,Wr()),null;var n=Jx(t,e);if(t.tag!==0&&n===2){var r=nA(t);r!==0&&(e=r,n=NA(t,r))}if(n===1)throw n=Yv,Ef(t,0),$l(t,e),Va(t,Wr()),n;if(n===6)throw Error(ut(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rf(t,Ba,Ru),Va(t,Wr()),null}function wT(t,e){var n=Un;Un|=1;try{return t(e)}finally{Un=n,Un===0&&(Kh=Wr()+500,sw&&_c())}}function Uf(t){Vl!==null&&Vl.tag===0&&!(Un&6)&&Lh();var e=Un;Un|=1;var n=Ws.transition,r=er;try{if(Ws.transition=null,er=1,t)return t()}finally{er=r,Ws.transition=n,Un=e,!(Un&6)&&_c()}}function ST(){es=xh.current,gr(xh)}function Ef(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,tY(n)),Jr!==null)for(n=Jr.return;n!==null;){var r=n;switch(nT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kx();break;case 3:Yh(),gr(Ha),gr(ra),fT();break;case 5:cT(r);break;case 4:Yh();break;case 13:gr(Cr);break;case 19:gr(Cr);break;case 10:sT(r.type._context);break;case 22:case 23:ST()}n=n.return}if(wi=t,Jr=t=rc(t.current,null),Ti=es=e,ii=0,Yv=null,xT=cw=Bf=0,Ba=pv=null,pf!==null){for(e=0;e<pf.length;e++)if(n=pf[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}pf=null}return t}function T8(t,e){do{var n=Jr;try{if(aT(),fx.current=Yx,Xx){for(var r=Rr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xx=!1}if(Lf=0,gi=ti=Rr=null,dv=!1,qv=0,yT.current=null,n===null||n.return===null){ii=1,Yv=e,Jr=null;break}e:{var a=t,s=n.return,o=n,u=e;if(e=Ti,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=o,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=DP(s);if(h!==null){h.flags&=-257,NP(h,s,o,a,e),h.mode&1&&TP(a,l,e),e=h,u=l;var m=e.updateQueue;if(m===null){var v=new Set;v.add(u),e.updateQueue=v}else m.add(u);break e}else{if(!(e&1)){TP(a,l,e),_T();break e}u=Error(ut(426))}}else if(wr&&o.mode&1){var y=DP(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),NP(y,s,o,a,e),rT(Zh(u,o));break e}}a=u=Zh(u,o),ii!==4&&(ii=2),pv===null?pv=[a]:pv.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var p=f8(a,u,e);wP(a,p);break e;case 1:o=u;var x=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(tc===null||!tc.has(g)))){a.flags|=65536,e&=-e,a.lanes|=e;var S=d8(a,o,e);wP(a,S);break e}}a=a.return}while(a!==null)}R8(n)}catch(E){e=E,Jr===n&&n!==null&&(Jr=n=n.return);continue}break}while(!0)}function D8(){var t=Zx.current;return Zx.current=Yx,t===null?Yx:t}function _T(){(ii===0||ii===3||ii===2)&&(ii=4),wi===null||!(Bf&268435455)&&!(cw&268435455)||$l(wi,Ti)}function Jx(t,e){var n=Un;Un|=2;var r=D8();(wi!==t||Ti!==e)&&(Ru=null,Ef(t,e));do try{AY();break}catch(i){T8(t,i)}while(!0);if(aT(),Un=n,Zx.current=r,Jr!==null)throw Error(ut(261));return wi=null,Ti=0,ii}function AY(){for(;Jr!==null;)N8(Jr)}function CY(){for(;Jr!==null&&!Qj();)N8(Jr)}function N8(t){var e=I8(t.alternate,t,es);t.memoizedProps=t.pendingProps,e===null?R8(t):Jr=e,yT.current=null}function R8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bY(n,e),n!==null){n.flags&=32767,Jr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ii=6,Jr=null;return}}else if(n=xY(n,e,es),n!==null){Jr=n;return}if(e=e.sibling,e!==null){Jr=e;return}Jr=e=t}while(e!==null);ii===0&&(ii=5)}function rf(t,e,n){var r=er,i=Ws.transition;try{Ws.transition=null,er=1,TY(t,e,n,r)}finally{Ws.transition=i,er=r}return null}function TY(t,e,n,r){do Lh();while(Vl!==null);if(Un&6)throw Error(ut(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ut(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(uX(t,a),t===wi&&(Jr=wi=null,Ti=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Py||(Py=!0,O8(Ox,function(){return Lh(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ws.transition,Ws.transition=null;var s=er;er=1;var o=Un;Un|=4,yT.current=null,SY(t,n),M8(n,t),XX(uA),Lx=!!oA,uA=oA=null,t.current=n,_Y(n),Jj(),Un=o,er=s,Ws.transition=a}else t.current=n;if(Py&&(Py=!1,Vl=t,Qx=i),a=t.pendingLanes,a===0&&(tc=null),nX(n.stateNode),Va(t,Wr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kx)throw Kx=!1,t=TA,TA=null,t;return Qx&1&&t.tag!==0&&Lh(),a=t.pendingLanes,a&1?t===DA?mv++:(mv=0,DA=t):mv=0,_c(),null}function Lh(){if(Vl!==null){var t=ck(Qx),e=Ws.transition,n=er;try{if(Ws.transition=null,er=16>t?16:t,Vl===null)var r=!1;else{if(t=Vl,Vl=null,Qx=0,Un&6)throw Error(ut(331));var i=Un;for(Un|=4,Et=t.current;Et!==null;){var a=Et,s=a.child;if(Et.flags&16){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var l=o[u];for(Et=l;Et!==null;){var c=Et;switch(c.tag){case 0:case 11:case 15:hv(8,c,a)}var f=c.child;if(f!==null)f.return=c,Et=f;else for(;Et!==null;){c=Et;var d=c.sibling,h=c.return;if(S8(c),c===l){Et=null;break}if(d!==null){d.return=h,Et=d;break}Et=h}}}var m=a.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}Et=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Et=s;else e:for(;Et!==null;){if(a=Et,a.flags&2048)switch(a.tag){case 0:case 11:case 15:hv(9,a,a.return)}var p=a.sibling;if(p!==null){p.return=a.return,Et=p;break e}Et=a.return}}var x=t.current;for(Et=x;Et!==null;){s=Et;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,Et=g;else e:for(s=x;Et!==null;){if(o=Et,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:lw(9,o)}}catch(E){Br(o,o.return,E)}if(o===s){Et=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Et=S;break e}Et=o.return}}if(Un=i,_c(),Jo&&typeof Jo.onPostCommitFiberRoot=="function")try{Jo.onPostCommitFiberRoot(tw,t)}catch{}r=!0}return r}finally{er=n,Ws.transition=e}}return!1}function GP(t,e,n){e=Zh(n,e),e=f8(t,e,1),t=ec(t,e,1),e=ga(),t!==null&&(kg(t,1,e),Va(t,e))}function Br(t,e,n){if(t.tag===3)GP(t,t,n);else for(;e!==null;){if(e.tag===3){GP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tc===null||!tc.has(r))){t=Zh(n,t),t=d8(e,t,1),e=ec(e,t,1),t=ga(),e!==null&&(kg(e,1,t),Va(e,t));break}}e=e.return}}function DY(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ga(),t.pingedLanes|=t.suspendedLanes&n,wi===t&&(Ti&n)===n&&(ii===4||ii===3&&(Ti&130023424)===Ti&&500>Wr()-bT?Ef(t,0):xT|=n),Va(t,e)}function P8(t,e){e===0&&(t.mode&1?(e=Sy,Sy<<=1,!(Sy&130023424)&&(Sy=4194304)):e=1);var n=ga();t=Ku(t,e),t!==null&&(kg(t,e,n),Va(t,n))}function NY(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),P8(t,n)}function RY(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ut(314))}r!==null&&r.delete(e),P8(t,n)}var I8;I8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ha.current)ka=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ka=!1,yY(t,e,n);ka=!!(t.flags&131072)}else ka=!1,wr&&e.flags&1048576&&Lk(e,Gx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hx(t,e),t=e.pendingProps;var i=qh(e,ra.current);Fh(e,n),i=hT(null,e,r,t,i,n);var a=pT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ga(r)?(a=!0,$x(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uT(e),i.updater=ow,e.stateNode=i,i._reactInternals=e,gA(e,r,t,n),e=bA(null,e,r,!0,a,n)):(e.tag=0,wr&&a&&tT(e),ha(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hx(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IY(r),t=co(r,t),i){case 0:e=xA(null,e,r,t,n);break e;case 1:e=IP(null,e,r,t,n);break e;case 11:e=RP(null,e,r,t,n);break e;case 14:e=PP(null,e,r,co(r.type,t),n);break e}throw Error(ut(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),xA(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),IP(t,e,r,i,n);case 3:e:{if(v8(e),t===null)throw Error(ut(387));r=e.pendingProps,a=e.memoizedState,i=a.element,kk(t,e),qx(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Zh(Error(ut(423)),e),e=OP(t,e,r,n,i);break e}else if(r!==i){i=Zh(Error(ut(424)),e),e=OP(t,e,r,n,i);break e}else for(rs=Jl(e.stateNode.containerInfo.firstChild),as=e,wr=!0,po=null,n=Vk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jh(),r===i){e=Qu(t,e,n);break e}ha(t,e,r,n)}e=e.child}return e;case 5:return Wk(e),t===null&&pA(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,lA(r,i)?s=null:a!==null&&lA(r,a)&&(e.flags|=32),m8(t,e),ha(t,e,s,n),e.child;case 6:return t===null&&pA(e),null;case 13:return g8(t,e,n);case 4:return lT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xh(e,null,r,n):ha(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),RP(t,e,r,i,n);case 7:return ha(t,e,e.pendingProps,n),e.child;case 8:return ha(t,e,e.pendingProps.children,n),e.child;case 12:return ha(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,fr(Vx,r._currentValue),r._currentValue=s,a!==null)if(Co(a.value,s)){if(a.children===i.children&&!Ha.current){e=Qu(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Vu(-1,n&-n),u.tag=2;var l=a.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),mA(a.return,n,e),o.lanes|=n;break}u=u.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ut(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),mA(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}ha(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fh(e,n),i=js(i),r=r(i),e.flags|=1,ha(t,e,r,n),e.child;case 14:return r=e.type,i=co(r,e.pendingProps),i=co(r.type,i),PP(t,e,r,i,n);case 15:return h8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),hx(t,e),e.tag=1,Ga(r)?(t=!0,$x(e)):t=!1,Fh(e,n),Hk(e,r,i),gA(e,r,i,n),bA(null,e,r,!0,t,n);case 19:return y8(t,e,n);case 22:return p8(t,e,n)}throw Error(ut(156,e.tag))};function O8(t,e){return sk(t,e)}function PY(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(t,e,n,r){return new PY(t,e,n,r)}function ET(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IY(t){if(typeof t=="function")return ET(t)?1:0;if(t!=null){if(t=t.$$typeof,t===GC)return 11;if(t===VC)return 14}return 2}function rc(t,e){var n=t.alternate;return n===null?(n=Gs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vx(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")ET(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case lh:return Mf(n.children,i,a,e);case HC:s=8,i|=8;break;case $M:return t=Gs(12,n,e,i|2),t.elementType=$M,t.lanes=a,t;case HM:return t=Gs(13,n,e,i),t.elementType=HM,t.lanes=a,t;case GM:return t=Gs(19,n,e,i),t.elementType=GM,t.lanes=a,t;case G5:return fw(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $5:s=10;break e;case H5:s=9;break e;case GC:s=11;break e;case VC:s=14;break e;case Ll:s=16,r=null;break e}throw Error(ut(130,t==null?t:typeof t,""))}return e=Gs(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Mf(t,e,n,r){return t=Gs(7,t,r,e),t.lanes=n,t}function fw(t,e,n,r){return t=Gs(22,t,r,e),t.elementType=G5,t.lanes=n,t.stateNode={isHidden:!1},t}function oE(t,e,n){return t=Gs(6,t,null,e),t.lanes=n,t}function uE(t,e,n){return e=Gs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OY(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H_(0),this.expirationTimes=H_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function MT(t,e,n,r,i,a,s,o,u){return t=new OY(t,e,n,o,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Gs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uT(a),t}function FY(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function F8(t){if(!t)return uc;t=t._reactInternals;e:{if(Zf(t)!==t||t.tag!==1)throw Error(ut(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ga(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ut(171))}if(t.tag===1){var n=t.type;if(Ga(n))return Ok(t,n,e)}return e}function L8(t,e,n,r,i,a,s,o,u){return t=MT(n,r,!0,t,i,a,s,o,u),t.context=F8(null),n=t.current,r=ga(),i=nc(n),a=Vu(r,i),a.callback=e??null,ec(n,a,i),t.current.lanes=i,kg(t,i,r),Va(t,r),t}function dw(t,e,n,r){var i=e.current,a=ga(),s=nc(i);return n=F8(n),e.context===null?e.context=n:e.pendingContext=n,e=Vu(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ec(i,e,s),t!==null&&(_o(t,i,s,a),cx(t,i,s)),s}function eb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function VP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function AT(t,e){VP(t,e),(t=t.alternate)&&VP(t,e)}function LY(){return null}var B8=typeof reportError=="function"?reportError:function(t){console.error(t)};function CT(t){this._internalRoot=t}hw.prototype.render=CT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ut(409));dw(t,e,null,null)};hw.prototype.unmount=CT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Uf(function(){dw(null,t,null,null)}),e[Zu]=null}};function hw(t){this._internalRoot=t}hw.prototype.unstable_scheduleHydration=function(t){if(t){var e=hk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kl.length&&e!==0&&e<kl[n].priority;n++);kl.splice(n,0,t),n===0&&mk(t)}};function TT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function WP(){}function BY(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var l=eb(s);a.call(l)}}var s=L8(e,r,t,0,null,!1,!1,"",WP);return t._reactRootContainer=s,t[Zu]=s.current,$v(t.nodeType===8?t.parentNode:t),Uf(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var l=eb(u);o.call(l)}}var u=MT(t,0,!1,null,null,!1,!1,"",WP);return t._reactRootContainer=u,t[Zu]=u.current,$v(t.nodeType===8?t.parentNode:t),Uf(function(){dw(e,u,n,r)}),u}function mw(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var u=eb(s);o.call(u)}}dw(e,s,t,i)}else s=BY(n,e,t,i,r);return eb(s)}fk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jm(e.pendingLanes);n!==0&&(jC(e,n|1),Va(e,Wr()),!(Un&6)&&(Kh=Wr()+500,_c()))}break;case 13:Uf(function(){var r=Ku(t,1);if(r!==null){var i=ga();_o(r,t,1,i)}}),AT(t,1)}};XC=function(t){if(t.tag===13){var e=Ku(t,134217728);if(e!==null){var n=ga();_o(e,t,134217728,n)}AT(t,134217728)}};dk=function(t){if(t.tag===13){var e=nc(t),n=Ku(t,e);if(n!==null){var r=ga();_o(n,t,e,r)}AT(t,e)}};hk=function(){return er};pk=function(t,e){var n=er;try{return er=t,e()}finally{er=n}};JM=function(t,e,n){switch(e){case"input":if(qM(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=aw(r);if(!i)throw Error(ut(90));W5(r),qM(r,i)}}}break;case"textarea":j5(t,n);break;case"select":e=n.value,e!=null&&Rh(t,!!n.multiple,e,!1)}};ek=wT;tk=Uf;var UY={usingClientEntryPoint:!1,Events:[Hg,hh,aw,Q5,J5,wT]},Cm={findFiberByHostInstance:hf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},zY={bundleType:Cm.bundleType,version:Cm.version,rendererPackageName:Cm.rendererPackageName,rendererConfig:Cm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ik(t),t===null?null:t.stateNode},findFiberByHostInstance:Cm.findFiberByHostInstance||LY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iy.isDisabled&&Iy.supportsFiber)try{tw=Iy.inject(zY),Jo=Iy}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UY;ms.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TT(e))throw Error(ut(200));return FY(t,e,null,n)};ms.createRoot=function(t,e){if(!TT(t))throw Error(ut(299));var n=!1,r="",i=B8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=MT(t,1,!1,null,null,n,!1,r,i),t[Zu]=e.current,$v(t.nodeType===8?t.parentNode:t),new CT(e)};ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ut(188)):(t=Object.keys(t).join(","),Error(ut(268,t)));return t=ik(e),t=t===null?null:t.stateNode,t};ms.flushSync=function(t){return Uf(t)};ms.hydrate=function(t,e,n){if(!pw(e))throw Error(ut(200));return mw(null,t,e,!0,n)};ms.hydrateRoot=function(t,e,n){if(!TT(t))throw Error(ut(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=B8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=L8(e,null,t,1,n??null,i,!1,a,s),t[Zu]=e.current,$v(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new hw(e)};ms.render=function(t,e,n){if(!pw(e))throw Error(ut(200));return mw(null,t,e,!1,n)};ms.unmountComponentAtNode=function(t){if(!pw(t))throw Error(ut(40));return t._reactRootContainer?(Uf(function(){mw(null,null,t,!1,function(){t._reactRootContainer=null,t[Zu]=null})}),!0):!1};ms.unstable_batchedUpdates=wT;ms.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pw(n))throw Error(ut(200));if(t==null||t._reactInternals===void 0)throw Error(ut(38));return mw(t,e,n,!1,r)};ms.version="18.2.0-next-9e3b772b8-20220608";function U8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(U8)}catch(t){console.error(t)}}U8(),L5.exports=ms;var _p=L5.exports;const z8=Qs(_p);var qP=_p;zM.createRoot=qP.createRoot,zM.hydrateRoot=qP.hydrateRoot;function hn(){return hn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hn.apply(this,arguments)}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ol="160",af={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sf={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},k8=0,PA=1,$8=2,kY=3,H8=0,vw=1,vv=2,fo=3,ss=0,ai=1,ri=2,$Y=2,ea=0,Af=1,IA=2,OA=3,FA=4,G8=5,Hl=100,V8=101,W8=102,LA=103,BA=104,q8=200,j8=201,X8=202,Y8=203,tb=204,nb=205,Z8=206,K8=207,Q8=208,J8=209,e6=210,t6=211,n6=212,r6=213,i6=214,a6=0,s6=1,o6=2,Zv=3,u6=4,l6=5,c6=6,f6=7,Vg=0,d6=1,h6=2,Eo=0,p6=1,m6=2,v6=3,DT=4,g6=5,y6=6,UA="attached",x6="detached",gw=300,ru=301,lc=302,Qh=303,Kv=304,Ep=306,Qv=1e3,Yi=1001,Jv=1002,mr=1003,rb=1004,HY=1004,gv=1005,GY=1005,Qn=1006,NT=1007,VY=1007,cc=1008,WY=1008,Di=1009,b6=1010,w6=1011,yw=1012,RT=1013,Qo=1014,xi=1015,Ki=1016,PT=1017,IT=1018,Wu=1020,S6=1021,Zi=1023,_6=1024,E6=1025,ic=1026,fc=1027,OT=1028,FT=1029,M6=1030,LT=1031,BT=1033,gx=33776,yx=33777,xx=33778,bx=33779,zA=35840,kA=35841,$A=35842,HA=35843,UT=36196,GA=37492,VA=37496,WA=37808,qA=37809,jA=37810,XA=37811,YA=37812,ZA=37813,KA=37814,QA=37815,JA=37816,e2=37817,t2=37818,n2=37819,r2=37820,i2=37821,wx=36492,a2=36494,s2=36495,A6=36283,o2=36284,u2=36285,l2=36286,C6=2200,T6=2201,D6=2202,eg=2300,tg=2301,Sx=2302,vf=2400,gf=2401,ng=2402,xw=2500,zT=2501,qY=0,jY=1,XY=2,kT=3e3,ac=3001,Ec=3200,N6=3201,Mc=0,R6=1,ma="",Nn="srgb",Ys="srgb-linear",bw="display-p3",Wg="display-p3-linear",rg="linear",cr="srgb",ig="rec709",ag="p3",YY=0,of=7680,ZY=7681,KY=7682,QY=7683,JY=34055,eZ=34056,tZ=5386,nZ=512,rZ=513,iZ=514,aZ=515,sZ=516,oZ=517,uZ=518,c2=519,P6=512,I6=513,O6=514,$T=515,F6=516,L6=517,B6=518,U6=519,sg=35044,lZ=35048,cZ=35040,fZ=35045,dZ=35049,hZ=35041,pZ=35046,mZ=35050,vZ=35042,gZ="100",f2="300 es",ib=1035,xo=2e3,Jh=2001;class gs{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const Gi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let jP=1234567;const Cf=Math.PI/180,ep=180/Math.PI;function os(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Gi[t&255]+Gi[t>>8&255]+Gi[t>>16&255]+Gi[t>>24&255]+"-"+Gi[e&255]+Gi[e>>8&255]+"-"+Gi[e>>16&15|64]+Gi[e>>24&255]+"-"+Gi[n&63|128]+Gi[n>>8&255]+"-"+Gi[n>>16&255]+Gi[n>>24&255]+Gi[r&255]+Gi[r>>8&255]+Gi[r>>16&255]+Gi[r>>24&255]).toLowerCase()}function Ur(t,e,n){return Math.max(e,Math.min(n,t))}function HT(t,e){return(t%e+e)%e}function yZ(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function xZ(t,e,n){return t!==e?(n-t)/(e-t):0}function yv(t,e,n){return(1-n)*t+n*e}function bZ(t,e,n,r){return yv(t,e,1-Math.exp(-n*r))}function wZ(t,e=1){return e-Math.abs(HT(t,e*2)-e)}function SZ(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function _Z(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function EZ(t,e){return t+Math.floor(Math.random()*(e-t+1))}function MZ(t,e){return t+Math.random()*(e-t)}function AZ(t){return t*(.5-Math.random())}function CZ(t){t!==void 0&&(jP=t);let e=jP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function TZ(t){return t*Cf}function DZ(t){return t*ep}function d2(t){return(t&t-1)===0&&t!==0}function NZ(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ab(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function RZ(t,e,n,r,i){const a=Math.cos,s=Math.sin,o=a(n/2),u=s(n/2),l=a((e+r)/2),c=s((e+r)/2),f=a((e-r)/2),d=s((e-r)/2),h=a((r-e)/2),m=s((r-e)/2);switch(i){case"XYX":t.set(o*c,u*f,u*d,o*l);break;case"YZY":t.set(u*d,o*c,u*f,o*l);break;case"ZXZ":t.set(u*f,u*d,o*c,o*l);break;case"XZX":t.set(o*c,u*m,u*h,o*l);break;case"YXY":t.set(u*h,o*c,u*m,o*l);break;case"ZYZ":t.set(u*m,u*h,o*c,o*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function za(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function fn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const sb={DEG2RAD:Cf,RAD2DEG:ep,generateUUID:os,clamp:Ur,euclideanModulo:HT,mapLinear:yZ,inverseLerp:xZ,lerp:yv,damp:bZ,pingpong:wZ,smoothstep:SZ,smootherstep:_Z,randInt:EZ,randFloat:MZ,randFloatSpread:AZ,seededRandom:CZ,degToRad:TZ,radToDeg:DZ,isPowerOfTwo:d2,ceilPowerOfTwo:NZ,floorPowerOfTwo:ab,setQuaternionFromProperEuler:RZ,normalize:fn,denormalize:za};class qe{constructor(e=0,n=0){qe.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ur(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class vn{constructor(e,n,r,i,a,s,o,u,l){vn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,u,l)}set(e,n,r,i,a,s,o,u,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=n,c[4]=a,c[5]=u,c[6]=r,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[3],u=r[6],l=r[1],c=r[4],f=r[7],d=r[2],h=r[5],m=r[8],v=i[0],y=i[3],p=i[6],x=i[1],g=i[4],S=i[7],E=i[2],_=i[5],A=i[8];return a[0]=s*v+o*x+u*E,a[3]=s*y+o*g+u*_,a[6]=s*p+o*S+u*A,a[1]=l*v+c*x+f*E,a[4]=l*y+c*g+f*_,a[7]=l*p+c*S+f*A,a[2]=d*v+h*x+m*E,a[5]=d*y+h*g+m*_,a[8]=d*p+h*S+m*A,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8];return n*s*c-n*o*l-r*a*c+r*o*u+i*a*l-i*s*u}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],f=c*s-o*l,d=o*u-c*a,h=l*a-s*u,m=n*f+r*d+i*h;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/m;return e[0]=f*v,e[1]=(i*l-c*r)*v,e[2]=(o*r-i*s)*v,e[3]=d*v,e[4]=(c*n-i*u)*v,e[5]=(i*a-o*n)*v,e[6]=h*v,e[7]=(r*u-l*n)*v,e[8]=(s*n-r*a)*v,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,a,s,o){const u=Math.cos(a),l=Math.sin(a);return this.set(r*u,r*l,-r*(u*s+l*o)+s+e,-i*l,i*u,-i*(-l*s+u*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(lE.makeScale(e,n)),this}rotate(e){return this.premultiply(lE.makeRotation(-e)),this}translate(e,n){return this.premultiply(lE.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const lE=new vn;function z6(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const PZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bh(t,e){return new PZ[t](e)}function og(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function k6(){const t=og("canvas");return t.style.display="block",t}const XP={};function xv(t){t in XP||(XP[t]=!0,console.warn(t))}const YP=new vn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ZP=new vn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Oy={[Ys]:{transfer:rg,primaries:ig,toReference:t=>t,fromReference:t=>t},[Nn]:{transfer:cr,primaries:ig,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Wg]:{transfer:rg,primaries:ag,toReference:t=>t.applyMatrix3(ZP),fromReference:t=>t.applyMatrix3(YP)},[bw]:{transfer:cr,primaries:ag,toReference:t=>t.convertSRGBToLinear().applyMatrix3(ZP),fromReference:t=>t.applyMatrix3(YP).convertLinearToSRGB()}},IZ=new Set([Ys,Wg]),Yn={enabled:!0,_workingColorSpace:Ys,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!IZ.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=Oy[e].toReference,i=Oy[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Oy[t].primaries},getTransfer:function(t){return t===ma?rg:Oy[t].transfer}};function Bh(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function cE(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Nd;class GT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Nd===void 0&&(Nd=og("canvas")),Nd.width=e.width,Nd.height=e.height;const r=Nd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Nd}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=og("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Bh(a[s]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Bh(n[r]/255)*255):n[r]=Bh(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let OZ=0;class yf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:OZ++}),this.uuid=os(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(fE(i[s].image)):a.push(fE(i[s]))}else a=fE(i);r.url=a}return n||(e.images[this.uuid]=r),r}}function fE(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?GT.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let FZ=0;class yr extends gs{constructor(e=yr.DEFAULT_IMAGE,n=yr.DEFAULT_MAPPING,r=Yi,i=Yi,a=Qn,s=cc,o=Zi,u=Di,l=yr.DEFAULT_ANISOTROPY,c=ma){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:FZ++}),this.uuid=os(),this.name="",this.source=new yf(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=u,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(xv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===ac?Nn:ma),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==gw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qv:e.x=e.x-Math.floor(e.x);break;case Yi:e.x=e.x<0?0:1;break;case Jv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qv:e.y=e.y-Math.floor(e.y);break;case Yi:e.y=e.y<0?0:1;break;case Jv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return xv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Nn?ac:kT}set encoding(e){xv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ac?Nn:ma}}yr.DEFAULT_IMAGE=null;yr.DEFAULT_MAPPING=gw;yr.DEFAULT_ANISOTROPY=1;class Wn{constructor(e=0,n=0,r=0,i=1){Wn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,a;const u=e.elements,l=u[0],c=u[4],f=u[8],d=u[1],h=u[5],m=u[9],v=u[2],y=u[6],p=u[10];if(Math.abs(c-d)<.01&&Math.abs(f-v)<.01&&Math.abs(m-y)<.01){if(Math.abs(c+d)<.1&&Math.abs(f+v)<.1&&Math.abs(m+y)<.1&&Math.abs(l+h+p-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const g=(l+1)/2,S=(h+1)/2,E=(p+1)/2,_=(c+d)/4,A=(f+v)/4,T=(m+y)/4;return g>S&&g>E?g<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(g),i=_/r,a=A/r):S>E?S<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(S),r=_/i,a=T/i):E<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(E),r=A/a,i=T/a),this.set(r,i,a,n),this}let x=Math.sqrt((y-m)*(y-m)+(f-v)*(f-v)+(d-c)*(d-c));return Math.abs(x)<.001&&(x=1),this.x=(y-m)/x,this.y=(f-v)/x,this.z=(d-c)/x,this.w=Math.acos((l+h+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $6 extends gs{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Wn(0,0,e,n),this.scissorTest=!1,this.viewport=new Wn(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(xv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===ac?Nn:ma),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Qn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new yr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new yf(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jr extends $6{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class ww extends yr{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=Yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LZ extends jr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ww(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class VT extends yr{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=Yi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class BZ extends jr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new VT(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class UZ extends jr{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const a=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=a.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Ni{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,a,s,o){let u=r[i+0],l=r[i+1],c=r[i+2],f=r[i+3];const d=a[s+0],h=a[s+1],m=a[s+2],v=a[s+3];if(o===0){e[n+0]=u,e[n+1]=l,e[n+2]=c,e[n+3]=f;return}if(o===1){e[n+0]=d,e[n+1]=h,e[n+2]=m,e[n+3]=v;return}if(f!==v||u!==d||l!==h||c!==m){let y=1-o;const p=u*d+l*h+c*m+f*v,x=p>=0?1:-1,g=1-p*p;if(g>Number.EPSILON){const E=Math.sqrt(g),_=Math.atan2(E,p*x);y=Math.sin(y*_)/E,o=Math.sin(o*_)/E}const S=o*x;if(u=u*y+d*S,l=l*y+h*S,c=c*y+m*S,f=f*y+v*S,y===1-o){const E=1/Math.sqrt(u*u+l*l+c*c+f*f);u*=E,l*=E,c*=E,f*=E}}e[n]=u,e[n+1]=l,e[n+2]=c,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,a,s){const o=r[i],u=r[i+1],l=r[i+2],c=r[i+3],f=a[s],d=a[s+1],h=a[s+2],m=a[s+3];return e[n]=o*m+c*f+u*h-l*d,e[n+1]=u*m+c*d+l*f-o*h,e[n+2]=l*m+c*h+o*d-u*f,e[n+3]=c*m-o*f-u*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,u=Math.sin,l=o(r/2),c=o(i/2),f=o(a/2),d=u(r/2),h=u(i/2),m=u(a/2);switch(s){case"XYZ":this._x=d*c*f+l*h*m,this._y=l*h*f-d*c*m,this._z=l*c*m+d*h*f,this._w=l*c*f-d*h*m;break;case"YXZ":this._x=d*c*f+l*h*m,this._y=l*h*f-d*c*m,this._z=l*c*m-d*h*f,this._w=l*c*f+d*h*m;break;case"ZXY":this._x=d*c*f-l*h*m,this._y=l*h*f+d*c*m,this._z=l*c*m+d*h*f,this._w=l*c*f-d*h*m;break;case"ZYX":this._x=d*c*f-l*h*m,this._y=l*h*f+d*c*m,this._z=l*c*m-d*h*f,this._w=l*c*f+d*h*m;break;case"YZX":this._x=d*c*f+l*h*m,this._y=l*h*f+d*c*m,this._z=l*c*m-d*h*f,this._w=l*c*f-d*h*m;break;case"XZY":this._x=d*c*f-l*h*m,this._y=l*h*f-d*c*m,this._z=l*c*m+d*h*f,this._w=l*c*f+d*h*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],a=n[8],s=n[1],o=n[5],u=n[9],l=n[2],c=n[6],f=n[10],d=r+o+f;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-u)*h,this._y=(a-l)*h,this._z=(s-i)*h}else if(r>o&&r>f){const h=2*Math.sqrt(1+r-o-f);this._w=(c-u)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(a+l)/h}else if(o>f){const h=2*Math.sqrt(1+o-r-f);this._w=(a-l)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(u+c)/h}else{const h=2*Math.sqrt(1+f-r-o);this._w=(s-i)/h,this._x=(a+l)/h,this._y=(u+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ur(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,a=e._z,s=e._w,o=n._x,u=n._y,l=n._z,c=n._w;return this._x=r*c+s*o+i*l-a*u,this._y=i*c+s*u+a*o-r*l,this._z=a*c+s*l+r*u-i*o,this._w=s*c-r*o-i*u-a*l,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const u=1-o*o;if(u<=Number.EPSILON){const h=1-n;return this._w=h*s+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*a+n*this._z,this.normalize(),this}const l=Math.sqrt(u),c=Math.atan2(l,o),f=Math.sin((1-n)*c)/l,d=Math.sin(n*c)/l;return this._w=s*f+this._w*d,this._x=r*f+this._x*d,this._y=i*f+this._y*d,this._z=a*f+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(a),r*Math.cos(a),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class fe{constructor(e=0,n=0,r=0){fe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(KP.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(KP.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,u=e.w,l=2*(s*i-o*r),c=2*(o*n-a*i),f=2*(a*r-s*n);return this.x=n+u*l+s*f-o*c,this.y=r+u*c+o*l-a*f,this.z=i+u*f+a*c-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,a=e.z,s=n.x,o=n.y,u=n.z;return this.x=i*u-a*o,this.y=a*s-r*u,this.z=r*o-i*s,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return dE.copy(this).projectOnVector(e),this.sub(dE)}reflect(e){return this.sub(dE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ur(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const dE=new fe,KP=new Ni;class ya{constructor(e=new fe(1/0,1/0,1/0),n=new fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(so.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(so.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=so.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,so):so.fromBufferAttribute(a,s),so.applyMatrix4(e.matrixWorld),this.expandByPoint(so);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Fy.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Fy.copy(r.boundingBox)),Fy.applyMatrix4(e.matrixWorld),this.union(Fy)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,so),so.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Tm),Ly.subVectors(this.max,Tm),Rd.subVectors(e.a,Tm),Pd.subVectors(e.b,Tm),Id.subVectors(e.c,Tm),_l.subVectors(Pd,Rd),El.subVectors(Id,Pd),qc.subVectors(Rd,Id);let n=[0,-_l.z,_l.y,0,-El.z,El.y,0,-qc.z,qc.y,_l.z,0,-_l.x,El.z,0,-El.x,qc.z,0,-qc.x,-_l.y,_l.x,0,-El.y,El.x,0,-qc.y,qc.x,0];return!hE(n,Rd,Pd,Id,Ly)||(n=[1,0,0,0,1,0,0,0,1],!hE(n,Rd,Pd,Id,Ly))?!1:(By.crossVectors(_l,El),n=[By.x,By.y,By.z],hE(n,Rd,Pd,Id,Ly))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,so).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(so).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Su[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Su[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Su[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Su[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Su[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Su[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Su[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Su[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Su),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Su=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],so=new fe,Fy=new ya,Rd=new fe,Pd=new fe,Id=new fe,_l=new fe,El=new fe,qc=new fe,Tm=new fe,Ly=new fe,By=new fe,jc=new fe;function hE(t,e,n,r,i){for(let a=0,s=t.length-3;a<=s;a+=3){jc.fromArray(t,a);const o=i.x*Math.abs(jc.x)+i.y*Math.abs(jc.y)+i.z*Math.abs(jc.z),u=e.dot(jc),l=n.dot(jc),c=r.dot(jc);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>o)return!1}return!0}const zZ=new ya,Dm=new fe,pE=new fe;class ta{constructor(e=new fe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):zZ.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Dm.subVectors(e,this.center);const n=Dm.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Dm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Dm.copy(e.center).add(pE)),this.expandByPoint(Dm.copy(e.center).sub(pE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _u=new fe,mE=new fe,Uy=new fe,Ml=new fe,vE=new fe,zy=new fe,gE=new fe;class Kf{constructor(e=new fe,n=new fe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_u)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=_u.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(_u.copy(this.origin).addScaledVector(this.direction,n),_u.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){mE.copy(e).add(n).multiplyScalar(.5),Uy.copy(n).sub(e).normalize(),Ml.copy(this.origin).sub(mE);const a=e.distanceTo(n)*.5,s=-this.direction.dot(Uy),o=Ml.dot(this.direction),u=-Ml.dot(Uy),l=Ml.lengthSq(),c=Math.abs(1-s*s);let f,d,h,m;if(c>0)if(f=s*u-o,d=s*o-u,m=a*c,f>=0)if(d>=-m)if(d<=m){const v=1/c;f*=v,d*=v,h=f*(f+s*d+2*o)+d*(s*f+d+2*u)+l}else d=a,f=Math.max(0,-(s*d+o)),h=-f*f+d*(d+2*u)+l;else d=-a,f=Math.max(0,-(s*d+o)),h=-f*f+d*(d+2*u)+l;else d<=-m?(f=Math.max(0,-(-s*a+o)),d=f>0?-a:Math.min(Math.max(-a,-u),a),h=-f*f+d*(d+2*u)+l):d<=m?(f=0,d=Math.min(Math.max(-a,-u),a),h=d*(d+2*u)+l):(f=Math.max(0,-(s*a+o)),d=f>0?a:Math.min(Math.max(-a,-u),a),h=-f*f+d*(d+2*u)+l);else d=s>0?-a:a,f=Math.max(0,-(s*d+o)),h=-f*f+d*(d+2*u)+l;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(mE).addScaledVector(Uy,d),h}intersectSphere(e,n){_u.subVectors(e.center,this.origin);const r=_u.dot(this.direction),i=_u.dot(_u)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,u=r+s;return u<0?null:o<0?this.at(u,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,a,s,o,u;const l=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,d=this.origin;return l>=0?(r=(e.min.x-d.x)*l,i=(e.max.x-d.x)*l):(r=(e.max.x-d.x)*l,i=(e.min.x-d.x)*l),c>=0?(a=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),f>=0?(o=(e.min.z-d.z)*f,u=(e.max.z-d.z)*f):(o=(e.max.z-d.z)*f,u=(e.min.z-d.z)*f),r>u||o>i)||((o>r||r!==r)&&(r=o),(u<i||i!==i)&&(i=u),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,_u)!==null}intersectTriangle(e,n,r,i,a){vE.subVectors(n,e),zy.subVectors(r,e),gE.crossVectors(vE,zy);let s=this.direction.dot(gE),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Ml.subVectors(this.origin,e);const u=o*this.direction.dot(zy.crossVectors(Ml,zy));if(u<0)return null;const l=o*this.direction.dot(vE.cross(Ml));if(l<0||u+l>s)return null;const c=-o*Ml.dot(gE);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ht{constructor(e,n,r,i,a,s,o,u,l,c,f,d,h,m,v,y){Ht.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,a,s,o,u,l,c,f,d,h,m,v,y)}set(e,n,r,i,a,s,o,u,l,c,f,d,h,m,v,y){const p=this.elements;return p[0]=e,p[4]=n,p[8]=r,p[12]=i,p[1]=a,p[5]=s,p[9]=o,p[13]=u,p[2]=l,p[6]=c,p[10]=f,p[14]=d,p[3]=h,p[7]=m,p[11]=v,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ht().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Od.setFromMatrixColumn(e,0).length(),a=1/Od.setFromMatrixColumn(e,1).length(),s=1/Od.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),u=Math.cos(i),l=Math.sin(i),c=Math.cos(a),f=Math.sin(a);if(e.order==="XYZ"){const d=s*c,h=s*f,m=o*c,v=o*f;n[0]=u*c,n[4]=-u*f,n[8]=l,n[1]=h+m*l,n[5]=d-v*l,n[9]=-o*u,n[2]=v-d*l,n[6]=m+h*l,n[10]=s*u}else if(e.order==="YXZ"){const d=u*c,h=u*f,m=l*c,v=l*f;n[0]=d+v*o,n[4]=m*o-h,n[8]=s*l,n[1]=s*f,n[5]=s*c,n[9]=-o,n[2]=h*o-m,n[6]=v+d*o,n[10]=s*u}else if(e.order==="ZXY"){const d=u*c,h=u*f,m=l*c,v=l*f;n[0]=d-v*o,n[4]=-s*f,n[8]=m+h*o,n[1]=h+m*o,n[5]=s*c,n[9]=v-d*o,n[2]=-s*l,n[6]=o,n[10]=s*u}else if(e.order==="ZYX"){const d=s*c,h=s*f,m=o*c,v=o*f;n[0]=u*c,n[4]=m*l-h,n[8]=d*l+v,n[1]=u*f,n[5]=v*l+d,n[9]=h*l-m,n[2]=-l,n[6]=o*u,n[10]=s*u}else if(e.order==="YZX"){const d=s*u,h=s*l,m=o*u,v=o*l;n[0]=u*c,n[4]=v-d*f,n[8]=m*f+h,n[1]=f,n[5]=s*c,n[9]=-o*c,n[2]=-l*c,n[6]=h*f+m,n[10]=d-v*f}else if(e.order==="XZY"){const d=s*u,h=s*l,m=o*u,v=o*l;n[0]=u*c,n[4]=-f,n[8]=l*c,n[1]=d*f+v,n[5]=s*c,n[9]=h*f-m,n[2]=m*f-h,n[6]=o*c,n[10]=v*f+d}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kZ,e,$Z)}lookAt(e,n,r){const i=this.elements;return Qa.subVectors(e,n),Qa.lengthSq()===0&&(Qa.z=1),Qa.normalize(),Al.crossVectors(r,Qa),Al.lengthSq()===0&&(Math.abs(r.z)===1?Qa.x+=1e-4:Qa.z+=1e-4,Qa.normalize(),Al.crossVectors(r,Qa)),Al.normalize(),ky.crossVectors(Qa,Al),i[0]=Al.x,i[4]=ky.x,i[8]=Qa.x,i[1]=Al.y,i[5]=ky.y,i[9]=Qa.y,i[2]=Al.z,i[6]=ky.z,i[10]=Qa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,a=this.elements,s=r[0],o=r[4],u=r[8],l=r[12],c=r[1],f=r[5],d=r[9],h=r[13],m=r[2],v=r[6],y=r[10],p=r[14],x=r[3],g=r[7],S=r[11],E=r[15],_=i[0],A=i[4],T=i[8],M=i[12],C=i[1],N=i[5],P=i[9],H=i[13],L=i[2],z=i[6],O=i[10],F=i[14],U=i[3],I=i[7],j=i[11],ee=i[15];return a[0]=s*_+o*C+u*L+l*U,a[4]=s*A+o*N+u*z+l*I,a[8]=s*T+o*P+u*O+l*j,a[12]=s*M+o*H+u*F+l*ee,a[1]=c*_+f*C+d*L+h*U,a[5]=c*A+f*N+d*z+h*I,a[9]=c*T+f*P+d*O+h*j,a[13]=c*M+f*H+d*F+h*ee,a[2]=m*_+v*C+y*L+p*U,a[6]=m*A+v*N+y*z+p*I,a[10]=m*T+v*P+y*O+p*j,a[14]=m*M+v*H+y*F+p*ee,a[3]=x*_+g*C+S*L+E*U,a[7]=x*A+g*N+S*z+E*I,a[11]=x*T+g*P+S*O+E*j,a[15]=x*M+g*H+S*F+E*ee,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],u=e[9],l=e[13],c=e[2],f=e[6],d=e[10],h=e[14],m=e[3],v=e[7],y=e[11],p=e[15];return m*(+a*u*f-i*l*f-a*o*d+r*l*d+i*o*h-r*u*h)+v*(+n*u*h-n*l*d+a*s*d-i*s*h+i*l*c-a*u*c)+y*(+n*l*f-n*o*h-a*s*f+r*s*h+a*o*c-r*l*c)+p*(-i*o*c-n*u*f+n*o*d+i*s*f-r*s*d+r*u*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],u=e[6],l=e[7],c=e[8],f=e[9],d=e[10],h=e[11],m=e[12],v=e[13],y=e[14],p=e[15],x=f*y*l-v*d*l+v*u*h-o*y*h-f*u*p+o*d*p,g=m*d*l-c*y*l-m*u*h+s*y*h+c*u*p-s*d*p,S=c*v*l-m*f*l+m*o*h-s*v*h-c*o*p+s*f*p,E=m*f*u-c*v*u-m*o*d+s*v*d+c*o*y-s*f*y,_=n*x+r*g+i*S+a*E;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/_;return e[0]=x*A,e[1]=(v*d*a-f*y*a-v*i*h+r*y*h+f*i*p-r*d*p)*A,e[2]=(o*y*a-v*u*a+v*i*l-r*y*l-o*i*p+r*u*p)*A,e[3]=(f*u*a-o*d*a-f*i*l+r*d*l+o*i*h-r*u*h)*A,e[4]=g*A,e[5]=(c*y*a-m*d*a+m*i*h-n*y*h-c*i*p+n*d*p)*A,e[6]=(m*u*a-s*y*a-m*i*l+n*y*l+s*i*p-n*u*p)*A,e[7]=(s*d*a-c*u*a+c*i*l-n*d*l-s*i*h+n*u*h)*A,e[8]=S*A,e[9]=(m*f*a-c*v*a-m*r*h+n*v*h+c*r*p-n*f*p)*A,e[10]=(s*v*a-m*o*a+m*r*l-n*v*l-s*r*p+n*o*p)*A,e[11]=(c*o*a-s*f*a-c*r*l+n*f*l+s*r*h-n*o*h)*A,e[12]=E*A,e[13]=(c*v*i-m*f*i+m*r*d-n*v*d-c*r*y+n*f*y)*A,e[14]=(m*o*i-s*v*i-m*r*u+n*v*u+s*r*y-n*o*y)*A,e[15]=(s*f*i-c*o*i+c*r*u-n*f*u-s*r*d+n*o*d)*A,this}scale(e){const n=this.elements,r=e.x,i=e.y,a=e.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,s=e.x,o=e.y,u=e.z,l=a*s,c=a*o;return this.set(l*s+r,l*o-i*u,l*u+i*o,0,l*o+i*u,c*o+r,c*u-i*s,0,l*u-i*o,c*u+i*s,a*u*u+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,a=n._x,s=n._y,o=n._z,u=n._w,l=a+a,c=s+s,f=o+o,d=a*l,h=a*c,m=a*f,v=s*c,y=s*f,p=o*f,x=u*l,g=u*c,S=u*f,E=r.x,_=r.y,A=r.z;return i[0]=(1-(v+p))*E,i[1]=(h+S)*E,i[2]=(m-g)*E,i[3]=0,i[4]=(h-S)*_,i[5]=(1-(d+p))*_,i[6]=(y+x)*_,i[7]=0,i[8]=(m+g)*A,i[9]=(y-x)*A,i[10]=(1-(d+v))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let a=Od.set(i[0],i[1],i[2]).length();const s=Od.set(i[4],i[5],i[6]).length(),o=Od.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],oo.copy(this);const l=1/a,c=1/s,f=1/o;return oo.elements[0]*=l,oo.elements[1]*=l,oo.elements[2]*=l,oo.elements[4]*=c,oo.elements[5]*=c,oo.elements[6]*=c,oo.elements[8]*=f,oo.elements[9]*=f,oo.elements[10]*=f,n.setFromRotationMatrix(oo),r.x=a,r.y=s,r.z=o,this}makePerspective(e,n,r,i,a,s,o=xo){const u=this.elements,l=2*a/(n-e),c=2*a/(r-i),f=(n+e)/(n-e),d=(r+i)/(r-i);let h,m;if(o===xo)h=-(s+a)/(s-a),m=-2*s*a/(s-a);else if(o===Jh)h=-s/(s-a),m=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=l,u[4]=0,u[8]=f,u[12]=0,u[1]=0,u[5]=c,u[9]=d,u[13]=0,u[2]=0,u[6]=0,u[10]=h,u[14]=m,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,n,r,i,a,s,o=xo){const u=this.elements,l=1/(n-e),c=1/(r-i),f=1/(s-a),d=(n+e)*l,h=(r+i)*c;let m,v;if(o===xo)m=(s+a)*f,v=-2*f;else if(o===Jh)m=a*f,v=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*l,u[4]=0,u[8]=0,u[12]=-d,u[1]=0,u[5]=2*c,u[9]=0,u[13]=-h,u[2]=0,u[6]=0,u[10]=v,u[14]=-m,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Od=new fe,oo=new Ht,kZ=new fe(0,0,0),$Z=new fe(1,1,1),Al=new fe,ky=new fe,Qa=new fe,QP=new Ht,JP=new Ni;class qg{constructor(e=0,n=0,r=0,i=qg.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],u=i[1],l=i[5],c=i[9],f=i[2],d=i[6],h=i[10];switch(n){case"XYZ":this._y=Math.asin(Ur(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ur(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,a),this._z=0);break;case"ZXY":this._x=Math.asin(Ur(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-Ur(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Ur(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Ur(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return QP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QP,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return JP.setFromEuler(this),this.setFromQuaternion(JP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}qg.DEFAULT_ORDER="XYZ";class Tf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let HZ=0;const eI=new fe,Fd=new Ni,Eu=new Ht,$y=new fe,Nm=new fe,GZ=new fe,VZ=new Ni,tI=new fe(1,0,0),nI=new fe(0,1,0),rI=new fe(0,0,1),WZ={type:"added"},qZ={type:"removed"};class On extends gs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:HZ++}),this.uuid=os(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=On.DEFAULT_UP.clone();const e=new fe,n=new qg,r=new Ni,i=new fe(1,1,1);function a(){r.setFromEuler(n,!1)}function s(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ht},normalMatrix:{value:new vn}}),this.matrix=new Ht,this.matrixWorld=new Ht,this.matrixAutoUpdate=On.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Tf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Fd.setFromAxisAngle(e,n),this.quaternion.multiply(Fd),this}rotateOnWorldAxis(e,n){return Fd.setFromAxisAngle(e,n),this.quaternion.premultiply(Fd),this}rotateX(e){return this.rotateOnAxis(tI,e)}rotateY(e){return this.rotateOnAxis(nI,e)}rotateZ(e){return this.rotateOnAxis(rI,e)}translateOnAxis(e,n){return eI.copy(e).applyQuaternion(this.quaternion),this.position.add(eI.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(tI,e)}translateY(e){return this.translateOnAxis(nI,e)}translateZ(e){return this.translateOnAxis(rI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Eu.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?$y.copy(e):$y.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Nm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Eu.lookAt(Nm,$y,this.up):Eu.lookAt($y,Nm,this.up),this.quaternion.setFromRotationMatrix(Eu),i&&(Eu.extractRotation(i.matrixWorld),Fd.setFromRotationMatrix(Eu),this.quaternion.premultiply(Fd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(WZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(qZ)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Eu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Eu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Eu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,n);if(s!==void 0)return s}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nm,e,GZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nm,VZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const a=n[r];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++){const o=i[a];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,u){return o[u.uuid]===void 0&&(o[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const u=o.shapes;if(Array.isArray(u))for(let l=0,c=u.length;l<c;l++){const f=u[l];a(e.shapes,f)}else a(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let u=0,l=this.material.length;u<l;u++)o.push(a(e.materials,this.material[u]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const u=this.animations[o];i.animations.push(a(e.animations,u))}}if(n){const o=s(e.geometries),u=s(e.materials),l=s(e.textures),c=s(e.images),f=s(e.shapes),d=s(e.skeletons),h=s(e.animations),m=s(e.nodes);o.length>0&&(r.geometries=o),u.length>0&&(r.materials=u),l.length>0&&(r.textures=l),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),d.length>0&&(r.skeletons=d),h.length>0&&(r.animations=h),m.length>0&&(r.nodes=m)}return r.object=i,r;function s(o){const u=[];for(const l in o){const c=o[l];delete c.metadata,u.push(c)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}On.DEFAULT_UP=new fe(0,1,0);On.DEFAULT_MATRIX_AUTO_UPDATE=!0;On.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uo=new fe,Mu=new fe,yE=new fe,Au=new fe,Ld=new fe,Bd=new fe,iI=new fe,xE=new fe,bE=new fe,wE=new fe;let Hy=!1;class Ua{constructor(e=new fe,n=new fe,r=new fe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),uo.subVectors(e,n),i.cross(uo);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,n,r,i,a){uo.subVectors(i,n),Mu.subVectors(r,n),yE.subVectors(e,n);const s=uo.dot(uo),o=uo.dot(Mu),u=uo.dot(yE),l=Mu.dot(Mu),c=Mu.dot(yE),f=s*l-o*o;if(f===0)return a.set(0,0,0),null;const d=1/f,h=(l*u-o*c)*d,m=(s*c-o*u)*d;return a.set(1-h-m,m,h)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Au)===null?!1:Au.x>=0&&Au.y>=0&&Au.x+Au.y<=1}static getUV(e,n,r,i,a,s,o,u){return Hy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hy=!0),this.getInterpolation(e,n,r,i,a,s,o,u)}static getInterpolation(e,n,r,i,a,s,o,u){return this.getBarycoord(e,n,r,i,Au)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(a,Au.x),u.addScaledVector(s,Au.y),u.addScaledVector(o,Au.z),u)}static isFrontFacing(e,n,r,i){return uo.subVectors(r,n),Mu.subVectors(e,n),uo.cross(Mu).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uo.subVectors(this.c,this.b),Mu.subVectors(this.a,this.b),uo.cross(Mu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ua.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ua.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,a){return Hy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Hy=!0),Ua.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}getInterpolation(e,n,r,i,a){return Ua.getInterpolation(e,this.a,this.b,this.c,n,r,i,a)}containsPoint(e){return Ua.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ua.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,a=this.c;let s,o;Ld.subVectors(i,r),Bd.subVectors(a,r),xE.subVectors(e,r);const u=Ld.dot(xE),l=Bd.dot(xE);if(u<=0&&l<=0)return n.copy(r);bE.subVectors(e,i);const c=Ld.dot(bE),f=Bd.dot(bE);if(c>=0&&f<=c)return n.copy(i);const d=u*f-c*l;if(d<=0&&u>=0&&c<=0)return s=u/(u-c),n.copy(r).addScaledVector(Ld,s);wE.subVectors(e,a);const h=Ld.dot(wE),m=Bd.dot(wE);if(m>=0&&h<=m)return n.copy(a);const v=h*l-u*m;if(v<=0&&l>=0&&m<=0)return o=l/(l-m),n.copy(r).addScaledVector(Bd,o);const y=c*m-h*f;if(y<=0&&f-c>=0&&h-m>=0)return iI.subVectors(a,i),o=(f-c)/(f-c+(h-m)),n.copy(i).addScaledVector(iI,o);const p=1/(y+v+d);return s=v*p,o=d*p,n.copy(r).addScaledVector(Ld,s).addScaledVector(Bd,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const H6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cl={h:0,s:0,l:0},Gy={h:0,s:0,l:0};function SE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let ft=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Nn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Yn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Yn.workingColorSpace){return this.r=e,this.g=n,this.b=r,Yn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Yn.workingColorSpace){if(e=HT(e,1),n=Ur(n,0,1),r=Ur(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,s=2*r-a;this.r=SE(s,a,e+1/3),this.g=SE(s,a,e),this.b=SE(s,a,e-1/3)}return Yn.toWorkingColorSpace(this,i),this}setStyle(e,n=Nn){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(s===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Nn){const r=H6[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Bh(e.r),this.g=Bh(e.g),this.b=Bh(e.b),this}copyLinearToSRGB(e){return this.r=cE(e.r),this.g=cE(e.g),this.b=cE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nn){return Yn.fromWorkingColorSpace(Vi.copy(this),e),Math.round(Ur(Vi.r*255,0,255))*65536+Math.round(Ur(Vi.g*255,0,255))*256+Math.round(Ur(Vi.b*255,0,255))}getHexString(e=Nn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Yn.workingColorSpace){Yn.fromWorkingColorSpace(Vi.copy(this),n);const r=Vi.r,i=Vi.g,a=Vi.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let u,l;const c=(o+s)/2;if(o===s)u=0,l=0;else{const f=s-o;switch(l=c<=.5?f/(s+o):f/(2-s-o),s){case r:u=(i-a)/f+(i<a?6:0);break;case i:u=(a-r)/f+2;break;case a:u=(r-i)/f+4;break}u/=6}return e.h=u,e.s=l,e.l=c,e}getRGB(e,n=Yn.workingColorSpace){return Yn.fromWorkingColorSpace(Vi.copy(this),n),e.r=Vi.r,e.g=Vi.g,e.b=Vi.b,e}getStyle(e=Nn){Yn.fromWorkingColorSpace(Vi.copy(this),e);const n=Vi.r,r=Vi.g,i=Vi.b;return e!==Nn?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Cl),this.setHSL(Cl.h+e,Cl.s+n,Cl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Cl),e.getHSL(Gy);const r=yv(Cl.h,Gy.h,n),i=yv(Cl.s,Gy.s,n),a=yv(Cl.l,Gy.l,n);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Vi=new ft;ft.NAMES=H6;let jZ=0;class li extends gs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jZ++}),this.uuid=os(),this.name="",this.type="Material",this.blending=Af,this.side=ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=tb,this.blendDst=nb,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ft(0,0,0),this.blendAlpha=0,this.depthFunc=Zv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=c2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=of,this.stencilZFail=of,this.stencilZPass=of,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Af&&(r.blending=this.blending),this.side!==ss&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==tb&&(r.blendSrc=this.blendSrc),this.blendDst!==nb&&(r.blendDst=this.blendDst),this.blendEquation!==Hl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Zv&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==c2&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==of&&(r.stencilFail=this.stencilFail),this.stencilZFail!==of&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==of&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const u=a[o];delete u.metadata,s.push(u)}return s}if(n){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Ac extends li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Lu=XZ();function XZ(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const l=u-127;l<-27?(r[u]=0,r[u|256]=32768,i[u]=24,i[u|256]=24):l<-14?(r[u]=1024>>-l-14,r[u|256]=1024>>-l-14|32768,i[u]=-l-1,i[u|256]=-l-1):l<=15?(r[u]=l+15<<10,r[u|256]=l+15<<10|32768,i[u]=13,i[u|256]=13):l<128?(r[u]=31744,r[u|256]=64512,i[u]=24,i[u|256]=24):(r[u]=31744,r[u|256]=64512,i[u]=13,i[u|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let u=1;u<1024;++u){let l=u<<13,c=0;for(;!(l&8388608);)l<<=1,c-=8388608;l&=-8388609,c+=947912704,a[u]=l|c}for(let u=1024;u<2048;++u)a[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)s[u]=u<<23;s[31]=1199570944,s[32]=2147483648;for(let u=33;u<63;++u)s[u]=2147483648+(u-32<<23);s[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(o[u]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function Oa(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ur(t,-65504,65504),Lu.floatView[0]=t;const e=Lu.uint32View[0],n=e>>23&511;return Lu.baseTable[n]+((e&8388607)>>Lu.shiftTable[n])}function tv(t){const e=t>>10;return Lu.uint32View[0]=Lu.mantissaTable[Lu.offsetTable[e]+(t&1023)]+Lu.exponentTable[e],Lu.floatView[0]}const xf={toHalfFloat:Oa,fromHalfFloat:tv},Kr=new fe,Vy=new qe;class dn{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=sg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=xi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Vy.fromBufferAttribute(this,n),Vy.applyMatrix3(e),this.setXY(n,Vy.x,Vy.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Kr.fromBufferAttribute(this,n),Kr.applyMatrix3(e),this.setXYZ(n,Kr.x,Kr.y,Kr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Kr.fromBufferAttribute(this,n),Kr.applyMatrix4(e),this.setXYZ(n,Kr.x,Kr.y,Kr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Kr.fromBufferAttribute(this,n),Kr.applyNormalMatrix(e),this.setXYZ(n,Kr.x,Kr.y,Kr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Kr.fromBufferAttribute(this,n),Kr.transformDirection(e),this.setXYZ(n,Kr.x,Kr.y,Kr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=za(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=fn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=za(n,this.array)),n}setX(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=za(n,this.array)),n}setY(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=za(n,this.array)),n}setZ(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=za(n,this.array)),n}setW(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array),a=fn(a,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==sg&&(e.usage=this.usage),e}}class YZ extends dn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class ZZ extends dn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class KZ extends dn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class QZ extends dn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class WT extends dn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class JZ extends dn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class qT extends dn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class eK extends dn{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=tv(this.array[e*this.itemSize]);return this.normalized&&(n=za(n,this.array)),n}setX(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize]=Oa(n),this}getY(e){let n=tv(this.array[e*this.itemSize+1]);return this.normalized&&(n=za(n,this.array)),n}setY(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+1]=Oa(n),this}getZ(e){let n=tv(this.array[e*this.itemSize+2]);return this.normalized&&(n=za(n,this.array)),n}setZ(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+2]=Oa(n),this}getW(e){let n=tv(this.array[e*this.itemSize+3]);return this.normalized&&(n=za(n,this.array)),n}setW(e,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+3]=Oa(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array)),this.array[e+0]=Oa(n),this.array[e+1]=Oa(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array)),this.array[e+0]=Oa(n),this.array[e+1]=Oa(r),this.array[e+2]=Oa(i),this}setXYZW(e,n,r,i,a){return e*=this.itemSize,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array),a=fn(a,this.array)),this.array[e+0]=Oa(n),this.array[e+1]=Oa(r),this.array[e+2]=Oa(i),this.array[e+3]=Oa(a),this}}class Tt extends dn{constructor(e,n,r){super(new Float32Array(e),n,r)}}class tK extends dn{constructor(e,n,r){super(new Float64Array(e),n,r)}}let nK=0;const Ps=new Ht,_E=new On,Ud=new fe,Ja=new ya,Rm=new ya,mi=new fe;class Jt extends gs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nK++}),this.uuid=os(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(z6(e)?qT:WT)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new vn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ps.makeRotationFromQuaternion(e),this.applyMatrix4(Ps),this}rotateX(e){return Ps.makeRotationX(e),this.applyMatrix4(Ps),this}rotateY(e){return Ps.makeRotationY(e),this.applyMatrix4(Ps),this}rotateZ(e){return Ps.makeRotationZ(e),this.applyMatrix4(Ps),this}translate(e,n,r){return Ps.makeTranslation(e,n,r),this.applyMatrix4(Ps),this}scale(e,n,r){return Ps.makeScale(e,n,r),this.applyMatrix4(Ps),this}lookAt(e){return _E.lookAt(e),_E.updateMatrix(),this.applyMatrix4(_E.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ud).negate(),this.translate(Ud.x,Ud.y,Ud.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Tt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ya);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];Ja.setFromBufferAttribute(a),this.morphTargetsRelative?(mi.addVectors(this.boundingBox.min,Ja.min),this.boundingBox.expandByPoint(mi),mi.addVectors(this.boundingBox.max,Ja.max),this.boundingBox.expandByPoint(mi)):(this.boundingBox.expandByPoint(Ja.min),this.boundingBox.expandByPoint(Ja.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ta);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new fe,1/0);return}if(e){const r=this.boundingSphere.center;if(Ja.setFromBufferAttribute(e),n)for(let a=0,s=n.length;a<s;a++){const o=n[a];Rm.setFromBufferAttribute(o),this.morphTargetsRelative?(mi.addVectors(Ja.min,Rm.min),Ja.expandByPoint(mi),mi.addVectors(Ja.max,Rm.max),Ja.expandByPoint(mi)):(Ja.expandByPoint(Rm.min),Ja.expandByPoint(Rm.max))}Ja.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)mi.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(mi));if(n)for(let a=0,s=n.length;a<s;a++){const o=n[a],u=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)mi.fromBufferAttribute(o,l),u&&(Ud.fromBufferAttribute(e,l),mi.add(Ud)),i=Math.max(i,r.distanceToSquared(mi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,a=n.normal.array,s=n.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new dn(new Float32Array(4*o),4));const u=this.getAttribute("tangent").array,l=[],c=[];for(let C=0;C<o;C++)l[C]=new fe,c[C]=new fe;const f=new fe,d=new fe,h=new fe,m=new qe,v=new qe,y=new qe,p=new fe,x=new fe;function g(C,N,P){f.fromArray(i,C*3),d.fromArray(i,N*3),h.fromArray(i,P*3),m.fromArray(s,C*2),v.fromArray(s,N*2),y.fromArray(s,P*2),d.sub(f),h.sub(f),v.sub(m),y.sub(m);const H=1/(v.x*y.y-y.x*v.y);isFinite(H)&&(p.copy(d).multiplyScalar(y.y).addScaledVector(h,-v.y).multiplyScalar(H),x.copy(h).multiplyScalar(v.x).addScaledVector(d,-y.x).multiplyScalar(H),l[C].add(p),l[N].add(p),l[P].add(p),c[C].add(x),c[N].add(x),c[P].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:r.length}]);for(let C=0,N=S.length;C<N;++C){const P=S[C],H=P.start,L=P.count;for(let z=H,O=H+L;z<O;z+=3)g(r[z+0],r[z+1],r[z+2])}const E=new fe,_=new fe,A=new fe,T=new fe;function M(C){A.fromArray(a,C*3),T.copy(A);const N=l[C];E.copy(N),E.sub(A.multiplyScalar(A.dot(N))).normalize(),_.crossVectors(T,N);const H=_.dot(c[C])<0?-1:1;u[C*4]=E.x,u[C*4+1]=E.y,u[C*4+2]=E.z,u[C*4+3]=H}for(let C=0,N=S.length;C<N;++C){const P=S[C],H=P.start,L=P.count;for(let z=H,O=H+L;z<O;z+=3)M(r[z+0]),M(r[z+1]),M(r[z+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new dn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let d=0,h=r.count;d<h;d++)r.setXYZ(d,0,0,0);const i=new fe,a=new fe,s=new fe,o=new fe,u=new fe,l=new fe,c=new fe,f=new fe;if(e)for(let d=0,h=e.count;d<h;d+=3){const m=e.getX(d+0),v=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(n,m),a.fromBufferAttribute(n,v),s.fromBufferAttribute(n,y),c.subVectors(s,a),f.subVectors(i,a),c.cross(f),o.fromBufferAttribute(r,m),u.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),o.add(c),u.add(c),l.add(c),r.setXYZ(m,o.x,o.y,o.z),r.setXYZ(v,u.x,u.y,u.z),r.setXYZ(y,l.x,l.y,l.z)}else for(let d=0,h=n.count;d<h;d+=3)i.fromBufferAttribute(n,d+0),a.fromBufferAttribute(n,d+1),s.fromBufferAttribute(n,d+2),c.subVectors(s,a),f.subVectors(i,a),c.cross(f),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)mi.fromBufferAttribute(e,n),mi.normalize(),e.setXYZ(n,mi.x,mi.y,mi.z)}toNonIndexed(){function e(o,u){const l=o.array,c=o.itemSize,f=o.normalized,d=new l.constructor(u.length*c);let h=0,m=0;for(let v=0,y=u.length;v<y;v++){o.isInterleavedBufferAttribute?h=u[v]*o.data.stride+o.offset:h=u[v]*c;for(let p=0;p<c;p++)d[m++]=l[h++]}return new dn(d,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Jt,r=this.index.array,i=this.attributes;for(const o in i){const u=i[o],l=e(u,r);n.setAttribute(o,l)}const a=this.morphAttributes;for(const o in a){const u=[],l=a[o];for(let c=0,f=l.length;c<f;c++){const d=l[c],h=e(d,r);u.push(h)}n.morphAttributes[o]=u}n.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,u=s.length;o<u;o++){const l=s[o];n.addGroup(l.start,l.count,l.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const l in u)u[l]!==void 0&&(e[l]=u[l]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const u in r){const l=r[u];e.data.attributes[u]=l.toJSON(e.data)}const i={};let a=!1;for(const u in this.morphAttributes){const l=this.morphAttributes[u],c=[];for(let f=0,d=l.length;f<d;f++){const h=l[f];c.push(h.toJSON(e.data))}c.length>0&&(i[u]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(n))}const a=e.morphAttributes;for(const l in a){const c=[],f=a[l];for(let d=0,h=f.length;d<h;d++)c.push(f[d].clone(n));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const f=s[l];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const aI=new Ht,Xc=new Kf,Wy=new ta,sI=new fe,zd=new fe,kd=new fe,$d=new fe,EE=new fe,qy=new fe,jy=new qe,Xy=new qe,Yy=new qe,oI=new fe,uI=new fe,lI=new fe,Zy=new fe,Ky=new fe;class qr extends On{constructor(e=new Jt,n=new Ac){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){qy.set(0,0,0);for(let u=0,l=a.length;u<l;u++){const c=o[u],f=a[u];c!==0&&(EE.fromBufferAttribute(f,e),s?qy.addScaledVector(EE,c):qy.addScaledVector(EE.sub(n),c))}n.add(qy)}return n}raycast(e,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Wy.copy(r.boundingSphere),Wy.applyMatrix4(a),Xc.copy(e.ray).recast(e.near),!(Wy.containsPoint(Xc.origin)===!1&&(Xc.intersectSphere(Wy,sI)===null||Xc.origin.distanceToSquared(sI)>(e.far-e.near)**2))&&(aI.copy(a).invert(),Xc.copy(e.ray).applyMatrix4(aI),!(r.boundingBox!==null&&Xc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Xc)))}_computeIntersections(e,n,r){let i;const a=this.geometry,s=this.material,o=a.index,u=a.attributes.position,l=a.attributes.uv,c=a.attributes.uv1,f=a.attributes.normal,d=a.groups,h=a.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const y=d[m],p=s[y.materialIndex],x=Math.max(y.start,h.start),g=Math.min(o.count,Math.min(y.start+y.count,h.start+h.count));for(let S=x,E=g;S<E;S+=3){const _=o.getX(S),A=o.getX(S+1),T=o.getX(S+2);i=Qy(this,p,e,r,l,c,f,_,A,T),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=y.materialIndex,n.push(i))}}else{const m=Math.max(0,h.start),v=Math.min(o.count,h.start+h.count);for(let y=m,p=v;y<p;y+=3){const x=o.getX(y),g=o.getX(y+1),S=o.getX(y+2);i=Qy(this,s,e,r,l,c,f,x,g,S),i&&(i.faceIndex=Math.floor(y/3),n.push(i))}}else if(u!==void 0)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const y=d[m],p=s[y.materialIndex],x=Math.max(y.start,h.start),g=Math.min(u.count,Math.min(y.start+y.count,h.start+h.count));for(let S=x,E=g;S<E;S+=3){const _=S,A=S+1,T=S+2;i=Qy(this,p,e,r,l,c,f,_,A,T),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=y.materialIndex,n.push(i))}}else{const m=Math.max(0,h.start),v=Math.min(u.count,h.start+h.count);for(let y=m,p=v;y<p;y+=3){const x=y,g=y+1,S=y+2;i=Qy(this,s,e,r,l,c,f,x,g,S),i&&(i.faceIndex=Math.floor(y/3),n.push(i))}}}}function rK(t,e,n,r,i,a,s,o){let u;if(e.side===ai?u=r.intersectTriangle(s,a,i,!0,o):u=r.intersectTriangle(i,a,s,e.side===ss,o),u===null)return null;Ky.copy(o),Ky.applyMatrix4(t.matrixWorld);const l=n.ray.origin.distanceTo(Ky);return l<n.near||l>n.far?null:{distance:l,point:Ky.clone(),object:t}}function Qy(t,e,n,r,i,a,s,o,u,l){t.getVertexPosition(o,zd),t.getVertexPosition(u,kd),t.getVertexPosition(l,$d);const c=rK(t,e,n,r,zd,kd,$d,Zy);if(c){i&&(jy.fromBufferAttribute(i,o),Xy.fromBufferAttribute(i,u),Yy.fromBufferAttribute(i,l),c.uv=Ua.getInterpolation(Zy,zd,kd,$d,jy,Xy,Yy,new qe)),a&&(jy.fromBufferAttribute(a,o),Xy.fromBufferAttribute(a,u),Yy.fromBufferAttribute(a,l),c.uv1=Ua.getInterpolation(Zy,zd,kd,$d,jy,Xy,Yy,new qe),c.uv2=c.uv1),s&&(oI.fromBufferAttribute(s,o),uI.fromBufferAttribute(s,u),lI.fromBufferAttribute(s,l),c.normal=Ua.getInterpolation(Zy,zd,kd,$d,oI,uI,lI,new fe),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:u,c:l,normal:new fe,materialIndex:0};Ua.getNormal(zd,kd,$d,f.normal),c.face=f}return c}class Qf extends Jt{constructor(e=1,n=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const u=[],l=[],c=[],f=[];let d=0,h=0;m("z","y","x",-1,-1,r,n,e,s,a,0),m("z","y","x",1,-1,r,n,-e,s,a,1),m("x","z","y",1,1,e,r,n,i,s,2),m("x","z","y",1,-1,e,r,-n,i,s,3),m("x","y","z",1,-1,e,n,r,i,a,4),m("x","y","z",-1,-1,e,n,-r,i,a,5),this.setIndex(u),this.setAttribute("position",new Tt(l,3)),this.setAttribute("normal",new Tt(c,3)),this.setAttribute("uv",new Tt(f,2));function m(v,y,p,x,g,S,E,_,A,T,M){const C=S/A,N=E/T,P=S/2,H=E/2,L=_/2,z=A+1,O=T+1;let F=0,U=0;const I=new fe;for(let j=0;j<O;j++){const ee=j*N-H;for(let J=0;J<z;J++){const q=J*C-P;I[v]=q*x,I[y]=ee*g,I[p]=L,l.push(I.x,I.y,I.z),I[v]=0,I[y]=0,I[p]=_>0?1:-1,c.push(I.x,I.y,I.z),f.push(J/A),f.push(1-j/T),F+=1}}for(let j=0;j<T;j++)for(let ee=0;ee<A;ee++){const J=d+ee+z*j,q=d+ee+z*(j+1),ae=d+(ee+1)+z*(j+1),be=d+(ee+1)+z*j;u.push(J,q,be),u.push(q,ae,be),U+=6}o.addGroup(h,U,M),h+=U,d+=F}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tp(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function da(t){const e={};for(let n=0;n<t.length;n++){const r=tp(t[n]);for(const i in r)e[i]=r[i]}return e}function iK(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function G6(t){return t.getRenderTarget()===null?t.outputColorSpace:Yn.workingColorSpace}const jT={clone:tp,merge:da};var aK=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sK=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xr extends li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=aK,this.fragmentShader=sK,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tp(e.uniforms),this.uniformsGroups=iK(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?n.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?n.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?n.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?n.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?n.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?n.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?n.uniforms[i]={type:"m4",value:s.toArray()}:n.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Mp extends On{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ht,this.projectionMatrix=new Ht,this.projectionMatrixInverse=new Ht,this.coordinateSystem=xo}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Tr extends Mp{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=ep*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Cf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ep*2*Math.atan(Math.tan(Cf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,a,s){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Cf*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const u=s.fullWidth,l=s.fullHeight;a+=s.offsetX*i/u,n-=s.offsetY*r/l,i*=s.width/u,r*=s.height/l}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Hd=-90,Gd=1;class V6 extends On{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Tr(Hd,Gd,e,n);i.layers=this.layers,this.add(i);const a=new Tr(Hd,Gd,e,n);a.layers=this.layers,this.add(a);const s=new Tr(Hd,Gd,e,n);s.layers=this.layers,this.add(s);const o=new Tr(Hd,Gd,e,n);o.layers=this.layers,this.add(o);const u=new Tr(Hd,Gd,e,n);u.layers=this.layers,this.add(u);const l=new Tr(Hd,Gd,e,n);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,a,s,o,u]=n;for(const l of n)this.remove(l);if(e===xo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Jh)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const l of n)this.add(l),l.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,u,l,c]=this.children,f=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,a),e.setRenderTarget(r,1,i),e.render(n,s),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,u),e.setRenderTarget(r,4,i),e.render(n,l),r.texture.generateMipmaps=v,e.setRenderTarget(r,5,i),e.render(n,c),e.setRenderTarget(f,d,h),e.xr.enabled=m,r.texture.needsPMREMUpdate=!0}}class jg extends yr{constructor(e,n,r,i,a,s,o,u,l,c){e=e!==void 0?e:[],n=n!==void 0?n:ru,super(e,n,r,i,a,s,o,u,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class XT extends jr{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(xv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ac?Nn:ma),this.texture=new jg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Qn}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Qf(5,5,5),a=new Xr({name:"CubemapFromEquirect",uniforms:tp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ai,blending:ea});a.uniforms.tEquirect.value=n;const s=new qr(i,a),o=n.minFilter;return n.minFilter===cc&&(n.minFilter=Qn),new V6(1,10,this).update(e,s),n.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,n,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(n,r,i);e.setRenderTarget(a)}}const ME=new fe,oK=new fe,uK=new vn;class Ou{constructor(e=new fe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=ME.subVectors(r,n).cross(oK.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(ME),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||uK.getNormalMatrix(e),i=this.coplanarPoint(ME).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Yc=new ta,Jy=new fe;class Xg{constructor(e=new Ou,n=new Ou,r=new Ou,i=new Ou,a=new Ou,s=new Ou){this.planes=[e,n,r,i,a,s]}set(e,n,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=xo){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],u=i[3],l=i[4],c=i[5],f=i[6],d=i[7],h=i[8],m=i[9],v=i[10],y=i[11],p=i[12],x=i[13],g=i[14],S=i[15];if(r[0].setComponents(u-a,d-l,y-h,S-p).normalize(),r[1].setComponents(u+a,d+l,y+h,S+p).normalize(),r[2].setComponents(u+s,d+c,y+m,S+x).normalize(),r[3].setComponents(u-s,d-c,y-m,S-x).normalize(),r[4].setComponents(u-o,d-f,y-v,S-g).normalize(),n===xo)r[5].setComponents(u+o,d+f,y+v,S+g).normalize();else if(n===Jh)r[5].setComponents(o,f,v,g).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Yc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yc)}intersectsSprite(e){return Yc.center.set(0,0,0),Yc.radius=.7071067811865476,Yc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Jy.x=i.normal.x>0?e.max.x:e.min.x,Jy.y=i.normal.y>0?e.max.y:e.min.y,Jy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Jy)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function W6(){let t=null,e=!1,n=null,r=null;function i(a,s){n(a,s),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){n=a},setContext:function(a){t=a}}}function lK(t,e){const n=e.isWebGL2,r=new WeakMap;function i(l,c){const f=l.array,d=l.usage,h=f.byteLength,m=t.createBuffer();t.bindBuffer(c,m),t.bufferData(c,f,d),l.onUploadCallback();let v;if(f instanceof Float32Array)v=t.FLOAT;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(f instanceof Int16Array)v=t.SHORT;else if(f instanceof Uint32Array)v=t.UNSIGNED_INT;else if(f instanceof Int32Array)v=t.INT;else if(f instanceof Int8Array)v=t.BYTE;else if(f instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:m,type:v,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:h}}function a(l,c,f){const d=c.array,h=c._updateRange,m=c.updateRanges;if(t.bindBuffer(f,l),h.count===-1&&m.length===0&&t.bufferSubData(f,0,d),m.length!==0){for(let v=0,y=m.length;v<y;v++){const p=m[v];n?t.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d,p.start,p.count):t.bufferSubData(f,p.start*d.BYTES_PER_ELEMENT,d.subarray(p.start,p.start+p.count))}c.clearUpdateRanges()}h.count!==-1&&(n?t.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count):t.bufferSubData(f,h.offset*d.BYTES_PER_ELEMENT,d.subarray(h.offset,h.offset+h.count)),h.count=-1),c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),r.get(l)}function o(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=r.get(l);c&&(t.deleteBuffer(c.buffer),r.delete(l))}function u(l,c){if(l.isGLBufferAttribute){const d=r.get(l);(!d||d.version<l.version)&&r.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}l.isInterleavedBufferAttribute&&(l=l.data);const f=r.get(l);if(f===void 0)r.set(l,i(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");a(f.buffer,l,c),f.version=l.version}}return{get:s,remove:o,update:u}}class Yg extends Jt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const a=e/2,s=n/2,o=Math.floor(r),u=Math.floor(i),l=o+1,c=u+1,f=e/o,d=n/u,h=[],m=[],v=[],y=[];for(let p=0;p<c;p++){const x=p*d-s;for(let g=0;g<l;g++){const S=g*f-a;m.push(S,-x,0),v.push(0,0,1),y.push(g/o),y.push(1-p/u)}}for(let p=0;p<u;p++)for(let x=0;x<o;x++){const g=x+l*p,S=x+l*(p+1),E=x+1+l*(p+1),_=x+1+l*p;h.push(g,S,_),h.push(S,E,_)}this.setIndex(h),this.setAttribute("position",new Tt(m,3)),this.setAttribute("normal",new Tt(v,3)),this.setAttribute("uv",new Tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yg(e.width,e.height,e.widthSegments,e.heightSegments)}}var cK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,dK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pK=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,mK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,vK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,gK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yK=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,bK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,wK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,_K=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,EK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,AK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,CK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,DK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,NK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,RK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,PK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,IK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,OK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,LK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,UK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,kK="gl_FragColor = linearToOutputTexel( gl_FragColor );",$K=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,HK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,GK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,VK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,WK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,qK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,XK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,YK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ZK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,KK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,QK=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,JK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eQ=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tQ=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nQ=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,rQ=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,iQ=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aQ=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sQ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,oQ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uQ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lQ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cQ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,fQ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dQ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hQ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pQ=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mQ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,vQ=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,gQ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,yQ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,xQ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,bQ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wQ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SQ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_Q=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,EQ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,MQ=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,AQ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,CQ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TQ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,DQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,NQ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RQ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,PQ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,IQ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,OQ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FQ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,LQ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,BQ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,UQ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,zQ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,kQ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$Q=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HQ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,GQ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,VQ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,WQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,qQ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jQ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,XQ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,YQ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ZQ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,KQ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,QQ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,JQ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eJ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tJ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nJ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rJ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,iJ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,aJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oJ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uJ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const lJ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,cJ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,gJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,xJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,bJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_J=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,NJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,RJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,UJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$J=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:cK,alphahash_pars_fragment:fK,alphamap_fragment:dK,alphamap_pars_fragment:hK,alphatest_fragment:pK,alphatest_pars_fragment:mK,aomap_fragment:vK,aomap_pars_fragment:gK,batching_pars_vertex:yK,batching_vertex:xK,begin_vertex:bK,beginnormal_vertex:wK,bsdfs:SK,iridescence_fragment:_K,bumpmap_pars_fragment:EK,clipping_planes_fragment:MK,clipping_planes_pars_fragment:AK,clipping_planes_pars_vertex:CK,clipping_planes_vertex:TK,color_fragment:DK,color_pars_fragment:NK,color_pars_vertex:RK,color_vertex:PK,common:IK,cube_uv_reflection_fragment:OK,defaultnormal_vertex:FK,displacementmap_pars_vertex:LK,displacementmap_vertex:BK,emissivemap_fragment:UK,emissivemap_pars_fragment:zK,colorspace_fragment:kK,colorspace_pars_fragment:$K,envmap_fragment:HK,envmap_common_pars_fragment:GK,envmap_pars_fragment:VK,envmap_pars_vertex:WK,envmap_physical_pars_fragment:rQ,envmap_vertex:qK,fog_vertex:jK,fog_pars_vertex:XK,fog_fragment:YK,fog_pars_fragment:ZK,gradientmap_pars_fragment:KK,lightmap_fragment:QK,lightmap_pars_fragment:JK,lights_lambert_fragment:eQ,lights_lambert_pars_fragment:tQ,lights_pars_begin:nQ,lights_toon_fragment:iQ,lights_toon_pars_fragment:aQ,lights_phong_fragment:sQ,lights_phong_pars_fragment:oQ,lights_physical_fragment:uQ,lights_physical_pars_fragment:lQ,lights_fragment_begin:cQ,lights_fragment_maps:fQ,lights_fragment_end:dQ,logdepthbuf_fragment:hQ,logdepthbuf_pars_fragment:pQ,logdepthbuf_pars_vertex:mQ,logdepthbuf_vertex:vQ,map_fragment:gQ,map_pars_fragment:yQ,map_particle_fragment:xQ,map_particle_pars_fragment:bQ,metalnessmap_fragment:wQ,metalnessmap_pars_fragment:SQ,morphcolor_vertex:_Q,morphnormal_vertex:EQ,morphtarget_pars_vertex:MQ,morphtarget_vertex:AQ,normal_fragment_begin:CQ,normal_fragment_maps:TQ,normal_pars_fragment:DQ,normal_pars_vertex:NQ,normal_vertex:RQ,normalmap_pars_fragment:PQ,clearcoat_normal_fragment_begin:IQ,clearcoat_normal_fragment_maps:OQ,clearcoat_pars_fragment:FQ,iridescence_pars_fragment:LQ,opaque_fragment:BQ,packing:UQ,premultiplied_alpha_fragment:zQ,project_vertex:kQ,dithering_fragment:$Q,dithering_pars_fragment:HQ,roughnessmap_fragment:GQ,roughnessmap_pars_fragment:VQ,shadowmap_pars_fragment:WQ,shadowmap_pars_vertex:qQ,shadowmap_vertex:jQ,shadowmask_pars_fragment:XQ,skinbase_vertex:YQ,skinning_pars_vertex:ZQ,skinning_vertex:KQ,skinnormal_vertex:QQ,specularmap_fragment:JQ,specularmap_pars_fragment:eJ,tonemapping_fragment:tJ,tonemapping_pars_fragment:nJ,transmission_fragment:rJ,transmission_pars_fragment:iJ,uv_pars_fragment:aJ,uv_pars_vertex:sJ,uv_vertex:oJ,worldpos_vertex:uJ,background_vert:lJ,background_frag:cJ,backgroundCube_vert:fJ,backgroundCube_frag:dJ,cube_vert:hJ,cube_frag:pJ,depth_vert:mJ,depth_frag:vJ,distanceRGBA_vert:gJ,distanceRGBA_frag:yJ,equirect_vert:xJ,equirect_frag:bJ,linedashed_vert:wJ,linedashed_frag:SJ,meshbasic_vert:_J,meshbasic_frag:EJ,meshlambert_vert:MJ,meshlambert_frag:AJ,meshmatcap_vert:CJ,meshmatcap_frag:TJ,meshnormal_vert:DJ,meshnormal_frag:NJ,meshphong_vert:RJ,meshphong_frag:PJ,meshphysical_vert:IJ,meshphysical_frag:OJ,meshtoon_vert:FJ,meshtoon_frag:LJ,points_vert:BJ,points_frag:UJ,shadow_vert:zJ,shadow_frag:kJ,sprite_vert:$J,sprite_frag:HJ},mt={common:{diffuse:{value:new ft(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new vn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new vn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new vn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new vn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new vn},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new vn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new vn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new vn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new vn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ft(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ft(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0},uvTransform:{value:new vn}},sprite:{diffuse:{value:new ft(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new vn},alphaMap:{value:null},alphaMapTransform:{value:new vn},alphaTest:{value:0}}},mo={basic:{uniforms:da([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:da([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new ft(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:da([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new ft(0)},specular:{value:new ft(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:da([mt.common,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.roughnessmap,mt.metalnessmap,mt.fog,mt.lights,{emissive:{value:new ft(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:da([mt.common,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.gradientmap,mt.fog,mt.lights,{emissive:{value:new ft(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:da([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:da([mt.points,mt.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:da([mt.common,mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:da([mt.common,mt.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:da([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:da([mt.sprite,mt.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new vn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:da([mt.common,mt.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:da([mt.lights,mt.fog,{color:{value:new ft(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};mo.physical={uniforms:da([mo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new vn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new vn},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new vn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new vn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new vn},sheen:{value:0},sheenColor:{value:new ft(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new vn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new vn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new vn},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new vn},attenuationDistance:{value:0},attenuationColor:{value:new ft(0)},specularColor:{value:new ft(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new vn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new vn},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new vn}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const e1={r:0,b:0,g:0};function GJ(t,e,n,r,i,a,s){const o=new ft(0);let u=a===!0?0:1,l,c,f=null,d=0,h=null;function m(y,p){let x=!1,g=p.isScene===!0?p.background:null;g&&g.isTexture&&(g=(p.backgroundBlurriness>0?n:e).get(g)),g===null?v(o,u):g&&g.isColor&&(v(g,1),x=!0);const S=t.xr.getEnvironmentBlendMode();S==="additive"?r.buffers.color.setClear(0,0,0,1,s):S==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===Ep)?(c===void 0&&(c=new qr(new Qf(1,1,1),new Xr({name:"BackgroundCubeMaterial",uniforms:tp(mo.backgroundCube.uniforms),vertexShader:mo.backgroundCube.vertexShader,fragmentShader:mo.backgroundCube.fragmentShader,side:ai,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,_,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=g,c.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=Yn.getTransfer(g.colorSpace)!==cr,(f!==g||d!==g.version||h!==t.toneMapping)&&(c.material.needsUpdate=!0,f=g,d=g.version,h=t.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):g&&g.isTexture&&(l===void 0&&(l=new qr(new Yg(2,2),new Xr({name:"BackgroundMaterial",uniforms:tp(mo.background.uniforms),vertexShader:mo.background.vertexShader,fragmentShader:mo.background.fragmentShader,side:ss,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=g,l.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,l.material.toneMapped=Yn.getTransfer(g.colorSpace)!==cr,g.matrixAutoUpdate===!0&&g.updateMatrix(),l.material.uniforms.uvTransform.value.copy(g.matrix),(f!==g||d!==g.version||h!==t.toneMapping)&&(l.material.needsUpdate=!0,f=g,d=g.version,h=t.toneMapping),l.layers.enableAll(),y.unshift(l,l.geometry,l.material,0,0,null))}function v(y,p){y.getRGB(e1,G6(t)),r.buffers.color.setClear(e1.r,e1.g,e1.b,p,s)}return{getClearColor:function(){return o},setClearColor:function(y,p=1){o.set(y),u=p,v(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(y){u=y,v(o,u)},render:m}}function VJ(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},u=y(null);let l=u,c=!1;function f(L,z,O,F,U){let I=!1;if(s){const j=v(F,O,z);l!==j&&(l=j,h(l.object)),I=p(L,F,O,U),I&&x(L,F,O,U)}else{const j=z.wireframe===!0;(l.geometry!==F.id||l.program!==O.id||l.wireframe!==j)&&(l.geometry=F.id,l.program=O.id,l.wireframe=j,I=!0)}U!==null&&n.update(U,t.ELEMENT_ARRAY_BUFFER),(I||c)&&(c=!1,T(L,z,O,F),U!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(U).buffer))}function d(){return r.isWebGL2?t.createVertexArray():a.createVertexArrayOES()}function h(L){return r.isWebGL2?t.bindVertexArray(L):a.bindVertexArrayOES(L)}function m(L){return r.isWebGL2?t.deleteVertexArray(L):a.deleteVertexArrayOES(L)}function v(L,z,O){const F=O.wireframe===!0;let U=o[L.id];U===void 0&&(U={},o[L.id]=U);let I=U[z.id];I===void 0&&(I={},U[z.id]=I);let j=I[F];return j===void 0&&(j=y(d()),I[F]=j),j}function y(L){const z=[],O=[],F=[];for(let U=0;U<i;U++)z[U]=0,O[U]=0,F[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:O,attributeDivisors:F,object:L,attributes:{},index:null}}function p(L,z,O,F){const U=l.attributes,I=z.attributes;let j=0;const ee=O.getAttributes();for(const J in ee)if(ee[J].location>=0){const ae=U[J];let be=I[J];if(be===void 0&&(J==="instanceMatrix"&&L.instanceMatrix&&(be=L.instanceMatrix),J==="instanceColor"&&L.instanceColor&&(be=L.instanceColor)),ae===void 0||ae.attribute!==be||be&&ae.data!==be.data)return!0;j++}return l.attributesNum!==j||l.index!==F}function x(L,z,O,F){const U={},I=z.attributes;let j=0;const ee=O.getAttributes();for(const J in ee)if(ee[J].location>=0){let ae=I[J];ae===void 0&&(J==="instanceMatrix"&&L.instanceMatrix&&(ae=L.instanceMatrix),J==="instanceColor"&&L.instanceColor&&(ae=L.instanceColor));const be={};be.attribute=ae,ae&&ae.data&&(be.data=ae.data),U[J]=be,j++}l.attributes=U,l.attributesNum=j,l.index=F}function g(){const L=l.newAttributes;for(let z=0,O=L.length;z<O;z++)L[z]=0}function S(L){E(L,0)}function E(L,z){const O=l.newAttributes,F=l.enabledAttributes,U=l.attributeDivisors;O[L]=1,F[L]===0&&(t.enableVertexAttribArray(L),F[L]=1),U[L]!==z&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,z),U[L]=z)}function _(){const L=l.newAttributes,z=l.enabledAttributes;for(let O=0,F=z.length;O<F;O++)z[O]!==L[O]&&(t.disableVertexAttribArray(O),z[O]=0)}function A(L,z,O,F,U,I,j){j===!0?t.vertexAttribIPointer(L,z,O,U,I):t.vertexAttribPointer(L,z,O,F,U,I)}function T(L,z,O,F){if(r.isWebGL2===!1&&(L.isInstancedMesh||F.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;g();const U=F.attributes,I=O.getAttributes(),j=z.defaultAttributeValues;for(const ee in I){const J=I[ee];if(J.location>=0){let q=U[ee];if(q===void 0&&(ee==="instanceMatrix"&&L.instanceMatrix&&(q=L.instanceMatrix),ee==="instanceColor"&&L.instanceColor&&(q=L.instanceColor)),q!==void 0){const ae=q.normalized,be=q.itemSize,ue=n.get(q);if(ue===void 0)continue;const pe=ue.buffer,Pe=ue.type,Ce=ue.bytesPerElement,Ee=r.isWebGL2===!0&&(Pe===t.INT||Pe===t.UNSIGNED_INT||q.gpuType===RT);if(q.isInterleavedBufferAttribute){const Oe=q.data,ne=Oe.stride,Le=q.offset;if(Oe.isInstancedInterleavedBuffer){for(let Fe=0;Fe<J.locationSize;Fe++)E(J.location+Fe,Oe.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Oe.meshPerAttribute*Oe.count)}else for(let Fe=0;Fe<J.locationSize;Fe++)S(J.location+Fe);t.bindBuffer(t.ARRAY_BUFFER,pe);for(let Fe=0;Fe<J.locationSize;Fe++)A(J.location+Fe,be/J.locationSize,Pe,ae,ne*Ce,(Le+be/J.locationSize*Fe)*Ce,Ee)}else{if(q.isInstancedBufferAttribute){for(let Oe=0;Oe<J.locationSize;Oe++)E(J.location+Oe,q.meshPerAttribute);L.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let Oe=0;Oe<J.locationSize;Oe++)S(J.location+Oe);t.bindBuffer(t.ARRAY_BUFFER,pe);for(let Oe=0;Oe<J.locationSize;Oe++)A(J.location+Oe,be/J.locationSize,Pe,ae,be*Ce,be/J.locationSize*Oe*Ce,Ee)}}else if(j!==void 0){const ae=j[ee];if(ae!==void 0)switch(ae.length){case 2:t.vertexAttrib2fv(J.location,ae);break;case 3:t.vertexAttrib3fv(J.location,ae);break;case 4:t.vertexAttrib4fv(J.location,ae);break;default:t.vertexAttrib1fv(J.location,ae)}}}}_()}function M(){P();for(const L in o){const z=o[L];for(const O in z){const F=z[O];for(const U in F)m(F[U].object),delete F[U];delete z[O]}delete o[L]}}function C(L){if(o[L.id]===void 0)return;const z=o[L.id];for(const O in z){const F=z[O];for(const U in F)m(F[U].object),delete F[U];delete z[O]}delete o[L.id]}function N(L){for(const z in o){const O=o[z];if(O[L.id]===void 0)continue;const F=O[L.id];for(const U in F)m(F[U].object),delete F[U];delete O[L.id]}}function P(){H(),c=!0,l!==u&&(l=u,h(l.object))}function H(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:f,reset:P,resetDefaultState:H,dispose:M,releaseStatesOfGeometry:C,releaseStatesOfProgram:N,initAttributes:g,enableAttribute:S,disableUnusedAttributes:_}}function WJ(t,e,n,r){const i=r.isWebGL2;let a;function s(c){a=c}function o(c,f){t.drawArrays(a,c,f),n.update(f,a,1)}function u(c,f,d){if(d===0)return;let h,m;if(i)h=t,m="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[m](a,c,f,d),n.update(f,a,d)}function l(c,f,d){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let m=0;m<d;m++)this.render(c[m],f[m]);else{h.multiDrawArraysWEBGL(a,c,0,f,0,d);let m=0;for(let v=0;v<d;v++)m+=f[v];n.update(m,a,1)}}this.setMode=s,this.render=o,this.renderInstances=u,this.renderMultiDraw=l}function qJ(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(A){if(A==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let o=n.precision!==void 0?n.precision:"highp";const u=a(o);u!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",u,"instead."),o=u);const l=s||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,f=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),m=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),y=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),p=t.getParameter(t.MAX_VARYING_VECTORS),x=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=d>0,S=s||e.has("OES_texture_float"),E=g&&S,_=s?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:m,maxAttributes:v,maxVertexUniforms:y,maxVaryings:p,maxFragmentUniforms:x,vertexTextures:g,floatFragmentTextures:S,floatVertexTextures:E,maxSamples:_}}function jJ(t){const e=this;let n=null,r=0,i=!1,a=!1;const s=new Ou,o=new vn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(f,d){const h=f.length!==0||d||r!==0||i;return i=d,r=f.length,h},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(f,d){n=c(f,d,0)},this.setState=function(f,d,h){const m=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,p=t.get(f);if(!i||m===null||m.length===0||a&&!y)a?c(null):l();else{const x=a?0:r,g=x*4;let S=p.clippingState||null;u.value=S,S=c(m,d,g,h);for(let E=0;E!==g;++E)S[E]=n[E];p.clippingState=S,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,d,h,m){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=u.value,m!==!0||y===null){const p=h+v*4,x=d.matrixWorldInverse;o.getNormalMatrix(x),(y===null||y.length<p)&&(y=new Float32Array(p));for(let g=0,S=h;g!==v;++g,S+=4)s.copy(f[g]).applyMatrix4(x,o),s.normal.toArray(y,S),y[S+3]=s.constant}u.value=y,u.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function XJ(t){let e=new WeakMap;function n(s,o){return o===Qh?s.mapping=ru:o===Kv&&(s.mapping=lc),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===Qh||o===Kv)if(e.has(s)){const u=e.get(s).texture;return n(u,s.mapping)}else{const u=s.image;if(u&&u.height>0){const l=new XT(u.height/2);return l.fromEquirectangularTexture(t,s),e.set(s,l),s.addEventListener("dispose",i),n(l.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const u=e.get(o);u!==void 0&&(e.delete(o),u.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}class ku extends Mp{constructor(e=-1,n=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+n,u=i-n;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=l*this.view.offsetX,s=a+l*this.view.width,o-=c*this.view.offsetY,u=o-c*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const wh=4,cI=[.125,.215,.35,.446,.526,.582],ff=20,AE=new ku,fI=new ft;let CE=null,TE=0,DE=0;const uf=(1+Math.sqrt(5))/2,Vd=1/uf,dI=[new fe(1,1,1),new fe(-1,1,1),new fe(1,1,-1),new fe(-1,1,-1),new fe(0,uf,Vd),new fe(0,uf,-Vd),new fe(Vd,0,uf),new fe(-Vd,0,uf),new fe(uf,Vd,0),new fe(-uf,Vd,0)];class h2{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){CE=this._renderer.getRenderTarget(),TE=this._renderer.getActiveCubeFace(),DE=this._renderer.getActiveMipmapLevel(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=mI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=pI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CE,TE,DE),e.scissorTest=!1,t1(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ru||e.mapping===lc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CE=this._renderer.getRenderTarget(),TE=this._renderer.getActiveCubeFace(),DE=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Qn,minFilter:Qn,generateMipmaps:!1,type:Ki,format:Zi,colorSpace:Ys,depthBuffer:!1},i=hI(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=hI(e,n,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YJ(a)),this._blurMaterial=ZJ(a,e,n)}return i}_compileMaterial(e){const n=new qr(this._lodPlanes[0],e);this._renderer.compile(n,AE)}_sceneToCubeUV(e,n,r,i){const o=new Tr(90,1,n,r),u=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,d=c.toneMapping;c.getClearColor(fI),c.toneMapping=Eo,c.autoClear=!1;const h=new Ac({name:"PMREM.Background",side:ai,depthWrite:!1,depthTest:!1}),m=new qr(new Qf,h);let v=!1;const y=e.background;y?y.isColor&&(h.color.copy(y),e.background=null,v=!0):(h.color.copy(fI),v=!0);for(let p=0;p<6;p++){const x=p%3;x===0?(o.up.set(0,u[p],0),o.lookAt(l[p],0,0)):x===1?(o.up.set(0,0,u[p]),o.lookAt(0,l[p],0)):(o.up.set(0,u[p],0),o.lookAt(0,0,l[p]));const g=this._cubeSize;t1(i,x*g,p>2?g:0,g,g),c.setRenderTarget(i),v&&c.render(m,o),c.render(e,o)}m.geometry.dispose(),m.material.dispose(),c.toneMapping=d,c.autoClear=f,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ru||e.mapping===lc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=mI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=pI());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new qr(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const u=this._cubeSize;t1(n,0,0,3*u,2*u),r.setRenderTarget(n),r.render(s,AE)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=dI[(i-1)%dI.length];this._blur(e,i-1,i,a,s)}n.autoClear=r}_blur(e,n,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,n,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,n,r,i,a,s,o){const u=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new qr(this._lodPlanes[i],l),d=l.uniforms,h=this._sizeLods[r]-1,m=isFinite(a)?Math.PI/(2*h):2*Math.PI/(2*ff-1),v=a/m,y=isFinite(a)?1+Math.floor(c*v):ff;y>ff&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${ff}`);const p=[];let x=0;for(let A=0;A<ff;++A){const T=A/v,M=Math.exp(-T*T/2);p.push(M),A===0?x+=M:A<y&&(x+=2*M)}for(let A=0;A<p.length;A++)p[A]=p[A]/x;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=p,d.latitudinal.value=s==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:g}=this;d.dTheta.value=m,d.mipInt.value=g-r;const S=this._sizeLods[i],E=3*S*(i>g-wh?i-g+wh:0),_=4*(this._cubeSize-S);t1(n,E,_,3*S,2*S),u.setRenderTarget(n),u.render(f,AE)}}function YJ(t){const e=[],n=[],r=[];let i=t;const a=t-wh+1+cI.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);n.push(o);let u=1/o;s>t-wh?u=cI[s-t+wh-1]:s===0&&(u=0),r.push(u);const l=1/(o-2),c=-l,f=1+l,d=[c,c,f,c,f,f,c,c,f,f,c,f],h=6,m=6,v=3,y=2,p=1,x=new Float32Array(v*m*h),g=new Float32Array(y*m*h),S=new Float32Array(p*m*h);for(let _=0;_<h;_++){const A=_%3*2/3-1,T=_>2?0:-1,M=[A,T,0,A+2/3,T,0,A+2/3,T+1,0,A,T,0,A+2/3,T+1,0,A,T+1,0];x.set(M,v*m*_),g.set(d,y*m*_);const C=[_,_,_,_,_,_];S.set(C,p*m*_)}const E=new Jt;E.setAttribute("position",new dn(x,v)),E.setAttribute("uv",new dn(g,y)),E.setAttribute("faceIndex",new dn(S,p)),e.push(E),i>wh&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function hI(t,e,n){const r=new jr(t,e,n);return r.texture.mapping=Ep,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function t1(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ZJ(t,e,n){const r=new Float32Array(ff),i=new fe(0,1,0);return new Xr({name:"SphericalGaussianBlur",defines:{n:ff,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:YT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function pI(){return new Xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:YT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function mI(){return new Xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:YT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ea,depthTest:!1,depthWrite:!1})}function YT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function KJ(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const u=o.mapping,l=u===Qh||u===Kv,c=u===ru||u===lc;if(l||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let f=e.get(o);return n===null&&(n=new h2(t)),f=l?n.fromEquirectangular(o,f):n.fromCubemap(o,f),e.set(o,f),f.texture}else{if(e.has(o))return e.get(o).texture;{const f=o.image;if(l&&f&&f.height>0||c&&f&&i(f)){n===null&&(n=new h2(t));const d=l?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,d),o.addEventListener("dispose",a),d.texture}else return null}}}return o}function i(o){let u=0;const l=6;for(let c=0;c<l;c++)o[c]!==void 0&&u++;return u===l}function a(o){const u=o.target;u.removeEventListener("dispose",a);const l=e.get(u);l!==void 0&&(e.delete(u),l.dispose())}function s(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:s}}function QJ(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function JJ(t,e,n,r){const i={},a=new WeakMap;function s(f){const d=f.target;d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);for(const m in d.morphAttributes){const v=d.morphAttributes[m];for(let y=0,p=v.length;y<p;y++)e.remove(v[y])}d.removeEventListener("dispose",s),delete i[d.id];const h=a.get(d);h&&(e.remove(h),a.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function o(f,d){return i[d.id]===!0||(d.addEventListener("dispose",s),i[d.id]=!0,n.memory.geometries++),d}function u(f){const d=f.attributes;for(const m in d)e.update(d[m],t.ARRAY_BUFFER);const h=f.morphAttributes;for(const m in h){const v=h[m];for(let y=0,p=v.length;y<p;y++)e.update(v[y],t.ARRAY_BUFFER)}}function l(f){const d=[],h=f.index,m=f.attributes.position;let v=0;if(h!==null){const x=h.array;v=h.version;for(let g=0,S=x.length;g<S;g+=3){const E=x[g+0],_=x[g+1],A=x[g+2];d.push(E,_,_,A,A,E)}}else if(m!==void 0){const x=m.array;v=m.version;for(let g=0,S=x.length/3-1;g<S;g+=3){const E=g+0,_=g+1,A=g+2;d.push(E,_,_,A,A,E)}}else return;const y=new(z6(d)?qT:WT)(d,1);y.version=v;const p=a.get(f);p&&e.remove(p),a.set(f,y)}function c(f){const d=a.get(f);if(d){const h=f.index;h!==null&&d.version<h.version&&l(f)}else l(f);return a.get(f)}return{get:o,update:u,getWireframeAttribute:c}}function eee(t,e,n,r){const i=r.isWebGL2;let a;function s(h){a=h}let o,u;function l(h){o=h.type,u=h.bytesPerElement}function c(h,m){t.drawElements(a,m,o,h*u),n.update(m,a,1)}function f(h,m,v){if(v===0)return;let y,p;if(i)y=t,p="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[p](a,m,o,h*u,v),n.update(m,a,v)}function d(h,m,v){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let p=0;p<v;p++)this.render(h[p]/u,m[p]);else{y.multiDrawElementsWEBGL(a,m,0,o,h,0,v);let p=0;for(let x=0;x<v;x++)p+=m[x];n.update(p,a,1)}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=d}function tee(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(n.calls++,s){case t.TRIANGLES:n.triangles+=o*(a/3);break;case t.LINES:n.lines+=o*(a/2);break;case t.LINE_STRIP:n.lines+=o*(a-1);break;case t.LINE_LOOP:n.lines+=o*a;break;case t.POINTS:n.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function nee(t,e){return t[0]-e[0]}function ree(t,e){return Math.abs(e[1])-Math.abs(t[1])}function iee(t,e,n){const r={},i=new Float32Array(8),a=new WeakMap,s=new Wn,o=[];for(let l=0;l<8;l++)o[l]=[l,0];function u(l,c,f){const d=l.morphTargetInfluences;if(e.isWebGL2===!0){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=h!==void 0?h.length:0;let v=a.get(c);if(v===void 0||v.count!==m){let L=function(){P.dispose(),a.delete(c),c.removeEventListener("dispose",L)};v!==void 0&&v.texture.dispose();const x=c.morphAttributes.position!==void 0,g=c.morphAttributes.normal!==void 0,S=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],A=c.morphAttributes.color||[];let T=0;x===!0&&(T=1),g===!0&&(T=2),S===!0&&(T=3);let M=c.attributes.position.count*T,C=1;M>e.maxTextureSize&&(C=Math.ceil(M/e.maxTextureSize),M=e.maxTextureSize);const N=new Float32Array(M*C*4*m),P=new ww(N,M,C,m);P.type=xi,P.needsUpdate=!0;const H=T*4;for(let z=0;z<m;z++){const O=E[z],F=_[z],U=A[z],I=M*C*4*z;for(let j=0;j<O.count;j++){const ee=j*H;x===!0&&(s.fromBufferAttribute(O,j),N[I+ee+0]=s.x,N[I+ee+1]=s.y,N[I+ee+2]=s.z,N[I+ee+3]=0),g===!0&&(s.fromBufferAttribute(F,j),N[I+ee+4]=s.x,N[I+ee+5]=s.y,N[I+ee+6]=s.z,N[I+ee+7]=0),S===!0&&(s.fromBufferAttribute(U,j),N[I+ee+8]=s.x,N[I+ee+9]=s.y,N[I+ee+10]=s.z,N[I+ee+11]=U.itemSize===4?s.w:1)}}v={count:m,texture:P,size:new qe(M,C)},a.set(c,v),c.addEventListener("dispose",L)}let y=0;for(let x=0;x<d.length;x++)y+=d[x];const p=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(t,"morphTargetBaseInfluence",p),f.getUniforms().setValue(t,"morphTargetInfluences",d),f.getUniforms().setValue(t,"morphTargetsTexture",v.texture,n),f.getUniforms().setValue(t,"morphTargetsTextureSize",v.size)}else{const h=d===void 0?0:d.length;let m=r[c.id];if(m===void 0||m.length!==h){m=[];for(let g=0;g<h;g++)m[g]=[g,0];r[c.id]=m}for(let g=0;g<h;g++){const S=m[g];S[0]=g,S[1]=d[g]}m.sort(ree);for(let g=0;g<8;g++)g<h&&m[g][1]?(o[g][0]=m[g][0],o[g][1]=m[g][1]):(o[g][0]=Number.MAX_SAFE_INTEGER,o[g][1]=0);o.sort(nee);const v=c.morphAttributes.position,y=c.morphAttributes.normal;let p=0;for(let g=0;g<8;g++){const S=o[g],E=S[0],_=S[1];E!==Number.MAX_SAFE_INTEGER&&_?(v&&c.getAttribute("morphTarget"+g)!==v[E]&&c.setAttribute("morphTarget"+g,v[E]),y&&c.getAttribute("morphNormal"+g)!==y[E]&&c.setAttribute("morphNormal"+g,y[E]),i[g]=_,p+=_):(v&&c.hasAttribute("morphTarget"+g)===!0&&c.deleteAttribute("morphTarget"+g),y&&c.hasAttribute("morphNormal"+g)===!0&&c.deleteAttribute("morphNormal"+g),i[g]=0)}const x=c.morphTargetsRelative?1:1-p;f.getUniforms().setValue(t,"morphTargetBaseInfluence",x),f.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:u}}function aee(t,e,n,r){let i=new WeakMap;function a(u){const l=r.render.frame,c=u.geometry,f=e.get(u,c);if(i.get(f)!==l&&(e.update(f),i.set(f,l)),u.isInstancedMesh&&(u.hasEventListener("dispose",o)===!1&&u.addEventListener("dispose",o),i.get(u)!==l&&(n.update(u.instanceMatrix,t.ARRAY_BUFFER),u.instanceColor!==null&&n.update(u.instanceColor,t.ARRAY_BUFFER),i.set(u,l))),u.isSkinnedMesh){const d=u.skeleton;i.get(d)!==l&&(d.update(),i.set(d,l))}return f}function s(){i=new WeakMap}function o(u){const l=u.target;l.removeEventListener("dispose",o),n.remove(l.instanceMatrix),l.instanceColor!==null&&n.remove(l.instanceColor)}return{update:a,dispose:s}}class Sw extends yr{constructor(e,n,r,i,a,s,o,u,l,c){if(c=c!==void 0?c:ic,c!==ic&&c!==fc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===ic&&(r=Qo),r===void 0&&c===fc&&(r=Wu),super(null,i,a,s,o,u,c,r,l),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:mr,this.minFilter=u!==void 0?u:mr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const q6=new yr,j6=new Sw(1,1);j6.compareFunction=$T;const X6=new ww,Y6=new VT,Z6=new jg,vI=[],gI=[],yI=new Float32Array(16),xI=new Float32Array(9),bI=new Float32Array(4);function Ap(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let a=vI[i];if(a===void 0&&(a=new Float32Array(i),vI[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=n,t[s].toArray(a,o)}return a}function oi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ui(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function _w(t,e){let n=gI[e];n===void 0&&(n=new Int32Array(e),gI[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function see(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function oee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(oi(n,e))return;t.uniform2fv(this.addr,e),ui(n,e)}}function uee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(oi(n,e))return;t.uniform3fv(this.addr,e),ui(n,e)}}function lee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(oi(n,e))return;t.uniform4fv(this.addr,e),ui(n,e)}}function cee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(oi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ui(n,e)}else{if(oi(n,r))return;bI.set(r),t.uniformMatrix2fv(this.addr,!1,bI),ui(n,r)}}function fee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(oi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ui(n,e)}else{if(oi(n,r))return;xI.set(r),t.uniformMatrix3fv(this.addr,!1,xI),ui(n,r)}}function dee(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(oi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ui(n,e)}else{if(oi(n,r))return;yI.set(r),t.uniformMatrix4fv(this.addr,!1,yI),ui(n,r)}}function hee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function pee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(oi(n,e))return;t.uniform2iv(this.addr,e),ui(n,e)}}function mee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(oi(n,e))return;t.uniform3iv(this.addr,e),ui(n,e)}}function vee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(oi(n,e))return;t.uniform4iv(this.addr,e),ui(n,e)}}function gee(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function yee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(oi(n,e))return;t.uniform2uiv(this.addr,e),ui(n,e)}}function xee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(oi(n,e))return;t.uniform3uiv(this.addr,e),ui(n,e)}}function bee(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(oi(n,e))return;t.uniform4uiv(this.addr,e),ui(n,e)}}function wee(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const a=this.type===t.SAMPLER_2D_SHADOW?j6:q6;n.setTexture2D(e||a,i)}function See(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Y6,i)}function _ee(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Z6,i)}function Eee(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||X6,i)}function Mee(t){switch(t){case 5126:return see;case 35664:return oee;case 35665:return uee;case 35666:return lee;case 35674:return cee;case 35675:return fee;case 35676:return dee;case 5124:case 35670:return hee;case 35667:case 35671:return pee;case 35668:case 35672:return mee;case 35669:case 35673:return vee;case 5125:return gee;case 36294:return yee;case 36295:return xee;case 36296:return bee;case 35678:case 36198:case 36298:case 36306:case 35682:return wee;case 35679:case 36299:case 36307:return See;case 35680:case 36300:case 36308:case 36293:return _ee;case 36289:case 36303:case 36311:case 36292:return Eee}}function Aee(t,e){t.uniform1fv(this.addr,e)}function Cee(t,e){const n=Ap(e,this.size,2);t.uniform2fv(this.addr,n)}function Tee(t,e){const n=Ap(e,this.size,3);t.uniform3fv(this.addr,n)}function Dee(t,e){const n=Ap(e,this.size,4);t.uniform4fv(this.addr,n)}function Nee(t,e){const n=Ap(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ree(t,e){const n=Ap(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Pee(t,e){const n=Ap(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Iee(t,e){t.uniform1iv(this.addr,e)}function Oee(t,e){t.uniform2iv(this.addr,e)}function Fee(t,e){t.uniform3iv(this.addr,e)}function Lee(t,e){t.uniform4iv(this.addr,e)}function Bee(t,e){t.uniform1uiv(this.addr,e)}function Uee(t,e){t.uniform2uiv(this.addr,e)}function zee(t,e){t.uniform3uiv(this.addr,e)}function kee(t,e){t.uniform4uiv(this.addr,e)}function $ee(t,e,n){const r=this.cache,i=e.length,a=_w(n,i);oi(r,a)||(t.uniform1iv(this.addr,a),ui(r,a));for(let s=0;s!==i;++s)n.setTexture2D(e[s]||q6,a[s])}function Hee(t,e,n){const r=this.cache,i=e.length,a=_w(n,i);oi(r,a)||(t.uniform1iv(this.addr,a),ui(r,a));for(let s=0;s!==i;++s)n.setTexture3D(e[s]||Y6,a[s])}function Gee(t,e,n){const r=this.cache,i=e.length,a=_w(n,i);oi(r,a)||(t.uniform1iv(this.addr,a),ui(r,a));for(let s=0;s!==i;++s)n.setTextureCube(e[s]||Z6,a[s])}function Vee(t,e,n){const r=this.cache,i=e.length,a=_w(n,i);oi(r,a)||(t.uniform1iv(this.addr,a),ui(r,a));for(let s=0;s!==i;++s)n.setTexture2DArray(e[s]||X6,a[s])}function Wee(t){switch(t){case 5126:return Aee;case 35664:return Cee;case 35665:return Tee;case 35666:return Dee;case 35674:return Nee;case 35675:return Ree;case 35676:return Pee;case 5124:case 35670:return Iee;case 35667:case 35671:return Oee;case 35668:case 35672:return Fee;case 35669:case 35673:return Lee;case 5125:return Bee;case 36294:return Uee;case 36295:return zee;case 36296:return kee;case 35678:case 36198:case 36298:case 36306:case 35682:return $ee;case 35679:case 36299:case 36307:return Hee;case 35680:case 36300:case 36308:case 36293:return Gee;case 36289:case 36303:case 36311:case 36292:return Vee}}class qee{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Mee(n.type)}}class jee{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Wee(n.type)}}class Xee{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,n[o.id],r)}}}const NE=/(\w+)(\])?(\[|\.)?/g;function wI(t,e){t.seq.push(e),t.map[e.id]=e}function Yee(t,e,n){const r=t.name,i=r.length;for(NE.lastIndex=0;;){const a=NE.exec(r),s=NE.lastIndex;let o=a[1];const u=a[2]==="]",l=a[3];if(u&&(o=o|0),l===void 0||l==="["&&s+2===i){wI(n,l===void 0?new qee(o,t,e):new jee(o,t,e));break}else{let f=n.map[o];f===void 0&&(f=new Xee(o),wI(n,f)),n=f}}}class _x{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(n,i),s=e.getUniformLocation(n,a.name);Yee(a,s,this)}}setValue(e,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let a=0,s=n.length;a!==s;++a){const o=n[a],u=r[o.id];u.needsUpdate!==!1&&o.setValue(e,u.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in n&&r.push(s)}return r}}function SI(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Zee=37297;let Kee=0;function Qee(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,n.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${n[s]}`)}return r.join(`
`)}function Jee(t){const e=Yn.getPrimaries(Yn.workingColorSpace),n=Yn.getPrimaries(t);let r;switch(e===n?r="":e===ag&&n===ig?r="LinearDisplayP3ToLinearSRGB":e===ig&&n===ag&&(r="LinearSRGBToLinearDisplayP3"),t){case Ys:case Wg:return[r,"LinearTransferOETF"];case Nn:case bw:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function _I(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return n.toUpperCase()+`

`+i+`

`+Qee(t.getShaderSource(e),s)}else return i}function ete(t,e){const n=Jee(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function tte(t,e){let n;switch(e){case p6:n="Linear";break;case m6:n="Reinhard";break;case v6:n="OptimizedCineon";break;case DT:n="ACESFilmic";break;case y6:n="AgX";break;case g6:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function nte(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sh).join(`
`)}function rte(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Sh).join(`
`)}function ite(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function ate(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=t.getActiveAttrib(e,i),s=a.name;let o=1;a.type===t.FLOAT_MAT2&&(o=2),a.type===t.FLOAT_MAT3&&(o=3),a.type===t.FLOAT_MAT4&&(o=4),n[s]={type:a.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}function Sh(t){return t!==""}function EI(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function MI(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ste=/^[ \t]*#include +<([\w\d./]+)>/gm;function p2(t){return t.replace(ste,ute)}const ote=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ute(t,e){let n=cn[e];if(n===void 0){const r=ote.get(e);if(r!==void 0)n=cn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return p2(n)}const lte=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function AI(t){return t.replace(lte,cte)}function cte(t,e,n,r){let i="";for(let a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function CI(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function fte(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===vw?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===vv?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===fo&&(e="SHADOWMAP_TYPE_VSM"),e}function dte(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ru:case lc:e="ENVMAP_TYPE_CUBE";break;case Ep:e="ENVMAP_TYPE_CUBE_UV";break}return e}function hte(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case lc:e="ENVMAP_MODE_REFRACTION";break}return e}function pte(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Vg:e="ENVMAP_BLENDING_MULTIPLY";break;case d6:e="ENVMAP_BLENDING_MIX";break;case h6:e="ENVMAP_BLENDING_ADD";break}return e}function mte(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function vte(t,e,n,r){const i=t.getContext(),a=n.defines;let s=n.vertexShader,o=n.fragmentShader;const u=fte(n),l=dte(n),c=hte(n),f=pte(n),d=mte(n),h=n.isWebGL2?"":nte(n),m=rte(n),v=ite(a),y=i.createProgram();let p,x,g=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(p=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Sh).join(`
`),p.length>0&&(p+=`
`),x=[h,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Sh).join(`
`),x.length>0&&(x+=`
`)):(p=[CI(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sh).join(`
`),x=[h,CI(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Eo?"#define TONE_MAPPING":"",n.toneMapping!==Eo?cn.tonemapping_pars_fragment:"",n.toneMapping!==Eo?tte("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,ete("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Sh).join(`
`)),s=p2(s),s=EI(s,n),s=MI(s,n),o=p2(o),o=EI(o,n),o=MI(o,n),s=AI(s),o=AI(o),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,p=[m,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,x=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===f2?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===f2?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=g+p+s,E=g+x+o,_=SI(i,i.VERTEX_SHADER,S),A=SI(i,i.FRAGMENT_SHADER,E);i.attachShader(y,_),i.attachShader(y,A),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function T(P){if(t.debug.checkShaderErrors){const H=i.getProgramInfoLog(y).trim(),L=i.getShaderInfoLog(_).trim(),z=i.getShaderInfoLog(A).trim();let O=!0,F=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(O=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,_,A);else{const U=_I(i,_,"vertex"),I=_I(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+H+`
`+U+`
`+I)}else H!==""?console.warn("THREE.WebGLProgram: Program Info Log:",H):(L===""||z==="")&&(F=!1);F&&(P.diagnostics={runnable:O,programLog:H,vertexShader:{log:L,prefix:p},fragmentShader:{log:z,prefix:x}})}i.deleteShader(_),i.deleteShader(A),M=new _x(i,y),C=ate(i,y)}let M;this.getUniforms=function(){return M===void 0&&T(this),M};let C;this.getAttributes=function(){return C===void 0&&T(this),C};let N=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=i.getProgramParameter(y,Zee)),N},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Kee++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=_,this.fragmentShader=A,this}let gte=0;class yte{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new xte(e),n.set(e,r)),r}}class xte{constructor(e){this.id=gte++,this.code=e,this.usedTimes=0}}function bte(t,e,n,r,i,a,s){const o=new Tf,u=new yte,l=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,d=i.vertexTextures;let h=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M){return M===0?"uv":`uv${M}`}function y(M,C,N,P,H){const L=P.fog,z=H.geometry,O=M.isMeshStandardMaterial?P.environment:null,F=(M.isMeshStandardMaterial?n:e).get(M.envMap||O),U=F&&F.mapping===Ep?F.image.height:null,I=m[M.type];M.precision!==null&&(h=i.getMaxPrecision(M.precision),h!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",h,"instead."));const j=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,ee=j!==void 0?j.length:0;let J=0;z.morphAttributes.position!==void 0&&(J=1),z.morphAttributes.normal!==void 0&&(J=2),z.morphAttributes.color!==void 0&&(J=3);let q,ae,be,ue;if(I){const rr=mo[I];q=rr.vertexShader,ae=rr.fragmentShader}else q=M.vertexShader,ae=M.fragmentShader,u.update(M),be=u.getVertexShaderID(M),ue=u.getFragmentShaderID(M);const pe=t.getRenderTarget(),Pe=H.isInstancedMesh===!0,Ce=H.isBatchedMesh===!0,Ee=!!M.map,Oe=!!M.matcap,ne=!!F,Le=!!M.aoMap,Fe=!!M.lightMap,Q=!!M.bumpMap,te=!!M.normalMap,Me=!!M.displacementMap,re=!!M.emissiveMap,V=!!M.metalnessMap,G=!!M.roughnessMap,le=M.anisotropy>0,_e=M.clearcoat>0,W=M.iridescence>0,Y=M.sheen>0,de=M.transmission>0,xe=le&&!!M.anisotropyMap,Ne=_e&&!!M.clearcoatMap,Be=_e&&!!M.clearcoatNormalMap,$e=_e&&!!M.clearcoatRoughnessMap,Ie=W&&!!M.iridescenceMap,Ye=W&&!!M.iridescenceThicknessMap,Ve=Y&&!!M.sheenColorMap,at=Y&&!!M.sheenRoughnessMap,tt=!!M.specularMap,Ze=!!M.specularColorMap,we=!!M.specularIntensityMap,B=de&&!!M.transmissionMap,se=de&&!!M.thicknessMap,Te=!!M.gradientMap,me=!!M.alphaMap,ve=M.alphaTest>0,Ke=!!M.alphaHash,lt=!!M.extensions,Dt=!!z.attributes.uv1,_t=!!z.attributes.uv2,an=!!z.attributes.uv3;let gn=Eo;return M.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(gn=t.toneMapping),{isWebGL2:c,shaderID:I,shaderType:M.type,shaderName:M.name,vertexShader:q,fragmentShader:ae,defines:M.defines,customVertexShaderID:be,customFragmentShaderID:ue,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:h,batching:Ce,instancing:Pe,instancingColor:Pe&&H.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:pe===null?t.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Ys,map:Ee,matcap:Oe,envMap:ne,envMapMode:ne&&F.mapping,envMapCubeUVHeight:U,aoMap:Le,lightMap:Fe,bumpMap:Q,normalMap:te,displacementMap:d&&Me,emissiveMap:re,normalMapObjectSpace:te&&M.normalMapType===R6,normalMapTangentSpace:te&&M.normalMapType===Mc,metalnessMap:V,roughnessMap:G,anisotropy:le,anisotropyMap:xe,clearcoat:_e,clearcoatMap:Ne,clearcoatNormalMap:Be,clearcoatRoughnessMap:$e,iridescence:W,iridescenceMap:Ie,iridescenceThicknessMap:Ye,sheen:Y,sheenColorMap:Ve,sheenRoughnessMap:at,specularMap:tt,specularColorMap:Ze,specularIntensityMap:we,transmission:de,transmissionMap:B,thicknessMap:se,gradientMap:Te,opaque:M.transparent===!1&&M.blending===Af,alphaMap:me,alphaTest:ve,alphaHash:Ke,combine:M.combine,mapUv:Ee&&v(M.map.channel),aoMapUv:Le&&v(M.aoMap.channel),lightMapUv:Fe&&v(M.lightMap.channel),bumpMapUv:Q&&v(M.bumpMap.channel),normalMapUv:te&&v(M.normalMap.channel),displacementMapUv:Me&&v(M.displacementMap.channel),emissiveMapUv:re&&v(M.emissiveMap.channel),metalnessMapUv:V&&v(M.metalnessMap.channel),roughnessMapUv:G&&v(M.roughnessMap.channel),anisotropyMapUv:xe&&v(M.anisotropyMap.channel),clearcoatMapUv:Ne&&v(M.clearcoatMap.channel),clearcoatNormalMapUv:Be&&v(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$e&&v(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Ie&&v(M.iridescenceMap.channel),iridescenceThicknessMapUv:Ye&&v(M.iridescenceThicknessMap.channel),sheenColorMapUv:Ve&&v(M.sheenColorMap.channel),sheenRoughnessMapUv:at&&v(M.sheenRoughnessMap.channel),specularMapUv:tt&&v(M.specularMap.channel),specularColorMapUv:Ze&&v(M.specularColorMap.channel),specularIntensityMapUv:we&&v(M.specularIntensityMap.channel),transmissionMapUv:B&&v(M.transmissionMap.channel),thicknessMapUv:se&&v(M.thicknessMap.channel),alphaMapUv:me&&v(M.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(te||le),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,vertexUv1s:Dt,vertexUv2s:_t,vertexUv3s:an,pointsUvs:H.isPoints===!0&&!!z.attributes.uv&&(Ee||me),fog:!!L,useFog:M.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:H.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:J,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:M.dithering,shadowMapEnabled:t.shadowMap.enabled&&N.length>0,shadowMapType:t.shadowMap.type,toneMapping:gn,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Ee&&M.map.isVideoTexture===!0&&Yn.getTransfer(M.map.colorSpace)===cr,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ri,flipSided:M.side===ai,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:lt&&M.extensions.derivatives===!0,extensionFragDepth:lt&&M.extensions.fragDepth===!0,extensionDrawBuffers:lt&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:lt&&M.extensions.shaderTextureLOD===!0,extensionClipCullDistance:lt&&M.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()}}function p(M){const C=[];if(M.shaderID?C.push(M.shaderID):(C.push(M.customVertexShaderID),C.push(M.customFragmentShaderID)),M.defines!==void 0)for(const N in M.defines)C.push(N),C.push(M.defines[N]);return M.isRawShaderMaterial===!1&&(x(C,M),g(C,M),C.push(t.outputColorSpace)),C.push(M.customProgramCacheKey),C.join()}function x(M,C){M.push(C.precision),M.push(C.outputColorSpace),M.push(C.envMapMode),M.push(C.envMapCubeUVHeight),M.push(C.mapUv),M.push(C.alphaMapUv),M.push(C.lightMapUv),M.push(C.aoMapUv),M.push(C.bumpMapUv),M.push(C.normalMapUv),M.push(C.displacementMapUv),M.push(C.emissiveMapUv),M.push(C.metalnessMapUv),M.push(C.roughnessMapUv),M.push(C.anisotropyMapUv),M.push(C.clearcoatMapUv),M.push(C.clearcoatNormalMapUv),M.push(C.clearcoatRoughnessMapUv),M.push(C.iridescenceMapUv),M.push(C.iridescenceThicknessMapUv),M.push(C.sheenColorMapUv),M.push(C.sheenRoughnessMapUv),M.push(C.specularMapUv),M.push(C.specularColorMapUv),M.push(C.specularIntensityMapUv),M.push(C.transmissionMapUv),M.push(C.thicknessMapUv),M.push(C.combine),M.push(C.fogExp2),M.push(C.sizeAttenuation),M.push(C.morphTargetsCount),M.push(C.morphAttributeCount),M.push(C.numDirLights),M.push(C.numPointLights),M.push(C.numSpotLights),M.push(C.numSpotLightMaps),M.push(C.numHemiLights),M.push(C.numRectAreaLights),M.push(C.numDirLightShadows),M.push(C.numPointLightShadows),M.push(C.numSpotLightShadows),M.push(C.numSpotLightShadowsWithMaps),M.push(C.numLightProbes),M.push(C.shadowMapType),M.push(C.toneMapping),M.push(C.numClippingPlanes),M.push(C.numClipIntersection),M.push(C.depthPacking)}function g(M,C){o.disableAll(),C.isWebGL2&&o.enable(0),C.supportsVertexTextures&&o.enable(1),C.instancing&&o.enable(2),C.instancingColor&&o.enable(3),C.matcap&&o.enable(4),C.envMap&&o.enable(5),C.normalMapObjectSpace&&o.enable(6),C.normalMapTangentSpace&&o.enable(7),C.clearcoat&&o.enable(8),C.iridescence&&o.enable(9),C.alphaTest&&o.enable(10),C.vertexColors&&o.enable(11),C.vertexAlphas&&o.enable(12),C.vertexUv1s&&o.enable(13),C.vertexUv2s&&o.enable(14),C.vertexUv3s&&o.enable(15),C.vertexTangents&&o.enable(16),C.anisotropy&&o.enable(17),C.alphaHash&&o.enable(18),C.batching&&o.enable(19),M.push(o.mask),o.disableAll(),C.fog&&o.enable(0),C.useFog&&o.enable(1),C.flatShading&&o.enable(2),C.logarithmicDepthBuffer&&o.enable(3),C.skinning&&o.enable(4),C.morphTargets&&o.enable(5),C.morphNormals&&o.enable(6),C.morphColors&&o.enable(7),C.premultipliedAlpha&&o.enable(8),C.shadowMapEnabled&&o.enable(9),C.useLegacyLights&&o.enable(10),C.doubleSided&&o.enable(11),C.flipSided&&o.enable(12),C.useDepthPacking&&o.enable(13),C.dithering&&o.enable(14),C.transmission&&o.enable(15),C.sheen&&o.enable(16),C.opaque&&o.enable(17),C.pointsUvs&&o.enable(18),C.decodeVideoTexture&&o.enable(19),M.push(o.mask)}function S(M){const C=m[M.type];let N;if(C){const P=mo[C];N=jT.clone(P.uniforms)}else N=M.uniforms;return N}function E(M,C){let N;for(let P=0,H=l.length;P<H;P++){const L=l[P];if(L.cacheKey===C){N=L,++N.usedTimes;break}}return N===void 0&&(N=new vte(t,C,M,a),l.push(N)),N}function _(M){if(--M.usedTimes===0){const C=l.indexOf(M);l[C]=l[l.length-1],l.pop(),M.destroy()}}function A(M){u.remove(M)}function T(){u.dispose()}return{getParameters:y,getProgramCacheKey:p,getUniforms:S,acquireProgram:E,releaseProgram:_,releaseShaderCache:A,programs:l,dispose:T}}function wte(){let t=new WeakMap;function e(a){let s=t.get(a);return s===void 0&&(s={},t.set(a,s)),s}function n(a){t.delete(a)}function r(a,s,o){t.get(a)[s]=o}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function Ste(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function TI(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function DI(){const t=[];let e=0;const n=[],r=[],i=[];function a(){e=0,n.length=0,r.length=0,i.length=0}function s(f,d,h,m,v,y){let p=t[e];return p===void 0?(p={id:f.id,object:f,geometry:d,material:h,groupOrder:m,renderOrder:f.renderOrder,z:v,group:y},t[e]=p):(p.id=f.id,p.object=f,p.geometry=d,p.material=h,p.groupOrder=m,p.renderOrder=f.renderOrder,p.z=v,p.group=y),e++,p}function o(f,d,h,m,v,y){const p=s(f,d,h,m,v,y);h.transmission>0?r.push(p):h.transparent===!0?i.push(p):n.push(p)}function u(f,d,h,m,v,y){const p=s(f,d,h,m,v,y);h.transmission>0?r.unshift(p):h.transparent===!0?i.unshift(p):n.unshift(p)}function l(f,d){n.length>1&&n.sort(f||Ste),r.length>1&&r.sort(d||TI),i.length>1&&i.sort(d||TI)}function c(){for(let f=e,d=t.length;f<d;f++){const h=t[f];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:o,unshift:u,finish:c,sort:l}}function _te(){let t=new WeakMap;function e(r,i){const a=t.get(r);let s;return a===void 0?(s=new DI,t.set(r,[s])):i>=a.length?(s=new DI,a.push(s)):s=a[i],s}function n(){t=new WeakMap}return{get:e,dispose:n}}function Ete(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new fe,color:new ft};break;case"SpotLight":n={position:new fe,direction:new fe,color:new ft,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new fe,color:new ft,distance:0,decay:0};break;case"HemisphereLight":n={direction:new fe,skyColor:new ft,groundColor:new ft};break;case"RectAreaLight":n={color:new ft,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return t[e.id]=n,n}}}function Mte(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ate=0;function Cte(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Tte(t,e){const n=new Ete,r=Mte(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new fe);const a=new fe,s=new Ht,o=new Ht;function u(c,f){let d=0,h=0,m=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let v=0,y=0,p=0,x=0,g=0,S=0,E=0,_=0,A=0,T=0,M=0;c.sort(Cte);const C=f===!0?Math.PI:1;for(let P=0,H=c.length;P<H;P++){const L=c[P],z=L.color,O=L.intensity,F=L.distance,U=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)d+=z.r*O*C,h+=z.g*O*C,m+=z.b*O*C;else if(L.isLightProbe){for(let I=0;I<9;I++)i.probe[I].addScaledVector(L.sh.coefficients[I],O);M++}else if(L.isDirectionalLight){const I=n.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity*C),L.castShadow){const j=L.shadow,ee=r.get(L);ee.shadowBias=j.bias,ee.shadowNormalBias=j.normalBias,ee.shadowRadius=j.radius,ee.shadowMapSize=j.mapSize,i.directionalShadow[v]=ee,i.directionalShadowMap[v]=U,i.directionalShadowMatrix[v]=L.shadow.matrix,S++}i.directional[v]=I,v++}else if(L.isSpotLight){const I=n.get(L);I.position.setFromMatrixPosition(L.matrixWorld),I.color.copy(z).multiplyScalar(O*C),I.distance=F,I.coneCos=Math.cos(L.angle),I.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),I.decay=L.decay,i.spot[p]=I;const j=L.shadow;if(L.map&&(i.spotLightMap[A]=L.map,A++,j.updateMatrices(L),L.castShadow&&T++),i.spotLightMatrix[p]=j.matrix,L.castShadow){const ee=r.get(L);ee.shadowBias=j.bias,ee.shadowNormalBias=j.normalBias,ee.shadowRadius=j.radius,ee.shadowMapSize=j.mapSize,i.spotShadow[p]=ee,i.spotShadowMap[p]=U,_++}p++}else if(L.isRectAreaLight){const I=n.get(L);I.color.copy(z).multiplyScalar(O),I.halfWidth.set(L.width*.5,0,0),I.halfHeight.set(0,L.height*.5,0),i.rectArea[x]=I,x++}else if(L.isPointLight){const I=n.get(L);if(I.color.copy(L.color).multiplyScalar(L.intensity*C),I.distance=L.distance,I.decay=L.decay,L.castShadow){const j=L.shadow,ee=r.get(L);ee.shadowBias=j.bias,ee.shadowNormalBias=j.normalBias,ee.shadowRadius=j.radius,ee.shadowMapSize=j.mapSize,ee.shadowCameraNear=j.camera.near,ee.shadowCameraFar=j.camera.far,i.pointShadow[y]=ee,i.pointShadowMap[y]=U,i.pointShadowMatrix[y]=L.shadow.matrix,E++}i.point[y]=I,y++}else if(L.isHemisphereLight){const I=n.get(L);I.skyColor.copy(L.color).multiplyScalar(O*C),I.groundColor.copy(L.groundColor).multiplyScalar(O*C),i.hemi[g]=I,g++}}x>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=mt.LTC_FLOAT_1,i.rectAreaLTC2=mt.LTC_FLOAT_2):(i.rectAreaLTC1=mt.LTC_HALF_1,i.rectAreaLTC2=mt.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=mt.LTC_FLOAT_1,i.rectAreaLTC2=mt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=mt.LTC_HALF_1,i.rectAreaLTC2=mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=h,i.ambient[2]=m;const N=i.hash;(N.directionalLength!==v||N.pointLength!==y||N.spotLength!==p||N.rectAreaLength!==x||N.hemiLength!==g||N.numDirectionalShadows!==S||N.numPointShadows!==E||N.numSpotShadows!==_||N.numSpotMaps!==A||N.numLightProbes!==M)&&(i.directional.length=v,i.spot.length=p,i.rectArea.length=x,i.point.length=y,i.hemi.length=g,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=_,i.spotShadowMap.length=_,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=_+A-T,i.spotLightMap.length=A,i.numSpotLightShadowsWithMaps=T,i.numLightProbes=M,N.directionalLength=v,N.pointLength=y,N.spotLength=p,N.rectAreaLength=x,N.hemiLength=g,N.numDirectionalShadows=S,N.numPointShadows=E,N.numSpotShadows=_,N.numSpotMaps=A,N.numLightProbes=M,i.version=Ate++)}function l(c,f){let d=0,h=0,m=0,v=0,y=0;const p=f.matrixWorldInverse;for(let x=0,g=c.length;x<g;x++){const S=c[x];if(S.isDirectionalLight){const E=i.directional[d];E.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(p),d++}else if(S.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),E.direction.setFromMatrixPosition(S.matrixWorld),a.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(a),E.direction.transformDirection(p),m++}else if(S.isRectAreaLight){const E=i.rectArea[v];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),o.identity(),s.copy(S.matrixWorld),s.premultiply(p),o.extractRotation(s),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const E=i.point[h];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(p),h++}else if(S.isHemisphereLight){const E=i.hemi[y];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(p),y++}}}return{setup:u,setupView:l,state:i}}function NI(t,e){const n=new Tte(t,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(f){r.push(f)}function o(f){i.push(f)}function u(f){n.setup(r,f)}function l(f){n.setupView(r,f)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:u,setupLightsView:l,pushLight:s,pushShadow:o}}function Dte(t,e){let n=new WeakMap;function r(a,s=0){const o=n.get(a);let u;return o===void 0?(u=new NI(t,e),n.set(a,[u])):s>=o.length?(u=new NI(t,e),o.push(u)):u=o[s],u}function i(){n=new WeakMap}return{get:r,dispose:i}}class ZT extends li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ec,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class KT extends li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Nte=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Rte=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Pte(t,e,n){let r=new Xg;const i=new qe,a=new qe,s=new Wn,o=new ZT({depthPacking:N6}),u=new KT,l={},c=n.maxTextureSize,f={[ss]:ai,[ai]:ss,[ri]:ri},d=new Xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:Nte,fragmentShader:Rte}),h=d.clone();h.defines.HORIZONTAL_PASS=1;const m=new Jt;m.setAttribute("position",new dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new qr(m,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vw;let p=this.type;this.render=function(_,A,T){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||_.length===0)return;const M=t.getRenderTarget(),C=t.getActiveCubeFace(),N=t.getActiveMipmapLevel(),P=t.state;P.setBlending(ea),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const H=p!==fo&&this.type===fo,L=p===fo&&this.type!==fo;for(let z=0,O=_.length;z<O;z++){const F=_[z],U=F.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",F,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;i.copy(U.mapSize);const I=U.getFrameExtents();if(i.multiply(I),a.copy(U.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/I.x),i.x=a.x*I.x,U.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/I.y),i.y=a.y*I.y,U.mapSize.y=a.y)),U.map===null||H===!0||L===!0){const ee=this.type!==fo?{minFilter:mr,magFilter:mr}:{};U.map!==null&&U.map.dispose(),U.map=new jr(i.x,i.y,ee),U.map.texture.name=F.name+".shadowMap",U.camera.updateProjectionMatrix()}t.setRenderTarget(U.map),t.clear();const j=U.getViewportCount();for(let ee=0;ee<j;ee++){const J=U.getViewport(ee);s.set(a.x*J.x,a.y*J.y,a.x*J.z,a.y*J.w),P.viewport(s),U.updateMatrices(F,ee),r=U.getFrustum(),S(A,T,U.camera,F,this.type)}U.isPointLightShadow!==!0&&this.type===fo&&x(U,T),U.needsUpdate=!1}p=this.type,y.needsUpdate=!1,t.setRenderTarget(M,C,N)};function x(_,A){const T=e.update(v);d.defines.VSM_SAMPLES!==_.blurSamples&&(d.defines.VSM_SAMPLES=_.blurSamples,h.defines.VSM_SAMPLES=_.blurSamples,d.needsUpdate=!0,h.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new jr(i.x,i.y)),d.uniforms.shadow_pass.value=_.map.texture,d.uniforms.resolution.value=_.mapSize,d.uniforms.radius.value=_.radius,t.setRenderTarget(_.mapPass),t.clear(),t.renderBufferDirect(A,null,T,d,v,null),h.uniforms.shadow_pass.value=_.mapPass.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,t.setRenderTarget(_.map),t.clear(),t.renderBufferDirect(A,null,T,h,v,null)}function g(_,A,T,M){let C=null;const N=T.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(N!==void 0)C=N;else if(C=T.isPointLight===!0?u:o,t.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const P=C.uuid,H=A.uuid;let L=l[P];L===void 0&&(L={},l[P]=L);let z=L[H];z===void 0&&(z=C.clone(),L[H]=z,A.addEventListener("dispose",E)),C=z}if(C.visible=A.visible,C.wireframe=A.wireframe,M===fo?C.side=A.shadowSide!==null?A.shadowSide:A.side:C.side=A.shadowSide!==null?A.shadowSide:f[A.side],C.alphaMap=A.alphaMap,C.alphaTest=A.alphaTest,C.map=A.map,C.clipShadows=A.clipShadows,C.clippingPlanes=A.clippingPlanes,C.clipIntersection=A.clipIntersection,C.displacementMap=A.displacementMap,C.displacementScale=A.displacementScale,C.displacementBias=A.displacementBias,C.wireframeLinewidth=A.wireframeLinewidth,C.linewidth=A.linewidth,T.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const P=t.properties.get(C);P.light=T}return C}function S(_,A,T,M,C){if(_.visible===!1)return;if(_.layers.test(A.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&C===fo)&&(!_.frustumCulled||r.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,_.matrixWorld);const H=e.update(_),L=_.material;if(Array.isArray(L)){const z=H.groups;for(let O=0,F=z.length;O<F;O++){const U=z[O],I=L[U.materialIndex];if(I&&I.visible){const j=g(_,I,M,C);_.onBeforeShadow(t,_,A,T,H,j,U),t.renderBufferDirect(T,null,H,j,_,U),_.onAfterShadow(t,_,A,T,H,j,U)}}}else if(L.visible){const z=g(_,L,M,C);_.onBeforeShadow(t,_,A,T,H,z,null),t.renderBufferDirect(T,null,H,z,_,null),_.onAfterShadow(t,_,A,T,H,z,null)}}const P=_.children;for(let H=0,L=P.length;H<L;H++)S(P[H],A,T,M,C)}function E(_){_.target.removeEventListener("dispose",E);for(const T in l){const M=l[T],C=_.target.uuid;C in M&&(M[C].dispose(),delete M[C])}}}function Ite(t,e,n){const r=n.isWebGL2;function i(){let ve=!1;const Ke=new Wn;let lt=null;const Dt=new Wn(0,0,0,0);return{setMask:function(_t){lt!==_t&&!ve&&(t.colorMask(_t,_t,_t,_t),lt=_t)},setLocked:function(_t){ve=_t},setClear:function(_t,an,gn,Vn,rr){rr===!0&&(_t*=Vn,an*=Vn,gn*=Vn),Ke.set(_t,an,gn,Vn),Dt.equals(Ke)===!1&&(t.clearColor(_t,an,gn,Vn),Dt.copy(Ke))},reset:function(){ve=!1,lt=null,Dt.set(-1,0,0,0)}}}function a(){let ve=!1,Ke=null,lt=null,Dt=null;return{setTest:function(_t){_t?Ce(t.DEPTH_TEST):Ee(t.DEPTH_TEST)},setMask:function(_t){Ke!==_t&&!ve&&(t.depthMask(_t),Ke=_t)},setFunc:function(_t){if(lt!==_t){switch(_t){case a6:t.depthFunc(t.NEVER);break;case s6:t.depthFunc(t.ALWAYS);break;case o6:t.depthFunc(t.LESS);break;case Zv:t.depthFunc(t.LEQUAL);break;case u6:t.depthFunc(t.EQUAL);break;case l6:t.depthFunc(t.GEQUAL);break;case c6:t.depthFunc(t.GREATER);break;case f6:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}lt=_t}},setLocked:function(_t){ve=_t},setClear:function(_t){Dt!==_t&&(t.clearDepth(_t),Dt=_t)},reset:function(){ve=!1,Ke=null,lt=null,Dt=null}}}function s(){let ve=!1,Ke=null,lt=null,Dt=null,_t=null,an=null,gn=null,Vn=null,rr=null;return{setTest:function(Sn){ve||(Sn?Ce(t.STENCIL_TEST):Ee(t.STENCIL_TEST))},setMask:function(Sn){Ke!==Sn&&!ve&&(t.stencilMask(Sn),Ke=Sn)},setFunc:function(Sn,$r,Fi){(lt!==Sn||Dt!==$r||_t!==Fi)&&(t.stencilFunc(Sn,$r,Fi),lt=Sn,Dt=$r,_t=Fi)},setOp:function(Sn,$r,Fi){(an!==Sn||gn!==$r||Vn!==Fi)&&(t.stencilOp(Sn,$r,Fi),an=Sn,gn=$r,Vn=Fi)},setLocked:function(Sn){ve=Sn},setClear:function(Sn){rr!==Sn&&(t.clearStencil(Sn),rr=Sn)},reset:function(){ve=!1,Ke=null,lt=null,Dt=null,_t=null,an=null,gn=null,Vn=null,rr=null}}}const o=new i,u=new a,l=new s,c=new WeakMap,f=new WeakMap;let d={},h={},m=new WeakMap,v=[],y=null,p=!1,x=null,g=null,S=null,E=null,_=null,A=null,T=null,M=new ft(0,0,0),C=0,N=!1,P=null,H=null,L=null,z=null,O=null;const F=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,I=0;const j=t.getParameter(t.VERSION);j.indexOf("WebGL")!==-1?(I=parseFloat(/^WebGL (\d)/.exec(j)[1]),U=I>=1):j.indexOf("OpenGL ES")!==-1&&(I=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),U=I>=2);let ee=null,J={};const q=t.getParameter(t.SCISSOR_BOX),ae=t.getParameter(t.VIEWPORT),be=new Wn().fromArray(q),ue=new Wn().fromArray(ae);function pe(ve,Ke,lt,Dt){const _t=new Uint8Array(4),an=t.createTexture();t.bindTexture(ve,an),t.texParameteri(ve,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ve,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let gn=0;gn<lt;gn++)r&&(ve===t.TEXTURE_3D||ve===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ke,0,t.RGBA,1,1,Dt,0,t.RGBA,t.UNSIGNED_BYTE,_t):t.texImage2D(Ke+gn,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,_t);return an}const Pe={};Pe[t.TEXTURE_2D]=pe(t.TEXTURE_2D,t.TEXTURE_2D,1),Pe[t.TEXTURE_CUBE_MAP]=pe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Pe[t.TEXTURE_2D_ARRAY]=pe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Pe[t.TEXTURE_3D]=pe(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),u.setClear(1),l.setClear(0),Ce(t.DEPTH_TEST),u.setFunc(Zv),re(!1),V(PA),Ce(t.CULL_FACE),te(ea);function Ce(ve){d[ve]!==!0&&(t.enable(ve),d[ve]=!0)}function Ee(ve){d[ve]!==!1&&(t.disable(ve),d[ve]=!1)}function Oe(ve,Ke){return h[ve]!==Ke?(t.bindFramebuffer(ve,Ke),h[ve]=Ke,r&&(ve===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=Ke),ve===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=Ke)),!0):!1}function ne(ve,Ke){let lt=v,Dt=!1;if(ve)if(lt=m.get(Ke),lt===void 0&&(lt=[],m.set(Ke,lt)),ve.isWebGLMultipleRenderTargets){const _t=ve.texture;if(lt.length!==_t.length||lt[0]!==t.COLOR_ATTACHMENT0){for(let an=0,gn=_t.length;an<gn;an++)lt[an]=t.COLOR_ATTACHMENT0+an;lt.length=_t.length,Dt=!0}}else lt[0]!==t.COLOR_ATTACHMENT0&&(lt[0]=t.COLOR_ATTACHMENT0,Dt=!0);else lt[0]!==t.BACK&&(lt[0]=t.BACK,Dt=!0);Dt&&(n.isWebGL2?t.drawBuffers(lt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(lt))}function Le(ve){return y!==ve?(t.useProgram(ve),y=ve,!0):!1}const Fe={[Hl]:t.FUNC_ADD,[V8]:t.FUNC_SUBTRACT,[W8]:t.FUNC_REVERSE_SUBTRACT};if(r)Fe[LA]=t.MIN,Fe[BA]=t.MAX;else{const ve=e.get("EXT_blend_minmax");ve!==null&&(Fe[LA]=ve.MIN_EXT,Fe[BA]=ve.MAX_EXT)}const Q={[q8]:t.ZERO,[j8]:t.ONE,[X8]:t.SRC_COLOR,[tb]:t.SRC_ALPHA,[e6]:t.SRC_ALPHA_SATURATE,[Q8]:t.DST_COLOR,[Z8]:t.DST_ALPHA,[Y8]:t.ONE_MINUS_SRC_COLOR,[nb]:t.ONE_MINUS_SRC_ALPHA,[J8]:t.ONE_MINUS_DST_COLOR,[K8]:t.ONE_MINUS_DST_ALPHA,[t6]:t.CONSTANT_COLOR,[n6]:t.ONE_MINUS_CONSTANT_COLOR,[r6]:t.CONSTANT_ALPHA,[i6]:t.ONE_MINUS_CONSTANT_ALPHA};function te(ve,Ke,lt,Dt,_t,an,gn,Vn,rr,Sn){if(ve===ea){p===!0&&(Ee(t.BLEND),p=!1);return}if(p===!1&&(Ce(t.BLEND),p=!0),ve!==G8){if(ve!==x||Sn!==N){if((g!==Hl||_!==Hl)&&(t.blendEquation(t.FUNC_ADD),g=Hl,_=Hl),Sn)switch(ve){case Af:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case IA:t.blendFunc(t.ONE,t.ONE);break;case OA:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FA:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}else switch(ve){case Af:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case IA:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case OA:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case FA:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ve);break}S=null,E=null,A=null,T=null,M.set(0,0,0),C=0,x=ve,N=Sn}return}_t=_t||Ke,an=an||lt,gn=gn||Dt,(Ke!==g||_t!==_)&&(t.blendEquationSeparate(Fe[Ke],Fe[_t]),g=Ke,_=_t),(lt!==S||Dt!==E||an!==A||gn!==T)&&(t.blendFuncSeparate(Q[lt],Q[Dt],Q[an],Q[gn]),S=lt,E=Dt,A=an,T=gn),(Vn.equals(M)===!1||rr!==C)&&(t.blendColor(Vn.r,Vn.g,Vn.b,rr),M.copy(Vn),C=rr),x=ve,N=!1}function Me(ve,Ke){ve.side===ri?Ee(t.CULL_FACE):Ce(t.CULL_FACE);let lt=ve.side===ai;Ke&&(lt=!lt),re(lt),ve.blending===Af&&ve.transparent===!1?te(ea):te(ve.blending,ve.blendEquation,ve.blendSrc,ve.blendDst,ve.blendEquationAlpha,ve.blendSrcAlpha,ve.blendDstAlpha,ve.blendColor,ve.blendAlpha,ve.premultipliedAlpha),u.setFunc(ve.depthFunc),u.setTest(ve.depthTest),u.setMask(ve.depthWrite),o.setMask(ve.colorWrite);const Dt=ve.stencilWrite;l.setTest(Dt),Dt&&(l.setMask(ve.stencilWriteMask),l.setFunc(ve.stencilFunc,ve.stencilRef,ve.stencilFuncMask),l.setOp(ve.stencilFail,ve.stencilZFail,ve.stencilZPass)),le(ve.polygonOffset,ve.polygonOffsetFactor,ve.polygonOffsetUnits),ve.alphaToCoverage===!0?Ce(t.SAMPLE_ALPHA_TO_COVERAGE):Ee(t.SAMPLE_ALPHA_TO_COVERAGE)}function re(ve){P!==ve&&(ve?t.frontFace(t.CW):t.frontFace(t.CCW),P=ve)}function V(ve){ve!==k8?(Ce(t.CULL_FACE),ve!==H&&(ve===PA?t.cullFace(t.BACK):ve===$8?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ee(t.CULL_FACE),H=ve}function G(ve){ve!==L&&(U&&t.lineWidth(ve),L=ve)}function le(ve,Ke,lt){ve?(Ce(t.POLYGON_OFFSET_FILL),(z!==Ke||O!==lt)&&(t.polygonOffset(Ke,lt),z=Ke,O=lt)):Ee(t.POLYGON_OFFSET_FILL)}function _e(ve){ve?Ce(t.SCISSOR_TEST):Ee(t.SCISSOR_TEST)}function W(ve){ve===void 0&&(ve=t.TEXTURE0+F-1),ee!==ve&&(t.activeTexture(ve),ee=ve)}function Y(ve,Ke,lt){lt===void 0&&(ee===null?lt=t.TEXTURE0+F-1:lt=ee);let Dt=J[lt];Dt===void 0&&(Dt={type:void 0,texture:void 0},J[lt]=Dt),(Dt.type!==ve||Dt.texture!==Ke)&&(ee!==lt&&(t.activeTexture(lt),ee=lt),t.bindTexture(ve,Ke||Pe[ve]),Dt.type=ve,Dt.texture=Ke)}function de(){const ve=J[ee];ve!==void 0&&ve.type!==void 0&&(t.bindTexture(ve.type,null),ve.type=void 0,ve.texture=void 0)}function xe(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ne(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Be(){try{t.texSubImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function $e(){try{t.texSubImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ie(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ye(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ve(){try{t.texStorage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function at(){try{t.texStorage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function tt(){try{t.texImage2D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function Ze(){try{t.texImage3D.apply(t,arguments)}catch(ve){console.error("THREE.WebGLState:",ve)}}function we(ve){be.equals(ve)===!1&&(t.scissor(ve.x,ve.y,ve.z,ve.w),be.copy(ve))}function B(ve){ue.equals(ve)===!1&&(t.viewport(ve.x,ve.y,ve.z,ve.w),ue.copy(ve))}function se(ve,Ke){let lt=f.get(Ke);lt===void 0&&(lt=new WeakMap,f.set(Ke,lt));let Dt=lt.get(ve);Dt===void 0&&(Dt=t.getUniformBlockIndex(Ke,ve.name),lt.set(ve,Dt))}function Te(ve,Ke){const Dt=f.get(Ke).get(ve);c.get(Ke)!==Dt&&(t.uniformBlockBinding(Ke,Dt,ve.__bindingPointIndex),c.set(Ke,Dt))}function me(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},ee=null,J={},h={},m=new WeakMap,v=[],y=null,p=!1,x=null,g=null,S=null,E=null,_=null,A=null,T=null,M=new ft(0,0,0),C=0,N=!1,P=null,H=null,L=null,z=null,O=null,be.set(0,0,t.canvas.width,t.canvas.height),ue.set(0,0,t.canvas.width,t.canvas.height),o.reset(),u.reset(),l.reset()}return{buffers:{color:o,depth:u,stencil:l},enable:Ce,disable:Ee,bindFramebuffer:Oe,drawBuffers:ne,useProgram:Le,setBlending:te,setMaterial:Me,setFlipSided:re,setCullFace:V,setLineWidth:G,setPolygonOffset:le,setScissorTest:_e,activeTexture:W,bindTexture:Y,unbindTexture:de,compressedTexImage2D:xe,compressedTexImage3D:Ne,texImage2D:tt,texImage3D:Ze,updateUBOMapping:se,uniformBlockBinding:Te,texStorage2D:Ve,texStorage3D:at,texSubImage2D:Be,texSubImage3D:$e,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Ye,scissor:we,viewport:B,reset:me}}function Ote(t,e,n,r,i,a,s){const o=i.isWebGL2,u=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let f;const d=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(V,G){return h?new OffscreenCanvas(V,G):og("canvas")}function v(V,G,le,_e){let W=1;if((V.width>_e||V.height>_e)&&(W=_e/Math.max(V.width,V.height)),W<1||G===!0)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap){const Y=G?ab:Math.floor,de=Y(W*V.width),xe=Y(W*V.height);f===void 0&&(f=m(de,xe));const Ne=le?m(de,xe):f;return Ne.width=de,Ne.height=xe,Ne.getContext("2d").drawImage(V,0,0,de,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+V.width+"x"+V.height+") to ("+de+"x"+xe+")."),Ne}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+V.width+"x"+V.height+")."),V;return V}function y(V){return d2(V.width)&&d2(V.height)}function p(V){return o?!1:V.wrapS!==Yi||V.wrapT!==Yi||V.minFilter!==mr&&V.minFilter!==Qn}function x(V,G){return V.generateMipmaps&&G&&V.minFilter!==mr&&V.minFilter!==Qn}function g(V){t.generateMipmap(V)}function S(V,G,le,_e,W=!1){if(o===!1)return G;if(V!==null){if(t[V]!==void 0)return t[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Y=G;if(G===t.RED&&(le===t.FLOAT&&(Y=t.R32F),le===t.HALF_FLOAT&&(Y=t.R16F),le===t.UNSIGNED_BYTE&&(Y=t.R8)),G===t.RED_INTEGER&&(le===t.UNSIGNED_BYTE&&(Y=t.R8UI),le===t.UNSIGNED_SHORT&&(Y=t.R16UI),le===t.UNSIGNED_INT&&(Y=t.R32UI),le===t.BYTE&&(Y=t.R8I),le===t.SHORT&&(Y=t.R16I),le===t.INT&&(Y=t.R32I)),G===t.RG&&(le===t.FLOAT&&(Y=t.RG32F),le===t.HALF_FLOAT&&(Y=t.RG16F),le===t.UNSIGNED_BYTE&&(Y=t.RG8)),G===t.RGBA){const de=W?rg:Yn.getTransfer(_e);le===t.FLOAT&&(Y=t.RGBA32F),le===t.HALF_FLOAT&&(Y=t.RGBA16F),le===t.UNSIGNED_BYTE&&(Y=de===cr?t.SRGB8_ALPHA8:t.RGBA8),le===t.UNSIGNED_SHORT_4_4_4_4&&(Y=t.RGBA4),le===t.UNSIGNED_SHORT_5_5_5_1&&(Y=t.RGB5_A1)}return(Y===t.R16F||Y===t.R32F||Y===t.RG16F||Y===t.RG32F||Y===t.RGBA16F||Y===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Y}function E(V,G,le){return x(V,le)===!0||V.isFramebufferTexture&&V.minFilter!==mr&&V.minFilter!==Qn?Math.log2(Math.max(G.width,G.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?G.mipmaps.length:1}function _(V){return V===mr||V===rb||V===gv?t.NEAREST:t.LINEAR}function A(V){const G=V.target;G.removeEventListener("dispose",A),M(G),G.isVideoTexture&&c.delete(G)}function T(V){const G=V.target;G.removeEventListener("dispose",T),N(G)}function M(V){const G=r.get(V);if(G.__webglInit===void 0)return;const le=V.source,_e=d.get(le);if(_e){const W=_e[G.__cacheKey];W.usedTimes--,W.usedTimes===0&&C(V),Object.keys(_e).length===0&&d.delete(le)}r.remove(V)}function C(V){const G=r.get(V);t.deleteTexture(G.__webglTexture);const le=V.source,_e=d.get(le);delete _e[G.__cacheKey],s.memory.textures--}function N(V){const G=V.texture,le=r.get(V),_e=r.get(G);if(_e.__webglTexture!==void 0&&(t.deleteTexture(_e.__webglTexture),s.memory.textures--),V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let W=0;W<6;W++){if(Array.isArray(le.__webglFramebuffer[W]))for(let Y=0;Y<le.__webglFramebuffer[W].length;Y++)t.deleteFramebuffer(le.__webglFramebuffer[W][Y]);else t.deleteFramebuffer(le.__webglFramebuffer[W]);le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[W])}else{if(Array.isArray(le.__webglFramebuffer))for(let W=0;W<le.__webglFramebuffer.length;W++)t.deleteFramebuffer(le.__webglFramebuffer[W]);else t.deleteFramebuffer(le.__webglFramebuffer);if(le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let W=0;W<le.__webglColorRenderbuffer.length;W++)le.__webglColorRenderbuffer[W]&&t.deleteRenderbuffer(le.__webglColorRenderbuffer[W]);le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(V.isWebGLMultipleRenderTargets)for(let W=0,Y=G.length;W<Y;W++){const de=r.get(G[W]);de.__webglTexture&&(t.deleteTexture(de.__webglTexture),s.memory.textures--),r.remove(G[W])}r.remove(G),r.remove(V)}let P=0;function H(){P=0}function L(){const V=P;return V>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+i.maxTextures),P+=1,V}function z(V){const G=[];return G.push(V.wrapS),G.push(V.wrapT),G.push(V.wrapR||0),G.push(V.magFilter),G.push(V.minFilter),G.push(V.anisotropy),G.push(V.internalFormat),G.push(V.format),G.push(V.type),G.push(V.generateMipmaps),G.push(V.premultiplyAlpha),G.push(V.flipY),G.push(V.unpackAlignment),G.push(V.colorSpace),G.join()}function O(V,G){const le=r.get(V);if(V.isVideoTexture&&Me(V),V.isRenderTargetTexture===!1&&V.version>0&&le.__version!==V.version){const _e=V.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(le,V,G);return}}n.bindTexture(t.TEXTURE_2D,le.__webglTexture,t.TEXTURE0+G)}function F(V,G){const le=r.get(V);if(V.version>0&&le.__version!==V.version){be(le,V,G);return}n.bindTexture(t.TEXTURE_2D_ARRAY,le.__webglTexture,t.TEXTURE0+G)}function U(V,G){const le=r.get(V);if(V.version>0&&le.__version!==V.version){be(le,V,G);return}n.bindTexture(t.TEXTURE_3D,le.__webglTexture,t.TEXTURE0+G)}function I(V,G){const le=r.get(V);if(V.version>0&&le.__version!==V.version){ue(le,V,G);return}n.bindTexture(t.TEXTURE_CUBE_MAP,le.__webglTexture,t.TEXTURE0+G)}const j={[Qv]:t.REPEAT,[Yi]:t.CLAMP_TO_EDGE,[Jv]:t.MIRRORED_REPEAT},ee={[mr]:t.NEAREST,[rb]:t.NEAREST_MIPMAP_NEAREST,[gv]:t.NEAREST_MIPMAP_LINEAR,[Qn]:t.LINEAR,[NT]:t.LINEAR_MIPMAP_NEAREST,[cc]:t.LINEAR_MIPMAP_LINEAR},J={[P6]:t.NEVER,[U6]:t.ALWAYS,[I6]:t.LESS,[$T]:t.LEQUAL,[O6]:t.EQUAL,[B6]:t.GEQUAL,[F6]:t.GREATER,[L6]:t.NOTEQUAL};function q(V,G,le){if(le?(t.texParameteri(V,t.TEXTURE_WRAP_S,j[G.wrapS]),t.texParameteri(V,t.TEXTURE_WRAP_T,j[G.wrapT]),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,j[G.wrapR]),t.texParameteri(V,t.TEXTURE_MAG_FILTER,ee[G.magFilter]),t.texParameteri(V,t.TEXTURE_MIN_FILTER,ee[G.minFilter])):(t.texParameteri(V,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(V,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(G.wrapS!==Yi||G.wrapT!==Yi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(V,t.TEXTURE_MAG_FILTER,_(G.magFilter)),t.texParameteri(V,t.TEXTURE_MIN_FILTER,_(G.minFilter)),G.minFilter!==mr&&G.minFilter!==Qn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),G.compareFunction&&(t.texParameteri(V,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(V,t.TEXTURE_COMPARE_FUNC,J[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===mr||G.minFilter!==gv&&G.minFilter!==cc||G.type===xi&&e.has("OES_texture_float_linear")===!1||o===!1&&G.type===Ki&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||r.get(G).__currentAnisotropy)&&(t.texParameterf(V,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy)}}function ae(V,G){let le=!1;V.__webglInit===void 0&&(V.__webglInit=!0,G.addEventListener("dispose",A));const _e=G.source;let W=d.get(_e);W===void 0&&(W={},d.set(_e,W));const Y=z(G);if(Y!==V.__cacheKey){W[Y]===void 0&&(W[Y]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,le=!0),W[Y].usedTimes++;const de=W[V.__cacheKey];de!==void 0&&(W[V.__cacheKey].usedTimes--,de.usedTimes===0&&C(G)),V.__cacheKey=Y,V.__webglTexture=W[Y].texture}return le}function be(V,G,le){let _e=t.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(_e=t.TEXTURE_2D_ARRAY),G.isData3DTexture&&(_e=t.TEXTURE_3D);const W=ae(V,G),Y=G.source;n.bindTexture(_e,V.__webglTexture,t.TEXTURE0+le);const de=r.get(Y);if(Y.version!==de.__version||W===!0){n.activeTexture(t.TEXTURE0+le);const xe=Yn.getPrimaries(Yn.workingColorSpace),Ne=G.colorSpace===ma?null:Yn.getPrimaries(G.colorSpace),Be=G.colorSpace===ma||xe===Ne?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,G.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,G.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Be);const $e=p(G)&&y(G.image)===!1;let Ie=v(G.image,$e,!1,i.maxTextureSize);Ie=re(G,Ie);const Ye=y(Ie)||o,Ve=a.convert(G.format,G.colorSpace);let at=a.convert(G.type),tt=S(G.internalFormat,Ve,at,G.colorSpace,G.isVideoTexture);q(_e,G,Ye);let Ze;const we=G.mipmaps,B=o&&G.isVideoTexture!==!0&&tt!==UT,se=de.__version===void 0||W===!0,Te=E(G,Ie,Ye);if(G.isDepthTexture)tt=t.DEPTH_COMPONENT,o?G.type===xi?tt=t.DEPTH_COMPONENT32F:G.type===Qo?tt=t.DEPTH_COMPONENT24:G.type===Wu?tt=t.DEPTH24_STENCIL8:tt=t.DEPTH_COMPONENT16:G.type===xi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===ic&&tt===t.DEPTH_COMPONENT&&G.type!==yw&&G.type!==Qo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=Qo,at=a.convert(G.type)),G.format===fc&&tt===t.DEPTH_COMPONENT&&(tt=t.DEPTH_STENCIL,G.type!==Wu&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=Wu,at=a.convert(G.type))),se&&(B?n.texStorage2D(t.TEXTURE_2D,1,tt,Ie.width,Ie.height):n.texImage2D(t.TEXTURE_2D,0,tt,Ie.width,Ie.height,0,Ve,at,null));else if(G.isDataTexture)if(we.length>0&&Ye){B&&se&&n.texStorage2D(t.TEXTURE_2D,Te,tt,we[0].width,we[0].height);for(let me=0,ve=we.length;me<ve;me++)Ze=we[me],B?n.texSubImage2D(t.TEXTURE_2D,me,0,0,Ze.width,Ze.height,Ve,at,Ze.data):n.texImage2D(t.TEXTURE_2D,me,tt,Ze.width,Ze.height,0,Ve,at,Ze.data);G.generateMipmaps=!1}else B?(se&&n.texStorage2D(t.TEXTURE_2D,Te,tt,Ie.width,Ie.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ie.width,Ie.height,Ve,at,Ie.data)):n.texImage2D(t.TEXTURE_2D,0,tt,Ie.width,Ie.height,0,Ve,at,Ie.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){B&&se&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Te,tt,we[0].width,we[0].height,Ie.depth);for(let me=0,ve=we.length;me<ve;me++)Ze=we[me],G.format!==Zi?Ve!==null?B?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,me,0,0,0,Ze.width,Ze.height,Ie.depth,Ve,Ze.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,me,tt,Ze.width,Ze.height,Ie.depth,0,Ze.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):B?n.texSubImage3D(t.TEXTURE_2D_ARRAY,me,0,0,0,Ze.width,Ze.height,Ie.depth,Ve,at,Ze.data):n.texImage3D(t.TEXTURE_2D_ARRAY,me,tt,Ze.width,Ze.height,Ie.depth,0,Ve,at,Ze.data)}else{B&&se&&n.texStorage2D(t.TEXTURE_2D,Te,tt,we[0].width,we[0].height);for(let me=0,ve=we.length;me<ve;me++)Ze=we[me],G.format!==Zi?Ve!==null?B?n.compressedTexSubImage2D(t.TEXTURE_2D,me,0,0,Ze.width,Ze.height,Ve,Ze.data):n.compressedTexImage2D(t.TEXTURE_2D,me,tt,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):B?n.texSubImage2D(t.TEXTURE_2D,me,0,0,Ze.width,Ze.height,Ve,at,Ze.data):n.texImage2D(t.TEXTURE_2D,me,tt,Ze.width,Ze.height,0,Ve,at,Ze.data)}else if(G.isDataArrayTexture)B?(se&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Te,tt,Ie.width,Ie.height,Ie.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ve,at,Ie.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,tt,Ie.width,Ie.height,Ie.depth,0,Ve,at,Ie.data);else if(G.isData3DTexture)B?(se&&n.texStorage3D(t.TEXTURE_3D,Te,tt,Ie.width,Ie.height,Ie.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ve,at,Ie.data)):n.texImage3D(t.TEXTURE_3D,0,tt,Ie.width,Ie.height,Ie.depth,0,Ve,at,Ie.data);else if(G.isFramebufferTexture){if(se)if(B)n.texStorage2D(t.TEXTURE_2D,Te,tt,Ie.width,Ie.height);else{let me=Ie.width,ve=Ie.height;for(let Ke=0;Ke<Te;Ke++)n.texImage2D(t.TEXTURE_2D,Ke,tt,me,ve,0,Ve,at,null),me>>=1,ve>>=1}}else if(we.length>0&&Ye){B&&se&&n.texStorage2D(t.TEXTURE_2D,Te,tt,we[0].width,we[0].height);for(let me=0,ve=we.length;me<ve;me++)Ze=we[me],B?n.texSubImage2D(t.TEXTURE_2D,me,0,0,Ve,at,Ze):n.texImage2D(t.TEXTURE_2D,me,tt,Ve,at,Ze);G.generateMipmaps=!1}else B?(se&&n.texStorage2D(t.TEXTURE_2D,Te,tt,Ie.width,Ie.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ve,at,Ie)):n.texImage2D(t.TEXTURE_2D,0,tt,Ve,at,Ie);x(G,Ye)&&g(_e),de.__version=Y.version,G.onUpdate&&G.onUpdate(G)}V.__version=G.version}function ue(V,G,le){if(G.image.length!==6)return;const _e=ae(V,G),W=G.source;n.bindTexture(t.TEXTURE_CUBE_MAP,V.__webglTexture,t.TEXTURE0+le);const Y=r.get(W);if(W.version!==Y.__version||_e===!0){n.activeTexture(t.TEXTURE0+le);const de=Yn.getPrimaries(Yn.workingColorSpace),xe=G.colorSpace===ma?null:Yn.getPrimaries(G.colorSpace),Ne=G.colorSpace===ma||de===xe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,G.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,G.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const Be=G.isCompressedTexture||G.image[0].isCompressedTexture,$e=G.image[0]&&G.image[0].isDataTexture,Ie=[];for(let me=0;me<6;me++)!Be&&!$e?Ie[me]=v(G.image[me],!1,!0,i.maxCubemapSize):Ie[me]=$e?G.image[me].image:G.image[me],Ie[me]=re(G,Ie[me]);const Ye=Ie[0],Ve=y(Ye)||o,at=a.convert(G.format,G.colorSpace),tt=a.convert(G.type),Ze=S(G.internalFormat,at,tt,G.colorSpace),we=o&&G.isVideoTexture!==!0,B=Y.__version===void 0||_e===!0;let se=E(G,Ye,Ve);q(t.TEXTURE_CUBE_MAP,G,Ve);let Te;if(Be){we&&B&&n.texStorage2D(t.TEXTURE_CUBE_MAP,se,Ze,Ye.width,Ye.height);for(let me=0;me<6;me++){Te=Ie[me].mipmaps;for(let ve=0;ve<Te.length;ve++){const Ke=Te[ve];G.format!==Zi?at!==null?we?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve,0,0,Ke.width,Ke.height,at,Ke.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve,Ze,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):we?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve,0,0,Ke.width,Ke.height,at,tt,Ke.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve,Ze,Ke.width,Ke.height,0,at,tt,Ke.data)}}}else{Te=G.mipmaps,we&&B&&(Te.length>0&&se++,n.texStorage2D(t.TEXTURE_CUBE_MAP,se,Ze,Ie[0].width,Ie[0].height));for(let me=0;me<6;me++)if($e){we?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,Ie[me].width,Ie[me].height,at,tt,Ie[me].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,Ze,Ie[me].width,Ie[me].height,0,at,tt,Ie[me].data);for(let ve=0;ve<Te.length;ve++){const lt=Te[ve].image[me].image;we?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve+1,0,0,lt.width,lt.height,at,tt,lt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve+1,Ze,lt.width,lt.height,0,at,tt,lt.data)}}else{we?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,at,tt,Ie[me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,Ze,at,tt,Ie[me]);for(let ve=0;ve<Te.length;ve++){const Ke=Te[ve];we?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve+1,0,0,at,tt,Ke.image[me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve+1,Ze,at,tt,Ke.image[me])}}}x(G,Ve)&&g(t.TEXTURE_CUBE_MAP),Y.__version=W.version,G.onUpdate&&G.onUpdate(G)}V.__version=G.version}function pe(V,G,le,_e,W,Y){const de=a.convert(le.format,le.colorSpace),xe=a.convert(le.type),Ne=S(le.internalFormat,de,xe,le.colorSpace);if(!r.get(G).__hasExternalTextures){const $e=Math.max(1,G.width>>Y),Ie=Math.max(1,G.height>>Y);W===t.TEXTURE_3D||W===t.TEXTURE_2D_ARRAY?n.texImage3D(W,Y,Ne,$e,Ie,G.depth,0,de,xe,null):n.texImage2D(W,Y,Ne,$e,Ie,0,de,xe,null)}n.bindFramebuffer(t.FRAMEBUFFER,V),te(G)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,_e,W,r.get(le).__webglTexture,0,Q(G)):(W===t.TEXTURE_2D||W>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&W<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,_e,W,r.get(le).__webglTexture,Y),n.bindFramebuffer(t.FRAMEBUFFER,null)}function Pe(V,G,le){if(t.bindRenderbuffer(t.RENDERBUFFER,V),G.depthBuffer&&!G.stencilBuffer){let _e=o===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(le||te(G)){const W=G.depthTexture;W&&W.isDepthTexture&&(W.type===xi?_e=t.DEPTH_COMPONENT32F:W.type===Qo&&(_e=t.DEPTH_COMPONENT24));const Y=Q(G);te(G)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Y,_e,G.width,G.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Y,_e,G.width,G.height)}else t.renderbufferStorage(t.RENDERBUFFER,_e,G.width,G.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,V)}else if(G.depthBuffer&&G.stencilBuffer){const _e=Q(G);le&&te(G)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,_e,t.DEPTH24_STENCIL8,G.width,G.height):te(G)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,_e,t.DEPTH24_STENCIL8,G.width,G.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,G.width,G.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,V)}else{const _e=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let W=0;W<_e.length;W++){const Y=_e[W],de=a.convert(Y.format,Y.colorSpace),xe=a.convert(Y.type),Ne=S(Y.internalFormat,de,xe,Y.colorSpace),Be=Q(G);le&&te(G)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Be,Ne,G.width,G.height):te(G)?u.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Be,Ne,G.width,G.height):t.renderbufferStorage(t.RENDERBUFFER,Ne,G.width,G.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Ce(V,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,V),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),O(G.depthTexture,0);const _e=r.get(G.depthTexture).__webglTexture,W=Q(G);if(G.depthTexture.format===ic)te(G)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,_e,0,W):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,_e,0);else if(G.depthTexture.format===fc)te(G)?u.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,_e,0,W):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function Ee(V){const G=r.get(V),le=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!G.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");Ce(G.__webglFramebuffer,V)}else if(le){G.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)n.bindFramebuffer(t.FRAMEBUFFER,G.__webglFramebuffer[_e]),G.__webglDepthbuffer[_e]=t.createRenderbuffer(),Pe(G.__webglDepthbuffer[_e],V,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=t.createRenderbuffer(),Pe(G.__webglDepthbuffer,V,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Oe(V,G,le){const _e=r.get(V);G!==void 0&&pe(_e.__webglFramebuffer,V,V.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),le!==void 0&&Ee(V)}function ne(V){const G=V.texture,le=r.get(V),_e=r.get(G);V.addEventListener("dispose",T),V.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=t.createTexture()),_e.__version=G.version,s.memory.textures++);const W=V.isWebGLCubeRenderTarget===!0,Y=V.isWebGLMultipleRenderTargets===!0,de=y(V)||o;if(W){le.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(o&&G.mipmaps&&G.mipmaps.length>0){le.__webglFramebuffer[xe]=[];for(let Ne=0;Ne<G.mipmaps.length;Ne++)le.__webglFramebuffer[xe][Ne]=t.createFramebuffer()}else le.__webglFramebuffer[xe]=t.createFramebuffer()}else{if(o&&G.mipmaps&&G.mipmaps.length>0){le.__webglFramebuffer=[];for(let xe=0;xe<G.mipmaps.length;xe++)le.__webglFramebuffer[xe]=t.createFramebuffer()}else le.__webglFramebuffer=t.createFramebuffer();if(Y)if(i.drawBuffers){const xe=V.texture;for(let Ne=0,Be=xe.length;Ne<Be;Ne++){const $e=r.get(xe[Ne]);$e.__webglTexture===void 0&&($e.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&V.samples>0&&te(V)===!1){const xe=Y?G:[G];le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,le.__webglMultisampledFramebuffer);for(let Ne=0;Ne<xe.length;Ne++){const Be=xe[Ne];le.__webglColorRenderbuffer[Ne]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,le.__webglColorRenderbuffer[Ne]);const $e=a.convert(Be.format,Be.colorSpace),Ie=a.convert(Be.type),Ye=S(Be.internalFormat,$e,Ie,Be.colorSpace,V.isXRRenderTarget===!0),Ve=Q(V);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ve,Ye,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,le.__webglColorRenderbuffer[Ne])}t.bindRenderbuffer(t.RENDERBUFFER,null),V.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),Pe(le.__webglDepthRenderbuffer,V,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(W){n.bindTexture(t.TEXTURE_CUBE_MAP,_e.__webglTexture),q(t.TEXTURE_CUBE_MAP,G,de);for(let xe=0;xe<6;xe++)if(o&&G.mipmaps&&G.mipmaps.length>0)for(let Ne=0;Ne<G.mipmaps.length;Ne++)pe(le.__webglFramebuffer[xe][Ne],V,G,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,Ne);else pe(le.__webglFramebuffer[xe],V,G,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);x(G,de)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Y){const xe=V.texture;for(let Ne=0,Be=xe.length;Ne<Be;Ne++){const $e=xe[Ne],Ie=r.get($e);n.bindTexture(t.TEXTURE_2D,Ie.__webglTexture),q(t.TEXTURE_2D,$e,de),pe(le.__webglFramebuffer,V,$e,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,0),x($e,de)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let xe=t.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(o?xe=V.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(xe,_e.__webglTexture),q(xe,G,de),o&&G.mipmaps&&G.mipmaps.length>0)for(let Ne=0;Ne<G.mipmaps.length;Ne++)pe(le.__webglFramebuffer[Ne],V,G,t.COLOR_ATTACHMENT0,xe,Ne);else pe(le.__webglFramebuffer,V,G,t.COLOR_ATTACHMENT0,xe,0);x(G,de)&&g(xe),n.unbindTexture()}V.depthBuffer&&Ee(V)}function Le(V){const G=y(V)||o,le=V.isWebGLMultipleRenderTargets===!0?V.texture:[V.texture];for(let _e=0,W=le.length;_e<W;_e++){const Y=le[_e];if(x(Y,G)){const de=V.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,xe=r.get(Y).__webglTexture;n.bindTexture(de,xe),g(de),n.unbindTexture()}}}function Fe(V){if(o&&V.samples>0&&te(V)===!1){const G=V.isWebGLMultipleRenderTargets?V.texture:[V.texture],le=V.width,_e=V.height;let W=t.COLOR_BUFFER_BIT;const Y=[],de=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,xe=r.get(V),Ne=V.isWebGLMultipleRenderTargets===!0;if(Ne)for(let Be=0;Be<G.length;Be++)n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Be,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Be,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,xe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,xe.__webglFramebuffer);for(let Be=0;Be<G.length;Be++){Y.push(t.COLOR_ATTACHMENT0+Be),V.depthBuffer&&Y.push(de);const $e=xe.__ignoreDepthValues!==void 0?xe.__ignoreDepthValues:!1;if($e===!1&&(V.depthBuffer&&(W|=t.DEPTH_BUFFER_BIT),V.stencilBuffer&&(W|=t.STENCIL_BUFFER_BIT)),Ne&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,xe.__webglColorRenderbuffer[Be]),$e===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[de]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[de])),Ne){const Ie=r.get(G[Be]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ie,0)}t.blitFramebuffer(0,0,le,_e,0,0,le,_e,W,t.NEAREST),l&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Y)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ne)for(let Be=0;Be<G.length;Be++){n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Be,t.RENDERBUFFER,xe.__webglColorRenderbuffer[Be]);const $e=r.get(G[Be]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,xe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Be,t.TEXTURE_2D,$e,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,xe.__webglMultisampledFramebuffer)}}function Q(V){return Math.min(i.maxSamples,V.samples)}function te(V){const G=r.get(V);return o&&V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function Me(V){const G=s.render.frame;c.get(V)!==G&&(c.set(V,G),V.update())}function re(V,G){const le=V.colorSpace,_e=V.format,W=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||V.format===ib||le!==Ys&&le!==ma&&(Yn.getTransfer(le)===cr?o===!1?e.has("EXT_sRGB")===!0&&_e===Zi?(V.format=ib,V.minFilter=Qn,V.generateMipmaps=!1):G=GT.sRGBToLinear(G):(_e!==Zi||W!==Di)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",le)),G}this.allocateTextureUnit=L,this.resetTextureUnits=H,this.setTexture2D=O,this.setTexture2DArray=F,this.setTexture3D=U,this.setTextureCube=I,this.rebindTextures=Oe,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=Fe,this.setupDepthRenderbuffer=Ee,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=te}function K6(t,e,n){const r=n.isWebGL2;function i(a,s=ma){let o;const u=Yn.getTransfer(s);if(a===Di)return t.UNSIGNED_BYTE;if(a===PT)return t.UNSIGNED_SHORT_4_4_4_4;if(a===IT)return t.UNSIGNED_SHORT_5_5_5_1;if(a===b6)return t.BYTE;if(a===w6)return t.SHORT;if(a===yw)return t.UNSIGNED_SHORT;if(a===RT)return t.INT;if(a===Qo)return t.UNSIGNED_INT;if(a===xi)return t.FLOAT;if(a===Ki)return r?t.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===S6)return t.ALPHA;if(a===Zi)return t.RGBA;if(a===_6)return t.LUMINANCE;if(a===E6)return t.LUMINANCE_ALPHA;if(a===ic)return t.DEPTH_COMPONENT;if(a===fc)return t.DEPTH_STENCIL;if(a===ib)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===OT)return t.RED;if(a===FT)return t.RED_INTEGER;if(a===M6)return t.RG;if(a===LT)return t.RG_INTEGER;if(a===BT)return t.RGBA_INTEGER;if(a===gx||a===yx||a===xx||a===bx)if(u===cr)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===gx)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===yx)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===xx)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===bx)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===gx)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===yx)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===xx)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===bx)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===zA||a===kA||a===$A||a===HA)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===zA)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===kA)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===$A)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===HA)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===UT)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===GA||a===VA)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===GA)return u===cr?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===VA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===WA||a===qA||a===jA||a===XA||a===YA||a===ZA||a===KA||a===QA||a===JA||a===e2||a===t2||a===n2||a===r2||a===i2)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===WA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===qA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===jA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===XA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===YA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===ZA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===KA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===QA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===JA)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===e2)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===t2)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===n2)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===r2)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===i2)return u===cr?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===wx||a===a2||a===s2)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===wx)return u===cr?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(a===a2)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(a===s2)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(a===A6||a===o2||a===u2||a===l2)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(a===wx)return o.COMPRESSED_RED_RGTC1_EXT;if(a===o2)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(a===u2)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(a===l2)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return a===Wu?r?t.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):t[a]!==void 0?t[a]:null}return{convert:i}}class Q6 extends Tr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class _h extends On{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Fte={type:"move"};class RE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _h,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _h,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _h,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,a=null,s=null;const o=this._targetRay,u=this._grip,l=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(const v of e.hand.values()){const y=n.getJointPose(v,r),p=this._getHandJoint(l,v);y!==null&&(p.matrix.fromArray(y.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=y.radius),p.visible=y!==null}const c=l.joints["index-finger-tip"],f=l.joints["thumb-tip"],d=c.position.distanceTo(f.position),h=.02,m=.005;l.inputState.pinching&&d>h+m?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=h-m&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(a=n.getPose(e.gripSpace,r),a!==null&&(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Fte)))}return o!==null&&(o.visible=i!==null),u!==null&&(u.visible=a!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new _h;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Lte extends gs{constructor(e,n){super();const r=this;let i=null,a=1,s=null,o="local-floor",u=1,l=null,c=null,f=null,d=null,h=null,m=null;const v=n.getContextAttributes();let y=null,p=null;const x=[],g=[],S=new qe;let E=null;const _=new Tr;_.layers.enable(1),_.viewport=new Wn;const A=new Tr;A.layers.enable(2),A.viewport=new Wn;const T=[_,A],M=new Q6;M.layers.enable(1),M.layers.enable(2);let C=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ae=x[q];return ae===void 0&&(ae=new RE,x[q]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(q){let ae=x[q];return ae===void 0&&(ae=new RE,x[q]=ae),ae.getGripSpace()},this.getHand=function(q){let ae=x[q];return ae===void 0&&(ae=new RE,x[q]=ae),ae.getHandSpace()};function P(q){const ae=g.indexOf(q.inputSource);if(ae===-1)return;const be=x[ae];be!==void 0&&(be.update(q.inputSource,q.frame,l||s),be.dispatchEvent({type:q.type,data:q.inputSource}))}function H(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",H),i.removeEventListener("inputsourceschange",L);for(let q=0;q<x.length;q++){const ae=g[q];ae!==null&&(g[q]=null,x[q].disconnect(ae))}C=null,N=null,e.setRenderTarget(y),h=null,d=null,f=null,i=null,p=null,J.stop(),r.isPresenting=!1,e.setPixelRatio(E),e.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){a=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){o=q,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(q){l=q},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return f},this.getFrame=function(){return m},this.getSession=function(){return i},this.setSession=async function(q){if(i=q,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",H),i.addEventListener("inputsourceschange",L),v.xrCompatible!==!0&&await n.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(S),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(i,n,ae),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),p=new jr(h.framebufferWidth,h.framebufferHeight,{format:Zi,type:Di,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let ae=null,be=null,ue=null;v.depth&&(ue=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ae=v.stencil?fc:ic,be=v.stencil?Wu:Qo);const pe={colorFormat:n.RGBA8,depthFormat:ue,scaleFactor:a};f=new XRWebGLBinding(i,n),d=f.createProjectionLayer(pe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),p=new jr(d.textureWidth,d.textureHeight,{format:Zi,type:Di,depthTexture:new Sw(d.textureWidth,d.textureHeight,be,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const Pe=e.properties.get(p);Pe.__ignoreDepthValues=d.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(u),l=null,s=await i.requestReferenceSpace(o),J.setContext(i),J.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function L(q){for(let ae=0;ae<q.removed.length;ae++){const be=q.removed[ae],ue=g.indexOf(be);ue>=0&&(g[ue]=null,x[ue].disconnect(be))}for(let ae=0;ae<q.added.length;ae++){const be=q.added[ae];let ue=g.indexOf(be);if(ue===-1){for(let Pe=0;Pe<x.length;Pe++)if(Pe>=g.length){g.push(be),ue=Pe;break}else if(g[Pe]===null){g[Pe]=be,ue=Pe;break}if(ue===-1)break}const pe=x[ue];pe&&pe.connect(be)}}const z=new fe,O=new fe;function F(q,ae,be){z.setFromMatrixPosition(ae.matrixWorld),O.setFromMatrixPosition(be.matrixWorld);const ue=z.distanceTo(O),pe=ae.projectionMatrix.elements,Pe=be.projectionMatrix.elements,Ce=pe[14]/(pe[10]-1),Ee=pe[14]/(pe[10]+1),Oe=(pe[9]+1)/pe[5],ne=(pe[9]-1)/pe[5],Le=(pe[8]-1)/pe[0],Fe=(Pe[8]+1)/Pe[0],Q=Ce*Le,te=Ce*Fe,Me=ue/(-Le+Fe),re=Me*-Le;ae.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(re),q.translateZ(Me),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const V=Ce+Me,G=Ee+Me,le=Q-re,_e=te+(ue-re),W=Oe*Ee/G*V,Y=ne*Ee/G*V;q.projectionMatrix.makePerspective(le,_e,W,Y,V,G),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}function U(q,ae){ae===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ae.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(i===null)return;M.near=A.near=_.near=q.near,M.far=A.far=_.far=q.far,(C!==M.near||N!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,N=M.far);const ae=q.parent,be=M.cameras;U(M,ae);for(let ue=0;ue<be.length;ue++)U(be[ue],ae);be.length===2?F(M,_,A):M.projectionMatrix.copy(_.projectionMatrix),I(q,M,ae)};function I(q,ae,be){be===null?q.matrix.copy(ae.matrixWorld):(q.matrix.copy(be.matrixWorld),q.matrix.invert(),q.matrix.multiply(ae.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(ae.projectionMatrix),q.projectionMatrixInverse.copy(ae.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=ep*2*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&h===null))return u},this.setFoveation=function(q){u=q,d!==null&&(d.fixedFoveation=q),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=q)};let j=null;function ee(q,ae){if(c=ae.getViewerPose(l||s),m=ae,c!==null){const be=c.views;h!==null&&(e.setRenderTargetFramebuffer(p,h.framebuffer),e.setRenderTarget(p));let ue=!1;be.length!==M.cameras.length&&(M.cameras.length=0,ue=!0);for(let pe=0;pe<be.length;pe++){const Pe=be[pe];let Ce=null;if(h!==null)Ce=h.getViewport(Pe);else{const Oe=f.getViewSubImage(d,Pe);Ce=Oe.viewport,pe===0&&(e.setRenderTargetTextures(p,Oe.colorTexture,d.ignoreDepthValues?void 0:Oe.depthStencilTexture),e.setRenderTarget(p))}let Ee=T[pe];Ee===void 0&&(Ee=new Tr,Ee.layers.enable(pe),Ee.viewport=new Wn,T[pe]=Ee),Ee.matrix.fromArray(Pe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(Pe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),pe===0&&(M.matrix.copy(Ee.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ue===!0&&M.cameras.push(Ee)}}for(let be=0;be<x.length;be++){const ue=g[be],pe=x[be];ue!==null&&pe!==void 0&&pe.update(ue,ae,l||s)}j&&j(q,ae),ae.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ae}),m=null}const J=new W6;J.setAnimationLoop(ee),this.setAnimationLoop=function(q){j=q},this.dispose=function(){}}}function Bte(t,e){function n(y,p){y.matrixAutoUpdate===!0&&y.updateMatrix(),p.value.copy(y.matrix)}function r(y,p){p.color.getRGB(y.fogColor.value,G6(t)),p.isFog?(y.fogNear.value=p.near,y.fogFar.value=p.far):p.isFogExp2&&(y.fogDensity.value=p.density)}function i(y,p,x,g,S){p.isMeshBasicMaterial||p.isMeshLambertMaterial?a(y,p):p.isMeshToonMaterial?(a(y,p),f(y,p)):p.isMeshPhongMaterial?(a(y,p),c(y,p)):p.isMeshStandardMaterial?(a(y,p),d(y,p),p.isMeshPhysicalMaterial&&h(y,p,S)):p.isMeshMatcapMaterial?(a(y,p),m(y,p)):p.isMeshDepthMaterial?a(y,p):p.isMeshDistanceMaterial?(a(y,p),v(y,p)):p.isMeshNormalMaterial?a(y,p):p.isLineBasicMaterial?(s(y,p),p.isLineDashedMaterial&&o(y,p)):p.isPointsMaterial?u(y,p,x,g):p.isSpriteMaterial?l(y,p):p.isShadowMaterial?(y.color.value.copy(p.color),y.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function a(y,p){y.opacity.value=p.opacity,p.color&&y.diffuse.value.copy(p.color),p.emissive&&y.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(y.map.value=p.map,n(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,n(p.alphaMap,y.alphaMapTransform)),p.bumpMap&&(y.bumpMap.value=p.bumpMap,n(p.bumpMap,y.bumpMapTransform),y.bumpScale.value=p.bumpScale,p.side===ai&&(y.bumpScale.value*=-1)),p.normalMap&&(y.normalMap.value=p.normalMap,n(p.normalMap,y.normalMapTransform),y.normalScale.value.copy(p.normalScale),p.side===ai&&y.normalScale.value.negate()),p.displacementMap&&(y.displacementMap.value=p.displacementMap,n(p.displacementMap,y.displacementMapTransform),y.displacementScale.value=p.displacementScale,y.displacementBias.value=p.displacementBias),p.emissiveMap&&(y.emissiveMap.value=p.emissiveMap,n(p.emissiveMap,y.emissiveMapTransform)),p.specularMap&&(y.specularMap.value=p.specularMap,n(p.specularMap,y.specularMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest);const x=e.get(p).envMap;if(x&&(y.envMap.value=x,y.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=p.reflectivity,y.ior.value=p.ior,y.refractionRatio.value=p.refractionRatio),p.lightMap){y.lightMap.value=p.lightMap;const g=t._useLegacyLights===!0?Math.PI:1;y.lightMapIntensity.value=p.lightMapIntensity*g,n(p.lightMap,y.lightMapTransform)}p.aoMap&&(y.aoMap.value=p.aoMap,y.aoMapIntensity.value=p.aoMapIntensity,n(p.aoMap,y.aoMapTransform))}function s(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,p.map&&(y.map.value=p.map,n(p.map,y.mapTransform))}function o(y,p){y.dashSize.value=p.dashSize,y.totalSize.value=p.dashSize+p.gapSize,y.scale.value=p.scale}function u(y,p,x,g){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.size.value=p.size*x,y.scale.value=g*.5,p.map&&(y.map.value=p.map,n(p.map,y.uvTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,n(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function l(y,p){y.diffuse.value.copy(p.color),y.opacity.value=p.opacity,y.rotation.value=p.rotation,p.map&&(y.map.value=p.map,n(p.map,y.mapTransform)),p.alphaMap&&(y.alphaMap.value=p.alphaMap,n(p.alphaMap,y.alphaMapTransform)),p.alphaTest>0&&(y.alphaTest.value=p.alphaTest)}function c(y,p){y.specular.value.copy(p.specular),y.shininess.value=Math.max(p.shininess,1e-4)}function f(y,p){p.gradientMap&&(y.gradientMap.value=p.gradientMap)}function d(y,p){y.metalness.value=p.metalness,p.metalnessMap&&(y.metalnessMap.value=p.metalnessMap,n(p.metalnessMap,y.metalnessMapTransform)),y.roughness.value=p.roughness,p.roughnessMap&&(y.roughnessMap.value=p.roughnessMap,n(p.roughnessMap,y.roughnessMapTransform)),e.get(p).envMap&&(y.envMapIntensity.value=p.envMapIntensity)}function h(y,p,x){y.ior.value=p.ior,p.sheen>0&&(y.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),y.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(y.sheenColorMap.value=p.sheenColorMap,n(p.sheenColorMap,y.sheenColorMapTransform)),p.sheenRoughnessMap&&(y.sheenRoughnessMap.value=p.sheenRoughnessMap,n(p.sheenRoughnessMap,y.sheenRoughnessMapTransform))),p.clearcoat>0&&(y.clearcoat.value=p.clearcoat,y.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(y.clearcoatMap.value=p.clearcoatMap,n(p.clearcoatMap,y.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,n(p.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(y.clearcoatNormalMap.value=p.clearcoatNormalMap,n(p.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===ai&&y.clearcoatNormalScale.value.negate())),p.iridescence>0&&(y.iridescence.value=p.iridescence,y.iridescenceIOR.value=p.iridescenceIOR,y.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(y.iridescenceMap.value=p.iridescenceMap,n(p.iridescenceMap,y.iridescenceMapTransform)),p.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=p.iridescenceThicknessMap,n(p.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),p.transmission>0&&(y.transmission.value=p.transmission,y.transmissionSamplerMap.value=x.texture,y.transmissionSamplerSize.value.set(x.width,x.height),p.transmissionMap&&(y.transmissionMap.value=p.transmissionMap,n(p.transmissionMap,y.transmissionMapTransform)),y.thickness.value=p.thickness,p.thicknessMap&&(y.thicknessMap.value=p.thicknessMap,n(p.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=p.attenuationDistance,y.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(y.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(y.anisotropyMap.value=p.anisotropyMap,n(p.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=p.specularIntensity,y.specularColor.value.copy(p.specularColor),p.specularColorMap&&(y.specularColorMap.value=p.specularColorMap,n(p.specularColorMap,y.specularColorMapTransform)),p.specularIntensityMap&&(y.specularIntensityMap.value=p.specularIntensityMap,n(p.specularIntensityMap,y.specularIntensityMapTransform))}function m(y,p){p.matcap&&(y.matcap.value=p.matcap)}function v(y,p){const x=e.get(p).light;y.referencePosition.value.setFromMatrixPosition(x.matrixWorld),y.nearDistance.value=x.shadow.camera.near,y.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Ute(t,e,n,r){let i={},a={},s=[];const o=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(x,g){const S=g.program;r.uniformBlockBinding(x,S)}function l(x,g){let S=i[x.id];S===void 0&&(m(x),S=c(x),i[x.id]=S,x.addEventListener("dispose",y));const E=g.program;r.updateUBOMapping(x,E);const _=e.render.frame;a[x.id]!==_&&(d(x),a[x.id]=_)}function c(x){const g=f();x.__bindingPointIndex=g;const S=t.createBuffer(),E=x.__size,_=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,E,_),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,g,S),S}function f(){for(let x=0;x<o;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(x){const g=i[x.id],S=x.uniforms,E=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,g);for(let _=0,A=S.length;_<A;_++){const T=Array.isArray(S[_])?S[_]:[S[_]];for(let M=0,C=T.length;M<C;M++){const N=T[M];if(h(N,_,M,E)===!0){const P=N.__offset,H=Array.isArray(N.value)?N.value:[N.value];let L=0;for(let z=0;z<H.length;z++){const O=H[z],F=v(O);typeof O=="number"||typeof O=="boolean"?(N.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,P+L,N.__data)):O.isMatrix3?(N.__data[0]=O.elements[0],N.__data[1]=O.elements[1],N.__data[2]=O.elements[2],N.__data[3]=0,N.__data[4]=O.elements[3],N.__data[5]=O.elements[4],N.__data[6]=O.elements[5],N.__data[7]=0,N.__data[8]=O.elements[6],N.__data[9]=O.elements[7],N.__data[10]=O.elements[8],N.__data[11]=0):(O.toArray(N.__data,L),L+=F.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,P,N.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function h(x,g,S,E){const _=x.value,A=g+"_"+S;if(E[A]===void 0)return typeof _=="number"||typeof _=="boolean"?E[A]=_:E[A]=_.clone(),!0;{const T=E[A];if(typeof _=="number"||typeof _=="boolean"){if(T!==_)return E[A]=_,!0}else if(T.equals(_)===!1)return T.copy(_),!0}return!1}function m(x){const g=x.uniforms;let S=0;const E=16;for(let A=0,T=g.length;A<T;A++){const M=Array.isArray(g[A])?g[A]:[g[A]];for(let C=0,N=M.length;C<N;C++){const P=M[C],H=Array.isArray(P.value)?P.value:[P.value];for(let L=0,z=H.length;L<z;L++){const O=H[L],F=v(O),U=S%E;U!==0&&E-U<F.boundary&&(S+=E-U),P.__data=new Float32Array(F.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=S,S+=F.storage}}}const _=S%E;return _>0&&(S+=E-_),x.__size=S,x.__cache={},this}function v(x){const g={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(g.boundary=4,g.storage=4):x.isVector2?(g.boundary=8,g.storage=8):x.isVector3||x.isColor?(g.boundary=16,g.storage=12):x.isVector4?(g.boundary=16,g.storage=16):x.isMatrix3?(g.boundary=48,g.storage=48):x.isMatrix4?(g.boundary=64,g.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),g}function y(x){const g=x.target;g.removeEventListener("dispose",y);const S=s.indexOf(g.__bindingPointIndex);s.splice(S,1),t.deleteBuffer(i[g.id]),delete i[g.id],delete a[g.id]}function p(){for(const x in i)t.deleteBuffer(i[x]);s=[],i={},a={}}return{bind:u,update:l,dispose:p}}class QT{constructor(e={}){const{canvas:n=k6(),context:r=null,depth:i=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=s;const h=new Uint32Array(4),m=new Int32Array(4);let v=null,y=null;const p=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Nn,this._useLegacyLights=!1,this.toneMapping=Eo,this.toneMappingExposure=1;const g=this;let S=!1,E=0,_=0,A=null,T=-1,M=null;const C=new Wn,N=new Wn;let P=null;const H=new ft(0);let L=0,z=n.width,O=n.height,F=1,U=null,I=null;const j=new Wn(0,0,z,O),ee=new Wn(0,0,z,O);let J=!1;const q=new Xg;let ae=!1,be=!1,ue=null;const pe=new Ht,Pe=new qe,Ce=new fe,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Oe(){return A===null?F:1}let ne=r;function Le(Z,ce){for(let he=0;he<Z.length;he++){const De=Z[he],Se=n.getContext(De,ce);if(Se!==null)return Se}return null}try{const Z={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:u,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${ol}`),n.addEventListener("webglcontextlost",me,!1),n.addEventListener("webglcontextrestored",ve,!1),n.addEventListener("webglcontextcreationerror",Ke,!1),ne===null){const ce=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&ce.shift(),ne=Le(ce,Z),ne===null)throw Le(ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&ne instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),ne.getShaderPrecisionFormat===void 0&&(ne.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Z){throw console.error("THREE.WebGLRenderer: "+Z.message),Z}let Fe,Q,te,Me,re,V,G,le,_e,W,Y,de,xe,Ne,Be,$e,Ie,Ye,Ve,at,tt,Ze,we,B;function se(){Fe=new QJ(ne),Q=new qJ(ne,Fe,e),Fe.init(Q),Ze=new K6(ne,Fe,Q),te=new Ite(ne,Fe,Q),Me=new tee(ne),re=new wte,V=new Ote(ne,Fe,te,re,Q,Ze,Me),G=new XJ(g),le=new KJ(g),_e=new lK(ne,Q),we=new VJ(ne,Fe,_e,Q),W=new JJ(ne,_e,Me,we),Y=new aee(ne,W,_e,Me),Ve=new iee(ne,Q,V),$e=new jJ(re),de=new bte(g,G,le,Fe,Q,we,$e),xe=new Bte(g,re),Ne=new _te,Be=new Dte(Fe,Q),Ye=new GJ(g,G,le,te,Y,d,u),Ie=new Pte(g,Y,Q),B=new Ute(ne,Me,Q,te),at=new WJ(ne,Fe,Me,Q),tt=new eee(ne,Fe,Me,Q),Me.programs=de.programs,g.capabilities=Q,g.extensions=Fe,g.properties=re,g.renderLists=Ne,g.shadowMap=Ie,g.state=te,g.info=Me}se();const Te=new Lte(g,ne);this.xr=Te,this.getContext=function(){return ne},this.getContextAttributes=function(){return ne.getContextAttributes()},this.forceContextLoss=function(){const Z=Fe.get("WEBGL_lose_context");Z&&Z.loseContext()},this.forceContextRestore=function(){const Z=Fe.get("WEBGL_lose_context");Z&&Z.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(Z){Z!==void 0&&(F=Z,this.setSize(z,O,!1))},this.getSize=function(Z){return Z.set(z,O)},this.setSize=function(Z,ce,he=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=Z,O=ce,n.width=Math.floor(Z*F),n.height=Math.floor(ce*F),he===!0&&(n.style.width=Z+"px",n.style.height=ce+"px"),this.setViewport(0,0,Z,ce)},this.getDrawingBufferSize=function(Z){return Z.set(z*F,O*F).floor()},this.setDrawingBufferSize=function(Z,ce,he){z=Z,O=ce,F=he,n.width=Math.floor(Z*he),n.height=Math.floor(ce*he),this.setViewport(0,0,Z,ce)},this.getCurrentViewport=function(Z){return Z.copy(C)},this.getViewport=function(Z){return Z.copy(j)},this.setViewport=function(Z,ce,he,De){Z.isVector4?j.set(Z.x,Z.y,Z.z,Z.w):j.set(Z,ce,he,De),te.viewport(C.copy(j).multiplyScalar(F).floor())},this.getScissor=function(Z){return Z.copy(ee)},this.setScissor=function(Z,ce,he,De){Z.isVector4?ee.set(Z.x,Z.y,Z.z,Z.w):ee.set(Z,ce,he,De),te.scissor(N.copy(ee).multiplyScalar(F).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(Z){te.setScissorTest(J=Z)},this.setOpaqueSort=function(Z){U=Z},this.setTransparentSort=function(Z){I=Z},this.getClearColor=function(Z){return Z.copy(Ye.getClearColor())},this.setClearColor=function(){Ye.setClearColor.apply(Ye,arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha.apply(Ye,arguments)},this.clear=function(Z=!0,ce=!0,he=!0){let De=0;if(Z){let Se=!1;if(A!==null){const He=A.texture.format;Se=He===BT||He===LT||He===FT}if(Se){const He=A.texture.type,We=He===Di||He===Qo||He===yw||He===Wu||He===PT||He===IT,je=Ye.getClearColor(),ke=Ye.getClearAlpha(),ht=je.r,rt=je.g,it=je.b;We?(h[0]=ht,h[1]=rt,h[2]=it,h[3]=ke,ne.clearBufferuiv(ne.COLOR,0,h)):(m[0]=ht,m[1]=rt,m[2]=it,m[3]=ke,ne.clearBufferiv(ne.COLOR,0,m))}else De|=ne.COLOR_BUFFER_BIT}ce&&(De|=ne.DEPTH_BUFFER_BIT),he&&(De|=ne.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ne.clear(De)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",me,!1),n.removeEventListener("webglcontextrestored",ve,!1),n.removeEventListener("webglcontextcreationerror",Ke,!1),Ne.dispose(),Be.dispose(),re.dispose(),G.dispose(),le.dispose(),Y.dispose(),we.dispose(),B.dispose(),de.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",rr),Te.removeEventListener("sessionend",Sn),ue&&(ue.dispose(),ue=null),$r.stop()};function me(Z){Z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const Z=Me.autoReset,ce=Ie.enabled,he=Ie.autoUpdate,De=Ie.needsUpdate,Se=Ie.type;se(),Me.autoReset=Z,Ie.enabled=ce,Ie.autoUpdate=he,Ie.needsUpdate=De,Ie.type=Se}function Ke(Z){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Z.statusMessage)}function lt(Z){const ce=Z.target;ce.removeEventListener("dispose",lt),Dt(ce)}function Dt(Z){_t(Z),re.remove(Z)}function _t(Z){const ce=re.get(Z).programs;ce!==void 0&&(ce.forEach(function(he){de.releaseProgram(he)}),Z.isShaderMaterial&&de.releaseShaderCache(Z))}this.renderBufferDirect=function(Z,ce,he,De,Se,He){ce===null&&(ce=Ee);const We=Se.isMesh&&Se.matrixWorld.determinant()<0,je=K(Z,ce,he,De,Se);te.setMaterial(De,We);let ke=he.index,ht=1;if(De.wireframe===!0){if(ke=W.getWireframeAttribute(he),ke===void 0)return;ht=2}const rt=he.drawRange,it=he.attributes.position;let yt=rt.start*ht,Nt=(rt.start+rt.count)*ht;He!==null&&(yt=Math.max(yt,He.start*ht),Nt=Math.min(Nt,(He.start+He.count)*ht)),ke!==null?(yt=Math.max(yt,0),Nt=Math.min(Nt,ke.count)):it!=null&&(yt=Math.max(yt,0),Nt=Math.min(Nt,it.count));const Ot=Nt-yt;if(Ot<0||Ot===1/0)return;we.setup(Se,De,je,he,ke);let Xt,bt=at;if(ke!==null&&(Xt=_e.get(ke),bt=tt,bt.setIndex(Xt)),Se.isMesh)De.wireframe===!0?(te.setLineWidth(De.wireframeLinewidth*Oe()),bt.setMode(ne.LINES)):bt.setMode(ne.TRIANGLES);else if(Se.isLine){let pt=De.linewidth;pt===void 0&&(pt=1),te.setLineWidth(pt*Oe()),Se.isLineSegments?bt.setMode(ne.LINES):Se.isLineLoop?bt.setMode(ne.LINE_LOOP):bt.setMode(ne.LINE_STRIP)}else Se.isPoints?bt.setMode(ne.POINTS):Se.isSprite&&bt.setMode(ne.TRIANGLES);if(Se.isBatchedMesh)bt.renderMultiDraw(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount);else if(Se.isInstancedMesh)bt.renderInstances(yt,Ot,Se.count);else if(he.isInstancedBufferGeometry){const pt=he._maxInstanceCount!==void 0?he._maxInstanceCount:1/0,yn=Math.min(he.instanceCount,pt);bt.renderInstances(yt,Ot,yn)}else bt.render(yt,Ot)};function an(Z,ce,he){Z.transparent===!0&&Z.side===ri&&Z.forceSinglePass===!1?(Z.side=ai,Z.needsUpdate=!0,Zt(Z,ce,he),Z.side=ss,Z.needsUpdate=!0,Zt(Z,ce,he),Z.side=ri):Zt(Z,ce,he)}this.compile=function(Z,ce,he=null){he===null&&(he=Z),y=Be.get(he),y.init(),x.push(y),he.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ce.layers)&&(y.pushLight(Se),Se.castShadow&&y.pushShadow(Se))}),Z!==he&&Z.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ce.layers)&&(y.pushLight(Se),Se.castShadow&&y.pushShadow(Se))}),y.setupLights(g._useLegacyLights);const De=new Set;return Z.traverse(function(Se){const He=Se.material;if(He)if(Array.isArray(He))for(let We=0;We<He.length;We++){const je=He[We];an(je,he,Se),De.add(je)}else an(He,he,Se),De.add(He)}),x.pop(),y=null,De},this.compileAsync=function(Z,ce,he=null){const De=this.compile(Z,ce,he);return new Promise(Se=>{function He(){if(De.forEach(function(We){re.get(We).currentProgram.isReady()&&De.delete(We)}),De.size===0){Se(Z);return}setTimeout(He,10)}Fe.get("KHR_parallel_shader_compile")!==null?He():setTimeout(He,10)})};let gn=null;function Vn(Z){gn&&gn(Z)}function rr(){$r.stop()}function Sn(){$r.start()}const $r=new W6;$r.setAnimationLoop(Vn),typeof self<"u"&&$r.setContext(self),this.setAnimationLoop=function(Z){gn=Z,Te.setAnimationLoop(Z),Z===null?$r.stop():$r.start()},Te.addEventListener("sessionstart",rr),Te.addEventListener("sessionend",Sn),this.render=function(Z,ce){if(ce!==void 0&&ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),ce.parent===null&&ce.matrixWorldAutoUpdate===!0&&ce.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(ce),ce=Te.getCamera()),Z.isScene===!0&&Z.onBeforeRender(g,Z,ce,A),y=Be.get(Z,x.length),y.init(),x.push(y),pe.multiplyMatrices(ce.projectionMatrix,ce.matrixWorldInverse),q.setFromProjectionMatrix(pe),be=this.localClippingEnabled,ae=$e.init(this.clippingPlanes,be),v=Ne.get(Z,p.length),v.init(),p.push(v),Fi(Z,ce,0,g.sortObjects),v.finish(),g.sortObjects===!0&&v.sort(U,I),this.info.render.frame++,ae===!0&&$e.beginShadows();const he=y.state.shadowsArray;if(Ie.render(he,Z,ce),ae===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ye.render(v,Z),y.setupLights(g._useLegacyLights),ce.isArrayCamera){const De=ce.cameras;for(let Se=0,He=De.length;Se<He;Se++){const We=De[Se];Ss(v,Z,We,We.viewport)}}else Ss(v,Z,ce);A!==null&&(V.updateMultisampleRenderTarget(A),V.updateRenderTargetMipmap(A)),Z.isScene===!0&&Z.onAfterRender(g,Z,ce),we.resetDefaultState(),T=-1,M=null,x.pop(),x.length>0?y=x[x.length-1]:y=null,p.pop(),p.length>0?v=p[p.length-1]:v=null};function Fi(Z,ce,he,De){if(Z.visible===!1)return;if(Z.layers.test(ce.layers)){if(Z.isGroup)he=Z.renderOrder;else if(Z.isLOD)Z.autoUpdate===!0&&Z.update(ce);else if(Z.isLight)y.pushLight(Z),Z.castShadow&&y.pushShadow(Z);else if(Z.isSprite){if(!Z.frustumCulled||q.intersectsSprite(Z)){De&&Ce.setFromMatrixPosition(Z.matrixWorld).applyMatrix4(pe);const We=Y.update(Z),je=Z.material;je.visible&&v.push(Z,We,je,he,Ce.z,null)}}else if((Z.isMesh||Z.isLine||Z.isPoints)&&(!Z.frustumCulled||q.intersectsObject(Z))){const We=Y.update(Z),je=Z.material;if(De&&(Z.boundingSphere!==void 0?(Z.boundingSphere===null&&Z.computeBoundingSphere(),Ce.copy(Z.boundingSphere.center)):(We.boundingSphere===null&&We.computeBoundingSphere(),Ce.copy(We.boundingSphere.center)),Ce.applyMatrix4(Z.matrixWorld).applyMatrix4(pe)),Array.isArray(je)){const ke=We.groups;for(let ht=0,rt=ke.length;ht<rt;ht++){const it=ke[ht],yt=je[it.materialIndex];yt&&yt.visible&&v.push(Z,We,yt,he,Ce.z,it)}}else je.visible&&v.push(Z,We,je,he,Ce.z,null)}}const He=Z.children;for(let We=0,je=He.length;We<je;We++)Fi(He[We],ce,he,De)}function Ss(Z,ce,he,De){const Se=Z.opaque,He=Z.transmissive,We=Z.transparent;y.setupLightsView(he),ae===!0&&$e.setGlobalState(g.clippingPlanes,he),He.length>0&&pu(Se,He,ce,he),De&&te.viewport(C.copy(De)),Se.length>0&&Da(Se,ce,he),He.length>0&&Da(He,ce,he),We.length>0&&Da(We,ce,he),te.buffers.depth.setTest(!0),te.buffers.depth.setMask(!0),te.buffers.color.setMask(!0),te.setPolygonOffset(!1)}function pu(Z,ce,he,De){if((he.isScene===!0?he.overrideMaterial:null)!==null)return;const He=Q.isWebGL2;ue===null&&(ue=new jr(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")?Ki:Di,minFilter:cc,samples:He?4:0})),g.getDrawingBufferSize(Pe),He?ue.setSize(Pe.x,Pe.y):ue.setSize(ab(Pe.x),ab(Pe.y));const We=g.getRenderTarget();g.setRenderTarget(ue),g.getClearColor(H),L=g.getClearAlpha(),L<1&&g.setClearColor(16777215,.5),g.clear();const je=g.toneMapping;g.toneMapping=Eo,Da(Z,he,De),V.updateMultisampleRenderTarget(ue),V.updateRenderTargetMipmap(ue);let ke=!1;for(let ht=0,rt=ce.length;ht<rt;ht++){const it=ce[ht],yt=it.object,Nt=it.geometry,Ot=it.material,Xt=it.group;if(Ot.side===ri&&yt.layers.test(De.layers)){const bt=Ot.side;Ot.side=ai,Ot.needsUpdate=!0,Li(yt,he,De,Nt,Ot,Xt),Ot.side=bt,Ot.needsUpdate=!0,ke=!0}}ke===!0&&(V.updateMultisampleRenderTarget(ue),V.updateRenderTargetMipmap(ue)),g.setRenderTarget(We),g.setClearColor(H,L),g.toneMapping=je}function Da(Z,ce,he){const De=ce.isScene===!0?ce.overrideMaterial:null;for(let Se=0,He=Z.length;Se<He;Se++){const We=Z[Se],je=We.object,ke=We.geometry,ht=De===null?We.material:De,rt=We.group;je.layers.test(he.layers)&&Li(je,ce,he,ke,ht,rt)}}function Li(Z,ce,he,De,Se,He){Z.onBeforeRender(g,ce,he,De,Se,He),Z.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,Z.matrixWorld),Z.normalMatrix.getNormalMatrix(Z.modelViewMatrix),Se.onBeforeRender(g,ce,he,De,Z,He),Se.transparent===!0&&Se.side===ri&&Se.forceSinglePass===!1?(Se.side=ai,Se.needsUpdate=!0,g.renderBufferDirect(he,ce,De,Se,Z,He),Se.side=ss,Se.needsUpdate=!0,g.renderBufferDirect(he,ce,De,Se,Z,He),Se.side=ri):g.renderBufferDirect(he,ce,De,Se,Z,He),Z.onAfterRender(g,ce,he,De,Se,He)}function Zt(Z,ce,he){ce.isScene!==!0&&(ce=Ee);const De=re.get(Z),Se=y.state.lights,He=y.state.shadowsArray,We=Se.state.version,je=de.getParameters(Z,Se.state,He,ce,he),ke=de.getProgramCacheKey(je);let ht=De.programs;De.environment=Z.isMeshStandardMaterial?ce.environment:null,De.fog=ce.fog,De.envMap=(Z.isMeshStandardMaterial?le:G).get(Z.envMap||De.environment),ht===void 0&&(Z.addEventListener("dispose",lt),ht=new Map,De.programs=ht);let rt=ht.get(ke);if(rt!==void 0){if(De.currentProgram===rt&&De.lightsStateVersion===We)return hl(Z,je),rt}else je.uniforms=de.getUniforms(Z),Z.onBuild(he,je,g),Z.onBeforeCompile(je,g),rt=de.acquireProgram(je,ke),ht.set(ke,rt),De.uniforms=je.uniforms;const it=De.uniforms;return(!Z.isShaderMaterial&&!Z.isRawShaderMaterial||Z.clipping===!0)&&(it.clippingPlanes=$e.uniform),hl(Z,je),De.needsLights=Re(Z),De.lightsStateVersion=We,De.needsLights&&(it.ambientLightColor.value=Se.state.ambient,it.lightProbe.value=Se.state.probe,it.directionalLights.value=Se.state.directional,it.directionalLightShadows.value=Se.state.directionalShadow,it.spotLights.value=Se.state.spot,it.spotLightShadows.value=Se.state.spotShadow,it.rectAreaLights.value=Se.state.rectArea,it.ltc_1.value=Se.state.rectAreaLTC1,it.ltc_2.value=Se.state.rectAreaLTC2,it.pointLights.value=Se.state.point,it.pointLightShadows.value=Se.state.pointShadow,it.hemisphereLights.value=Se.state.hemi,it.directionalShadowMap.value=Se.state.directionalShadowMap,it.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,it.spotShadowMap.value=Se.state.spotShadowMap,it.spotLightMatrix.value=Se.state.spotLightMatrix,it.spotLightMap.value=Se.state.spotLightMap,it.pointShadowMap.value=Se.state.pointShadowMap,it.pointShadowMatrix.value=Se.state.pointShadowMatrix),De.currentProgram=rt,De.uniformsList=null,rt}function mu(Z){if(Z.uniformsList===null){const ce=Z.currentProgram.getUniforms();Z.uniformsList=_x.seqWithValue(ce.seq,Z.uniforms)}return Z.uniformsList}function hl(Z,ce){const he=re.get(Z);he.outputColorSpace=ce.outputColorSpace,he.batching=ce.batching,he.instancing=ce.instancing,he.instancingColor=ce.instancingColor,he.skinning=ce.skinning,he.morphTargets=ce.morphTargets,he.morphNormals=ce.morphNormals,he.morphColors=ce.morphColors,he.morphTargetsCount=ce.morphTargetsCount,he.numClippingPlanes=ce.numClippingPlanes,he.numIntersection=ce.numClipIntersection,he.vertexAlphas=ce.vertexAlphas,he.vertexTangents=ce.vertexTangents,he.toneMapping=ce.toneMapping}function K(Z,ce,he,De,Se){ce.isScene!==!0&&(ce=Ee),V.resetTextureUnits();const He=ce.fog,We=De.isMeshStandardMaterial?ce.environment:null,je=A===null?g.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Ys,ke=(De.isMeshStandardMaterial?le:G).get(De.envMap||We),ht=De.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,rt=!!he.attributes.tangent&&(!!De.normalMap||De.anisotropy>0),it=!!he.morphAttributes.position,yt=!!he.morphAttributes.normal,Nt=!!he.morphAttributes.color;let Ot=Eo;De.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(Ot=g.toneMapping);const Xt=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,bt=Xt!==void 0?Xt.length:0,pt=re.get(De),yn=y.state.lights;if(ae===!0&&(be===!0||Z!==M)){const sn=Z===M&&De.id===T;$e.setState(De,Z,sn)}let kt=!1;De.version===pt.__version?(pt.needsLights&&pt.lightsStateVersion!==yn.state.version||pt.outputColorSpace!==je||Se.isBatchedMesh&&pt.batching===!1||!Se.isBatchedMesh&&pt.batching===!0||Se.isInstancedMesh&&pt.instancing===!1||!Se.isInstancedMesh&&pt.instancing===!0||Se.isSkinnedMesh&&pt.skinning===!1||!Se.isSkinnedMesh&&pt.skinning===!0||Se.isInstancedMesh&&pt.instancingColor===!0&&Se.instanceColor===null||Se.isInstancedMesh&&pt.instancingColor===!1&&Se.instanceColor!==null||pt.envMap!==ke||De.fog===!0&&pt.fog!==He||pt.numClippingPlanes!==void 0&&(pt.numClippingPlanes!==$e.numPlanes||pt.numIntersection!==$e.numIntersection)||pt.vertexAlphas!==ht||pt.vertexTangents!==rt||pt.morphTargets!==it||pt.morphNormals!==yt||pt.morphColors!==Nt||pt.toneMapping!==Ot||Q.isWebGL2===!0&&pt.morphTargetsCount!==bt)&&(kt=!0):(kt=!0,pt.__version=De.version);let Gt=pt.currentProgram;kt===!0&&(Gt=Zt(De,ce,Se));let jn=!1,Or=!1,xr=!1;const In=Gt.getUniforms(),wn=pt.uniforms;if(te.useProgram(Gt.program)&&(jn=!0,Or=!0,xr=!0),De.id!==T&&(T=De.id,Or=!0),jn||M!==Z){In.setValue(ne,"projectionMatrix",Z.projectionMatrix),In.setValue(ne,"viewMatrix",Z.matrixWorldInverse);const sn=In.map.cameraPosition;sn!==void 0&&sn.setValue(ne,Ce.setFromMatrixPosition(Z.matrixWorld)),Q.logarithmicDepthBuffer&&In.setValue(ne,"logDepthBufFC",2/(Math.log(Z.far+1)/Math.LN2)),(De.isMeshPhongMaterial||De.isMeshToonMaterial||De.isMeshLambertMaterial||De.isMeshBasicMaterial||De.isMeshStandardMaterial||De.isShaderMaterial)&&In.setValue(ne,"isOrthographic",Z.isOrthographicCamera===!0),M!==Z&&(M=Z,Or=!0,xr=!0)}if(Se.isSkinnedMesh){In.setOptional(ne,Se,"bindMatrix"),In.setOptional(ne,Se,"bindMatrixInverse");const sn=Se.skeleton;sn&&(Q.floatVertexTextures?(sn.boneTexture===null&&sn.computeBoneTexture(),In.setValue(ne,"boneTexture",sn.boneTexture,V)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}Se.isBatchedMesh&&(In.setOptional(ne,Se,"batchingTexture"),In.setValue(ne,"batchingTexture",Se._matricesTexture,V));const _r=he.morphAttributes;if((_r.position!==void 0||_r.normal!==void 0||_r.color!==void 0&&Q.isWebGL2===!0)&&Ve.update(Se,he,Gt),(Or||pt.receiveShadow!==Se.receiveShadow)&&(pt.receiveShadow=Se.receiveShadow,In.setValue(ne,"receiveShadow",Se.receiveShadow)),De.isMeshGouraudMaterial&&De.envMap!==null&&(wn.envMap.value=ke,wn.flipEnvMap.value=ke.isCubeTexture&&ke.isRenderTargetTexture===!1?-1:1),Or&&(In.setValue(ne,"toneMappingExposure",g.toneMappingExposure),pt.needsLights&&oe(wn,xr),He&&De.fog===!0&&xe.refreshFogUniforms(wn,He),xe.refreshMaterialUniforms(wn,De,F,O,ue),_x.upload(ne,mu(pt),wn,V)),De.isShaderMaterial&&De.uniformsNeedUpdate===!0&&(_x.upload(ne,mu(pt),wn,V),De.uniformsNeedUpdate=!1),De.isSpriteMaterial&&In.setValue(ne,"center",Se.center),In.setValue(ne,"modelViewMatrix",Se.modelViewMatrix),In.setValue(ne,"normalMatrix",Se.normalMatrix),In.setValue(ne,"modelMatrix",Se.matrixWorld),De.isShaderMaterial||De.isRawShaderMaterial){const sn=De.uniformsGroups;for(let En=0,ur=sn.length;En<ur;En++)if(Q.isWebGL2){const _s=sn[En];B.update(_s,Gt),B.bind(_s,Gt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Gt}function oe(Z,ce){Z.ambientLightColor.needsUpdate=ce,Z.lightProbe.needsUpdate=ce,Z.directionalLights.needsUpdate=ce,Z.directionalLightShadows.needsUpdate=ce,Z.pointLights.needsUpdate=ce,Z.pointLightShadows.needsUpdate=ce,Z.spotLights.needsUpdate=ce,Z.spotLightShadows.needsUpdate=ce,Z.rectAreaLights.needsUpdate=ce,Z.hemisphereLights.needsUpdate=ce}function Re(Z){return Z.isMeshLambertMaterial||Z.isMeshToonMaterial||Z.isMeshPhongMaterial||Z.isMeshStandardMaterial||Z.isShadowMaterial||Z.isShaderMaterial&&Z.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(Z,ce,he){re.get(Z.texture).__webglTexture=ce,re.get(Z.depthTexture).__webglTexture=he;const De=re.get(Z);De.__hasExternalTextures=!0,De.__hasExternalTextures&&(De.__autoAllocateDepthBuffer=he===void 0,De.__autoAllocateDepthBuffer||Fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),De.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Z,ce){const he=re.get(Z);he.__webglFramebuffer=ce,he.__useDefaultFramebuffer=ce===void 0},this.setRenderTarget=function(Z,ce=0,he=0){A=Z,E=ce,_=he;let De=!0,Se=null,He=!1,We=!1;if(Z){const ke=re.get(Z);ke.__useDefaultFramebuffer!==void 0?(te.bindFramebuffer(ne.FRAMEBUFFER,null),De=!1):ke.__webglFramebuffer===void 0?V.setupRenderTarget(Z):ke.__hasExternalTextures&&V.rebindTextures(Z,re.get(Z.texture).__webglTexture,re.get(Z.depthTexture).__webglTexture);const ht=Z.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(We=!0);const rt=re.get(Z).__webglFramebuffer;Z.isWebGLCubeRenderTarget?(Array.isArray(rt[ce])?Se=rt[ce][he]:Se=rt[ce],He=!0):Q.isWebGL2&&Z.samples>0&&V.useMultisampledRTT(Z)===!1?Se=re.get(Z).__webglMultisampledFramebuffer:Array.isArray(rt)?Se=rt[he]:Se=rt,C.copy(Z.viewport),N.copy(Z.scissor),P=Z.scissorTest}else C.copy(j).multiplyScalar(F).floor(),N.copy(ee).multiplyScalar(F).floor(),P=J;if(te.bindFramebuffer(ne.FRAMEBUFFER,Se)&&Q.drawBuffers&&De&&te.drawBuffers(Z,Se),te.viewport(C),te.scissor(N),te.setScissorTest(P),He){const ke=re.get(Z.texture);ne.framebufferTexture2D(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ne.TEXTURE_CUBE_MAP_POSITIVE_X+ce,ke.__webglTexture,he)}else if(We){const ke=re.get(Z.texture),ht=ce||0;ne.framebufferTextureLayer(ne.FRAMEBUFFER,ne.COLOR_ATTACHMENT0,ke.__webglTexture,he||0,ht)}T=-1},this.readRenderTargetPixels=function(Z,ce,he,De,Se,He,We){if(!(Z&&Z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=re.get(Z).__webglFramebuffer;if(Z.isWebGLCubeRenderTarget&&We!==void 0&&(je=je[We]),je){te.bindFramebuffer(ne.FRAMEBUFFER,je);try{const ke=Z.texture,ht=ke.format,rt=ke.type;if(ht!==Zi&&Ze.convert(ht)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const it=rt===Ki&&(Fe.has("EXT_color_buffer_half_float")||Q.isWebGL2&&Fe.has("EXT_color_buffer_float"));if(rt!==Di&&Ze.convert(rt)!==ne.getParameter(ne.IMPLEMENTATION_COLOR_READ_TYPE)&&!(rt===xi&&(Q.isWebGL2||Fe.has("OES_texture_float")||Fe.has("WEBGL_color_buffer_float")))&&!it){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ce>=0&&ce<=Z.width-De&&he>=0&&he<=Z.height-Se&&ne.readPixels(ce,he,De,Se,Ze.convert(ht),Ze.convert(rt),He)}finally{const ke=A!==null?re.get(A).__webglFramebuffer:null;te.bindFramebuffer(ne.FRAMEBUFFER,ke)}}},this.copyFramebufferToTexture=function(Z,ce,he=0){const De=Math.pow(2,-he),Se=Math.floor(ce.image.width*De),He=Math.floor(ce.image.height*De);V.setTexture2D(ce,0),ne.copyTexSubImage2D(ne.TEXTURE_2D,he,0,0,Z.x,Z.y,Se,He),te.unbindTexture()},this.copyTextureToTexture=function(Z,ce,he,De=0){const Se=ce.image.width,He=ce.image.height,We=Ze.convert(he.format),je=Ze.convert(he.type);V.setTexture2D(he,0),ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,he.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,he.unpackAlignment),ce.isDataTexture?ne.texSubImage2D(ne.TEXTURE_2D,De,Z.x,Z.y,Se,He,We,je,ce.image.data):ce.isCompressedTexture?ne.compressedTexSubImage2D(ne.TEXTURE_2D,De,Z.x,Z.y,ce.mipmaps[0].width,ce.mipmaps[0].height,We,ce.mipmaps[0].data):ne.texSubImage2D(ne.TEXTURE_2D,De,Z.x,Z.y,We,je,ce.image),De===0&&he.generateMipmaps&&ne.generateMipmap(ne.TEXTURE_2D),te.unbindTexture()},this.copyTextureToTexture3D=function(Z,ce,he,De,Se=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const He=Z.max.x-Z.min.x+1,We=Z.max.y-Z.min.y+1,je=Z.max.z-Z.min.z+1,ke=Ze.convert(De.format),ht=Ze.convert(De.type);let rt;if(De.isData3DTexture)V.setTexture3D(De,0),rt=ne.TEXTURE_3D;else if(De.isDataArrayTexture||De.isCompressedArrayTexture)V.setTexture2DArray(De,0),rt=ne.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}ne.pixelStorei(ne.UNPACK_FLIP_Y_WEBGL,De.flipY),ne.pixelStorei(ne.UNPACK_PREMULTIPLY_ALPHA_WEBGL,De.premultiplyAlpha),ne.pixelStorei(ne.UNPACK_ALIGNMENT,De.unpackAlignment);const it=ne.getParameter(ne.UNPACK_ROW_LENGTH),yt=ne.getParameter(ne.UNPACK_IMAGE_HEIGHT),Nt=ne.getParameter(ne.UNPACK_SKIP_PIXELS),Ot=ne.getParameter(ne.UNPACK_SKIP_ROWS),Xt=ne.getParameter(ne.UNPACK_SKIP_IMAGES),bt=he.isCompressedTexture?he.mipmaps[Se]:he.image;ne.pixelStorei(ne.UNPACK_ROW_LENGTH,bt.width),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,bt.height),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Z.min.x),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Z.min.y),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,Z.min.z),he.isDataTexture||he.isData3DTexture?ne.texSubImage3D(rt,Se,ce.x,ce.y,ce.z,He,We,je,ke,ht,bt.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ne.compressedTexSubImage3D(rt,Se,ce.x,ce.y,ce.z,He,We,je,ke,bt.data)):ne.texSubImage3D(rt,Se,ce.x,ce.y,ce.z,He,We,je,ke,ht,bt),ne.pixelStorei(ne.UNPACK_ROW_LENGTH,it),ne.pixelStorei(ne.UNPACK_IMAGE_HEIGHT,yt),ne.pixelStorei(ne.UNPACK_SKIP_PIXELS,Nt),ne.pixelStorei(ne.UNPACK_SKIP_ROWS,Ot),ne.pixelStorei(ne.UNPACK_SKIP_IMAGES,Xt),Se===0&&De.generateMipmaps&&ne.generateMipmap(rt),te.unbindTexture()},this.initTexture=function(Z){Z.isCubeTexture?V.setTextureCube(Z,0):Z.isData3DTexture?V.setTexture3D(Z,0):Z.isDataArrayTexture||Z.isCompressedArrayTexture?V.setTexture2DArray(Z,0):V.setTexture2D(Z,0),te.unbindTexture()},this.resetState=function(){E=0,_=0,A=null,te.reset(),we.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===bw?"display-p3":"srgb",n.unpackColorSpace=Yn.workingColorSpace===Wg?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Nn?ac:kT}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ac?Nn:Ys}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class J6 extends QT{}J6.prototype.isWebGL1Renderer=!0;class Ew{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ft(e),this.density=n}clone(){return new Ew(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Mw{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new ft(e),this.near=n,this.far=r}clone(){return new Mw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class zf extends On{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class Aw{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=sg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=os()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=os()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ca=new fe;class kf{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyMatrix4(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.applyNormalMatrix(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ca.fromBufferAttribute(this,n),ca.transformDirection(e),this.setXYZ(n,ca.x,ca.y,ca.z);return this}setX(e,n){return this.normalized&&(n=fn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=fn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=za(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=za(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=za(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=za(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(n=fn(n,this.array),r=fn(r,this.array),i=fn(i,this.array),a=fn(a,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return new dn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new kf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class JT extends li{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Wd;const Pm=new fe,qd=new fe,jd=new fe,Xd=new qe,Im=new qe,e$=new Ht,n1=new fe,Om=new fe,r1=new fe,RI=new qe,PE=new qe,PI=new qe;class t$ extends On{constructor(e=new JT){if(super(),this.isSprite=!0,this.type="Sprite",Wd===void 0){Wd=new Jt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Aw(n,5);Wd.setIndex([0,1,2,0,2,3]),Wd.setAttribute("position",new kf(r,3,0,!1)),Wd.setAttribute("uv",new kf(r,2,3,!1))}this.geometry=Wd,this.material=e,this.center=new qe(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),qd.setFromMatrixScale(this.matrixWorld),e$.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&qd.multiplyScalar(-jd.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;i1(n1.set(-.5,-.5,0),jd,s,qd,i,a),i1(Om.set(.5,-.5,0),jd,s,qd,i,a),i1(r1.set(.5,.5,0),jd,s,qd,i,a),RI.set(0,0),PE.set(1,0),PI.set(1,1);let o=e.ray.intersectTriangle(n1,Om,r1,!1,Pm);if(o===null&&(i1(Om.set(-.5,.5,0),jd,s,qd,i,a),PE.set(0,1),o=e.ray.intersectTriangle(n1,r1,Om,!1,Pm),o===null))return;const u=e.ray.origin.distanceTo(Pm);u<e.near||u>e.far||n.push({distance:u,point:Pm.clone(),uv:Ua.getInterpolation(Pm,n1,Om,r1,RI,PE,PI,new qe),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function i1(t,e,n,r,i,a){Xd.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Im.x=a*Xd.x-i*Xd.y,Im.y=i*Xd.x+a*Xd.y):Im.copy(Xd),t.copy(e),t.x+=Im.x,t.y+=Im.y,t.applyMatrix4(e$)}const a1=new fe,II=new fe;class n$ extends On{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const a=n[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let a;for(a=0;a<i.length&&!(n<i[a].distance);a++);return i.splice(a,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let a=n[r].distance;if(n[r].object.visible&&(a-=a*n[r].hysteresis),e<a)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){a1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(a1);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){a1.setFromMatrixPosition(e.matrixWorld),II.setFromMatrixPosition(this.matrixWorld);const r=a1.distanceTo(II)/e.zoom;n[0].object.visible=!0;let i,a;for(i=1,a=n.length;i<a;i++){let s=n[i].distance;if(n[i].object.visible&&(s-=s*n[i].hysteresis),r>=s)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<a;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];n.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return n}}const OI=new fe,FI=new Wn,LI=new Wn,zte=new fe,BI=new Ht,s1=new fe,IE=new ta,UI=new Ht,OE=new Kf;class r$ extends qr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=UA,this.bindMatrix=new Ht,this.bindMatrixInverse=new Ht,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ya),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,s1),this.boundingBox.expandByPoint(s1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ta),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,s1),this.boundingSphere.expandByPoint(s1)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),IE.copy(this.boundingSphere),IE.applyMatrix4(i),e.ray.intersectsSphere(IE)!==!1&&(UI.copy(i).invert(),OE.copy(e.ray).applyMatrix4(UI),!(this.boundingBox!==null&&OE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,OE)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===UA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===x6?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;FI.fromBufferAttribute(i.attributes.skinIndex,e),LI.fromBufferAttribute(i.attributes.skinWeight,e),OI.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let a=0;a<4;a++){const s=LI.getComponent(a);if(s!==0){const o=FI.getComponent(a);BI.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),n.addScaledVector(zte.copy(OI).applyMatrix4(BI),s)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class eD extends On{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Df extends yr{constructor(e=null,n=1,r=1,i,a,s,o,u,l=mr,c=mr,f,d){super(null,s,o,u,l,c,i,a,f,d),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const zI=new Ht,kte=new Ht;class Cw{constructor(e=[],n=[]){this.uuid=os(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ht)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Ht;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:kte;zI.multiplyMatrices(o,n[a]),zI.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Cw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Df(n,e,e,Zi,xi);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=n[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new eD),this.bones.push(s),this.boneInverses.push(new Ht().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,a=n.length;i<a;i++){const s=n[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}class np extends dn{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Yd=new Ht,kI=new Ht,o1=[],$I=new ya,$te=new Ht,Fm=new qr,Lm=new ta;class i$ extends qr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new np(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,$te)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new ya),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Yd),$I.copy(e.boundingBox).applyMatrix4(Yd),this.boundingBox.union($I)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new ta),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Yd),Lm.copy(e.boundingSphere).applyMatrix4(Yd),this.boundingSphere.union(Lm)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Fm.geometry=this.geometry,Fm.material=this.material,Fm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lm.copy(this.boundingSphere),Lm.applyMatrix4(r),e.ray.intersectsSphere(Lm)!==!1))for(let a=0;a<i;a++){this.getMatrixAt(a,Yd),kI.multiplyMatrices(r,Yd),Fm.matrixWorld=kI,Fm.raycast(e,o1);for(let s=0,o=o1.length;s<o;s++){const u=o1[s];u.instanceId=a,u.object=this,n.push(u)}o1.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new np(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function Hte(t,e){return t.z-e.z}function Gte(t,e){return e.z-t.z}class Vte{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1});const a=r[this.index];i.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=n}reset(){this.list.length=0,this.index=0}}const Zd="batchId",Tl=new Ht,HI=new Ht,Wte=new Ht,GI=new Ht,FE=new Xg,u1=new ya,Zc=new ta,Bm=new fe,LE=new Vte,Wi=new qr,l1=[];function qte(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let a=0;a<i;a++)for(let s=0;s<r;s++)e.setComponent(a+n,s,t.getComponent(a,s))}else e.array.set(t.array,n*r);e.needsUpdate=!0}class a$ extends qr{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,r=n*2,i){super(new Jt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new Df(n,e,e,Zi,xi);this._matricesTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxGeometryCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const u=e.getAttribute(o),{array:l,itemSize:c,normalized:f}=u,d=new l.constructor(r*c),h=new u.constructor(d,c,f);h.setUsage(u.usage),n.setAttribute(o,h)}if(e.getIndex()!==null){const o=r>65536?new Uint32Array(a):new Uint16Array(a);n.setIndex(new dn(o,1))}const s=i>65536?new Uint32Array(r):new Uint16Array(r);n.setAttribute(Zd,new dn(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Zd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Zd}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(r===Zd)continue;if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),a=n.getAttribute(r);if(i.itemSize!==a.itemSize||i.normalized!==a.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ya);const e=this._geometryCount,n=this.boundingBox,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Tl),this.getBoundingBoxAt(i,u1).applyMatrix4(Tl),n.union(u1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ta);const e=this._geometryCount,n=this.boundingSphere,r=this._active;n.makeEmpty();for(let i=0;i<e;i++)r[i]!==!1&&(this.getMatrixAt(i,Tl),this.getBoundingSphereAt(i,Zc).applyMatrix4(Tl),n.union(Zc))}addGeometry(e,n=-1,r=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let a=null;const s=this._reservedRanges,o=this._drawRanges,u=this._bounds;this._geometryCount!==0&&(a=s[s.length-1]),n===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=n,a===null?i.vertexStart=0:i.vertexStart=a.vertexStart+a.vertexCount;const l=e.getIndex(),c=l!==null;if(c&&(r===-1?i.indexCount=l.count:i.indexCount=r,a===null?i.indexStart=0:i.indexStart=a.indexStart+a.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,d=this._active,h=this._matricesTexture,m=this._matricesTexture.image.data;f.push(!0),d.push(!0);const v=this._geometryCount;this._geometryCount++,Wte.toArray(m,v*16),h.needsUpdate=!0,s.push(i),o.push({start:c?i.indexStart:i.vertexStart,count:-1}),u.push({boxInitialized:!1,box:new ya,sphereInitialized:!1,sphere:new ta});const y=this.geometry.getAttribute(Zd);for(let p=0;p<i.vertexCount;p++)y.setX(i.vertexStart+p,v);return y.needsUpdate=!0,this.setGeometryAt(v,e),v}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,a=r.getIndex(),s=n.getIndex(),o=this._reservedRanges[e];if(i&&s.count>o.indexCount||n.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const u=o.vertexStart,l=o.vertexCount;for(const h in r.attributes){if(h===Zd)continue;const m=n.getAttribute(h),v=r.getAttribute(h);qte(m,v,u);const y=m.itemSize;for(let p=m.count,x=l;p<x;p++){const g=u+p;for(let S=0;S<y;S++)v.setComponent(g,S,0)}v.needsUpdate=!0}if(i){const h=o.indexStart;for(let m=0;m<s.count;m++)a.setX(h+m,u+s.getX(m));for(let m=s.count,v=o.indexCount;m<v;m++)a.setX(h+m,u);a.needsUpdate=!0}const c=this._bounds[e];n.boundingBox!==null?(c.box.copy(n.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,n.boundingSphere!==null?(c.sphere.copy(n.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const f=this._drawRanges[e],d=n.getAttribute("position");return f.count=i?s.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.box,s=this.geometry;if(i.boxInitialized===!1){a.makeEmpty();const o=s.index,u=s.attributes.position,l=this._drawRanges[e];for(let c=l.start,f=l.start+l.count;c<f;c++){let d=c;o&&(d=o.getX(d)),a.expandByPoint(Bm.fromBufferAttribute(u,d))}i.boxInitialized=!0}return n.copy(a),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return this;const i=this._bounds[e],a=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){a.makeEmpty(),this.getBoundingBoxAt(e,u1),u1.getCenter(a.center);const o=s.index,u=s.attributes.position,l=this._drawRanges[e];let c=0;for(let f=l.start,d=l.start+l.count;f<d;f++){let h=f;o&&(h=o.getX(h)),Bm.fromBufferAttribute(u,h),c=Math.max(c,a.center.distanceToSquared(Bm))}a.radius=Math.sqrt(c),i.sphereInitialized=!0}return n.copy(a),n}setMatrixAt(e,n){const r=this._active,i=this._matricesTexture,a=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||r[e]===!1?this:(n.toArray(a,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._active,i=this._matricesTexture.image.data,a=this._geometryCount;return e>=a||r[e]===!1?null:n.fromArray(i,e*16)}setVisibleAt(e,n){const r=this._visibility,i=this._active,a=this._geometryCount;return e>=a||i[e]===!1||r[e]===n?this:(r[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,r=this._active,i=this._geometryCount;return e>=i||r[e]===!1?!1:n[e]}raycast(e,n){const r=this._visibility,i=this._active,a=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,u=this.geometry;Wi.material=this.material,Wi.geometry.index=u.index,Wi.geometry.attributes=u.attributes,Wi.geometry.boundingBox===null&&(Wi.geometry.boundingBox=new ya),Wi.geometry.boundingSphere===null&&(Wi.geometry.boundingSphere=new ta);for(let l=0;l<s;l++){if(!r[l]||!i[l])continue;const c=a[l];Wi.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(l,Wi.matrixWorld).premultiply(o),this.getBoundingBoxAt(l,Wi.geometry.boundingBox),this.getBoundingSphereAt(l,Wi.geometry.boundingSphere),Wi.raycast(e,l1);for(let f=0,d=l1.length;f<d;f++){const h=l1[f];h.object=this,h.batchId=l,n.push(h)}l1.length=0}Wi.material=null,Wi.geometry.index=null,Wi.geometry.attributes={},Wi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,r,i,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=i.getIndex(),o=s===null?1:s.array.BYTES_PER_ELEMENT,u=this._visibility,l=this._multiDrawStarts,c=this._multiDrawCounts,f=this._drawRanges,d=this.perObjectFrustumCulled;d&&(GI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),FE.setFromProjectionMatrix(GI,e.isWebGPURenderer?Jh:xo));let h=0;if(this.sortObjects){HI.copy(this.matrixWorld).invert(),Bm.setFromMatrixPosition(r.matrixWorld).applyMatrix4(HI);for(let y=0,p=u.length;y<p;y++)if(u[y]){this.getMatrixAt(y,Tl),this.getBoundingSphereAt(y,Zc).applyMatrix4(Tl);let x=!1;if(d&&(x=!FE.intersectsSphere(Zc)),!x){const g=Bm.distanceTo(Zc.center);LE.push(f[y],g)}}const m=LE.list,v=this.customSort;v===null?m.sort(a.transparent?Gte:Hte):v.call(this,m,r);for(let y=0,p=m.length;y<p;y++){const x=m[y];l[h]=x.start*o,c[h]=x.count,h++}LE.reset()}else for(let m=0,v=u.length;m<v;m++)if(u[m]){let y=!1;if(d&&(this.getMatrixAt(m,Tl),this.getBoundingSphereAt(m,Zc).applyMatrix4(Tl),y=!FE.intersectsSphere(Zc)),!y){const p=f[m];l[h]=p.start*o,c[h]=p.count,h++}}this._multiDrawCount=h,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,a,s){this.onBeforeRender(e,null,i,a,s)}}class Ma extends li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ft(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const VI=new fe,WI=new fe,qI=new Ht,BE=new Kf,c1=new ta;class dc extends On{constructor(e=new Jt,n=new Ma){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,a=n.count;i<a;i++)VI.fromBufferAttribute(n,i-1),WI.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=VI.distanceTo(WI);e.setAttribute("lineDistance",new Tt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),c1.copy(r.boundingSphere),c1.applyMatrix4(i),c1.radius+=a,e.ray.intersectsSphere(c1)===!1)return;qI.copy(i).invert(),BE.copy(e.ray).applyMatrix4(qI);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,l=new fe,c=new fe,f=new fe,d=new fe,h=this.isLineSegments?2:1,m=r.index,y=r.attributes.position;if(m!==null){const p=Math.max(0,s.start),x=Math.min(m.count,s.start+s.count);for(let g=p,S=x-1;g<S;g+=h){const E=m.getX(g),_=m.getX(g+1);if(l.fromBufferAttribute(y,E),c.fromBufferAttribute(y,_),BE.distanceSqToSegment(l,c,d,f)>u)continue;d.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(d);T<e.near||T>e.far||n.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,s.start),x=Math.min(y.count,s.start+s.count);for(let g=p,S=x-1;g<S;g+=h){if(l.fromBufferAttribute(y,g),c.fromBufferAttribute(y,g+1),BE.distanceSqToSegment(l,c,d,f)>u)continue;d.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(d);_<e.near||_>e.far||n.push({distance:_,point:f.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}const jI=new fe,XI=new fe;class lu extends dc{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,a=n.count;i<a;i+=2)jI.fromBufferAttribute(n,i),XI.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+jI.distanceTo(XI);e.setAttribute("lineDistance",new Tt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class s$ extends dc{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class tD extends li{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ft(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const YI=new Ht,m2=new Kf,f1=new ta,d1=new fe;class o$ extends On{constructor(e=new Jt,n=new tD){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),f1.copy(r.boundingSphere),f1.applyMatrix4(i),f1.radius+=a,e.ray.intersectsSphere(f1)===!1)return;YI.copy(i).invert(),m2.copy(e.ray).applyMatrix4(YI);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),u=o*o,l=r.index,f=r.attributes.position;if(l!==null){const d=Math.max(0,s.start),h=Math.min(l.count,s.start+s.count);for(let m=d,v=h;m<v;m++){const y=l.getX(m);d1.fromBufferAttribute(f,y),ZI(d1,y,u,i,e,n,this)}}else{const d=Math.max(0,s.start),h=Math.min(f.count,s.start+s.count);for(let m=d,v=h;m<v;m++)d1.fromBufferAttribute(f,m),ZI(d1,m,u,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function ZI(t,e,n,r,i,a,s){const o=m2.distanceSqToPoint(t);if(o<n){const u=new fe;m2.closestPointToPoint(t,u),u.applyMatrix4(r);const l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:u,index:e,face:null,object:s})}}class jte extends yr{constructor(e,n,r,i,a,s,o,u,l){super(e,n,r,i,a,s,o,u,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Qn,this.magFilter=a!==void 0?a:Qn,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Xte extends yr{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=mr,this.minFilter=mr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Tw extends yr{constructor(e,n,r,i,a,s,o,u,l,c,f,d){super(null,s,o,u,l,c,i,a,f,d),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Yte extends Tw{constructor(e,n,r,i,a,s){super(e,n,r,a,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Yi}}class Zte extends Tw{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,ru),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Kte extends yr{constructor(e,n,r,i,a,s,o,u,l){super(e,n,r,i,a,s,o,u,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Do=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),a=0;n.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),n.push(a),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const a=r.length;let s;n?s=n:s=e*r[a-1];let o=0,u=a-1,l;for(;o<=u;)if(i=Math.floor(o+(u-o)/2),l=r[i]-s,l<0)o=i+1;else if(l>0)u=i-1;else{u=i;break}if(i=u,r[i]===s)return i/(a-1);const c=r[i],d=r[i+1]-c,h=(s-c)/d;return(i+h)/(a-1)}getTangent(e,n){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),u=n||(s.isVector2?new qe:new fe);return u.copy(o).sub(s).normalize(),u}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new fe,i=[],a=[],s=[],o=new fe,u=new Ht;for(let h=0;h<=e;h++){const m=h/e;i[h]=this.getTangentAt(m,new fe)}a[0]=new fe,s[0]=new fe;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,r.set(1,0,0)),f<=l&&(l=f,r.set(0,1,0)),d<=l&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let h=1;h<=e;h++){if(a[h]=a[h-1].clone(),s[h]=s[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const m=Math.acos(Ur(i[h-1].dot(i[h]),-1,1));a[h].applyMatrix4(u.makeRotationAxis(o,m))}s[h].crossVectors(i[h],a[h])}if(n===!0){let h=Math.acos(Ur(a[0].dot(a[e]),-1,1));h/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(h=-h);for(let m=1;m<=e;m++)a[m].applyMatrix4(u.makeRotationAxis(i[m],h*m)),s[m].crossVectors(i[m],a[m])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class Dw extends Do{constructor(e=0,n=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=u}getPoint(e,n){const r=n||new qe,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let u=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),d=u-this.aX,h=l-this.aY;u=d*c-h*f+this.aX,l=d*f+h*c+this.aY}return r.set(u,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class u$ extends Dw{constructor(e,n,r,i,a,s){super(e,n,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function nD(){let t=0,e=0,n=0,r=0;function i(a,s,o,u){t=a,e=o,n=-3*a+3*s-2*o-u,r=2*a-2*s+o+u}return{initCatmullRom:function(a,s,o,u,l){i(s,o,l*(o-a),l*(u-s))},initNonuniformCatmullRom:function(a,s,o,u,l,c,f){let d=(s-a)/l-(o-a)/(l+c)+(o-s)/c,h=(o-s)/c-(u-s)/(c+f)+(u-o)/f;d*=c,h*=c,i(s,o,d,h)},calc:function(a){const s=a*a,o=s*a;return t+e*a+n*s+r*o}}}const h1=new fe,UE=new nD,zE=new nD,kE=new nD;class l$ extends Do{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new fe){const r=n,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),u=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:u===0&&o===a-1&&(o=a-2,u=1);let l,c;this.closed||o>0?l=i[(o-1)%a]:(h1.subVectors(i[0],i[1]).add(i[0]),l=h1);const f=i[o%a],d=i[(o+1)%a];if(this.closed||o+2<a?c=i[(o+2)%a]:(h1.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=h1),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let m=Math.pow(l.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(d),h),y=Math.pow(d.distanceToSquared(c),h);v<1e-4&&(v=1),m<1e-4&&(m=v),y<1e-4&&(y=v),UE.initNonuniformCatmullRom(l.x,f.x,d.x,c.x,m,v,y),zE.initNonuniformCatmullRom(l.y,f.y,d.y,c.y,m,v,y),kE.initNonuniformCatmullRom(l.z,f.z,d.z,c.z,m,v,y)}else this.curveType==="catmullrom"&&(UE.initCatmullRom(l.x,f.x,d.x,c.x,this.tension),zE.initCatmullRom(l.y,f.y,d.y,c.y,this.tension),kE.initCatmullRom(l.z,f.z,d.z,c.z,this.tension));return r.set(UE.calc(u),zE.calc(u),kE.calc(u)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new fe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function KI(t,e,n,r,i){const a=(r-e)*.5,s=(i-n)*.5,o=t*t,u=t*o;return(2*n-2*r+a+s)*u+(-3*n+3*r-2*a-s)*o+a*t+n}function Qte(t,e){const n=1-t;return n*n*e}function Jte(t,e){return 2*(1-t)*t*e}function ene(t,e){return t*t*e}function bv(t,e,n,r){return Qte(t,e)+Jte(t,n)+ene(t,r)}function tne(t,e){const n=1-t;return n*n*n*e}function nne(t,e){const n=1-t;return 3*n*n*t*e}function rne(t,e){return 3*(1-t)*t*t*e}function ine(t,e){return t*t*t*e}function wv(t,e,n,r,i){return tne(t,e)+nne(t,n)+rne(t,r)+ine(t,i)}class rD extends Do{constructor(e=new qe,n=new qe,r=new qe,i=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new qe){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(wv(e,i.x,a.x,s.x,o.x),wv(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class c$ extends Do{constructor(e=new fe,n=new fe,r=new fe,i=new fe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new fe){const r=n,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(wv(e,i.x,a.x,s.x,o.x),wv(e,i.y,a.y,s.y,o.y),wv(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iD extends Do{constructor(e=new qe,n=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new qe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new qe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class f$ extends Do{constructor(e=new fe,n=new fe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new fe){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new fe){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aD extends Do{constructor(e=new qe,n=new qe,r=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new qe){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(bv(e,i.x,a.x,s.x),bv(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sD extends Do{constructor(e=new fe,n=new fe,r=new fe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new fe){const r=n,i=this.v0,a=this.v1,s=this.v2;return r.set(bv(e,i.x,a.x,s.x),bv(e,i.y,a.y,s.y),bv(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oD extends Do{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new qe){const r=n,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,u=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],f=i[s>i.length-3?i.length-1:s+2];return r.set(KI(o,u.x,l.x,c.x,f.x),KI(o,u.y,l.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new qe().fromArray(i))}return this}}var ob=Object.freeze({__proto__:null,ArcCurve:u$,CatmullRomCurve3:l$,CubicBezierCurve:rD,CubicBezierCurve3:c$,EllipseCurve:Dw,LineCurve:iD,LineCurve3:f$,QuadraticBezierCurve:aD,QuadraticBezierCurve3:sD,SplineCurve:oD});class d$ extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ob[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],u=o.getLength(),l=u===0?0:1-s/u;return o.getPointAt(l,n)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,u=s.getPoints(o);for(let l=0;l<u.length;l++){const c=u[l];r&&r.equals(c)||(n.push(c),r=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new ob[i.type]().fromJSON(i))}return this}}class ug extends d${constructor(e){super(),this.type="Path",this.currentPoint=new qe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new iD(this.currentPoint.clone(),new qe(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const a=new aD(this.currentPoint.clone(),new qe(e,n),new qe(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,a,s){const o=new rD(this.currentPoint.clone(),new qe(e,n),new qe(r,i),new qe(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new oD(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,a,s){const o=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+o,n+u,r,i,a,s),this}absarc(e,n,r,i,a,s){return this.absellipse(e,n,r,r,i,a,s),this}ellipse(e,n,r,i,a,s,o,u){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,n+c,r,i,a,s,o,u),this}absellipse(e,n,r,i,a,s,o,u){const l=new Dw(e,n,r,i,a,s,o,u);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Zg extends Jt{constructor(e=[new qe(0,-.5),new qe(.5,0),new qe(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ur(i,0,Math.PI*2);const a=[],s=[],o=[],u=[],l=[],c=1/n,f=new fe,d=new qe,h=new fe,m=new fe,v=new fe;let y=0,p=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:y=e[x+1].x-e[x].x,p=e[x+1].y-e[x].y,h.x=p*1,h.y=-y,h.z=p*0,v.copy(h),h.normalize(),u.push(h.x,h.y,h.z);break;case e.length-1:u.push(v.x,v.y,v.z);break;default:y=e[x+1].x-e[x].x,p=e[x+1].y-e[x].y,h.x=p*1,h.y=-y,h.z=p*0,m.copy(h),h.x+=v.x,h.y+=v.y,h.z+=v.z,h.normalize(),u.push(h.x,h.y,h.z),v.copy(m)}for(let x=0;x<=n;x++){const g=r+x*c*i,S=Math.sin(g),E=Math.cos(g);for(let _=0;_<=e.length-1;_++){f.x=e[_].x*S,f.y=e[_].y,f.z=e[_].x*E,s.push(f.x,f.y,f.z),d.x=x/n,d.y=_/(e.length-1),o.push(d.x,d.y);const A=u[3*_+0]*S,T=u[3*_+1],M=u[3*_+0]*E;l.push(A,T,M)}}for(let x=0;x<n;x++)for(let g=0;g<e.length-1;g++){const S=g+x*e.length,E=S,_=S+e.length,A=S+e.length+1,T=S+1;a.push(E,_,T),a.push(A,T,_)}this.setIndex(a),this.setAttribute("position",new Tt(s,3)),this.setAttribute("uv",new Tt(o,2)),this.setAttribute("normal",new Tt(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zg(e.points,e.segments,e.phiStart,e.phiLength)}}class Nw extends Zg{constructor(e=1,n=1,r=4,i=8){const a=new ug;a.absarc(0,-n/2,e,Math.PI*1.5,0),a.absarc(0,n/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new Nw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Rw extends Jt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const a=[],s=[],o=[],u=[],l=new fe,c=new qe;s.push(0,0,0),o.push(0,0,1),u.push(.5,.5);for(let f=0,d=3;f<=n;f++,d+=3){const h=r+f/n*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(s[d]/e+1)/2,c.y=(s[d+1]/e+1)/2,u.push(c.x,c.y)}for(let f=1;f<=n;f++)a.push(f,f+1,0);this.setIndex(a),this.setAttribute("position",new Tt(s,3)),this.setAttribute("normal",new Tt(o,3)),this.setAttribute("uv",new Tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cp extends Jt{constructor(e=1,n=1,r=1,i=32,a=1,s=!1,o=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:u};const l=this;i=Math.floor(i),a=Math.floor(a);const c=[],f=[],d=[],h=[];let m=0;const v=[],y=r/2;let p=0;x(),s===!1&&(e>0&&g(!0),n>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new Tt(f,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(h,2));function x(){const S=new fe,E=new fe;let _=0;const A=(n-e)/r;for(let T=0;T<=a;T++){const M=[],C=T/a,N=C*(n-e)+e;for(let P=0;P<=i;P++){const H=P/i,L=H*u+o,z=Math.sin(L),O=Math.cos(L);E.x=N*z,E.y=-C*r+y,E.z=N*O,f.push(E.x,E.y,E.z),S.set(z,A,O).normalize(),d.push(S.x,S.y,S.z),h.push(H,1-C),M.push(m++)}v.push(M)}for(let T=0;T<i;T++)for(let M=0;M<a;M++){const C=v[M][T],N=v[M+1][T],P=v[M+1][T+1],H=v[M][T+1];c.push(C,N,H),c.push(N,P,H),_+=6}l.addGroup(p,_,0),p+=_}function g(S){const E=m,_=new qe,A=new fe;let T=0;const M=S===!0?e:n,C=S===!0?1:-1;for(let P=1;P<=i;P++)f.push(0,y*C,0),d.push(0,C,0),h.push(.5,.5),m++;const N=m;for(let P=0;P<=i;P++){const L=P/i*u+o,z=Math.cos(L),O=Math.sin(L);A.x=M*O,A.y=y*C,A.z=M*z,f.push(A.x,A.y,A.z),d.push(0,C,0),_.x=z*.5+.5,_.y=O*.5*C+.5,h.push(_.x,_.y),m++}for(let P=0;P<i;P++){const H=E+P,L=N+P;S===!0?c.push(L,L+1,H):c.push(L+1,L,H),T+=3}l.addGroup(p,T,S===!0?1:2),p+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Pw extends Cp{constructor(e=1,n=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,n,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Pw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cc extends Jt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const a=[],s=[];o(i),l(r),c(),this.setAttribute("position",new Tt(a,3)),this.setAttribute("normal",new Tt(a.slice(),3)),this.setAttribute("uv",new Tt(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(x){const g=new fe,S=new fe,E=new fe;for(let _=0;_<n.length;_+=3)h(n[_+0],g),h(n[_+1],S),h(n[_+2],E),u(g,S,E,x)}function u(x,g,S,E){const _=E+1,A=[];for(let T=0;T<=_;T++){A[T]=[];const M=x.clone().lerp(S,T/_),C=g.clone().lerp(S,T/_),N=_-T;for(let P=0;P<=N;P++)P===0&&T===_?A[T][P]=M:A[T][P]=M.clone().lerp(C,P/N)}for(let T=0;T<_;T++)for(let M=0;M<2*(_-T)-1;M++){const C=Math.floor(M/2);M%2===0?(d(A[T][C+1]),d(A[T+1][C]),d(A[T][C])):(d(A[T][C+1]),d(A[T+1][C+1]),d(A[T+1][C]))}}function l(x){const g=new fe;for(let S=0;S<a.length;S+=3)g.x=a[S+0],g.y=a[S+1],g.z=a[S+2],g.normalize().multiplyScalar(x),a[S+0]=g.x,a[S+1]=g.y,a[S+2]=g.z}function c(){const x=new fe;for(let g=0;g<a.length;g+=3){x.x=a[g+0],x.y=a[g+1],x.z=a[g+2];const S=y(x)/2/Math.PI+.5,E=p(x)/Math.PI+.5;s.push(S,1-E)}m(),f()}function f(){for(let x=0;x<s.length;x+=6){const g=s[x+0],S=s[x+2],E=s[x+4],_=Math.max(g,S,E),A=Math.min(g,S,E);_>.9&&A<.1&&(g<.2&&(s[x+0]+=1),S<.2&&(s[x+2]+=1),E<.2&&(s[x+4]+=1))}}function d(x){a.push(x.x,x.y,x.z)}function h(x,g){const S=x*3;g.x=e[S+0],g.y=e[S+1],g.z=e[S+2]}function m(){const x=new fe,g=new fe,S=new fe,E=new fe,_=new qe,A=new qe,T=new qe;for(let M=0,C=0;M<a.length;M+=9,C+=6){x.set(a[M+0],a[M+1],a[M+2]),g.set(a[M+3],a[M+4],a[M+5]),S.set(a[M+6],a[M+7],a[M+8]),_.set(s[C+0],s[C+1]),A.set(s[C+2],s[C+3]),T.set(s[C+4],s[C+5]),E.copy(x).add(g).add(S).divideScalar(3);const N=y(E);v(_,C+0,x,N),v(A,C+2,g,N),v(T,C+4,S,N)}}function v(x,g,S,E){E<0&&x.x===1&&(s[g]=x.x-1),S.x===0&&S.z===0&&(s[g]=E/2/Math.PI+.5)}function y(x){return Math.atan2(x.z,-x.x)}function p(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cc(e.vertices,e.indices,e.radius,e.details)}}class Iw extends Cc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Iw(e.radius,e.detail)}}const p1=new fe,m1=new fe,$E=new fe,v1=new Ua;class h$ extends Jt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),a=Math.cos(Cf*n),s=e.getIndex(),o=e.getAttribute("position"),u=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],f=new Array(3),d={},h=[];for(let m=0;m<u;m+=3){s?(l[0]=s.getX(m),l[1]=s.getX(m+1),l[2]=s.getX(m+2)):(l[0]=m,l[1]=m+1,l[2]=m+2);const{a:v,b:y,c:p}=v1;if(v.fromBufferAttribute(o,l[0]),y.fromBufferAttribute(o,l[1]),p.fromBufferAttribute(o,l[2]),v1.getNormal($E),f[0]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,f[1]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,f[2]=`${Math.round(p.x*i)},${Math.round(p.y*i)},${Math.round(p.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let x=0;x<3;x++){const g=(x+1)%3,S=f[x],E=f[g],_=v1[c[x]],A=v1[c[g]],T=`${S}_${E}`,M=`${E}_${S}`;M in d&&d[M]?($E.dot(d[M].normal)<=a&&(h.push(_.x,_.y,_.z),h.push(A.x,A.y,A.z)),d[M]=null):T in d||(d[T]={index0:l[x],index1:l[g],normal:$E.clone()})}}for(const m in d)if(d[m]){const{index0:v,index1:y}=d[m];p1.fromBufferAttribute(o,v),m1.fromBufferAttribute(o,y),h.push(p1.x,p1.y,p1.z),h.push(m1.x,m1.y,m1.z)}this.setAttribute("position",new Tt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Nf extends ug{constructor(e){super(e),this.uuid=os(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new ug().fromJSON(i))}return this}}const ane={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let a=p$(t,0,i,n,!0);const s=[];if(!a||a.next===a.prev)return s;let o,u,l,c,f,d,h;if(r&&(a=cne(t,e,a,n)),t.length>80*n){o=l=t[0],u=c=t[1];for(let m=n;m<i;m+=n)f=t[m],d=t[m+1],f<o&&(o=f),d<u&&(u=d),f>l&&(l=f),d>c&&(c=d);h=Math.max(l-o,c-u),h=h!==0?32767/h:0}return lg(a,s,n,o,u,h,0),s}};function p$(t,e,n,r,i){let a,s;if(i===wne(t,e,n,r)>0)for(a=e;a<n;a+=r)s=QI(a,t[a],t[a+1],s);else for(a=n-r;a>=e;a-=r)s=QI(a,t[a],t[a+1],s);return s&&Ow(s,s.next)&&(fg(s),s=s.next),s}function $f(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Ow(n,n.next)||Dr(n.prev,n,n.next)===0)){if(fg(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function lg(t,e,n,r,i,a,s){if(!t)return;!s&&a&&mne(t,r,i,a);let o=t,u,l;for(;t.prev!==t.next;){if(u=t.prev,l=t.next,a?one(t,r,i,a):sne(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),fg(t),t=l.next,o=l.next;continue}if(t=l,t===o){s?s===1?(t=une($f(t),e,n),lg(t,e,n,r,i,a,2)):s===2&&lne(t,e,n,r,i,a):lg($f(t),e,n,r,i,a,1);break}}}function sne(t){const e=t.prev,n=t,r=t.next;if(Dr(e,n,r)>=0)return!1;const i=e.x,a=n.x,s=r.x,o=e.y,u=n.y,l=r.y,c=i<a?i<s?i:s:a<s?a:s,f=o<u?o<l?o:l:u<l?u:l,d=i>a?i>s?i:s:a>s?a:s,h=o>u?o>l?o:l:u>l?u:l;let m=r.next;for(;m!==e;){if(m.x>=c&&m.x<=d&&m.y>=f&&m.y<=h&&Eh(i,o,a,u,s,l,m.x,m.y)&&Dr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function one(t,e,n,r){const i=t.prev,a=t,s=t.next;if(Dr(i,a,s)>=0)return!1;const o=i.x,u=a.x,l=s.x,c=i.y,f=a.y,d=s.y,h=o<u?o<l?o:l:u<l?u:l,m=c<f?c<d?c:d:f<d?f:d,v=o>u?o>l?o:l:u>l?u:l,y=c>f?c>d?c:d:f>d?f:d,p=v2(h,m,e,n,r),x=v2(v,y,e,n,r);let g=t.prevZ,S=t.nextZ;for(;g&&g.z>=p&&S&&S.z<=x;){if(g.x>=h&&g.x<=v&&g.y>=m&&g.y<=y&&g!==i&&g!==s&&Eh(o,c,u,f,l,d,g.x,g.y)&&Dr(g.prev,g,g.next)>=0||(g=g.prevZ,S.x>=h&&S.x<=v&&S.y>=m&&S.y<=y&&S!==i&&S!==s&&Eh(o,c,u,f,l,d,S.x,S.y)&&Dr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;g&&g.z>=p;){if(g.x>=h&&g.x<=v&&g.y>=m&&g.y<=y&&g!==i&&g!==s&&Eh(o,c,u,f,l,d,g.x,g.y)&&Dr(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;S&&S.z<=x;){if(S.x>=h&&S.x<=v&&S.y>=m&&S.y<=y&&S!==i&&S!==s&&Eh(o,c,u,f,l,d,S.x,S.y)&&Dr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function une(t,e,n){let r=t;do{const i=r.prev,a=r.next.next;!Ow(i,a)&&m$(i,r,r.next,a)&&cg(i,a)&&cg(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),fg(r),fg(r.next),r=t=a),r=r.next}while(r!==t);return $f(r)}function lne(t,e,n,r,i,a){let s=t;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&yne(s,o)){let u=v$(s,o);s=$f(s,s.next),u=$f(u,u.next),lg(s,e,n,r,i,a,0),lg(u,e,n,r,i,a,0);return}o=o.next}s=s.next}while(s!==t)}function cne(t,e,n,r){const i=[];let a,s,o,u,l;for(a=0,s=e.length;a<s;a++)o=e[a]*r,u=a<s-1?e[a+1]*r:t.length,l=p$(t,o,u,r,!1),l===l.next&&(l.steiner=!0),i.push(gne(l));for(i.sort(fne),a=0;a<i.length;a++)n=dne(i[a],n);return n}function fne(t,e){return t.x-e.x}function dne(t,e){const n=hne(t,e);if(!n)return e;const r=v$(n,t);return $f(r,r.next),$f(n,n.next)}function hne(t,e){let n=e,r=-1/0,i;const a=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const d=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=a&&d>r&&(r=d,i=n.x<n.next.x?n:n.next,d===a))return i}n=n.next}while(n!==e);if(!i)return null;const o=i,u=i.x,l=i.y;let c=1/0,f;n=i;do a>=n.x&&n.x>=u&&a!==n.x&&Eh(s<l?a:r,s,u,l,s<l?r:a,s,n.x,n.y)&&(f=Math.abs(s-n.y)/(a-n.x),cg(n,t)&&(f<c||f===c&&(n.x>i.x||n.x===i.x&&pne(i,n)))&&(i=n,c=f)),n=n.next;while(n!==o);return i}function pne(t,e){return Dr(t.prev,t,e.prev)<0&&Dr(e.next,t,t.next)<0}function mne(t,e,n,r){let i=t;do i.z===0&&(i.z=v2(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,vne(i)}function vne(t){let e,n,r,i,a,s,o,u,l=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,r=n,o=0,e=0;e<l&&(o++,r=r.nextZ,!!r);e++);for(u=l;o>0||u>0&&r;)o!==0&&(u===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(s>1);return t}function v2(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function gne(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Eh(t,e,n,r,i,a,s,o){return(i-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(r-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(i-s)*(r-o)}function yne(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!xne(t,e)&&(cg(t,e)&&cg(e,t)&&bne(t,e)&&(Dr(t.prev,t,e.prev)||Dr(t,e.prev,e))||Ow(t,e)&&Dr(t.prev,t,t.next)>0&&Dr(e.prev,e,e.next)>0)}function Dr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ow(t,e){return t.x===e.x&&t.y===e.y}function m$(t,e,n,r){const i=y1(Dr(t,e,n)),a=y1(Dr(t,e,r)),s=y1(Dr(n,r,t)),o=y1(Dr(n,r,e));return!!(i!==a&&s!==o||i===0&&g1(t,n,e)||a===0&&g1(t,r,e)||s===0&&g1(n,t,r)||o===0&&g1(n,e,r))}function g1(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function y1(t){return t>0?1:t<0?-1:0}function xne(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&m$(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function cg(t,e){return Dr(t.prev,t,t.next)<0?Dr(t,e,t.next)>=0&&Dr(t,t.prev,e)>=0:Dr(t,e,t.prev)<0||Dr(t,t.next,e)<0}function bne(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function v$(t,e){const n=new g2(t.i,t.x,t.y),r=new g2(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function QI(t,e,n,r){const i=new g2(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function fg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function g2(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wne(t,e,n,r){let i=0;for(let a=e,s=n-r;a<n;a+=r)i+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return i}class tu{static area(e){const n=e.length;let r=0;for(let i=n-1,a=0;a<n;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return tu.area(e)<0}static triangulateShape(e,n){const r=[],i=[],a=[];JI(e),eO(r,e);let s=e.length;n.forEach(JI);for(let u=0;u<n.length;u++)i.push(s),s+=n[u].length,eO(r,n[u]);const o=ane.triangulate(r,i);for(let u=0;u<o.length;u+=3)a.push(o.slice(u,u+3));return a}}function JI(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function eO(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Fw extends Jt{constructor(e=new Nf([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,u=e.length;o<u;o++){const l=e[o];s(l)}this.setAttribute("position",new Tt(i,3)),this.setAttribute("uv",new Tt(a,2)),this.computeVertexNormals();function s(o){const u=[],l=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,f=n.depth!==void 0?n.depth:1;let d=n.bevelEnabled!==void 0?n.bevelEnabled:!0,h=n.bevelThickness!==void 0?n.bevelThickness:.2,m=n.bevelSize!==void 0?n.bevelSize:h-.1,v=n.bevelOffset!==void 0?n.bevelOffset:0,y=n.bevelSegments!==void 0?n.bevelSegments:3;const p=n.extrudePath,x=n.UVGenerator!==void 0?n.UVGenerator:Sne;let g,S=!1,E,_,A,T;p&&(g=p.getSpacedPoints(c),S=!0,d=!1,E=p.computeFrenetFrames(c,!1),_=new fe,A=new fe,T=new fe),d||(y=0,h=0,m=0,v=0);const M=o.extractPoints(l);let C=M.shape;const N=M.holes;if(!tu.isClockWise(C)){C=C.reverse();for(let ne=0,Le=N.length;ne<Le;ne++){const Fe=N[ne];tu.isClockWise(Fe)&&(N[ne]=Fe.reverse())}}const H=tu.triangulateShape(C,N),L=C;for(let ne=0,Le=N.length;ne<Le;ne++){const Fe=N[ne];C=C.concat(Fe)}function z(ne,Le,Fe){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),ne.clone().addScaledVector(Le,Fe)}const O=C.length,F=H.length;function U(ne,Le,Fe){let Q,te,Me;const re=ne.x-Le.x,V=ne.y-Le.y,G=Fe.x-ne.x,le=Fe.y-ne.y,_e=re*re+V*V,W=re*le-V*G;if(Math.abs(W)>Number.EPSILON){const Y=Math.sqrt(_e),de=Math.sqrt(G*G+le*le),xe=Le.x-V/Y,Ne=Le.y+re/Y,Be=Fe.x-le/de,$e=Fe.y+G/de,Ie=((Be-xe)*le-($e-Ne)*G)/(re*le-V*G);Q=xe+re*Ie-ne.x,te=Ne+V*Ie-ne.y;const Ye=Q*Q+te*te;if(Ye<=2)return new qe(Q,te);Me=Math.sqrt(Ye/2)}else{let Y=!1;re>Number.EPSILON?G>Number.EPSILON&&(Y=!0):re<-Number.EPSILON?G<-Number.EPSILON&&(Y=!0):Math.sign(V)===Math.sign(le)&&(Y=!0),Y?(Q=-V,te=re,Me=Math.sqrt(_e)):(Q=re,te=V,Me=Math.sqrt(_e/2))}return new qe(Q/Me,te/Me)}const I=[];for(let ne=0,Le=L.length,Fe=Le-1,Q=ne+1;ne<Le;ne++,Fe++,Q++)Fe===Le&&(Fe=0),Q===Le&&(Q=0),I[ne]=U(L[ne],L[Fe],L[Q]);const j=[];let ee,J=I.concat();for(let ne=0,Le=N.length;ne<Le;ne++){const Fe=N[ne];ee=[];for(let Q=0,te=Fe.length,Me=te-1,re=Q+1;Q<te;Q++,Me++,re++)Me===te&&(Me=0),re===te&&(re=0),ee[Q]=U(Fe[Q],Fe[Me],Fe[re]);j.push(ee),J=J.concat(ee)}for(let ne=0;ne<y;ne++){const Le=ne/y,Fe=h*Math.cos(Le*Math.PI/2),Q=m*Math.sin(Le*Math.PI/2)+v;for(let te=0,Me=L.length;te<Me;te++){const re=z(L[te],I[te],Q);pe(re.x,re.y,-Fe)}for(let te=0,Me=N.length;te<Me;te++){const re=N[te];ee=j[te];for(let V=0,G=re.length;V<G;V++){const le=z(re[V],ee[V],Q);pe(le.x,le.y,-Fe)}}}const q=m+v;for(let ne=0;ne<O;ne++){const Le=d?z(C[ne],J[ne],q):C[ne];S?(A.copy(E.normals[0]).multiplyScalar(Le.x),_.copy(E.binormals[0]).multiplyScalar(Le.y),T.copy(g[0]).add(A).add(_),pe(T.x,T.y,T.z)):pe(Le.x,Le.y,0)}for(let ne=1;ne<=c;ne++)for(let Le=0;Le<O;Le++){const Fe=d?z(C[Le],J[Le],q):C[Le];S?(A.copy(E.normals[ne]).multiplyScalar(Fe.x),_.copy(E.binormals[ne]).multiplyScalar(Fe.y),T.copy(g[ne]).add(A).add(_),pe(T.x,T.y,T.z)):pe(Fe.x,Fe.y,f/c*ne)}for(let ne=y-1;ne>=0;ne--){const Le=ne/y,Fe=h*Math.cos(Le*Math.PI/2),Q=m*Math.sin(Le*Math.PI/2)+v;for(let te=0,Me=L.length;te<Me;te++){const re=z(L[te],I[te],Q);pe(re.x,re.y,f+Fe)}for(let te=0,Me=N.length;te<Me;te++){const re=N[te];ee=j[te];for(let V=0,G=re.length;V<G;V++){const le=z(re[V],ee[V],Q);S?pe(le.x,le.y+g[c-1].y,g[c-1].x+Fe):pe(le.x,le.y,f+Fe)}}}ae(),be();function ae(){const ne=i.length/3;if(d){let Le=0,Fe=O*Le;for(let Q=0;Q<F;Q++){const te=H[Q];Pe(te[2]+Fe,te[1]+Fe,te[0]+Fe)}Le=c+y*2,Fe=O*Le;for(let Q=0;Q<F;Q++){const te=H[Q];Pe(te[0]+Fe,te[1]+Fe,te[2]+Fe)}}else{for(let Le=0;Le<F;Le++){const Fe=H[Le];Pe(Fe[2],Fe[1],Fe[0])}for(let Le=0;Le<F;Le++){const Fe=H[Le];Pe(Fe[0]+O*c,Fe[1]+O*c,Fe[2]+O*c)}}r.addGroup(ne,i.length/3-ne,0)}function be(){const ne=i.length/3;let Le=0;ue(L,Le),Le+=L.length;for(let Fe=0,Q=N.length;Fe<Q;Fe++){const te=N[Fe];ue(te,Le),Le+=te.length}r.addGroup(ne,i.length/3-ne,1)}function ue(ne,Le){let Fe=ne.length;for(;--Fe>=0;){const Q=Fe;let te=Fe-1;te<0&&(te=ne.length-1);for(let Me=0,re=c+y*2;Me<re;Me++){const V=O*Me,G=O*(Me+1),le=Le+Q+V,_e=Le+te+V,W=Le+te+G,Y=Le+Q+G;Ce(le,_e,W,Y)}}}function pe(ne,Le,Fe){u.push(ne),u.push(Le),u.push(Fe)}function Pe(ne,Le,Fe){Ee(ne),Ee(Le),Ee(Fe);const Q=i.length/3,te=x.generateTopUV(r,i,Q-3,Q-2,Q-1);Oe(te[0]),Oe(te[1]),Oe(te[2])}function Ce(ne,Le,Fe,Q){Ee(ne),Ee(Le),Ee(Q),Ee(Le),Ee(Fe),Ee(Q);const te=i.length/3,Me=x.generateSideWallUV(r,i,te-6,te-3,te-2,te-1);Oe(Me[0]),Oe(Me[1]),Oe(Me[3]),Oe(Me[1]),Oe(Me[2]),Oe(Me[3])}function Ee(ne){i.push(u[ne*3+0]),i.push(u[ne*3+1]),i.push(u[ne*3+2])}function Oe(ne){a.push(ne.x),a.push(ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return _ne(n,r,e)}static fromJSON(e,n){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=n[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ob[i.type]().fromJSON(i)),new Fw(r,e.options)}}const Sne={generateTopUV:function(t,e,n,r,i){const a=e[n*3],s=e[n*3+1],o=e[r*3],u=e[r*3+1],l=e[i*3],c=e[i*3+1];return[new qe(a,s),new qe(o,u),new qe(l,c)]},generateSideWallUV:function(t,e,n,r,i,a){const s=e[n*3],o=e[n*3+1],u=e[n*3+2],l=e[r*3],c=e[r*3+1],f=e[r*3+2],d=e[i*3],h=e[i*3+1],m=e[i*3+2],v=e[a*3],y=e[a*3+1],p=e[a*3+2];return Math.abs(o-c)<Math.abs(s-l)?[new qe(s,1-u),new qe(l,1-f),new qe(d,1-m),new qe(v,1-p)]:[new qe(o,1-u),new qe(c,1-f),new qe(h,1-m),new qe(y,1-p)]}};function _ne(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const a=t[r];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Kg extends Cc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Kg(e.radius,e.detail)}}class Qg extends Cc{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Qg(e.radius,e.detail)}}class Lw extends Jt{constructor(e=.5,n=1,r=32,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],u=[],l=[],c=[];let f=e;const d=(n-e)/i,h=new fe,m=new qe;for(let v=0;v<=i;v++){for(let y=0;y<=r;y++){const p=a+y/r*s;h.x=f*Math.cos(p),h.y=f*Math.sin(p),u.push(h.x,h.y,h.z),l.push(0,0,1),m.x=(h.x/n+1)/2,m.y=(h.y/n+1)/2,c.push(m.x,m.y)}f+=d}for(let v=0;v<i;v++){const y=v*(r+1);for(let p=0;p<r;p++){const x=p+y,g=x,S=x+r+1,E=x+r+2,_=x+1;o.push(g,S,_),o.push(S,E,_)}}this.setIndex(o),this.setAttribute("position",new Tt(u,3)),this.setAttribute("normal",new Tt(l,3)),this.setAttribute("uv",new Tt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Bw extends Jt{constructor(e=new Nf([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],a=[],s=[];let o=0,u=0;if(Array.isArray(e)===!1)l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(o,u,c),o+=u,u=0;this.setIndex(r),this.setAttribute("position",new Tt(i,3)),this.setAttribute("normal",new Tt(a,3)),this.setAttribute("uv",new Tt(s,2));function l(c){const f=i.length/3,d=c.extractPoints(n);let h=d.shape;const m=d.holes;tu.isClockWise(h)===!1&&(h=h.reverse());for(let y=0,p=m.length;y<p;y++){const x=m[y];tu.isClockWise(x)===!0&&(m[y]=x.reverse())}const v=tu.triangulateShape(h,m);for(let y=0,p=m.length;y<p;y++){const x=m[y];h=h.concat(x)}for(let y=0,p=h.length;y<p;y++){const x=h[y];i.push(x.x,x.y,0),a.push(0,0,1),s.push(x.x,x.y)}for(let y=0,p=v.length;y<p;y++){const x=v[y],g=x[0]+f,S=x[1]+f,E=x[2]+f;r.push(g,S,E),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Ene(n,e)}static fromJSON(e,n){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=n[e.shapes[i]];r.push(s)}return new Bw(r,e.curveSegments)}}function Ene(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Jg extends Jt{constructor(e=1,n=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const u=Math.min(s+o,Math.PI);let l=0;const c=[],f=new fe,d=new fe,h=[],m=[],v=[],y=[];for(let p=0;p<=r;p++){const x=[],g=p/r;let S=0;p===0&&s===0?S=.5/n:p===r&&u===Math.PI&&(S=-.5/n);for(let E=0;E<=n;E++){const _=E/n;f.x=-e*Math.cos(i+_*a)*Math.sin(s+g*o),f.y=e*Math.cos(s+g*o),f.z=e*Math.sin(i+_*a)*Math.sin(s+g*o),m.push(f.x,f.y,f.z),d.copy(f).normalize(),v.push(d.x,d.y,d.z),y.push(_+S,1-g),x.push(l++)}c.push(x)}for(let p=0;p<r;p++)for(let x=0;x<n;x++){const g=c[p][x+1],S=c[p][x],E=c[p+1][x],_=c[p+1][x+1];(p!==0||s>0)&&h.push(g,S,_),(p!==r-1||u<Math.PI)&&h.push(S,E,_)}this.setIndex(h),this.setAttribute("position",new Tt(m,3)),this.setAttribute("normal",new Tt(v,3)),this.setAttribute("uv",new Tt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Uw extends Cc{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Uw(e.radius,e.detail)}}class zw extends Jt{constructor(e=1,n=.4,r=12,i=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],u=[],l=[],c=new fe,f=new fe,d=new fe;for(let h=0;h<=r;h++)for(let m=0;m<=i;m++){const v=m/i*a,y=h/r*Math.PI*2;f.x=(e+n*Math.cos(y))*Math.cos(v),f.y=(e+n*Math.cos(y))*Math.sin(v),f.z=n*Math.sin(y),o.push(f.x,f.y,f.z),c.x=e*Math.cos(v),c.y=e*Math.sin(v),d.subVectors(f,c).normalize(),u.push(d.x,d.y,d.z),l.push(m/i),l.push(h/r)}for(let h=1;h<=r;h++)for(let m=1;m<=i;m++){const v=(i+1)*h+m-1,y=(i+1)*(h-1)+m-1,p=(i+1)*(h-1)+m,x=(i+1)*h+m;s.push(v,y,x),s.push(y,p,x)}this.setIndex(s),this.setAttribute("position",new Tt(o,3)),this.setAttribute("normal",new Tt(u,3)),this.setAttribute("uv",new Tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class kw extends Jt{constructor(e=1,n=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],u=[],l=[],c=[],f=new fe,d=new fe,h=new fe,m=new fe,v=new fe,y=new fe,p=new fe;for(let g=0;g<=r;++g){const S=g/r*a*Math.PI*2;x(S,a,s,e,h),x(S+.01,a,s,e,m),y.subVectors(m,h),p.addVectors(m,h),v.crossVectors(y,p),p.crossVectors(v,y),v.normalize(),p.normalize();for(let E=0;E<=i;++E){const _=E/i*Math.PI*2,A=-n*Math.cos(_),T=n*Math.sin(_);f.x=h.x+(A*p.x+T*v.x),f.y=h.y+(A*p.y+T*v.y),f.z=h.z+(A*p.z+T*v.z),u.push(f.x,f.y,f.z),d.subVectors(f,h).normalize(),l.push(d.x,d.y,d.z),c.push(g/r),c.push(E/i)}}for(let g=1;g<=r;g++)for(let S=1;S<=i;S++){const E=(i+1)*(g-1)+(S-1),_=(i+1)*g+(S-1),A=(i+1)*g+S,T=(i+1)*(g-1)+S;o.push(E,_,T),o.push(_,A,T)}this.setIndex(o),this.setAttribute("position",new Tt(u,3)),this.setAttribute("normal",new Tt(l,3)),this.setAttribute("uv",new Tt(c,2));function x(g,S,E,_,A){const T=Math.cos(g),M=Math.sin(g),C=E/S*g,N=Math.cos(C);A.x=_*(2+N)*.5*T,A.y=_*(2+N)*M*.5,A.z=_*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class $w extends Jt{constructor(e=new sD(new fe(-1,-1,0),new fe(-1,1,0),new fe(1,1,0)),n=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(n,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new fe,u=new fe,l=new qe;let c=new fe;const f=[],d=[],h=[],m=[];v(),this.setIndex(m),this.setAttribute("position",new Tt(f,3)),this.setAttribute("normal",new Tt(d,3)),this.setAttribute("uv",new Tt(h,2));function v(){for(let g=0;g<n;g++)y(g);y(a===!1?n:0),x(),p()}function y(g){c=e.getPointAt(g/n,c);const S=s.normals[g],E=s.binormals[g];for(let _=0;_<=i;_++){const A=_/i*Math.PI*2,T=Math.sin(A),M=-Math.cos(A);u.x=M*S.x+T*E.x,u.y=M*S.y+T*E.y,u.z=M*S.z+T*E.z,u.normalize(),d.push(u.x,u.y,u.z),o.x=c.x+r*u.x,o.y=c.y+r*u.y,o.z=c.z+r*u.z,f.push(o.x,o.y,o.z)}}function p(){for(let g=1;g<=n;g++)for(let S=1;S<=i;S++){const E=(i+1)*(g-1)+(S-1),_=(i+1)*g+(S-1),A=(i+1)*g+S,T=(i+1)*(g-1)+S;m.push(E,_,T),m.push(_,A,T)}}function x(){for(let g=0;g<=n;g++)for(let S=0;S<=i;S++)l.x=g/n,l.y=S/i,h.push(l.x,l.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new $w(new ob[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class g$ extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new fe,a=new fe;if(e.index!==null){const s=e.attributes.position,o=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:o.count,materialIndex:0}]);for(let l=0,c=u.length;l<c;++l){const f=u[l],d=f.start,h=f.count;for(let m=d,v=d+h;m<v;m+=3)for(let y=0;y<3;y++){const p=o.getX(m+y),x=o.getX(m+(y+1)%3);i.fromBufferAttribute(s,p),a.fromBufferAttribute(s,x),tO(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,u=s.count/3;o<u;o++)for(let l=0;l<3;l++){const c=3*o+l,f=3*o+(l+1)%3;i.fromBufferAttribute(s,c),a.fromBufferAttribute(s,f),tO(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new Tt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function tO(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var nO=Object.freeze({__proto__:null,BoxGeometry:Qf,CapsuleGeometry:Nw,CircleGeometry:Rw,ConeGeometry:Pw,CylinderGeometry:Cp,DodecahedronGeometry:Iw,EdgesGeometry:h$,ExtrudeGeometry:Fw,IcosahedronGeometry:Kg,LatheGeometry:Zg,OctahedronGeometry:Qg,PlaneGeometry:Yg,PolyhedronGeometry:Cc,RingGeometry:Lw,ShapeGeometry:Bw,SphereGeometry:Jg,TetrahedronGeometry:Uw,TorusGeometry:zw,TorusKnotGeometry:kw,TubeGeometry:$w,WireframeGeometry:g$});class y$ extends li{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ft(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class x$ extends Xr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uD extends li{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ft(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b$ extends uD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ur(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ft(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ft(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ft(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class w$ extends li{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ft(16777215),this.specular=new ft(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class S$ extends li{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ft(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lD extends li{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _$ extends li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ft(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ft(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Vg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class E$ extends li{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ft(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class M$ extends Ma{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function bf(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function A$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function C$(t){function e(i,a){return t[i]-t[a]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function y2(t,e,n){const r=t.length,i=new t.constructor(r);for(let a=0,s=0;s!==r;++a){const o=n[a]*e;for(let u=0;u!==e;++u)i[s++]=t[o+u]}return i}function cD(t,e,n,r){let i=1,a=t[0];for(;a!==void 0&&a[r]===void 0;)a=t[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),n.push.apply(n,s)),a=t[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(n,n.length)),a=t[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),n.push(s)),a=t[i++];while(a!==void 0)}function Mne(t,e,n,r,i=30){const a=t.clone();a.name=e;const s=[];for(let u=0;u<a.tracks.length;++u){const l=a.tracks[u],c=l.getValueSize(),f=[],d=[];for(let h=0;h<l.times.length;++h){const m=l.times[h]*i;if(!(m<n||m>=r)){f.push(l.times[h]);for(let v=0;v<c;++v)d.push(l.values[h*c+v])}}f.length!==0&&(l.times=bf(f,l.times.constructor),l.values=bf(d,l.values.constructor),s.push(l))}a.tracks=s;let o=1/0;for(let u=0;u<a.tracks.length;++u)o>a.tracks[u].times[0]&&(o=a.tracks[u].times[0]);for(let u=0;u<a.tracks.length;++u)a.tracks[u].shift(-1*o);return a.resetDuration(),a}function Ane(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,a=e/r;for(let s=0;s<i;++s){const o=n.tracks[s],u=o.ValueTypeName;if(u==="bool"||u==="string")continue;const l=t.tracks.find(function(p){return p.name===o.name&&p.ValueTypeName===u});if(l===void 0)continue;let c=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let d=0;const h=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);const m=o.times.length-1;let v;if(a<=o.times[0]){const p=c,x=f-c;v=o.values.slice(p,x)}else if(a>=o.times[m]){const p=m*f+c,x=p+f-c;v=o.values.slice(p,x)}else{const p=o.createInterpolant(),x=c,g=f-c;p.evaluate(a),v=p.resultBuffer.slice(x,g)}u==="quaternion"&&new Ni().fromArray(v).normalize().conjugate().toArray(v);const y=l.times.length;for(let p=0;p<y;++p){const x=p*h+d;if(u==="quaternion")Ni.multiplyQuaternionsFlat(l.values,x,v,0,l.values,x);else{const g=h-d*2;for(let S=0;S<g;++S)l.values[x+S]-=v[S]}}}return t.blendMode=zT,t}const Cne={convertArray:bf,isTypedArray:A$,getKeyframeOrder:C$,sortedArray:y2,flattenJSON:cD,subclip:Mne,makeClipAdditive:Ane};class e0{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],a=n[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=n[++r],e<i)break t}s=n.length;break n}if(!(e>=a)){const o=n[1];e<o&&(r=2,a=o);for(let u=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(i=a,a=n[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<n[o]?s=o:r=o+1}if(i=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)n[s]=r[a+s];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class T$ extends e0{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vf,endingEnd:vf}}intervalChanged_(e,n,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],u=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case gf:a=e,o=2*n-r;break;case ng:a=i.length-2,o=n+i[a]-i[a+1];break;default:a=e,o=r}if(u===void 0)switch(this.getSettings_().endingEnd){case gf:s=e,u=2*r-n;break;case ng:s=1,u=r+i[1]-i[0];break;default:s=e-1,u=n}const l=(r-n)*.5,c=this.valueSize;this._weightPrev=l/(n-o),this._weightNext=l/(u-r),this._offsetPrev=a*c,this._offsetNext=s*c}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,l=u-o,c=this._offsetPrev,f=this._offsetNext,d=this._weightPrev,h=this._weightNext,m=(r-n)/(i-n),v=m*m,y=v*m,p=-d*y+2*d*v-d*m,x=(1+d)*y+(-1.5-2*d)*v+(-.5+d)*m+1,g=(-1-h)*y+(1.5+h)*v+.5*m,S=h*y-h*v;for(let E=0;E!==o;++E)a[E]=p*s[c+E]+x*s[l+E]+g*s[u+E]+S*s[f+E];return a}}class fD extends e0{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=e*o,l=u-o,c=(r-n)/(i-n),f=1-c;for(let d=0;d!==o;++d)a[d]=s[l+d]*f+s[u+d]*c;return a}}class D$ extends e0{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class No{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=bf(n,this.TimeBufferType),this.values=bf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:bf(e.times,Array),values:bf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new D$(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new fD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new T$(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case eg:n=this.InterpolantFactoryMethodDiscrete;break;case tg:n=this.InterpolantFactoryMethodLinear;break;case Sx:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return eg;case this.InterpolantFactoryMethodLinear:return tg;case this.InterpolantFactoryMethodSmooth:return Sx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>n;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const u=r[o];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,u),e=!1;break}if(s!==null&&s>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,u,s),e=!1;break}s=u}if(i!==void 0&&A$(i))for(let o=0,u=i.length;o!==u;++o){const l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Sx,a=e.length-1;let s=1;for(let o=1;o<a;++o){let u=!1;const l=e[o],c=e[o+1];if(l!==c&&(o!==1||l!==e[0]))if(i)u=!0;else{const f=o*r,d=f-r,h=f+r;for(let m=0;m!==r;++m){const v=n[f+m];if(v!==n[d+m]||v!==n[h+m]){u=!0;break}}}if(u){if(o!==s){e[s]=e[o];const f=o*r,d=s*r;for(let h=0;h!==r;++h)n[d+h]=n[f+h]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,u=s*r,l=0;l!==r;++l)n[u+l]=n[o+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=n.slice(0,s*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}No.prototype.TimeBufferType=Float32Array;No.prototype.ValueBufferType=Float32Array;No.prototype.DefaultInterpolation=tg;class Jf extends No{}Jf.prototype.ValueTypeName="bool";Jf.prototype.ValueBufferType=Array;Jf.prototype.DefaultInterpolation=eg;Jf.prototype.InterpolantFactoryMethodLinear=void 0;Jf.prototype.InterpolantFactoryMethodSmooth=void 0;class dD extends No{}dD.prototype.ValueTypeName="color";class dg extends No{}dg.prototype.ValueTypeName="number";class N$ extends e0{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=(r-n)/(i-n);let l=e*o;for(let c=l+o;l!==c;l+=4)Ni.slerpFlat(a,0,s,l-o,s,l,u);return a}}class Tp extends No{InterpolantFactoryMethodLinear(e){return new N$(this.times,this.values,this.getValueSize(),e)}}Tp.prototype.ValueTypeName="quaternion";Tp.prototype.DefaultInterpolation=tg;Tp.prototype.InterpolantFactoryMethodSmooth=void 0;class ed extends No{}ed.prototype.ValueTypeName="string";ed.prototype.ValueBufferType=Array;ed.prototype.DefaultInterpolation=eg;ed.prototype.InterpolantFactoryMethodLinear=void 0;ed.prototype.InterpolantFactoryMethodSmooth=void 0;class hg extends No{}hg.prototype.ValueTypeName="vector";class pg{constructor(e,n=-1,r,i=xw){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=os(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)n.push(Dne(r[s]).scale(i));const a=new this(e.name,e.duration,n,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)n.push(No.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const a=n.length,s=[];for(let o=0;o<a;o++){let u=[],l=[];u.push((o+a-1)%a,o,(o+1)%a),l.push(0,1,0);const c=C$(u);u=y2(u,1,c),l=y2(l,1,c),!i&&u[0]===0&&(u.push(a),l.push(l[0])),s.push(new dg(".morphTargetInfluences["+n[o].name+"]",u,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,u=e.length;o<u;o++){const l=e[o],c=l.name.match(a);if(c&&c.length>1){const f=c[1];let d=i[f];d||(i[f]=d=[]),d.push(l)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],n,r));return s}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,d,h,m,v){if(h.length!==0){const y=[],p=[];cD(h,y,p,m),y.length!==0&&v.push(new f(d,y,p))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let u=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const d=l[f].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let v=0;v<d[m].morphTargets.length;v++)h[d[m].morphTargets[v]]=-1;for(const v in h){const y=[],p=[];for(let x=0;x!==d[m].morphTargets.length;++x){const g=d[m];y.push(g.time),p.push(g.morphTarget===v?1:0)}i.push(new dg(".morphTargetInfluence["+v+"]",y,p))}u=h.length*s}else{const h=".bones["+n[f].name+"]";r(hg,h+".position",d,"pos",i),r(Tp,h+".quaternion",d,"rot",i),r(hg,h+".scale",d,"scl",i)}}return i.length===0?null:new this(a,u,i,o)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Tne(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return dg;case"vector":case"vector2":case"vector3":case"vector4":return hg;case"color":return dD;case"quaternion":return Tp;case"bool":case"boolean":return Jf;case"string":return ed}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Dne(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Tne(t.type);if(t.times===void 0){const n=[],r=[];cD(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const $u={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hD{constructor(e,n,r){const i=this;let a=!1,s=0,o=0,u;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(c){o++,a===!1&&i.onStart!==void 0&&i.onStart(c,s,o),a=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return u?u(c):c},this.setURLModifier=function(c){return u=c,this},this.addHandler=function(c,f){return l.push(c,f),this},this.removeHandler=function(c){const f=l.indexOf(c);return f!==-1&&l.splice(f,2),this},this.getHandler=function(c){for(let f=0,d=l.length;f<d;f+=2){const h=l[f],m=l[f+1];if(h.global&&(h.lastIndex=0),h.test(c))return m}return null}}}const Mh=new hD;let ja=class{constructor(e){this.manager=e!==void 0?e:Mh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,a){r.load(e,i,n,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};ja.DEFAULT_MATERIAL_NAME="__DEFAULT";const Cu={};class Nne extends Error{constructor(e,n){super(e),this.response=n}}class Ju extends ja{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=$u.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(a),this.manager.itemEnd(e)},0),a;if(Cu[e]!==void 0){Cu[e].push({onLoad:n,onProgress:r,onError:i});return}Cu[e]=[],Cu[e].push({onLoad:n,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,u=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;const c=Cu[e],f=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=d?parseInt(d):0,m=h!==0;let v=0;const y=new ReadableStream({start(p){x();function x(){f.read().then(({done:g,value:S})=>{if(g)p.close();else{v+=S.byteLength;const E=new ProgressEvent("progress",{lengthComputable:m,loaded:v,total:h});for(let _=0,A=c.length;_<A;_++){const T=c[_];T.onProgress&&T.onProgress(E)}p.enqueue(S),x()}})}}});return new Response(y)}else throw new Nne(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(u){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return l.json();default:if(o===void 0)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),d=f&&f[1]?f[1].toLowerCase():void 0,h=new TextDecoder(d);return l.arrayBuffer().then(m=>h.decode(m))}}}).then(l=>{$u.add(e,l);const c=Cu[e];delete Cu[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onLoad&&h.onLoad(l)}}).catch(l=>{const c=Cu[e];if(c===void 0)throw this.manager.itemError(e),l;delete Cu[e];for(let f=0,d=c.length;f<d;f++){const h=c[f];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Rne extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=pg.parse(e[r]);n.push(i)}return n}}class Pne extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=[],o=new Tw,u=new Ju(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(a.withCredentials);let l=0;function c(f){u.load(e[f],function(d){const h=a.parse(d,!0);s[f]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(o.minFilter=Qn),o.image=s,o.format=h.format,o.needsUpdate=!0,n&&n(o))},r,i)}if(Array.isArray(e))for(let f=0,d=e.length;f<d;++f)c(f);else u.load(e,function(f){const d=a.parse(f,!0);if(d.isCubemap){const h=d.mipmaps.length/d.mipmapCount;for(let m=0;m<h;m++){s[m]={mipmaps:[]};for(let v=0;v<d.mipmapCount;v++)s[m].mipmaps.push(d.mipmaps[m*d.mipmapCount+v]),s[m].format=d.format,s[m].width=d.width,s[m].height=d.height}o.image=s}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=Qn),o.format=d.format,o.needsUpdate=!0,n&&n(o)},r,i);return o}}class mg extends ja{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=$u.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s;const o=og("img");function u(){c(),$u.add(e,this),n&&n(this),a.manager.itemEnd(e)}function l(f){c(),i&&i(f),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",u,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",u,!1),o.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class R$ extends ja{constructor(e){super(e)}load(e,n,r,i){const a=new jg;a.colorSpace=Nn;const s=new mg(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function u(l){s.load(e[l],function(c){a.images[l]=c,o++,o===6&&(a.needsUpdate=!0,n&&n(a))},void 0,i)}for(let l=0;l<e.length;++l)u(l);return a}}class pD extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Df,o=new Ju(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(u){let l;try{l=a.parse(u)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:Yi,s.wrapT=l.wrapT!==void 0?l.wrapT:Yi,s.magFilter=l.magFilter!==void 0?l.magFilter:Qn,s.minFilter=l.minFilter!==void 0?l.minFilter:Qn,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0?s.colorSpace=l.colorSpace:l.encoding!==void 0&&(s.encoding=l.encoding),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=cc),l.mipmapCount===1&&(s.minFilter=Qn),l.generateMipmaps!==void 0&&(s.generateMipmaps=l.generateMipmaps),s.needsUpdate=!0,n&&n(s,l)},r,i),s}}class Ine extends ja{constructor(e){super(e)}load(e,n,r,i){const a=new yr,s=new mg(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,n!==void 0&&n(a)},r,i),a}}class Tc extends On{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ft(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class P$ extends Tc{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ft(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const HE=new Ht,rO=new fe,iO=new fe;class mD{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Ht,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xg,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new Wn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;rO.setFromMatrixPosition(e.matrixWorld),n.position.copy(rO),iO.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(iO),n.updateMatrixWorld(),HE.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(HE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class One extends mD{constructor(){super(new Tr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=ep*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||n.far;(r!==n.fov||i!==n.aspect||a!==n.far)&&(n.fov=r,n.aspect=i,n.far=a,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class I$ extends Tc{constructor(e,n,r=0,i=Math.PI/3,a=0,s=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new One}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const aO=new Ht,Um=new fe,GE=new fe;class Fne extends mD{constructor(){super(new Tr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new Wn(2,1,1,1),new Wn(0,1,1,1),new Wn(3,1,1,1),new Wn(1,1,1,1),new Wn(3,0,1,1),new Wn(1,0,1,1)],this._cubeDirections=[new fe(1,0,0),new fe(-1,0,0),new fe(0,0,1),new fe(0,0,-1),new fe(0,1,0),new fe(0,-1,0)],this._cubeUps=[new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,0,1),new fe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),Um.setFromMatrixPosition(e.matrixWorld),r.position.copy(Um),GE.copy(r.position),GE.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(GE),r.updateMatrixWorld(),i.makeTranslation(-Um.x,-Um.y,-Um.z),aO.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(aO)}}class O$ extends Tc{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Fne}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Lne extends mD{constructor(){super(new ku(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class F$ extends Tc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(On.DEFAULT_UP),this.updateMatrix(),this.target=new On,this.shadow=new Lne}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class L$ extends Tc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class B$ extends Tc{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class U${constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new fe)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*i),n.addScaledVector(s[2],.488603*a),n.addScaledVector(s[3],.488603*r),n.addScaledVector(s[4],1.092548*(r*i)),n.addScaledVector(s[5],1.092548*(i*a)),n.addScaledVector(s[6],.315392*(3*a*a-1)),n.addScaledVector(s[7],1.092548*(r*a)),n.addScaledVector(s[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*i),n.addScaledVector(s[2],2*.511664*a),n.addScaledVector(s[3],2*.511664*r),n.addScaledVector(s[4],2*.429043*r*i),n.addScaledVector(s[5],2*.429043*i*a),n.addScaledVector(s[6],.743125*a*a-.247708),n.addScaledVector(s[7],2*.429043*r*a),n.addScaledVector(s[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,a=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*a,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*a,n[6]=.315392*(3*a*a-1),n[7]=1.092548*r*a,n[8]=.546274*(r*r-i*i)}}class z$ extends Tc{constructor(e=new U$,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Hw extends ja{constructor(e){super(e),this.textures={}}load(e,n,r,i){const a=this,s=new Ju(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(a){return n[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),n[a]}const i=Hw.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ft().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new ft().setHex(s.value);break;case"v2":i.uniforms[a].value=new qe().fromArray(s.value);break;case"v3":i.uniforms[a].value=new fe().fromArray(s.value);break;case"v4":i.uniforms[a].value=new Wn().fromArray(s.value);break;case"m3":i.uniforms[a].value=new vn().fromArray(s.value);break;case"m4":i.uniforms[a].value=new Ht().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new qe().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:y$,SpriteMaterial:JT,RawShaderMaterial:x$,ShaderMaterial:Xr,PointsMaterial:tD,MeshPhysicalMaterial:b$,MeshStandardMaterial:uD,MeshPhongMaterial:w$,MeshToonMaterial:S$,MeshNormalMaterial:lD,MeshLambertMaterial:_$,MeshDepthMaterial:ZT,MeshDistanceMaterial:KT,MeshBasicMaterial:Ac,MeshMatcapMaterial:E$,LineDashedMaterial:M$,LineBasicMaterial:Ma,Material:li};return new n[e]}}class x2{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class k$ extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class $$ extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{n(a.parse(JSON.parse(o)))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(h,m){if(n[m]!==void 0)return n[m];const y=h.interleavedBuffers[m],p=a(h,y.buffer),x=bh(y.type,p),g=new Aw(x,y.stride);return g.uuid=y.uuid,n[m]=g,g}function a(h,m){if(r[m]!==void 0)return r[m];const y=h.arrayBuffers[m],p=new Uint32Array(y).buffer;return r[m]=p,p}const s=e.isInstancedBufferGeometry?new k$:new Jt,o=e.data.index;if(o!==void 0){const h=bh(o.type,o.array);s.setIndex(new dn(h,1))}const u=e.data.attributes;for(const h in u){const m=u[h];let v;if(m.isInterleavedBufferAttribute){const y=i(e.data,m.data);v=new kf(y,m.itemSize,m.offset,m.normalized)}else{const y=bh(m.type,m.array),p=m.isInstancedBufferAttribute?np:dn;v=new p(y,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),s.setAttribute(h,v)}const l=e.data.morphAttributes;if(l)for(const h in l){const m=l[h],v=[];for(let y=0,p=m.length;y<p;y++){const x=m[y];let g;if(x.isInterleavedBufferAttribute){const S=i(e.data,x.data);g=new kf(S,x.itemSize,x.offset,x.normalized)}else{const S=bh(x.type,x.array);g=new dn(S,x.itemSize,x.normalized)}x.name!==void 0&&(g.name=x.name),v.push(g)}s.morphAttributes[h]=v}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let h=0,m=f.length;h!==m;++h){const v=f[h];s.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new fe;d.center!==void 0&&h.fromArray(d.center),s.boundingSphere=new ta(h,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Bne extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=this.path===""?x2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Ju(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){let l=null;try{l=JSON.parse(u)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(l,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?x2.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Ju(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,n),o=JSON.parse(s),u=o.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){n!==void 0&&n(l)}),o=this.parseTextures(e.textures,s),u=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,a,u,o,r),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),n!==void 0){let f=!1;for(const d in s)if(s[d].data instanceof HTMLImageElement){f=!0;break}f===!1&&n(l)}return l}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),u=this.parseObject(e.object,i,o,s,n),l=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,l),u}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new Nf().fromJSON(e[r]);n[a.uuid]=a}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new Cw().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new $$;for(let a=0,s=e.length;a<s;a++){let o;const u=e[a];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(u);break;default:u.type in nO?o=nO[u.type].fromJSON(u,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}o.uuid=u.uuid,u.name!==void 0&&(o.name=u.name),u.userData!==void 0&&(o.userData=u.userData),r[u.uuid]=o}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const a=new Hw;a.setTextures(n);for(let s=0,o=e.length;s<o;s++){const u=e[s];r[u.uuid]===void 0&&(r[u.uuid]=a.parse(u)),i[u.uuid]=r[u.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=pg.parse(i);n[a.uuid]=a}return n}parseImages(e,n){const r=this,i={};let a;function s(u){return r.manager.itemStart(u),a.load(u,function(){r.manager.itemEnd(u)},void 0,function(){r.manager.itemError(u),r.manager.itemEnd(u)})}function o(u){if(typeof u=="string"){const l=u,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:r.resourcePath+l;return s(c)}else return u.data?{data:bh(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new hD(n);a=new mg(u),a.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const f=e[l],d=f.url;if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const y=d[m],p=o(y);p!==null&&(p instanceof HTMLImageElement?h.push(p):h.push(new Df(p.data,p.width,p.height)))}i[f.uuid]=new yf(h)}else{const h=o(f.url);i[f.uuid]=new yf(h)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:n.resourcePath+o;return await i.loadAsync(u)}else return s.data?{data:bh(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new mg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const u=e[s],l=u.url;if(Array.isArray(l)){const c=[];for(let f=0,d=l.length;f<d;f++){const h=l[f],m=await a(h);m!==null&&(m instanceof HTMLImageElement?c.push(m):c.push(new Df(m.data,m.width,m.height)))}r[u.uuid]=new yf(c)}else{const c=await a(u.url);r[u.uuid]=new yf(c)}}}return r}parseTextures(e,n){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),n[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const u=n[o.image],l=u.data;let c;Array.isArray(l)?(c=new jg,l.length===6&&(c.needsUpdate=!0)):(l&&l.data?c=new Df:c=new yr,l&&(c.needsUpdate=!0)),c.source=u,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=r(o.mapping,Une)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=r(o.wrap[0],sO),c.wrapT=r(o.wrap[1],sO)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=r(o.minFilter,oO)),o.magFilter!==void 0&&(c.magFilter=r(o.magFilter,oO)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(c.compareFunction=o.compareFunction),o.userData!==void 0&&(c.userData=o.userData),i[o.uuid]=c}return i}parseObject(e,n,r,i,a){let s;function o(d){return n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),n[d]}function u(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let m=0,v=d.length;m<v;m++){const y=d[m];r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),h.push(r[y])}return h}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function l(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,f;switch(e.type){case"Scene":s=new zf,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new ft(e.background):s.background=l(e.background)),e.environment!==void 0&&(s.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Mw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Ew(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new Tr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new ku(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new L$(e.color,e.intensity);break;case"DirectionalLight":s=new F$(e.color,e.intensity);break;case"PointLight":s=new O$(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new B$(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new I$(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new P$(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new z$().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),f=u(e.material),s=new r$(c,f),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),f=u(e.material),s=new qr(c,f);break;case"InstancedMesh":c=o(e.geometry),f=u(e.material);const d=e.count,h=e.instanceMatrix,m=e.instanceColor;s=new i$(c,f,d),s.instanceMatrix=new np(new Float32Array(h.array),16),m!==void 0&&(s.instanceColor=new np(new Float32Array(m.array),m.itemSize));break;case"BatchedMesh":c=o(e.geometry),f=u(e.material),s=new a$(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),s.geometry=c,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map(v=>{const y=new ya;y.min.fromArray(v.boxMin),y.max.fromArray(v.boxMax);const p=new ta;return p.radius=v.sphereRadius,p.center.fromArray(v.sphereCenter),{boxInitialized:v.boxInitialized,box:y,sphereInitialized:v.sphereInitialized,sphere:p}}),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=l(e.matricesTexture.uuid);break;case"LOD":s=new n$;break;case"Line":s=new dc(o(e.geometry),u(e.material));break;case"LineLoop":s=new s$(o(e.geometry),u(e.material));break;case"LineSegments":s=new lu(o(e.geometry),u(e.material));break;case"PointCloud":case"Points":s=new o$(o(e.geometry),u(e.material));break;case"Sprite":s=new t$(u(e.material));break;case"Group":s=new _h;break;case"Bone":s=new eD;break;default:s=new On}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let h=0;h<d.length;h++)s.add(this.parseObject(d[h],n,r,i,a))}if(e.animations!==void 0){const d=e.animations;for(let h=0;h<d.length;h++){const m=d[h];s.animations.push(a[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const d=e.levels;for(let h=0;h<d.length;h++){const m=d[h],v=s.getObjectByProperty("uuid",m.object);v!==void 0&&s.addLevel(v,m.distance,m.hysteresis)}}return s}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Une={UVMapping:gw,CubeReflectionMapping:ru,CubeRefractionMapping:lc,EquirectangularReflectionMapping:Qh,EquirectangularRefractionMapping:Kv,CubeUVReflectionMapping:Ep},sO={RepeatWrapping:Qv,ClampToEdgeWrapping:Yi,MirroredRepeatWrapping:Jv},oO={NearestFilter:mr,NearestMipmapNearestFilter:rb,NearestMipmapLinearFilter:gv,LinearFilter:Qn,LinearMipmapNearestFilter:NT,LinearMipmapLinearFilter:cc};class zne extends ja{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=$u.get(e);if(s!==void 0){if(a.manager.itemStart(e),s.then){s.then(l=>{n&&n(l),a.manager.itemEnd(e)}).catch(l=>{i&&i(l)});return}return setTimeout(function(){n&&n(s),a.manager.itemEnd(e)},0),s}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const u=fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(l){return $u.add(e,l),n&&n(l),a.manager.itemEnd(e),l}).catch(function(l){i&&i(l),$u.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});$u.add(e,u),a.manager.itemStart(e)}}let x1;class vD{static getContext(){return x1===void 0&&(x1=new(window.AudioContext||window.webkitAudioContext)),x1}static setContext(e){x1=e}}class kne extends ja{constructor(e){super(e)}load(e,n,r,i){const a=this,s=new Ju(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(u){try{const l=u.slice(0);vD.getContext().decodeAudioData(l,function(f){n(f)}).catch(o)}catch(l){o(l)}},r,i);function o(u){i?i(u):console.error(u),a.manager.itemError(e)}}}const uO=new Ht,lO=new Ht,Kc=new Ht;class $ne{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Kc.copy(e.projectionMatrix);const i=n.eyeSep/2,a=i*n.near/n.focus,s=n.near*Math.tan(Cf*n.fov*.5)/n.zoom;let o,u;lO.elements[12]=-i,uO.elements[12]=i,o=-s*n.aspect+a,u=s*n.aspect+a,Kc.elements[0]=2*n.near/(u-o),Kc.elements[8]=(u+o)/(u-o),this.cameraL.projectionMatrix.copy(Kc),o=-s*n.aspect-a,u=s*n.aspect-a,Kc.elements[0]=2*n.near/(u-o),Kc.elements[8]=(u+o)/(u-o),this.cameraR.projectionMatrix.copy(Kc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(lO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(uO)}}class gD{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=cO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=cO();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function cO(){return(typeof performance>"u"?Date:performance).now()}const Qc=new fe,fO=new Ni,Hne=new fe,Jc=new fe;class Gne extends On{constructor(){super(),this.type="AudioListener",this.context=vD.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new gD}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qc,fO,Hne),Jc.set(0,0,-1).applyQuaternion(fO),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Qc.x,i),n.positionY.linearRampToValueAtTime(Qc.y,i),n.positionZ.linearRampToValueAtTime(Qc.z,i),n.forwardX.linearRampToValueAtTime(Jc.x,i),n.forwardY.linearRampToValueAtTime(Jc.y,i),n.forwardZ.linearRampToValueAtTime(Jc.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Qc.x,Qc.y,Qc.z),n.setOrientation(Jc.x,Jc.y,Jc.z,r.x,r.y,r.z)}}class H$ extends On{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ef=new fe,dO=new Ni,Vne=new fe,tf=new fe;class Wne extends H${constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ef,dO,Vne),tf.set(0,0,1).applyQuaternion(dO);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(ef.x,r),n.positionY.linearRampToValueAtTime(ef.y,r),n.positionZ.linearRampToValueAtTime(ef.z,r),n.orientationX.linearRampToValueAtTime(tf.x,r),n.orientationY.linearRampToValueAtTime(tf.y,r),n.orientationZ.linearRampToValueAtTime(tf.z,r)}else n.setPosition(ef.x,ef.y,ef.z),n.setOrientation(tf.x,tf.y,tf.z)}}class qne{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class G${constructor(e,n,r){this.binding=e,this.valueSize=r;let i,a,s;switch(n){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=n}else{s+=n;const o=n/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const u=n*this._origIndex;this._mixBufferRegion(r,i,u,1-a,n)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let u=n,l=n+n;u!==l;++u)if(r[u]!==r[u+n]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let a=r,s=i;a!==s;++a)n[a]=n[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[n+s]=e[r+s]}_slerp(e,n,r,i){Ni.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,a){const s=this._workIndex*a;Ni.multiplyQuaternionsFlat(e,s,e,n,e,r),Ni.slerpFlat(e,n,e,n,e,s,i)}_lerp(e,n,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const u=n+o;e[u]=e[u]*s+e[r+o]*i}}_lerpAdditive(e,n,r,i,a){for(let s=0;s!==a;++s){const o=n+s;e[o]=e[o]+e[r+s]*i}}}const yD="\\[\\]\\.:\\/",jne=new RegExp("["+yD+"]","g"),xD="[^"+yD+"]",Xne="[^"+yD.replace("\\.","")+"]",Yne=/((?:WC+[\/:])*)/.source.replace("WC",xD),Zne=/(WCOD+)?/.source.replace("WCOD",Xne),Kne=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xD),Qne=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xD),Jne=new RegExp("^"+Yne+Zne+Kne+Qne+"$"),ere=["material","materials","bones","map"];class tre{constructor(e,n,r){const i=r||Ln.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Ln{constructor(e,n,r){this.path=n,this.parsedPath=r||Ln.parseTrackName(n),this.node=Ln.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Ln.Composite(e,n,r):new Ln(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jne,"")}static parseTrackName(e){const n=Jne.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);ere.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===n||o.uuid===n)return o;const u=r(o.children);if(u)return u}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let a=n.propertyIndex;if(e||(e=Ln.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let l=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const s=e[i];if(s===void 0){const l=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ln.Composite=tre;Ln.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ln.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ln.prototype.GetterByBindingType=[Ln.prototype._getValue_direct,Ln.prototype._getValue_array,Ln.prototype._getValue_arrayElement,Ln.prototype._getValue_toArray];Ln.prototype.SetterByBindingTypeAndVersioning=[[Ln.prototype._setValue_direct,Ln.prototype._setValue_direct_setNeedsUpdate,Ln.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_array,Ln.prototype._setValue_array_setNeedsUpdate,Ln.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_arrayElement,Ln.prototype._setValue_arrayElement_setNeedsUpdate,Ln.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ln.prototype._setValue_fromArray,Ln.prototype._setValue_fromArray_setNeedsUpdate,Ln.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class nre{constructor(){this.isAnimationObjectGroup=!0,this.uuid=os(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length;let o,u=e.length,l=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const d=arguments[c],h=d.uuid;let m=n[h];if(m===void 0){m=u++,n[h]=m,e.push(d);for(let v=0,y=s;v!==y;++v)a[v].push(new Ln(d,r[v],i[v]))}else if(m<l){o=e[m];const v=--l,y=e[v];n[y.uuid]=m,e[m]=y,n[h]=v,e[v]=d;for(let p=0,x=s;p!==x;++p){const g=a[p],S=g[v];let E=g[m];g[m]=S,E===void 0&&(E=new Ln(d,r[p],i[p])),g[v]=E}}else e[m]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const u=arguments[s],l=u.uuid,c=n[l];if(c!==void 0&&c>=a){const f=a++,d=e[f];n[d.uuid]=c,e[c]=d,n[l]=f,e[f]=u;for(let h=0,m=i;h!==m;++h){const v=r[h],y=v[f],p=v[c];v[c]=y,v[f]=p}}}this.nCachedObjects_=a}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let a=this.nCachedObjects_,s=e.length;for(let o=0,u=arguments.length;o!==u;++o){const l=arguments[o],c=l.uuid,f=n[c];if(f!==void 0)if(delete n[c],f<a){const d=--a,h=e[d],m=--s,v=e[m];n[h.uuid]=f,e[f]=h,n[v.uuid]=d,e[d]=v,e.pop();for(let y=0,p=i;y!==p;++y){const x=r[y],g=x[d],S=x[m];x[f]=g,x[d]=S,x.pop()}}else{const d=--s,h=e[d];d>0&&(n[h.uuid]=f),e[f]=h,e.pop();for(let m=0,v=i;m!==v;++m){const y=r[m];y[f]=y[d],y.pop()}}}this.nCachedObjects_=a}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const a=this._bindings;if(i!==void 0)return a[i];const s=this._paths,o=this._parsedPaths,u=this._objects,l=u.length,c=this.nCachedObjects_,f=new Array(l);i=a.length,r[e]=i,s.push(e),o.push(n),a.push(f);for(let d=c,h=u.length;d!==h;++d){const m=u[d];f[d]=new Ln(m,e,n)}return f}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length-1,u=s[o],l=e[o];n[l]=r,s[r]=u,s.pop(),a[r]=a[o],a.pop(),i[r]=i[o],i.pop()}}}class V${constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const a=n.tracks,s=a.length,o=new Array(s),u={endingStart:vf,endingEnd:vf};for(let l=0;l!==s;++l){const c=a[l].createInterpolant(null);o[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=T6,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,n),this.warp(o,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const u=o.parameterPositions,l=o.sampleValues;return u[0]=a,u[1]=a+r,l[0]=e/s,l[1]=n/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const u=(e-a)*r;u<0||r===0?n=0:(this._startTime=null,n=r*u)}n*=this._updateTimeScale(e);const s=this._updateTime(n),o=this._updateWeight(e);if(o>0){const u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case zT:for(let c=0,f=u.length;c!==f;++c)u[c].evaluate(s),l[c].accumulateAdditive(o);break;case xw:default:for(let c=0,f=u.length;c!==f;++c)u[c].evaluate(s),l[c].accumulate(i,o)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===D6;if(e===0)return a===-1?i:s&&(a&1)===1?n-i:i;if(r===C6){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=n||i<0){const o=Math.floor(i/n);i-=n*o,a+=Math.abs(o);const u=this.repetitions-a;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=gf,i.endingEnd=gf):(e?i.endingStart=this.zeroSlopeAtStart?gf:vf:i.endingStart=ng,n?i.endingEnd=this.zeroSlopeAtEnd?gf:vf:i.endingEnd=ng)}_scheduleFading(e,n,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,u=s.sampleValues;return o[0]=a,u[0]=n,o[1]=a+e,u[1]=r,this}}const rre=new Float32Array(1);class ire extends gs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,u=r.uuid,l=this._bindingsByRootAndName;let c=l[u];c===void 0&&(c={},l[u]=c);for(let f=0;f!==a;++f){const d=i[f],h=d.name;let m=c[h];if(m!==void 0)++m.referenceCount,s[f]=m;else{if(m=s[f],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,u,h));continue}const v=n&&n._propertyBindings[f].binding.parsedPath;m=new G$(Ln.create(r,h,v),d.ValueTypeName,d.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,u,h),s[f]=m}o[f].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,a=this._actionsByClip;let s=a[n];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[n]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],u=o.knownActions,l=u[u.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,u[c]=l,u.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete f[d],u.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[n];s===void 0&&(s={},i[n]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],u=n[n.length-1],l=e._cacheIndex;u._cacheIndex=l,n[l]=u,n.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=n[i];e._cacheIndex=i,n[i]=e,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new fD(new Float32Array(2),new Float32Array(2),1,rre),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=n[i];e.__cacheIndex=i,n[i]=e,a.__cacheIndex=r,n[r]=a}clipAction(e,n,r){const i=n||this._root,a=i.uuid;let s=typeof e=="string"?pg.findByName(i,e):e;const o=s!==null?s.uuid:e,u=this._actionsByClip[o];let l=null;if(r===void 0&&(s!==null?r=s.blendMode:r=xw),u!==void 0){const f=u.actionByRoot[a];if(f!==void 0&&f.blendMode===r)return f;l=u.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;const c=new V$(this,s,n,r);return this._bindAction(c,l),this._addInactiveAction(c,o,a),c}existingAction(e,n){const r=n||this._root,i=r.uuid,a=typeof e=="string"?pg.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==r;++l)n[l]._update(i,e,a,s);const o=this._bindings,u=this._nActiveBindings;for(let l=0;l!==u;++l)o[l].apply(s);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,u=s.length;o!==u;++o){const l=s[o];this._deactivateAction(l);const c=l._cacheIndex,f=n[n.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,f._cacheIndex=c,n[c]=f,n.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,u=o[n];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,a=i[n];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Dn{constructor(e){this.value=e}clone(){return new Dn(this.value.clone===void 0?this.value:this.value.clone())}}let are=0;class sre extends gs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:are++}),this.name="",this.usage=sg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const a=Array.isArray(n[r])?n[r]:[n[r]];for(let s=0;s<a.length;s++)this.uniforms.push(a[s].clone())}return this}clone(){return new this.constructor().copy(this)}}class ore extends Aw{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class ure{constructor(e,n,r,i,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class bD{constructor(e,n,r=0,i=1/0){this.ray=new Kf(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Tf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return b2(e,this,r,n),r.sort(hO),r}intersectObjects(e,n=!0,r=[]){for(let i=0,a=e.length;i<a;i++)b2(e[i],this,r,n);return r.sort(hO),r}}function hO(t,e){return t.distance-e.distance}function b2(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let a=0,s=i.length;a<s;a++)b2(i[a],e,n,!0)}}class w2{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ur(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lre{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const pO=new qe;class cre{constructor(e=new qe(1/0,1/0),n=new qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=pO.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pO).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mO=new fe,b1=new fe;class fre{constructor(e=new fe,n=new fe){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){mO.subVectors(e,this.start),b1.subVectors(this.end,this.start);const r=b1.dot(b1);let a=b1.dot(mO)/r;return n&&(a=Ur(a,0,1)),a}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const vO=new fe;class dre extends On{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Jt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,o=1,u=32;s<u;s++,o++){const l=s/u*Math.PI*2,c=o/u*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Tt(i,3));const a=new Ma({fog:!1,toneMapped:!1});this.cone=new lu(r,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),vO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(vO),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Dl=new fe,w1=new Ht,VE=new Ht;class hre extends lu{constructor(e){const n=W$(e),r=new Jt,i=[],a=[],s=new ft(0,0,1),o=new ft(0,1,0);for(let l=0;l<n.length;l++){const c=n[l];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(s.r,s.g,s.b),a.push(o.r,o.g,o.b))}r.setAttribute("position",new Tt(i,3)),r.setAttribute("color",new Tt(a,3));const u=new Ma({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");VE.copy(this.root.matrixWorld).invert();for(let a=0,s=0;a<n.length;a++){const o=n[a];o.parent&&o.parent.isBone&&(w1.multiplyMatrices(VE,o.matrixWorld),Dl.setFromMatrixPosition(w1),i.setXYZ(s,Dl.x,Dl.y,Dl.z),w1.multiplyMatrices(VE,o.parent.matrixWorld),Dl.setFromMatrixPosition(w1),i.setXYZ(s+1,Dl.x,Dl.y,Dl.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function W$(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,W$(t.children[n]));return e}class pre extends qr{constructor(e,n,r){const i=new Jg(n,4,2),a=new Ac({wireframe:!0,fog:!1,toneMapped:!1});super(i,a),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const mre=new fe,gO=new ft,yO=new ft;class vre extends On{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Qg(n);i.rotateY(Math.PI*.5),this.material=new Ac({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),s=new Float32Array(a.count*3);i.setAttribute("color",new dn(s,3)),this.add(new qr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");gO.copy(this.light.color),yO.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const a=r<i/2?gO:yO;n.setXYZ(r,a.r,a.g,a.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(mre.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gre extends lu{constructor(e=10,n=10,r=4473924,i=8947848){r=new ft(r),i=new ft(i);const a=n/2,s=e/n,o=e/2,u=[],l=[];for(let d=0,h=0,m=-o;d<=n;d++,m+=s){u.push(-o,0,m,o,0,m),u.push(m,0,-o,m,0,o);const v=d===a?r:i;v.toArray(l,h),h+=3,v.toArray(l,h),h+=3,v.toArray(l,h),h+=3,v.toArray(l,h),h+=3}const c=new Jt;c.setAttribute("position",new Tt(u,3)),c.setAttribute("color",new Tt(l,3));const f=new Ma({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yre extends lu{constructor(e=10,n=16,r=8,i=64,a=4473924,s=8947848){a=new ft(a),s=new ft(s);const o=[],u=[];if(n>1)for(let f=0;f<n;f++){const d=f/n*(Math.PI*2),h=Math.sin(d)*e,m=Math.cos(d)*e;o.push(0,0,0),o.push(h,0,m);const v=f&1?a:s;u.push(v.r,v.g,v.b),u.push(v.r,v.g,v.b)}for(let f=0;f<r;f++){const d=f&1?a:s,h=e-e/r*f;for(let m=0;m<i;m++){let v=m/i*(Math.PI*2),y=Math.sin(v)*h,p=Math.cos(v)*h;o.push(y,0,p),u.push(d.r,d.g,d.b),v=(m+1)/i*(Math.PI*2),y=Math.sin(v)*h,p=Math.cos(v)*h,o.push(y,0,p),u.push(d.r,d.g,d.b)}}const l=new Jt;l.setAttribute("position",new Tt(o,3)),l.setAttribute("color",new Tt(u,3));const c=new Ma({vertexColors:!0,toneMapped:!1});super(l,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xO=new fe,S1=new fe,bO=new fe;class xre extends On{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Jt;i.setAttribute("position",new Tt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const a=new Ma({fog:!1,toneMapped:!1});this.lightPlane=new dc(i,a),this.add(this.lightPlane),i=new Jt,i.setAttribute("position",new Tt([0,0,0,0,0,1],3)),this.targetLine=new dc(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xO.setFromMatrixPosition(this.light.matrixWorld),S1.setFromMatrixPosition(this.light.target.matrixWorld),bO.subVectors(S1,xO),this.lightPlane.lookAt(S1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(S1),this.targetLine.scale.z=bO.length()}}const _1=new fe,Lr=new Mp;class bre extends lu{constructor(e){const n=new Jt,r=new Ma({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],s={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(m,v){u(m),u(v)}function u(m){i.push(0,0,0),a.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(i.length/3-1)}n.setAttribute("position",new Tt(i,3)),n.setAttribute("color",new Tt(a,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new ft(16755200),c=new ft(16711680),f=new ft(43775),d=new ft(16777215),h=new ft(3355443);this.setColors(l,c,f,d,h)}setColors(e,n,r,i,a){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,n.r,n.g,n.b),o.setXYZ(25,n.r,n.g,n.b),o.setXYZ(26,n.r,n.g,n.b),o.setXYZ(27,n.r,n.g,n.b),o.setXYZ(28,n.r,n.g,n.b),o.setXYZ(29,n.r,n.g,n.b),o.setXYZ(30,n.r,n.g,n.b),o.setXYZ(31,n.r,n.g,n.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,a.r,a.g,a.b),o.setXYZ(41,a.r,a.g,a.b),o.setXYZ(42,a.r,a.g,a.b),o.setXYZ(43,a.r,a.g,a.b),o.setXYZ(44,a.r,a.g,a.b),o.setXYZ(45,a.r,a.g,a.b),o.setXYZ(46,a.r,a.g,a.b),o.setXYZ(47,a.r,a.g,a.b),o.setXYZ(48,a.r,a.g,a.b),o.setXYZ(49,a.r,a.g,a.b),o.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gr("c",n,e,Lr,0,0,-1),Gr("t",n,e,Lr,0,0,1),Gr("n1",n,e,Lr,-r,-i,-1),Gr("n2",n,e,Lr,r,-i,-1),Gr("n3",n,e,Lr,-r,i,-1),Gr("n4",n,e,Lr,r,i,-1),Gr("f1",n,e,Lr,-r,-i,1),Gr("f2",n,e,Lr,r,-i,1),Gr("f3",n,e,Lr,-r,i,1),Gr("f4",n,e,Lr,r,i,1),Gr("u1",n,e,Lr,r*.7,i*1.1,-1),Gr("u2",n,e,Lr,-r*.7,i*1.1,-1),Gr("u3",n,e,Lr,0,i*2,-1),Gr("cf1",n,e,Lr,-r,0,1),Gr("cf2",n,e,Lr,r,0,1),Gr("cf3",n,e,Lr,0,-i,1),Gr("cf4",n,e,Lr,0,i,1),Gr("cn1",n,e,Lr,-r,0,-1),Gr("cn2",n,e,Lr,r,0,-1),Gr("cn3",n,e,Lr,0,-i,-1),Gr("cn4",n,e,Lr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gr(t,e,n,r,i,a,s){_1.set(i,a,s).unproject(r);const o=e[t];if(o!==void 0){const u=n.getAttribute("position");for(let l=0,c=o.length;l<c;l++)u.setXYZ(o[l],_1.x,_1.y,_1.z)}}const E1=new ya;class wre extends lu{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),a=new Jt;a.setIndex(new dn(r,1)),a.setAttribute("position",new dn(i,3)),super(a,new Ma({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&E1.setFromObject(this.object),E1.isEmpty())return;const n=E1.min,r=E1.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sre extends lu{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Jt;a.setIndex(new dn(r,1)),a.setAttribute("position",new Tt(i,3)),super(a,new Ma({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class _re extends dc{constructor(e,n=1,r=16776960){const i=r,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Jt;s.setAttribute("position",new Tt(a,3)),s.computeBoundingSphere(),super(s,new Ma({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Jt;u.setAttribute("position",new Tt(o,3)),u.computeBoundingSphere(),this.add(new qr(u,new Ac({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const wO=new fe;let M1,WE;class Ere extends On{constructor(e=new fe(0,0,1),n=new fe(0,0,0),r=1,i=16776960,a=r*.2,s=a*.2){super(),this.type="ArrowHelper",M1===void 0&&(M1=new Jt,M1.setAttribute("position",new Tt([0,0,0,0,1,0],3)),WE=new Cp(0,.5,1,5,1),WE.translate(0,-.5,0)),this.position.copy(n),this.line=new dc(M1,new Ma({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qr(WE,new Ac({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,a,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{wO.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(wO,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Mre extends lu{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Jt;i.setAttribute("position",new Tt(n,3)),i.setAttribute("color",new Tt(r,3));const a=new Ma({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,n,r){const i=new ft,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(n),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Are{constructor(){this.type="ShapePath",this.color=new ft,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new ug,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,a,s){return this.currentPath.bezierCurveTo(e,n,r,i,a,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(p){const x=[];for(let g=0,S=p.length;g<S;g++){const E=p[g],_=new Nf;_.curves=E.curves,x.push(_)}return x}function r(p,x){const g=x.length;let S=!1;for(let E=g-1,_=0;_<g;E=_++){let A=x[E],T=x[_],M=T.x-A.x,C=T.y-A.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(A=x[_],M=-M,T=x[E],C=-C),p.y<A.y||p.y>T.y)continue;if(p.y===A.y){if(p.x===A.x)return!0}else{const N=C*(p.x-A.x)-M*(p.y-A.y);if(N===0)return!0;if(N<0)continue;S=!S}}else{if(p.y!==A.y)continue;if(T.x<=p.x&&p.x<=A.x||A.x<=p.x&&p.x<=T.x)return!0}}return S}const i=tu.isClockWise,a=this.subPaths;if(a.length===0)return[];let s,o,u;const l=[];if(a.length===1)return o=a[0],u=new Nf,u.curves=o.curves,l.push(u),l;let c=!i(a[0].getPoints());c=e?!c:c;const f=[],d=[];let h=[],m=0,v;d[m]=void 0,h[m]=[];for(let p=0,x=a.length;p<x;p++)o=a[p],v=o.getPoints(),s=i(v),s=e?!s:s,s?(!c&&d[m]&&m++,d[m]={s:new Nf,p:v},d[m].s.curves=o.curves,c&&m++,h[m]=[]):h[m].push({h:o,p:v[0]});if(!d[0])return n(a);if(d.length>1){let p=!1,x=0;for(let g=0,S=d.length;g<S;g++)f[g]=[];for(let g=0,S=d.length;g<S;g++){const E=h[g];for(let _=0;_<E.length;_++){const A=E[_];let T=!0;for(let M=0;M<d.length;M++)r(A.p,d[M].p)&&(g!==M&&x++,T?(T=!1,f[M].push(A)):p=!0);T&&f[g].push(A)}}x>0&&p===!1&&(h=f)}let y;for(let p=0,x=d.length;p<x;p++){u=d[p].s,l.push(u),y=h[p];for(let g=0,S=y.length;g<S;g++)u.holes.push(y[g].h)}return l}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ol}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ol);const Cre=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:DT,AddEquation:Hl,AddOperation:h6,AdditiveAnimationBlendMode:zT,AdditiveBlending:IA,AgXToneMapping:y6,AlphaFormat:S6,AlwaysCompare:U6,AlwaysDepth:s6,AlwaysStencilFunc:c2,AmbientLight:L$,AnimationAction:V$,AnimationClip:pg,AnimationLoader:Rne,AnimationMixer:ire,AnimationObjectGroup:nre,AnimationUtils:Cne,ArcCurve:u$,ArrayCamera:Q6,ArrowHelper:Ere,AttachedBindMode:UA,Audio:H$,AudioAnalyser:qne,AudioContext:vD,AudioListener:Gne,AudioLoader:kne,AxesHelper:Mre,BackSide:ai,BasicDepthPacking:Ec,BasicShadowMap:H8,BatchedMesh:a$,Bone:eD,BooleanKeyframeTrack:Jf,Box2:cre,Box3:ya,Box3Helper:Sre,BoxGeometry:Qf,BoxHelper:wre,BufferAttribute:dn,BufferGeometry:Jt,BufferGeometryLoader:$$,ByteType:b6,Cache:$u,Camera:Mp,CameraHelper:bre,CanvasTexture:Kte,CapsuleGeometry:Nw,CatmullRomCurve3:l$,CineonToneMapping:v6,CircleGeometry:Rw,ClampToEdgeWrapping:Yi,Clock:gD,Color:ft,ColorKeyframeTrack:dD,ColorManagement:Yn,CompressedArrayTexture:Yte,CompressedCubeTexture:Zte,CompressedTexture:Tw,CompressedTextureLoader:Pne,ConeGeometry:Pw,ConstantAlphaFactor:r6,ConstantColorFactor:t6,CubeCamera:V6,CubeReflectionMapping:ru,CubeRefractionMapping:lc,CubeTexture:jg,CubeTextureLoader:R$,CubeUVReflectionMapping:Ep,CubicBezierCurve:rD,CubicBezierCurve3:c$,CubicInterpolant:T$,CullFaceBack:PA,CullFaceFront:$8,CullFaceFrontBack:kY,CullFaceNone:k8,Curve:Do,CurvePath:d$,CustomBlending:G8,CustomToneMapping:g6,CylinderGeometry:Cp,Cylindrical:lre,Data3DTexture:VT,DataArrayTexture:ww,DataTexture:Df,DataTextureLoader:pD,DataUtils:xf,DecrementStencilOp:QY,DecrementWrapStencilOp:eZ,DefaultLoadingManager:Mh,DepthFormat:ic,DepthStencilFormat:fc,DepthTexture:Sw,DetachedBindMode:x6,DirectionalLight:F$,DirectionalLightHelper:xre,DiscreteInterpolant:D$,DisplayP3ColorSpace:bw,DodecahedronGeometry:Iw,DoubleSide:ri,DstAlphaFactor:Z8,DstColorFactor:Q8,DynamicCopyUsage:mZ,DynamicDrawUsage:lZ,DynamicReadUsage:dZ,EdgesGeometry:h$,EllipseCurve:Dw,EqualCompare:O6,EqualDepth:u6,EqualStencilFunc:iZ,EquirectangularReflectionMapping:Qh,EquirectangularRefractionMapping:Kv,Euler:qg,EventDispatcher:gs,ExtrudeGeometry:Fw,FileLoader:Ju,Float16BufferAttribute:eK,Float32BufferAttribute:Tt,Float64BufferAttribute:tK,FloatType:xi,Fog:Mw,FogExp2:Ew,FramebufferTexture:Xte,FrontSide:ss,Frustum:Xg,GLBufferAttribute:ure,GLSL1:gZ,GLSL3:f2,GreaterCompare:F6,GreaterDepth:c6,GreaterEqualCompare:B6,GreaterEqualDepth:l6,GreaterEqualStencilFunc:uZ,GreaterStencilFunc:sZ,GridHelper:gre,Group:_h,HalfFloatType:Ki,HemisphereLight:P$,HemisphereLightHelper:vre,IcosahedronGeometry:Kg,ImageBitmapLoader:zne,ImageLoader:mg,ImageUtils:GT,IncrementStencilOp:KY,IncrementWrapStencilOp:JY,InstancedBufferAttribute:np,InstancedBufferGeometry:k$,InstancedInterleavedBuffer:ore,InstancedMesh:i$,Int16BufferAttribute:QZ,Int32BufferAttribute:JZ,Int8BufferAttribute:YZ,IntType:RT,InterleavedBuffer:Aw,InterleavedBufferAttribute:kf,Interpolant:e0,InterpolateDiscrete:eg,InterpolateLinear:tg,InterpolateSmooth:Sx,InvertStencilOp:tZ,KeepStencilOp:of,KeyframeTrack:No,LOD:n$,LatheGeometry:Zg,Layers:Tf,LessCompare:I6,LessDepth:o6,LessEqualCompare:$T,LessEqualDepth:Zv,LessEqualStencilFunc:aZ,LessStencilFunc:rZ,Light:Tc,LightProbe:z$,Line:dc,Line3:fre,LineBasicMaterial:Ma,LineCurve:iD,LineCurve3:f$,LineDashedMaterial:M$,LineLoop:s$,LineSegments:lu,LinearDisplayP3ColorSpace:Wg,LinearEncoding:kT,LinearFilter:Qn,LinearInterpolant:fD,LinearMipMapLinearFilter:WY,LinearMipMapNearestFilter:VY,LinearMipmapLinearFilter:cc,LinearMipmapNearestFilter:NT,LinearSRGBColorSpace:Ys,LinearToneMapping:p6,LinearTransfer:rg,Loader:ja,LoaderUtils:x2,LoadingManager:hD,LoopOnce:C6,LoopPingPong:D6,LoopRepeat:T6,LuminanceAlphaFormat:E6,LuminanceFormat:_6,MOUSE:af,Material:li,MaterialLoader:Hw,MathUtils:sb,Matrix3:vn,Matrix4:Ht,MaxEquation:BA,Mesh:qr,MeshBasicMaterial:Ac,MeshDepthMaterial:ZT,MeshDistanceMaterial:KT,MeshLambertMaterial:_$,MeshMatcapMaterial:E$,MeshNormalMaterial:lD,MeshPhongMaterial:w$,MeshPhysicalMaterial:b$,MeshStandardMaterial:uD,MeshToonMaterial:S$,MinEquation:LA,MirroredRepeatWrapping:Jv,MixOperation:d6,MultiplyBlending:FA,MultiplyOperation:Vg,NearestFilter:mr,NearestMipMapLinearFilter:GY,NearestMipMapNearestFilter:HY,NearestMipmapLinearFilter:gv,NearestMipmapNearestFilter:rb,NeverCompare:P6,NeverDepth:a6,NeverStencilFunc:nZ,NoBlending:ea,NoColorSpace:ma,NoToneMapping:Eo,NormalAnimationBlendMode:xw,NormalBlending:Af,NotEqualCompare:L6,NotEqualDepth:f6,NotEqualStencilFunc:oZ,NumberKeyframeTrack:dg,Object3D:On,ObjectLoader:Bne,ObjectSpaceNormalMap:R6,OctahedronGeometry:Qg,OneFactor:j8,OneMinusConstantAlphaFactor:i6,OneMinusConstantColorFactor:n6,OneMinusDstAlphaFactor:K8,OneMinusDstColorFactor:J8,OneMinusSrcAlphaFactor:nb,OneMinusSrcColorFactor:Y8,OrthographicCamera:ku,P3Primaries:ag,PCFShadowMap:vw,PCFSoftShadowMap:vv,PMREMGenerator:h2,Path:ug,PerspectiveCamera:Tr,Plane:Ou,PlaneGeometry:Yg,PlaneHelper:_re,PointLight:O$,PointLightHelper:pre,Points:o$,PointsMaterial:tD,PolarGridHelper:yre,PolyhedronGeometry:Cc,PositionalAudio:Wne,PropertyBinding:Ln,PropertyMixer:G$,QuadraticBezierCurve:aD,QuadraticBezierCurve3:sD,Quaternion:Ni,QuaternionKeyframeTrack:Tp,QuaternionLinearInterpolant:N$,RED_GREEN_RGTC2_Format:u2,RED_RGTC1_Format:A6,REVISION:ol,RGBADepthPacking:N6,RGBAFormat:Zi,RGBAIntegerFormat:BT,RGBA_ASTC_10x10_Format:n2,RGBA_ASTC_10x5_Format:JA,RGBA_ASTC_10x6_Format:e2,RGBA_ASTC_10x8_Format:t2,RGBA_ASTC_12x10_Format:r2,RGBA_ASTC_12x12_Format:i2,RGBA_ASTC_4x4_Format:WA,RGBA_ASTC_5x4_Format:qA,RGBA_ASTC_5x5_Format:jA,RGBA_ASTC_6x5_Format:XA,RGBA_ASTC_6x6_Format:YA,RGBA_ASTC_8x5_Format:ZA,RGBA_ASTC_8x6_Format:KA,RGBA_ASTC_8x8_Format:QA,RGBA_BPTC_Format:wx,RGBA_ETC2_EAC_Format:VA,RGBA_PVRTC_2BPPV1_Format:HA,RGBA_PVRTC_4BPPV1_Format:$A,RGBA_S3TC_DXT1_Format:yx,RGBA_S3TC_DXT3_Format:xx,RGBA_S3TC_DXT5_Format:bx,RGB_BPTC_SIGNED_Format:a2,RGB_BPTC_UNSIGNED_Format:s2,RGB_ETC1_Format:UT,RGB_ETC2_Format:GA,RGB_PVRTC_2BPPV1_Format:kA,RGB_PVRTC_4BPPV1_Format:zA,RGB_S3TC_DXT1_Format:gx,RGFormat:M6,RGIntegerFormat:LT,RawShaderMaterial:x$,Ray:Kf,Raycaster:bD,Rec709Primaries:ig,RectAreaLight:B$,RedFormat:OT,RedIntegerFormat:FT,ReinhardToneMapping:m6,RenderTarget:$6,RepeatWrapping:Qv,ReplaceStencilOp:ZY,ReverseSubtractEquation:W8,RingGeometry:Lw,SIGNED_RED_GREEN_RGTC2_Format:l2,SIGNED_RED_RGTC1_Format:o2,SRGBColorSpace:Nn,SRGBTransfer:cr,Scene:zf,ShaderChunk:cn,ShaderLib:mo,ShaderMaterial:Xr,ShadowMaterial:y$,Shape:Nf,ShapeGeometry:Bw,ShapePath:Are,ShapeUtils:tu,ShortType:w6,Skeleton:Cw,SkeletonHelper:hre,SkinnedMesh:r$,Source:yf,Sphere:ta,SphereGeometry:Jg,Spherical:w2,SphericalHarmonics3:U$,SplineCurve:oD,SpotLight:I$,SpotLightHelper:dre,Sprite:t$,SpriteMaterial:JT,SrcAlphaFactor:tb,SrcAlphaSaturateFactor:e6,SrcColorFactor:X8,StaticCopyUsage:pZ,StaticDrawUsage:sg,StaticReadUsage:fZ,StereoCamera:$ne,StreamCopyUsage:vZ,StreamDrawUsage:cZ,StreamReadUsage:hZ,StringKeyframeTrack:ed,SubtractEquation:V8,SubtractiveBlending:OA,TOUCH:sf,TangentSpaceNormalMap:Mc,TetrahedronGeometry:Uw,Texture:yr,TextureLoader:Ine,TorusGeometry:zw,TorusKnotGeometry:kw,Triangle:Ua,TriangleFanDrawMode:XY,TriangleStripDrawMode:jY,TrianglesDrawMode:qY,TubeGeometry:$w,TwoPassDoubleSide:$Y,UVMapping:gw,Uint16BufferAttribute:WT,Uint32BufferAttribute:qT,Uint8BufferAttribute:ZZ,Uint8ClampedBufferAttribute:KZ,Uniform:Dn,UniformsGroup:sre,UniformsLib:mt,UniformsUtils:jT,UnsignedByteType:Di,UnsignedInt248Type:Wu,UnsignedIntType:Qo,UnsignedShort4444Type:PT,UnsignedShort5551Type:IT,UnsignedShortType:yw,VSMShadowMap:fo,Vector2:qe,Vector3:fe,Vector4:Wn,VectorKeyframeTrack:hg,VideoTexture:jte,WebGL1Renderer:J6,WebGL3DRenderTarget:BZ,WebGLArrayRenderTarget:LZ,WebGLCoordinateSystem:xo,WebGLCubeRenderTarget:XT,WebGLMultipleRenderTargets:UZ,WebGLRenderTarget:jr,WebGLRenderer:QT,WebGLUtils:K6,WebGPUCoordinateSystem:Jh,WireframeGeometry:g$,WrapAroundEnding:ng,ZeroCurvatureEnding:vf,ZeroFactor:q8,ZeroSlopeEnding:gf,ZeroStencilOp:YY,_SRGBAFormat:ib,createCanvasElement:k6,sRGBEncoding:ac},Symbol.toStringTag,{value:"Module"}));var q$={exports:{}},td={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */td.ConcurrentRoot=1;td.ContinuousEventPriority=4;td.DefaultEventPriority=16;td.DiscreteEventPriority=1;td.IdleEventPriority=536870912;td.LegacyRoot=0;q$.exports=td;var Ah=q$.exports;function Tre(t){let e;const n=new Set,r=(l,c)=>{const f=typeof l=="function"?l(e):l;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),n.forEach(h=>h(e,d))}},i=()=>e,a=(l,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const v=d;l(d=m,v)}}return n.add(h),()=>n.delete(h)},u={setState:r,getState:i,subscribe:(l,c,f)=>c||f?a(l,c,f):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,i,u),u}const Dre=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),SO=Dre?$.useEffect:$.useLayoutEffect;function j$(t){const e=typeof t=="function"?Tre(t):t,n=(r=e.getState,i=Object.is)=>{const[,a]=$.useReducer(y=>y+1,0),s=e.getState(),o=$.useRef(s),u=$.useRef(r),l=$.useRef(i),c=$.useRef(!1),f=$.useRef();f.current===void 0&&(f.current=r(s));let d,h=!1;(o.current!==s||u.current!==r||l.current!==i||c.current)&&(d=r(s),h=!i(f.current,d)),SO(()=>{h&&(f.current=d),o.current=s,u.current=r,l.current=i,c.current=!1});const m=$.useRef(s);SO(()=>{const y=()=>{try{const x=e.getState(),g=u.current(x);l.current(f.current,g)||(o.current=x,f.current=g,a())}catch{c.current=!0,a()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const v=h?d:f.current;return $.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var X$={exports:{}},qE={exports:{}},jE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function Nre(){return _O||(_O=1,function(t){function e(U,I){var j=U.length;U.push(I);e:for(;0<j;){var ee=j-1>>>1,J=U[ee];if(0<i(J,I))U[ee]=I,U[j]=J,j=ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var I=U[0],j=U.pop();if(j!==I){U[0]=j;e:for(var ee=0,J=U.length,q=J>>>1;ee<q;){var ae=2*(ee+1)-1,be=U[ae],ue=ae+1,pe=U[ue];if(0>i(be,j))ue<J&&0>i(pe,be)?(U[ee]=pe,U[ue]=j,ee=ue):(U[ee]=be,U[ae]=j,ee=ae);else if(ue<J&&0>i(pe,j))U[ee]=pe,U[ue]=j,ee=ue;else break e}}return I}function i(U,I){var j=U.sortIndex-I.sortIndex;return j!==0?j:U.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var I=n(l);I!==null;){if(I.callback===null)r(l);else if(I.startTime<=U)r(l),I.sortIndex=I.expirationTime,e(u,I);else break;I=n(l)}}function S(U){if(v=!1,g(U),!m)if(n(u)!==null)m=!0,O(E);else{var I=n(l);I!==null&&F(S,I.startTime-U)}}function E(U,I){m=!1,v&&(v=!1,p(T),T=-1),h=!0;var j=d;try{for(g(I),f=n(u);f!==null&&(!(f.expirationTime>I)||U&&!N());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,d=f.priorityLevel;var J=ee(f.expirationTime<=I);I=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(u)&&r(u),g(I)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var ae=n(l);ae!==null&&F(S,ae.startTime-I),q=!1}return q}finally{f=null,d=j,h=!1}}var _=!1,A=null,T=-1,M=5,C=-1;function N(){return!(t.unstable_now()-C<M)}function P(){if(A!==null){var U=t.unstable_now();C=U;var I=!0;try{I=A(!0,U)}finally{I?H():(_=!1,A=null)}}else _=!1}var H;if(typeof x=="function")H=function(){x(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,z=L.port2;L.port1.onmessage=P,H=function(){z.postMessage(null)}}else H=function(){y(P,0)};function O(U){A=U,_||(_=!0,H())}function F(U,I){T=y(function(){U(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var j=d;d=I;try{return U()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,I){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=d;d=U;try{return I()}finally{d=j}},t.unstable_scheduleCallback=function(U,I,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=j+J,U={id:c++,callback:I,priorityLevel:U,startTime:j,expirationTime:J,sortIndex:-1},j>ee?(U.sortIndex=j,e(l,U),n(u)===null&&U===n(l)&&(v?(p(T),T=-1):v=!0,F(S,j-ee))):(U.sortIndex=J,e(u,U),m||h||(m=!0,O(E))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var I=d;return function(){var j=d;d=I;try{return U.apply(this,arguments)}finally{d=j}}}}(jE)),jE}var EO;function Rre(){return EO||(EO=1,qE.exports=Nre()),qE.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pre=function(e){var n={},r=$,i=Rre(),a=Object.assign;function s(b){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+b,D=1;D<arguments.length;D++)w+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),E=Symbol.iterator;function _(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}function A(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case p:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case m:return(b.displayName||"Context")+".Consumer";case h:return(b._context.displayName||"Context")+".Provider";case v:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case x:return w=b.displayName||null,w!==null?w:A(b.type)||"Memo";case g:w=b._payload,b=b._init;try{return A(b(w))}catch{}}return null}function T(b){var w=b.type;switch(b.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=w.render,b=b.displayName||b.name||"",w.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(w);case 8:return w===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function M(b){var w=b,D=b;if(b.alternate)for(;w.return;)w=w.return;else{b=w;do w=b,w.flags&4098&&(D=w.return),b=w.return;while(b)}return w.tag===3?D:null}function C(b){if(M(b)!==b)throw Error(s(188))}function N(b){var w=b.alternate;if(!w){if(w=M(b),w===null)throw Error(s(188));return w!==b?null:b}for(var D=b,R=w;;){var k=D.return;if(k===null)break;var X=k.alternate;if(X===null){if(R=k.return,R!==null){D=R;continue}break}if(k.child===X.child){for(X=k.child;X;){if(X===D)return C(k),b;if(X===R)return C(k),w;X=X.sibling}throw Error(s(188))}if(D.return!==R.return)D=k,R=X;else{for(var ge=!1,Ue=k.child;Ue;){if(Ue===D){ge=!0,D=k,R=X;break}if(Ue===R){ge=!0,R=k,D=X;break}Ue=Ue.sibling}if(!ge){for(Ue=X.child;Ue;){if(Ue===D){ge=!0,D=X,R=k;break}if(Ue===R){ge=!0,R=X,D=k;break}Ue=Ue.sibling}if(!ge)throw Error(s(189))}}if(D.alternate!==R)throw Error(s(190))}if(D.tag!==3)throw Error(s(188));return D.stateNode.current===D?b:w}function P(b){return b=N(b),b!==null?H(b):null}function H(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var w=H(b);if(w!==null)return w;b=b.sibling}return null}function L(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var w=L(b);if(w!==null)return w}b=b.sibling}return null}var z=Array.isArray,O=e.getPublicInstance,F=e.getRootHostContext,U=e.getChildHostContext,I=e.prepareForCommit,j=e.resetAfterCommit,ee=e.createInstance,J=e.appendInitialChild,q=e.finalizeInitialChildren,ae=e.prepareUpdate,be=e.shouldSetTextContent,ue=e.createTextInstance,pe=e.scheduleTimeout,Pe=e.cancelTimeout,Ce=e.noTimeout,Ee=e.isPrimaryRenderer,Oe=e.supportsMutation,ne=e.supportsPersistence,Le=e.supportsHydration,Fe=e.getInstanceFromNode,Q=e.preparePortalMount,te=e.getCurrentEventPriority,Me=e.detachDeletedInstance,re=e.supportsMicrotasks,V=e.scheduleMicrotask,G=e.supportsTestSelectors,le=e.findFiberRoot,_e=e.getBoundingRect,W=e.getTextContent,Y=e.isHiddenSubtree,de=e.matchAccessibilityRole,xe=e.setFocusIfFocusable,Ne=e.setupIntersectionObserver,Be=e.appendChild,$e=e.appendChildToContainer,Ie=e.commitTextUpdate,Ye=e.commitMount,Ve=e.commitUpdate,at=e.insertBefore,tt=e.insertInContainerBefore,Ze=e.removeChild,we=e.removeChildFromContainer,B=e.resetTextContent,se=e.hideInstance,Te=e.hideTextInstance,me=e.unhideInstance,ve=e.unhideTextInstance,Ke=e.clearContainer,lt=e.cloneInstance,Dt=e.createContainerChildSet,_t=e.appendChildToContainerChildSet,an=e.finalizeContainerChildren,gn=e.replaceContainerChildren,Vn=e.cloneHiddenInstance,rr=e.cloneHiddenTextInstance,Sn=e.canHydrateInstance,$r=e.canHydrateTextInstance,Fi=e.canHydrateSuspenseInstance,Ss=e.isSuspenseInstancePending,pu=e.isSuspenseInstanceFallback,Da=e.registerSuspenseInstanceRetry,Li=e.getNextHydratableSibling,Zt=e.getFirstHydratableChild,mu=e.getFirstHydratableChildWithinContainer,hl=e.getFirstHydratableChildWithinSuspenseInstance,K=e.hydrateInstance,oe=e.hydrateTextInstance,Re=e.hydrateSuspenseInstance,Z=e.getNextHydratableInstanceAfterSuspenseInstance,ce=e.commitHydratedContainer,he=e.commitHydratedSuspenseInstance,De=e.clearSuspenseBoundary,Se=e.clearSuspenseBoundaryFromContainer,He=e.shouldDeleteUnhydratedTailInstances,We=e.didNotMatchHydratedContainerTextInstance,je=e.didNotMatchHydratedTextInstance,ke;function ht(b){if(ke===void 0)try{throw Error()}catch(D){var w=D.stack.trim().match(/\n( *(at )?)/);ke=w&&w[1]||""}return`
`+ke+b}var rt=!1;function it(b,w){if(!b||rt)return"";rt=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(ct){var R=ct}Reflect.construct(b,[],w)}else{try{w.call()}catch(ct){R=ct}b.call(w.prototype)}else{try{throw Error()}catch(ct){R=ct}b()}}catch(ct){if(ct&&R&&typeof ct.stack=="string"){for(var k=ct.stack.split(`
`),X=R.stack.split(`
`),ge=k.length-1,Ue=X.length-1;1<=ge&&0<=Ue&&k[ge]!==X[Ue];)Ue--;for(;1<=ge&&0<=Ue;ge--,Ue--)if(k[ge]!==X[Ue]){if(ge!==1||Ue!==1)do if(ge--,Ue--,0>Ue||k[ge]!==X[Ue]){var Qe=`
`+k[ge].replace(" at new "," at ");return b.displayName&&Qe.includes("<anonymous>")&&(Qe=Qe.replace("<anonymous>",b.displayName)),Qe}while(1<=ge&&0<=Ue);break}}}finally{rt=!1,Error.prepareStackTrace=D}return(b=b?b.displayName||b.name:"")?ht(b):""}var yt=Object.prototype.hasOwnProperty,Nt=[],Ot=-1;function Xt(b){return{current:b}}function bt(b){0>Ot||(b.current=Nt[Ot],Nt[Ot]=null,Ot--)}function pt(b,w){Ot++,Nt[Ot]=b.current,b.current=w}var yn={},kt=Xt(yn),Gt=Xt(!1),jn=yn;function Or(b,w){var D=b.type.contextTypes;if(!D)return yn;var R=b.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===w)return R.__reactInternalMemoizedMaskedChildContext;var k={},X;for(X in D)k[X]=w[X];return R&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=w,b.__reactInternalMemoizedMaskedChildContext=k),k}function xr(b){return b=b.childContextTypes,b!=null}function In(){bt(Gt),bt(kt)}function wn(b,w,D){if(kt.current!==yn)throw Error(s(168));pt(kt,w),pt(Gt,D)}function _r(b,w,D){var R=b.stateNode;if(w=w.childContextTypes,typeof R.getChildContext!="function")return D;R=R.getChildContext();for(var k in R)if(!(k in w))throw Error(s(108,T(b)||"Unknown",k));return a({},D,R)}function sn(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||yn,jn=kt.current,pt(kt,b),pt(Gt,Gt.current),!0}function En(b,w,D){var R=b.stateNode;if(!R)throw Error(s(169));D?(b=_r(b,w,jn),R.__reactInternalMemoizedMergedChildContext=b,bt(Gt),bt(kt),pt(kt,b)):bt(Gt),pt(Gt,D)}var ur=Math.clz32?Math.clz32:Uo,_s=Math.log,oa=Math.LN2;function Uo(b){return b>>>=0,b===0?32:31-(_s(b)/oa|0)|0}var M0=64,A0=4194304;function tm(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function C0(b,w){var D=b.pendingLanes;if(D===0)return 0;var R=0,k=b.suspendedLanes,X=b.pingedLanes,ge=D&268435455;if(ge!==0){var Ue=ge&~k;Ue!==0?R=tm(Ue):(X&=ge,X!==0&&(R=tm(X)))}else ge=D&~k,ge!==0?R=tm(ge):X!==0&&(R=tm(X));if(R===0)return 0;if(w!==0&&w!==R&&!(w&k)&&(k=R&-R,X=w&-w,k>=X||k===16&&(X&4194240)!==0))return w;if(R&4&&(R|=D&16),w=b.entangledLanes,w!==0)for(b=b.entanglements,w&=R;0<w;)D=31-ur(w),k=1<<D,R|=b[D],w&=~k;return R}function Mq(b,w){switch(b){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aq(b,w){for(var D=b.suspendedLanes,R=b.pingedLanes,k=b.expirationTimes,X=b.pendingLanes;0<X;){var ge=31-ur(X),Ue=1<<ge,Qe=k[ge];Qe===-1?(!(Ue&D)||Ue&R)&&(k[ge]=Mq(Ue,w)):Qe<=w&&(b.expiredLanes|=Ue),X&=~Ue}}function IS(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function OS(b){for(var w=[],D=0;31>D;D++)w.push(b);return w}function nm(b,w,D){b.pendingLanes|=w,w!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,w=31-ur(w),b[w]=D}function Cq(b,w){var D=b.pendingLanes&~w;b.pendingLanes=w,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=w,b.mutableReadLanes&=w,b.entangledLanes&=w,w=b.entanglements;var R=b.eventTimes;for(b=b.expirationTimes;0<D;){var k=31-ur(D),X=1<<k;w[k]=0,R[k]=-1,b[k]=-1,D&=~X}}function FS(b,w){var D=b.entangledLanes|=w;for(b=b.entanglements;D;){var R=31-ur(D),k=1<<R;k&w|b[R]&w&&(b[R]|=w),D&=~k}}var zn=0;function o3(b){return b&=-b,1<b?4<b?b&268435455?16:536870912:4:1}var LS=i.unstable_scheduleCallback,u3=i.unstable_cancelCallback,Tq=i.unstable_shouldYield,Dq=i.unstable_requestPaint,di=i.unstable_now,BS=i.unstable_ImmediatePriority,Nq=i.unstable_UserBlockingPriority,US=i.unstable_NormalPriority,Rq=i.unstable_IdlePriority,T0=null,zo=null;function Pq(b){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot(T0,b,void 0,(b.current.flags&128)===128)}catch{}}function Iq(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var ko=typeof Object.is=="function"?Object.is:Iq,vu=null,D0=!1,zS=!1;function l3(b){vu===null?vu=[b]:vu.push(b)}function Oq(b){D0=!0,l3(b)}function $o(){if(!zS&&vu!==null){zS=!0;var b=0,w=zn;try{var D=vu;for(zn=1;b<D.length;b++){var R=D[b];do R=R(!0);while(R!==null)}vu=null,D0=!1}catch(k){throw vu!==null&&(vu=vu.slice(b+1)),LS(BS,$o),k}finally{zn=w,zS=!1}}return null}var Fq=o.ReactCurrentBatchConfig;function N0(b,w){if(ko(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var D=Object.keys(b),R=Object.keys(w);if(D.length!==R.length)return!1;for(R=0;R<D.length;R++){var k=D[R];if(!yt.call(w,k)||!ko(b[k],w[k]))return!1}return!0}function Lq(b){switch(b.tag){case 5:return ht(b.type);case 16:return ht("Lazy");case 13:return ht("Suspense");case 19:return ht("SuspenseList");case 0:case 2:case 15:return b=it(b.type,!1),b;case 11:return b=it(b.type.render,!1),b;case 1:return b=it(b.type,!0),b;default:return""}}function ro(b,w){if(b&&b.defaultProps){w=a({},w),b=b.defaultProps;for(var D in b)w[D]===void 0&&(w[D]=b[D]);return w}return w}var R0=Xt(null),P0=null,gd=null,kS=null;function $S(){kS=gd=P0=null}function c3(b,w,D){Ee?(pt(R0,w._currentValue),w._currentValue=D):(pt(R0,w._currentValue2),w._currentValue2=D)}function HS(b){var w=R0.current;bt(R0),Ee?b._currentValue=w:b._currentValue2=w}function GS(b,w,D){for(;b!==null;){var R=b.alternate;if((b.childLanes&w)!==w?(b.childLanes|=w,R!==null&&(R.childLanes|=w)):R!==null&&(R.childLanes&w)!==w&&(R.childLanes|=w),b===D)break;b=b.return}}function yd(b,w){P0=b,kS=gd=null,b=b.dependencies,b!==null&&b.firstContext!==null&&(b.lanes&w&&(Za=!0),b.firstContext=null)}function Es(b){var w=Ee?b._currentValue:b._currentValue2;if(kS!==b)if(b={context:b,memoizedValue:w,next:null},gd===null){if(P0===null)throw Error(s(308));gd=b,P0.dependencies={lanes:0,firstContext:b}}else gd=gd.next=b;return w}var Ho=null,pl=!1;function VS(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f3(b,w){b=b.updateQueue,w.updateQueue===b&&(w.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function gu(b,w){return{eventTime:b,lane:w,tag:0,payload:null,callback:null,next:null}}function ml(b,w){var D=b.updateQueue;D!==null&&(D=D.shared,Yr!==null&&b.mode&1&&!(xn&2)?(b=D.interleaved,b===null?(w.next=w,Ho===null?Ho=[D]:Ho.push(D)):(w.next=b.next,b.next=w),D.interleaved=w):(b=D.pending,b===null?w.next=w:(w.next=b.next,b.next=w),D.pending=w))}function I0(b,w,D){if(w=w.updateQueue,w!==null&&(w=w.shared,(D&4194240)!==0)){var R=w.lanes;R&=b.pendingLanes,D|=R,w.lanes=D,FS(b,D)}}function d3(b,w){var D=b.updateQueue,R=b.alternate;if(R!==null&&(R=R.updateQueue,D===R)){var k=null,X=null;if(D=D.firstBaseUpdate,D!==null){do{var ge={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};X===null?k=X=ge:X=X.next=ge,D=D.next}while(D!==null);X===null?k=X=w:X=X.next=w}else k=X=w;D={baseState:R.baseState,firstBaseUpdate:k,lastBaseUpdate:X,shared:R.shared,effects:R.effects},b.updateQueue=D;return}b=D.lastBaseUpdate,b===null?D.firstBaseUpdate=w:b.next=w,D.lastBaseUpdate=w}function O0(b,w,D,R){var k=b.updateQueue;pl=!1;var X=k.firstBaseUpdate,ge=k.lastBaseUpdate,Ue=k.shared.pending;if(Ue!==null){k.shared.pending=null;var Qe=Ue,ct=Qe.next;Qe.next=null,ge===null?X=ct:ge.next=ct,ge=Qe;var Mt=b.alternate;Mt!==null&&(Mt=Mt.updateQueue,Ue=Mt.lastBaseUpdate,Ue!==ge&&(Ue===null?Mt.firstBaseUpdate=ct:Ue.next=ct,Mt.lastBaseUpdate=Qe))}if(X!==null){var tn=k.baseState;ge=0,Mt=ct=Qe=null,Ue=X;do{var Lt=Ue.lane,sr=Ue.eventTime;if((R&Lt)===Lt){Mt!==null&&(Mt=Mt.next={eventTime:sr,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var Pt=b,ki=Ue;switch(Lt=w,sr=D,ki.tag){case 1:if(Pt=ki.payload,typeof Pt=="function"){tn=Pt.call(sr,tn,Lt);break e}tn=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=ki.payload,Lt=typeof Pt=="function"?Pt.call(sr,tn,Lt):Pt,Lt==null)break e;tn=a({},tn,Lt);break e;case 2:pl=!0}}Ue.callback!==null&&Ue.lane!==0&&(b.flags|=64,Lt=k.effects,Lt===null?k.effects=[Ue]:Lt.push(Ue))}else sr={eventTime:sr,lane:Lt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},Mt===null?(ct=Mt=sr,Qe=tn):Mt=Mt.next=sr,ge|=Lt;if(Ue=Ue.next,Ue===null){if(Ue=k.shared.pending,Ue===null)break;Lt=Ue,Ue=Lt.next,Lt.next=null,k.lastBaseUpdate=Lt,k.shared.pending=null}}while(!0);if(Mt===null&&(Qe=tn),k.baseState=Qe,k.firstBaseUpdate=ct,k.lastBaseUpdate=Mt,w=k.shared.interleaved,w!==null){k=w;do ge|=k.lane,k=k.next;while(k!==w)}else X===null&&(k.shared.lanes=0);Cd|=ge,b.lanes=ge,b.memoizedState=tn}}function h3(b,w,D){if(b=w.effects,w.effects=null,b!==null)for(w=0;w<b.length;w++){var R=b[w],k=R.callback;if(k!==null){if(R.callback=null,R=D,typeof k!="function")throw Error(s(191,k));k.call(R)}}}var p3=new r.Component().refs;function WS(b,w,D,R){w=b.memoizedState,D=D(R,w),D=D==null?w:a({},w,D),b.memoizedState=D,b.lanes===0&&(b.updateQueue.baseState=D)}var F0={isMounted:function(b){return(b=b._reactInternals)?M(b)===b:!1},enqueueSetState:function(b,w,D){b=b._reactInternals;var R=la(),k=yl(b),X=gu(R,k);X.payload=w,D!=null&&(X.callback=D),ml(b,X),w=Ds(b,k,R),w!==null&&I0(w,b,k)},enqueueReplaceState:function(b,w,D){b=b._reactInternals;var R=la(),k=yl(b),X=gu(R,k);X.tag=1,X.payload=w,D!=null&&(X.callback=D),ml(b,X),w=Ds(b,k,R),w!==null&&I0(w,b,k)},enqueueForceUpdate:function(b,w){b=b._reactInternals;var D=la(),R=yl(b),k=gu(D,R);k.tag=2,w!=null&&(k.callback=w),ml(b,k),w=Ds(b,R,D),w!==null&&I0(w,b,R)}};function m3(b,w,D,R,k,X,ge){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(R,X,ge):w.prototype&&w.prototype.isPureReactComponent?!N0(D,R)||!N0(k,X):!0}function v3(b,w,D){var R=!1,k=yn,X=w.contextType;return typeof X=="object"&&X!==null?X=Es(X):(k=xr(w)?jn:kt.current,R=w.contextTypes,X=(R=R!=null)?Or(b,k):yn),w=new w(D,X),b.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=F0,b.stateNode=w,w._reactInternals=b,R&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=k,b.__reactInternalMemoizedMaskedChildContext=X),w}function g3(b,w,D,R){b=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(D,R),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(D,R),w.state!==b&&F0.enqueueReplaceState(w,w.state,null)}function qS(b,w,D,R){var k=b.stateNode;k.props=D,k.state=b.memoizedState,k.refs=p3,VS(b);var X=w.contextType;typeof X=="object"&&X!==null?k.context=Es(X):(X=xr(w)?jn:kt.current,k.context=Or(b,X)),k.state=b.memoizedState,X=w.getDerivedStateFromProps,typeof X=="function"&&(WS(b,w,X,D),k.state=b.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(w=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),w!==k.state&&F0.enqueueReplaceState(k,k.state,null),O0(b,D,k,R),k.state=b.memoizedState),typeof k.componentDidMount=="function"&&(b.flags|=4194308)}var xd=[],bd=0,L0=null,B0=0,Ms=[],As=0,Bc=null,yu=1,xu="";function Uc(b,w){xd[bd++]=B0,xd[bd++]=L0,L0=b,B0=w}function y3(b,w,D){Ms[As++]=yu,Ms[As++]=xu,Ms[As++]=Bc,Bc=b;var R=yu;b=xu;var k=32-ur(R)-1;R&=~(1<<k),D+=1;var X=32-ur(w)+k;if(30<X){var ge=k-k%5;X=(R&(1<<ge)-1).toString(32),R>>=ge,k-=ge,yu=1<<32-ur(w)+k|D<<k|R,xu=X+b}else yu=1<<X|D<<k|R,xu=b}function jS(b){b.return!==null&&(Uc(b,1),y3(b,1,0))}function XS(b){for(;b===L0;)L0=xd[--bd],xd[bd]=null,B0=xd[--bd],xd[bd]=null;for(;b===Bc;)Bc=Ms[--As],Ms[As]=null,xu=Ms[--As],Ms[As]=null,yu=Ms[--As],Ms[As]=null}var Xa=null,Ya=null,br=!1,rm=!1,io=null;function x3(b,w){var D=Ns(5,null,null,0);D.elementType="DELETED",D.stateNode=w,D.return=b,w=b.deletions,w===null?(b.deletions=[D],b.flags|=16):w.push(D)}function b3(b,w){switch(b.tag){case 5:return w=Sn(w,b.type,b.pendingProps),w!==null?(b.stateNode=w,Xa=b,Ya=Zt(w),!0):!1;case 6:return w=$r(w,b.pendingProps),w!==null?(b.stateNode=w,Xa=b,Ya=null,!0):!1;case 13:if(w=Fi(w),w!==null){var D=Bc!==null?{id:yu,overflow:xu}:null;return b.memoizedState={dehydrated:w,treeContext:D,retryLane:1073741824},D=Ns(18,null,null,0),D.stateNode=w,D.return=b,b.child=D,Xa=b,Ya=null,!0}return!1;default:return!1}}function YS(b){return(b.mode&1)!==0&&(b.flags&128)===0}function ZS(b){if(br){var w=Ya;if(w){var D=w;if(!b3(b,w)){if(YS(b))throw Error(s(418));w=Li(D);var R=Xa;w&&b3(b,w)?x3(R,D):(b.flags=b.flags&-4097|2,br=!1,Xa=b)}}else{if(YS(b))throw Error(s(418));b.flags=b.flags&-4097|2,br=!1,Xa=b}}}function w3(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Xa=b}function im(b){if(!Le||b!==Xa)return!1;if(!br)return w3(b),br=!0,!1;if(b.tag!==3&&(b.tag!==5||He(b.type)&&!be(b.type,b.memoizedProps))){var w=Ya;if(w){if(YS(b)){for(b=Ya;b;)b=Li(b);throw Error(s(418))}for(;w;)x3(b,w),w=Li(w)}}if(w3(b),b.tag===13){if(!Le)throw Error(s(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));Ya=Z(b)}else Ya=Xa?Li(b.stateNode):null;return!0}function wd(){Le&&(Ya=Xa=null,rm=br=!1)}function KS(b){io===null?io=[b]:io.push(b)}function am(b,w,D){if(b=D.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(s(309));var R=D.stateNode}if(!R)throw Error(s(147,b));var k=R,X=""+b;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===X?w.ref:(w=function(ge){var Ue=k.refs;Ue===p3&&(Ue=k.refs={}),ge===null?delete Ue[X]:Ue[X]=ge},w._stringRef=X,w)}if(typeof b!="string")throw Error(s(284));if(!D._owner)throw Error(s(290,b))}return b}function U0(b,w){throw b=Object.prototype.toString.call(w),Error(s(31,b==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":b))}function S3(b){var w=b._init;return w(b._payload)}function _3(b){function w(Ge,ze){if(b){var Xe=Ge.deletions;Xe===null?(Ge.deletions=[ze],Ge.flags|=16):Xe.push(ze)}}function D(Ge,ze){if(!b)return null;for(;ze!==null;)w(Ge,ze),ze=ze.sibling;return null}function R(Ge,ze){for(Ge=new Map;ze!==null;)ze.key!==null?Ge.set(ze.key,ze):Ge.set(ze.index,ze),ze=ze.sibling;return Ge}function k(Ge,ze){return Ge=bl(Ge,ze),Ge.index=0,Ge.sibling=null,Ge}function X(Ge,ze,Xe){return Ge.index=Xe,b?(Xe=Ge.alternate,Xe!==null?(Xe=Xe.index,Xe<ze?(Ge.flags|=2,ze):Xe):(Ge.flags|=2,ze)):(Ge.flags|=1048576,ze)}function ge(Ge){return b&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Ue(Ge,ze,Xe,xt){return ze===null||ze.tag!==6?(ze=O_(Xe,Ge.mode,xt),ze.return=Ge,ze):(ze=k(ze,Xe),ze.return=Ge,ze)}function Qe(Ge,ze,Xe,xt){var Rt=Xe.type;return Rt===c?Mt(Ge,ze,Xe.props.children,xt,Xe.key):ze!==null&&(ze.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===g&&S3(Rt)===ze.type)?(xt=k(ze,Xe.props),xt.ref=am(Ge,ze,Xe),xt.return=Ge,xt):(xt=my(Xe.type,Xe.key,Xe.props,null,Ge.mode,xt),xt.ref=am(Ge,ze,Xe),xt.return=Ge,xt)}function ct(Ge,ze,Xe,xt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Xe.containerInfo||ze.stateNode.implementation!==Xe.implementation?(ze=F_(Xe,Ge.mode,xt),ze.return=Ge,ze):(ze=k(ze,Xe.children||[]),ze.return=Ge,ze)}function Mt(Ge,ze,Xe,xt,Rt){return ze===null||ze.tag!==7?(ze=Wc(Xe,Ge.mode,xt,Rt),ze.return=Ge,ze):(ze=k(ze,Xe),ze.return=Ge,ze)}function tn(Ge,ze,Xe){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=O_(""+ze,Ge.mode,Xe),ze.return=Ge,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case u:return Xe=my(ze.type,ze.key,ze.props,null,Ge.mode,Xe),Xe.ref=am(Ge,null,ze),Xe.return=Ge,Xe;case l:return ze=F_(ze,Ge.mode,Xe),ze.return=Ge,ze;case g:var xt=ze._init;return tn(Ge,xt(ze._payload),Xe)}if(z(ze)||_(ze))return ze=Wc(ze,Ge.mode,Xe,null),ze.return=Ge,ze;U0(Ge,ze)}return null}function Lt(Ge,ze,Xe,xt){var Rt=ze!==null?ze.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Rt!==null?null:Ue(Ge,ze,""+Xe,xt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case u:return Xe.key===Rt?Qe(Ge,ze,Xe,xt):null;case l:return Xe.key===Rt?ct(Ge,ze,Xe,xt):null;case g:return Rt=Xe._init,Lt(Ge,ze,Rt(Xe._payload),xt)}if(z(Xe)||_(Xe))return Rt!==null?null:Mt(Ge,ze,Xe,xt,null);U0(Ge,Xe)}return null}function sr(Ge,ze,Xe,xt,Rt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ge=Ge.get(Xe)||null,Ue(ze,Ge,""+xt,Rt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case u:return Ge=Ge.get(xt.key===null?Xe:xt.key)||null,Qe(ze,Ge,xt,Rt);case l:return Ge=Ge.get(xt.key===null?Xe:xt.key)||null,ct(ze,Ge,xt,Rt);case g:var mn=xt._init;return sr(Ge,ze,Xe,mn(xt._payload),Rt)}if(z(xt)||_(xt))return Ge=Ge.get(Xe)||null,Mt(ze,Ge,xt,Rt,null);U0(ze,xt)}return null}function Pt(Ge,ze,Xe,xt){for(var Rt=null,mn=null,nn=ze,kn=ze=0,pi=null;nn!==null&&kn<Xe.length;kn++){nn.index>kn?(pi=nn,nn=null):pi=nn.sibling;var $n=Lt(Ge,nn,Xe[kn],xt);if($n===null){nn===null&&(nn=pi);break}b&&nn&&$n.alternate===null&&w(Ge,nn),ze=X($n,ze,kn),mn===null?Rt=$n:mn.sibling=$n,mn=$n,nn=pi}if(kn===Xe.length)return D(Ge,nn),br&&Uc(Ge,kn),Rt;if(nn===null){for(;kn<Xe.length;kn++)nn=tn(Ge,Xe[kn],xt),nn!==null&&(ze=X(nn,ze,kn),mn===null?Rt=nn:mn.sibling=nn,mn=nn);return br&&Uc(Ge,kn),Rt}for(nn=R(Ge,nn);kn<Xe.length;kn++)pi=sr(nn,Ge,kn,Xe[kn],xt),pi!==null&&(b&&pi.alternate!==null&&nn.delete(pi.key===null?kn:pi.key),ze=X(pi,ze,kn),mn===null?Rt=pi:mn.sibling=pi,mn=pi);return b&&nn.forEach(function(wl){return w(Ge,wl)}),br&&Uc(Ge,kn),Rt}function ki(Ge,ze,Xe,xt){var Rt=_(Xe);if(typeof Rt!="function")throw Error(s(150));if(Xe=Rt.call(Xe),Xe==null)throw Error(s(151));for(var mn=Rt=null,nn=ze,kn=ze=0,pi=null,$n=Xe.next();nn!==null&&!$n.done;kn++,$n=Xe.next()){nn.index>kn?(pi=nn,nn=null):pi=nn.sibling;var wl=Lt(Ge,nn,$n.value,xt);if(wl===null){nn===null&&(nn=pi);break}b&&nn&&wl.alternate===null&&w(Ge,nn),ze=X(wl,ze,kn),mn===null?Rt=wl:mn.sibling=wl,mn=wl,nn=pi}if($n.done)return D(Ge,nn),br&&Uc(Ge,kn),Rt;if(nn===null){for(;!$n.done;kn++,$n=Xe.next())$n=tn(Ge,$n.value,xt),$n!==null&&(ze=X($n,ze,kn),mn===null?Rt=$n:mn.sibling=$n,mn=$n);return br&&Uc(Ge,kn),Rt}for(nn=R(Ge,nn);!$n.done;kn++,$n=Xe.next())$n=sr(nn,Ge,kn,$n.value,xt),$n!==null&&(b&&$n.alternate!==null&&nn.delete($n.key===null?kn:$n.key),ze=X($n,ze,kn),mn===null?Rt=$n:mn.sibling=$n,mn=$n);return b&&nn.forEach(function(dj){return w(Ge,dj)}),br&&Uc(Ge,kn),Rt}function Rs(Ge,ze,Xe,xt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===c&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case u:e:{for(var Rt=Xe.key,mn=ze;mn!==null;){if(mn.key===Rt){if(Rt=Xe.type,Rt===c){if(mn.tag===7){D(Ge,mn.sibling),ze=k(mn,Xe.props.children),ze.return=Ge,Ge=ze;break e}}else if(mn.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===g&&S3(Rt)===mn.type){D(Ge,mn.sibling),ze=k(mn,Xe.props),ze.ref=am(Ge,mn,Xe),ze.return=Ge,Ge=ze;break e}D(Ge,mn);break}else w(Ge,mn);mn=mn.sibling}Xe.type===c?(ze=Wc(Xe.props.children,Ge.mode,xt,Xe.key),ze.return=Ge,Ge=ze):(xt=my(Xe.type,Xe.key,Xe.props,null,Ge.mode,xt),xt.ref=am(Ge,ze,Xe),xt.return=Ge,Ge=xt)}return ge(Ge);case l:e:{for(mn=Xe.key;ze!==null;){if(ze.key===mn)if(ze.tag===4&&ze.stateNode.containerInfo===Xe.containerInfo&&ze.stateNode.implementation===Xe.implementation){D(Ge,ze.sibling),ze=k(ze,Xe.children||[]),ze.return=Ge,Ge=ze;break e}else{D(Ge,ze);break}else w(Ge,ze);ze=ze.sibling}ze=F_(Xe,Ge.mode,xt),ze.return=Ge,Ge=ze}return ge(Ge);case g:return mn=Xe._init,Rs(Ge,ze,mn(Xe._payload),xt)}if(z(Xe))return Pt(Ge,ze,Xe,xt);if(_(Xe))return ki(Ge,ze,Xe,xt);U0(Ge,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,ze!==null&&ze.tag===6?(D(Ge,ze.sibling),ze=k(ze,Xe),ze.return=Ge,Ge=ze):(D(Ge,ze),ze=O_(Xe,Ge.mode,xt),ze.return=Ge,Ge=ze),ge(Ge)):D(Ge,ze)}return Rs}var Sd=_3(!0),E3=_3(!1),sm={},Cs=Xt(sm),om=Xt(sm),_d=Xt(sm);function Go(b){if(b===sm)throw Error(s(174));return b}function QS(b,w){pt(_d,w),pt(om,b),pt(Cs,sm),b=F(w),bt(Cs),pt(Cs,b)}function Ed(){bt(Cs),bt(om),bt(_d)}function M3(b){var w=Go(_d.current),D=Go(Cs.current);w=U(D,b.type,w),D!==w&&(pt(om,b),pt(Cs,w))}function JS(b){om.current===b&&(bt(Cs),bt(om))}var Er=Xt(0);function z0(b){for(var w=b;w!==null;){if(w.tag===13){var D=w.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||Ss(D)||pu(D)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var e_=[];function t_(){for(var b=0;b<e_.length;b++){var w=e_[b];Ee?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}e_.length=0}var k0=o.ReactCurrentDispatcher,Ts=o.ReactCurrentBatchConfig,Md=0,Fr=null,Bi=null,hi=null,$0=!1,um=!1,lm=0,Bq=0;function Ui(){throw Error(s(321))}function n_(b,w){if(w===null)return!1;for(var D=0;D<w.length&&D<b.length;D++)if(!ko(b[D],w[D]))return!1;return!0}function r_(b,w,D,R,k,X){if(Md=X,Fr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,k0.current=b===null||b.memoizedState===null?$q:Hq,b=D(R,k),um){X=0;do{if(um=!1,lm=0,25<=X)throw Error(s(301));X+=1,hi=Bi=null,w.updateQueue=null,k0.current=Gq,b=D(R,k)}while(um)}if(k0.current=q0,w=Bi!==null&&Bi.next!==null,Md=0,hi=Bi=Fr=null,$0=!1,w)throw Error(s(300));return b}function i_(){var b=lm!==0;return lm=0,b}function bu(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Fr.memoizedState=hi=b:hi=hi.next=b,hi}function Vo(){if(Bi===null){var b=Fr.alternate;b=b!==null?b.memoizedState:null}else b=Bi.next;var w=hi===null?Fr.memoizedState:hi.next;if(w!==null)hi=w,Bi=b;else{if(b===null)throw Error(s(310));Bi=b,b={memoizedState:Bi.memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},hi===null?Fr.memoizedState=hi=b:hi=hi.next=b}return hi}function zc(b,w){return typeof w=="function"?w(b):w}function H0(b){var w=Vo(),D=w.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=b;var R=Bi,k=R.baseQueue,X=D.pending;if(X!==null){if(k!==null){var ge=k.next;k.next=X.next,X.next=ge}R.baseQueue=k=X,D.pending=null}if(k!==null){X=k.next,R=R.baseState;var Ue=ge=null,Qe=null,ct=X;do{var Mt=ct.lane;if((Md&Mt)===Mt)Qe!==null&&(Qe=Qe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),R=ct.hasEagerState?ct.eagerState:b(R,ct.action);else{var tn={lane:Mt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Qe===null?(Ue=Qe=tn,ge=R):Qe=Qe.next=tn,Fr.lanes|=Mt,Cd|=Mt}ct=ct.next}while(ct!==null&&ct!==X);Qe===null?ge=R:Qe.next=Ue,ko(R,w.memoizedState)||(Za=!0),w.memoizedState=R,w.baseState=ge,w.baseQueue=Qe,D.lastRenderedState=R}if(b=D.interleaved,b!==null){k=b;do X=k.lane,Fr.lanes|=X,Cd|=X,k=k.next;while(k!==b)}else k===null&&(D.lanes=0);return[w.memoizedState,D.dispatch]}function G0(b){var w=Vo(),D=w.queue;if(D===null)throw Error(s(311));D.lastRenderedReducer=b;var R=D.dispatch,k=D.pending,X=w.memoizedState;if(k!==null){D.pending=null;var ge=k=k.next;do X=b(X,ge.action),ge=ge.next;while(ge!==k);ko(X,w.memoizedState)||(Za=!0),w.memoizedState=X,w.baseQueue===null&&(w.baseState=X),D.lastRenderedState=X}return[X,R]}function A3(){}function C3(b,w){var D=Fr,R=Vo(),k=w(),X=!ko(R.memoizedState,k);if(X&&(R.memoizedState=k,Za=!0),R=R.queue,fm(N3.bind(null,D,R,b),[b]),R.getSnapshot!==w||X||hi!==null&&hi.memoizedState.tag&1){if(D.flags|=2048,cm(9,D3.bind(null,D,R,k,w),void 0,null),Yr===null)throw Error(s(349));Md&30||T3(D,w,k)}return k}function T3(b,w,D){b.flags|=16384,b={getSnapshot:w,value:D},w=Fr.updateQueue,w===null?(w={lastEffect:null,stores:null},Fr.updateQueue=w,w.stores=[b]):(D=w.stores,D===null?w.stores=[b]:D.push(b))}function D3(b,w,D,R){w.value=D,w.getSnapshot=R,R3(w)&&Ds(b,1,-1)}function N3(b,w,D){return D(function(){R3(w)&&Ds(b,1,-1)})}function R3(b){var w=b.getSnapshot;b=b.value;try{var D=w();return!ko(b,D)}catch{return!0}}function a_(b){var w=bu();return typeof b=="function"&&(b=b()),w.memoizedState=w.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zc,lastRenderedState:b},w.queue=b,b=b.dispatch=kq.bind(null,Fr,b),[w.memoizedState,b]}function cm(b,w,D,R){return b={tag:b,create:w,destroy:D,deps:R,next:null},w=Fr.updateQueue,w===null?(w={lastEffect:null,stores:null},Fr.updateQueue=w,w.lastEffect=b.next=b):(D=w.lastEffect,D===null?w.lastEffect=b.next=b:(R=D.next,D.next=b,b.next=R,w.lastEffect=b)),b}function P3(){return Vo().memoizedState}function V0(b,w,D,R){var k=bu();Fr.flags|=b,k.memoizedState=cm(1|w,D,void 0,R===void 0?null:R)}function W0(b,w,D,R){var k=Vo();R=R===void 0?null:R;var X=void 0;if(Bi!==null){var ge=Bi.memoizedState;if(X=ge.destroy,R!==null&&n_(R,ge.deps)){k.memoizedState=cm(w,D,X,R);return}}Fr.flags|=b,k.memoizedState=cm(1|w,D,X,R)}function s_(b,w){return V0(8390656,8,b,w)}function fm(b,w){return W0(2048,8,b,w)}function I3(b,w){return W0(4,2,b,w)}function O3(b,w){return W0(4,4,b,w)}function F3(b,w){if(typeof w=="function")return b=b(),w(b),function(){w(null)};if(w!=null)return b=b(),w.current=b,function(){w.current=null}}function L3(b,w,D){return D=D!=null?D.concat([b]):null,W0(4,4,F3.bind(null,w,b),D)}function o_(){}function B3(b,w){var D=Vo();w=w===void 0?null:w;var R=D.memoizedState;return R!==null&&w!==null&&n_(w,R[1])?R[0]:(D.memoizedState=[b,w],b)}function U3(b,w){var D=Vo();w=w===void 0?null:w;var R=D.memoizedState;return R!==null&&w!==null&&n_(w,R[1])?R[0]:(b=b(),D.memoizedState=[b,w],b)}function Uq(b,w){var D=zn;zn=D!==0&&4>D?D:4,b(!0);var R=Ts.transition;Ts.transition={};try{b(!1),w()}finally{zn=D,Ts.transition=R}}function z3(){return Vo().memoizedState}function zq(b,w,D){var R=yl(b);D={lane:R,action:D,hasEagerState:!1,eagerState:null,next:null},k3(b)?$3(w,D):(H3(b,w,D),D=la(),b=Ds(b,R,D),b!==null&&G3(b,w,R))}function kq(b,w,D){var R=yl(b),k={lane:R,action:D,hasEagerState:!1,eagerState:null,next:null};if(k3(b))$3(w,k);else{H3(b,w,k);var X=b.alternate;if(b.lanes===0&&(X===null||X.lanes===0)&&(X=w.lastRenderedReducer,X!==null))try{var ge=w.lastRenderedState,Ue=X(ge,D);if(k.hasEagerState=!0,k.eagerState=Ue,ko(Ue,ge))return}catch{}finally{}D=la(),b=Ds(b,R,D),b!==null&&G3(b,w,R)}}function k3(b){var w=b.alternate;return b===Fr||w!==null&&w===Fr}function $3(b,w){um=$0=!0;var D=b.pending;D===null?w.next=w:(w.next=D.next,D.next=w),b.pending=w}function H3(b,w,D){Yr!==null&&b.mode&1&&!(xn&2)?(b=w.interleaved,b===null?(D.next=D,Ho===null?Ho=[w]:Ho.push(w)):(D.next=b.next,b.next=D),w.interleaved=D):(b=w.pending,b===null?D.next=D:(D.next=b.next,b.next=D),w.pending=D)}function G3(b,w,D){if(D&4194240){var R=w.lanes;R&=b.pendingLanes,D|=R,w.lanes=D,FS(b,D)}}var q0={readContext:Es,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},$q={readContext:Es,useCallback:function(b,w){return bu().memoizedState=[b,w===void 0?null:w],b},useContext:Es,useEffect:s_,useImperativeHandle:function(b,w,D){return D=D!=null?D.concat([b]):null,V0(4194308,4,F3.bind(null,w,b),D)},useLayoutEffect:function(b,w){return V0(4194308,4,b,w)},useInsertionEffect:function(b,w){return V0(4,2,b,w)},useMemo:function(b,w){var D=bu();return w=w===void 0?null:w,b=b(),D.memoizedState=[b,w],b},useReducer:function(b,w,D){var R=bu();return w=D!==void 0?D(w):w,R.memoizedState=R.baseState=w,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:w},R.queue=b,b=b.dispatch=zq.bind(null,Fr,b),[R.memoizedState,b]},useRef:function(b){var w=bu();return b={current:b},w.memoizedState=b},useState:a_,useDebugValue:o_,useDeferredValue:function(b){var w=a_(b),D=w[0],R=w[1];return s_(function(){var k=Ts.transition;Ts.transition={};try{R(b)}finally{Ts.transition=k}},[b]),D},useTransition:function(){var b=a_(!1),w=b[0];return b=Uq.bind(null,b[1]),bu().memoizedState=b,[w,b]},useMutableSource:function(){},useSyncExternalStore:function(b,w,D){var R=Fr,k=bu();if(br){if(D===void 0)throw Error(s(407));D=D()}else{if(D=w(),Yr===null)throw Error(s(349));Md&30||T3(R,w,D)}k.memoizedState=D;var X={value:D,getSnapshot:w};return k.queue=X,s_(N3.bind(null,R,X,b),[b]),R.flags|=2048,cm(9,D3.bind(null,R,X,D,w),void 0,null),D},useId:function(){var b=bu(),w=Yr.identifierPrefix;if(br){var D=xu,R=yu;D=(R&~(1<<32-ur(R)-1)).toString(32)+D,w=":"+w+"R"+D,D=lm++,0<D&&(w+="H"+D.toString(32)),w+=":"}else D=Bq++,w=":"+w+"r"+D.toString(32)+":";return b.memoizedState=w},unstable_isNewReconciler:!1},Hq={readContext:Es,useCallback:B3,useContext:Es,useEffect:fm,useImperativeHandle:L3,useInsertionEffect:I3,useLayoutEffect:O3,useMemo:U3,useReducer:H0,useRef:P3,useState:function(){return H0(zc)},useDebugValue:o_,useDeferredValue:function(b){var w=H0(zc),D=w[0],R=w[1];return fm(function(){var k=Ts.transition;Ts.transition={};try{R(b)}finally{Ts.transition=k}},[b]),D},useTransition:function(){var b=H0(zc)[0],w=Vo().memoizedState;return[b,w]},useMutableSource:A3,useSyncExternalStore:C3,useId:z3,unstable_isNewReconciler:!1},Gq={readContext:Es,useCallback:B3,useContext:Es,useEffect:fm,useImperativeHandle:L3,useInsertionEffect:I3,useLayoutEffect:O3,useMemo:U3,useReducer:G0,useRef:P3,useState:function(){return G0(zc)},useDebugValue:o_,useDeferredValue:function(b){var w=G0(zc),D=w[0],R=w[1];return fm(function(){var k=Ts.transition;Ts.transition={};try{R(b)}finally{Ts.transition=k}},[b]),D},useTransition:function(){var b=G0(zc)[0],w=Vo().memoizedState;return[b,w]},useMutableSource:A3,useSyncExternalStore:C3,useId:z3,unstable_isNewReconciler:!1};function u_(b,w){try{var D="",R=w;do D+=Lq(R),R=R.return;while(R);var k=D}catch(X){k=`
Error generating stack: `+X.message+`
`+X.stack}return{value:b,source:w,stack:k}}function l_(b,w){try{console.error(w.value)}catch(D){setTimeout(function(){throw D})}}var Vq=typeof WeakMap=="function"?WeakMap:Map;function V3(b,w,D){D=gu(-1,D),D.tag=3,D.payload={element:null};var R=w.value;return D.callback=function(){uy||(uy=!0,C_=R),l_(b,w)},D}function W3(b,w,D){D=gu(-1,D),D.tag=3;var R=b.type.getDerivedStateFromError;if(typeof R=="function"){var k=w.value;D.payload=function(){return R(k)},D.callback=function(){l_(b,w)}}var X=b.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(D.callback=function(){l_(b,w),typeof R!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})}),D}function q3(b,w,D){var R=b.pingCache;if(R===null){R=b.pingCache=new Vq;var k=new Set;R.set(w,k)}else k=R.get(w),k===void 0&&(k=new Set,R.set(w,k));k.has(D)||(k.add(D),b=ij.bind(null,b,w,D),w.then(b,b))}function j3(b){do{var w;if((w=b.tag===13)&&(w=b.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return b;b=b.return}while(b!==null);return null}function X3(b,w,D,R,k){return b.mode&1?(b.flags|=65536,b.lanes=k,b):(b===w?b.flags|=65536:(b.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(w=gu(-1,1),w.tag=2,ml(D,w))),D.lanes|=1),b)}function Wo(b){b.flags|=4}function Y3(b,w){if(b!==null&&b.child===w.child)return!0;if(w.flags&16)return!1;for(b=w.child;b!==null;){if(b.flags&12854||b.subtreeFlags&12854)return!1;b=b.sibling}return!0}var dm,hm,j0,X0;if(Oe)dm=function(b,w){for(var D=w.child;D!==null;){if(D.tag===5||D.tag===6)J(b,D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===w)break;for(;D.sibling===null;){if(D.return===null||D.return===w)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},hm=function(){},j0=function(b,w,D,R,k){if(b=b.memoizedProps,b!==R){var X=w.stateNode,ge=Go(Cs.current);D=ae(X,D,b,R,k,ge),(w.updateQueue=D)&&Wo(w)}},X0=function(b,w,D,R){D!==R&&Wo(w)};else if(ne){dm=function(b,w,D,R){for(var k=w.child;k!==null;){if(k.tag===5){var X=k.stateNode;D&&R&&(X=Vn(X,k.type,k.memoizedProps,k)),J(b,X)}else if(k.tag===6)X=k.stateNode,D&&R&&(X=rr(X,k.memoizedProps,k)),J(b,X);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)X=k.child,X!==null&&(X.return=k),dm(b,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===w)break;for(;k.sibling===null;){if(k.return===null||k.return===w)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};var Z3=function(b,w,D,R){for(var k=w.child;k!==null;){if(k.tag===5){var X=k.stateNode;D&&R&&(X=Vn(X,k.type,k.memoizedProps,k)),_t(b,X)}else if(k.tag===6)X=k.stateNode,D&&R&&(X=rr(X,k.memoizedProps,k)),_t(b,X);else if(k.tag!==4){if(k.tag===22&&k.memoizedState!==null)X=k.child,X!==null&&(X.return=k),Z3(b,k,!0,!0);else if(k.child!==null){k.child.return=k,k=k.child;continue}}if(k===w)break;for(;k.sibling===null;){if(k.return===null||k.return===w)return;k=k.return}k.sibling.return=k.return,k=k.sibling}};hm=function(b,w){var D=w.stateNode;if(!Y3(b,w)){b=D.containerInfo;var R=Dt(b);Z3(R,w,!1,!1),D.pendingChildren=R,Wo(w),an(b,R)}},j0=function(b,w,D,R,k){var X=b.stateNode,ge=b.memoizedProps;if((b=Y3(b,w))&&ge===R)w.stateNode=X;else{var Ue=w.stateNode,Qe=Go(Cs.current),ct=null;ge!==R&&(ct=ae(Ue,D,ge,R,k,Qe)),b&&ct===null?w.stateNode=X:(X=lt(X,ct,D,ge,R,w,b,Ue),q(X,D,R,k,Qe)&&Wo(w),w.stateNode=X,b?Wo(w):dm(X,w,!1,!1))}},X0=function(b,w,D,R){D!==R?(b=Go(_d.current),D=Go(Cs.current),w.stateNode=ue(R,b,D,w),Wo(w)):w.stateNode=b.stateNode}}else hm=function(){},j0=function(){},X0=function(){};function pm(b,w){if(!br)switch(b.tailMode){case"hidden":w=b.tail;for(var D=null;w!==null;)w.alternate!==null&&(D=w),w=w.sibling;D===null?b.tail=null:D.sibling=null;break;case"collapsed":D=b.tail;for(var R=null;D!==null;)D.alternate!==null&&(R=D),D=D.sibling;R===null?w||b.tail===null?b.tail=null:b.tail.sibling=null:R.sibling=null}}function zi(b){var w=b.alternate!==null&&b.alternate.child===b.child,D=0,R=0;if(w)for(var k=b.child;k!==null;)D|=k.lanes|k.childLanes,R|=k.subtreeFlags&14680064,R|=k.flags&14680064,k.return=b,k=k.sibling;else for(k=b.child;k!==null;)D|=k.lanes|k.childLanes,R|=k.subtreeFlags,R|=k.flags,k.return=b,k=k.sibling;return b.subtreeFlags|=R,b.childLanes=D,w}function Wq(b,w,D){var R=w.pendingProps;switch(XS(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zi(w),null;case 1:return xr(w.type)&&In(),zi(w),null;case 3:return R=w.stateNode,Ed(),bt(Gt),bt(kt),t_(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(b===null||b.child===null)&&(im(w)?Wo(w):b===null||b.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,io!==null&&(N_(io),io=null))),hm(b,w),zi(w),null;case 5:JS(w),D=Go(_d.current);var k=w.type;if(b!==null&&w.stateNode!=null)j0(b,w,k,R,D),b.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!R){if(w.stateNode===null)throw Error(s(166));return zi(w),null}if(b=Go(Cs.current),im(w)){if(!Le)throw Error(s(175));b=K(w.stateNode,w.type,w.memoizedProps,D,b,w,!rm),w.updateQueue=b,b!==null&&Wo(w)}else{var X=ee(k,R,D,b,w);dm(X,w,!1,!1),w.stateNode=X,q(X,k,R,D,b)&&Wo(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return zi(w),null;case 6:if(b&&w.stateNode!=null)X0(b,w,b.memoizedProps,R);else{if(typeof R!="string"&&w.stateNode===null)throw Error(s(166));if(b=Go(_d.current),D=Go(Cs.current),im(w)){if(!Le)throw Error(s(176));if(b=w.stateNode,R=w.memoizedProps,(D=oe(b,R,w,!rm))&&(k=Xa,k!==null))switch(X=(k.mode&1)!==0,k.tag){case 3:We(k.stateNode.containerInfo,b,R,X);break;case 5:je(k.type,k.memoizedProps,k.stateNode,b,R,X)}D&&Wo(w)}else w.stateNode=ue(R,b,D,w)}return zi(w),null;case 13:if(bt(Er),R=w.memoizedState,br&&Ya!==null&&w.mode&1&&!(w.flags&128)){for(b=Ya;b;)b=Li(b);return wd(),w.flags|=98560,w}if(R!==null&&R.dehydrated!==null){if(R=im(w),b===null){if(!R)throw Error(s(318));if(!Le)throw Error(s(344));if(b=w.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(s(317));Re(b,w)}else wd(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return zi(w),null}return io!==null&&(N_(io),io=null),w.flags&128?(w.lanes=D,w):(R=R!==null,D=!1,b===null?im(w):D=b.memoizedState!==null,R&&!D&&(w.child.flags|=8192,w.mode&1&&(b===null||Er.current&1?ei===0&&(ei=3):P_())),w.updateQueue!==null&&(w.flags|=4),zi(w),null);case 4:return Ed(),hm(b,w),b===null&&Q(w.stateNode.containerInfo),zi(w),null;case 10:return HS(w.type._context),zi(w),null;case 17:return xr(w.type)&&In(),zi(w),null;case 19:if(bt(Er),k=w.memoizedState,k===null)return zi(w),null;if(R=(w.flags&128)!==0,X=k.rendering,X===null)if(R)pm(k,!1);else{if(ei!==0||b!==null&&b.flags&128)for(b=w.child;b!==null;){if(X=z0(b),X!==null){for(w.flags|=128,pm(k,!1),b=X.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),w.subtreeFlags=0,b=D,R=w.child;R!==null;)D=R,k=b,D.flags&=14680066,X=D.alternate,X===null?(D.childLanes=0,D.lanes=k,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=X.childLanes,D.lanes=X.lanes,D.child=X.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=X.memoizedProps,D.memoizedState=X.memoizedState,D.updateQueue=X.updateQueue,D.type=X.type,k=X.dependencies,D.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext}),R=R.sibling;return pt(Er,Er.current&1|2),w.child}b=b.sibling}k.tail!==null&&di()>A_&&(w.flags|=128,R=!0,pm(k,!1),w.lanes=4194304)}else{if(!R)if(b=z0(X),b!==null){if(w.flags|=128,R=!0,b=b.updateQueue,b!==null&&(w.updateQueue=b,w.flags|=4),pm(k,!0),k.tail===null&&k.tailMode==="hidden"&&!X.alternate&&!br)return zi(w),null}else 2*di()-k.renderingStartTime>A_&&D!==1073741824&&(w.flags|=128,R=!0,pm(k,!1),w.lanes=4194304);k.isBackwards?(X.sibling=w.child,w.child=X):(b=k.last,b!==null?b.sibling=X:w.child=X,k.last=X)}return k.tail!==null?(w=k.tail,k.rendering=w,k.tail=w.sibling,k.renderingStartTime=di(),w.sibling=null,b=Er.current,pt(Er,R?b&1|2:b&1),w):(zi(w),null);case 22:case 23:return R_(),R=w.memoizedState!==null,b!==null&&b.memoizedState!==null!==R&&(w.flags|=8192),R&&w.mode&1?Ka&1073741824&&(zi(w),Oe&&w.subtreeFlags&6&&(w.flags|=8192)):zi(w),null;case 24:return null;case 25:return null}throw Error(s(156,w.tag))}var qq=o.ReactCurrentOwner,Za=!1;function ua(b,w,D,R){w.child=b===null?E3(w,null,D,R):Sd(w,b.child,D,R)}function K3(b,w,D,R,k){D=D.render;var X=w.ref;return yd(w,k),R=r_(b,w,D,R,X,k),D=i_(),b!==null&&!Za?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~k,wu(b,w,k)):(br&&D&&jS(w),w.flags|=1,ua(b,w,R,k),w.child)}function Q3(b,w,D,R,k){if(b===null){var X=D.type;return typeof X=="function"&&!I_(X)&&X.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(w.tag=15,w.type=X,J3(b,w,X,R,k)):(b=my(D.type,null,R,w,w.mode,k),b.ref=w.ref,b.return=w,w.child=b)}if(X=b.child,!(b.lanes&k)){var ge=X.memoizedProps;if(D=D.compare,D=D!==null?D:N0,D(ge,R)&&b.ref===w.ref)return wu(b,w,k)}return w.flags|=1,b=bl(X,R),b.ref=w.ref,b.return=w,w.child=b}function J3(b,w,D,R,k){if(b!==null&&N0(b.memoizedProps,R)&&b.ref===w.ref)if(Za=!1,(b.lanes&k)!==0)b.flags&131072&&(Za=!0);else return w.lanes=b.lanes,wu(b,w,k);return c_(b,w,D,R,k)}function eR(b,w,D){var R=w.pendingProps,k=R.children,X=b!==null?b.memoizedState:null;if(R.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},pt(Ad,Ka),Ka|=D;else if(D&1073741824)w.memoizedState={baseLanes:0,cachePool:null},R=X!==null?X.baseLanes:D,pt(Ad,Ka),Ka|=R;else return b=X!==null?X.baseLanes|D:D,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:b,cachePool:null},w.updateQueue=null,pt(Ad,Ka),Ka|=b,null;else X!==null?(R=X.baseLanes|D,w.memoizedState=null):R=D,pt(Ad,Ka),Ka|=R;return ua(b,w,k,D),w.child}function tR(b,w){var D=w.ref;(b===null&&D!==null||b!==null&&b.ref!==D)&&(w.flags|=512,w.flags|=2097152)}function c_(b,w,D,R,k){var X=xr(D)?jn:kt.current;return X=Or(w,X),yd(w,k),D=r_(b,w,D,R,X,k),R=i_(),b!==null&&!Za?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~k,wu(b,w,k)):(br&&R&&jS(w),w.flags|=1,ua(b,w,D,k),w.child)}function nR(b,w,D,R,k){if(xr(D)){var X=!0;sn(w)}else X=!1;if(yd(w,k),w.stateNode===null)b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),v3(w,D,R),qS(w,D,R,k),R=!0;else if(b===null){var ge=w.stateNode,Ue=w.memoizedProps;ge.props=Ue;var Qe=ge.context,ct=D.contextType;typeof ct=="object"&&ct!==null?ct=Es(ct):(ct=xr(D)?jn:kt.current,ct=Or(w,ct));var Mt=D.getDerivedStateFromProps,tn=typeof Mt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";tn||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ue!==R||Qe!==ct)&&g3(w,ge,R,ct),pl=!1;var Lt=w.memoizedState;ge.state=Lt,O0(w,R,ge,k),Qe=w.memoizedState,Ue!==R||Lt!==Qe||Gt.current||pl?(typeof Mt=="function"&&(WS(w,D,Mt,R),Qe=w.memoizedState),(Ue=pl||m3(w,D,Ue,R,Lt,Qe,ct))?(tn||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=R,w.memoizedState=Qe),ge.props=R,ge.state=Qe,ge.context=ct,R=Ue):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),R=!1)}else{ge=w.stateNode,f3(b,w),Ue=w.memoizedProps,ct=w.type===w.elementType?Ue:ro(w.type,Ue),ge.props=ct,tn=w.pendingProps,Lt=ge.context,Qe=D.contextType,typeof Qe=="object"&&Qe!==null?Qe=Es(Qe):(Qe=xr(D)?jn:kt.current,Qe=Or(w,Qe));var sr=D.getDerivedStateFromProps;(Mt=typeof sr=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ue!==tn||Lt!==Qe)&&g3(w,ge,R,Qe),pl=!1,Lt=w.memoizedState,ge.state=Lt,O0(w,R,ge,k);var Pt=w.memoizedState;Ue!==tn||Lt!==Pt||Gt.current||pl?(typeof sr=="function"&&(WS(w,D,sr,R),Pt=w.memoizedState),(ct=pl||m3(w,D,ct,R,Lt,Pt,Qe)||!1)?(Mt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(R,Pt,Qe),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(R,Pt,Qe)),typeof ge.componentDidUpdate=="function"&&(w.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Ue===b.memoizedProps&&Lt===b.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&Lt===b.memoizedState||(w.flags|=1024),w.memoizedProps=R,w.memoizedState=Pt),ge.props=R,ge.state=Pt,ge.context=Qe,R=ct):(typeof ge.componentDidUpdate!="function"||Ue===b.memoizedProps&&Lt===b.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ue===b.memoizedProps&&Lt===b.memoizedState||(w.flags|=1024),R=!1)}return f_(b,w,D,R,X,k)}function f_(b,w,D,R,k,X){tR(b,w);var ge=(w.flags&128)!==0;if(!R&&!ge)return k&&En(w,D,!1),wu(b,w,X);R=w.stateNode,qq.current=w;var Ue=ge&&typeof D.getDerivedStateFromError!="function"?null:R.render();return w.flags|=1,b!==null&&ge?(w.child=Sd(w,b.child,null,X),w.child=Sd(w,null,Ue,X)):ua(b,w,Ue,X),w.memoizedState=R.state,k&&En(w,D,!0),w.child}function rR(b){var w=b.stateNode;w.pendingContext?wn(b,w.pendingContext,w.pendingContext!==w.context):w.context&&wn(b,w.context,!1),QS(b,w.containerInfo)}function iR(b,w,D,R,k){return wd(),KS(k),w.flags|=256,ua(b,w,D,R),w.child}var Y0={dehydrated:null,treeContext:null,retryLane:0};function Z0(b){return{baseLanes:b,cachePool:null}}function aR(b,w,D){var R=w.pendingProps,k=Er.current,X=!1,ge=(w.flags&128)!==0,Ue;if((Ue=ge)||(Ue=b!==null&&b.memoizedState===null?!1:(k&2)!==0),Ue?(X=!0,w.flags&=-129):(b===null||b.memoizedState!==null)&&(k|=1),pt(Er,k&1),b===null)return ZS(w),b=w.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?(w.mode&1?pu(b)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(k=R.children,b=R.fallback,X?(R=w.mode,X=w.child,k={mode:"hidden",children:k},!(R&1)&&X!==null?(X.childLanes=0,X.pendingProps=k):X=vy(k,R,0,null),b=Wc(b,R,D,null),X.return=w,b.return=w,X.sibling=b,w.child=X,w.child.memoizedState=Z0(D),w.memoizedState=Y0,b):d_(w,k));if(k=b.memoizedState,k!==null){if(Ue=k.dehydrated,Ue!==null){if(ge)return w.flags&256?(w.flags&=-257,K0(b,w,D,Error(s(422)))):w.memoizedState!==null?(w.child=b.child,w.flags|=128,null):(X=R.fallback,k=w.mode,R=vy({mode:"visible",children:R.children},k,0,null),X=Wc(X,k,D,null),X.flags|=2,R.return=w,X.return=w,R.sibling=X,w.child=R,w.mode&1&&Sd(w,b.child,null,D),w.child.memoizedState=Z0(D),w.memoizedState=Y0,X);if(!(w.mode&1))w=K0(b,w,D,null);else if(pu(Ue))w=K0(b,w,D,Error(s(419)));else if(R=(D&b.childLanes)!==0,Za||R){if(R=Yr,R!==null){switch(D&-D){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}R=X&(R.suspendedLanes|D)?0:X,R!==0&&R!==k.retryLane&&(k.retryLane=R,Ds(b,R,-1))}P_(),w=K0(b,w,D,Error(s(421)))}else Ss(Ue)?(w.flags|=128,w.child=b.child,w=aj.bind(null,b),Da(Ue,w),w=null):(D=k.treeContext,Le&&(Ya=hl(Ue),Xa=w,br=!0,io=null,rm=!1,D!==null&&(Ms[As++]=yu,Ms[As++]=xu,Ms[As++]=Bc,yu=D.id,xu=D.overflow,Bc=w)),w=d_(w,w.pendingProps.children),w.flags|=4096);return w}return X?(R=oR(b,w,R.children,R.fallback,D),X=w.child,k=b.child.memoizedState,X.memoizedState=k===null?Z0(D):{baseLanes:k.baseLanes|D,cachePool:null},X.childLanes=b.childLanes&~D,w.memoizedState=Y0,R):(D=sR(b,w,R.children,D),w.memoizedState=null,D)}return X?(R=oR(b,w,R.children,R.fallback,D),X=w.child,k=b.child.memoizedState,X.memoizedState=k===null?Z0(D):{baseLanes:k.baseLanes|D,cachePool:null},X.childLanes=b.childLanes&~D,w.memoizedState=Y0,R):(D=sR(b,w,R.children,D),w.memoizedState=null,D)}function d_(b,w){return w=vy({mode:"visible",children:w},b.mode,0,null),w.return=b,b.child=w}function sR(b,w,D,R){var k=b.child;return b=k.sibling,D=bl(k,{mode:"visible",children:D}),!(w.mode&1)&&(D.lanes=R),D.return=w,D.sibling=null,b!==null&&(R=w.deletions,R===null?(w.deletions=[b],w.flags|=16):R.push(b)),w.child=D}function oR(b,w,D,R,k){var X=w.mode;b=b.child;var ge=b.sibling,Ue={mode:"hidden",children:D};return!(X&1)&&w.child!==b?(D=w.child,D.childLanes=0,D.pendingProps=Ue,w.deletions=null):(D=bl(b,Ue),D.subtreeFlags=b.subtreeFlags&14680064),ge!==null?R=bl(ge,R):(R=Wc(R,X,k,null),R.flags|=2),R.return=w,D.return=w,D.sibling=R,w.child=D,R}function K0(b,w,D,R){return R!==null&&KS(R),Sd(w,b.child,null,D),b=d_(w,w.pendingProps.children),b.flags|=2,w.memoizedState=null,b}function uR(b,w,D){b.lanes|=w;var R=b.alternate;R!==null&&(R.lanes|=w),GS(b.return,w,D)}function h_(b,w,D,R,k){var X=b.memoizedState;X===null?b.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:R,tail:D,tailMode:k}:(X.isBackwards=w,X.rendering=null,X.renderingStartTime=0,X.last=R,X.tail=D,X.tailMode=k)}function lR(b,w,D){var R=w.pendingProps,k=R.revealOrder,X=R.tail;if(ua(b,w,R.children,D),R=Er.current,R&2)R=R&1|2,w.flags|=128;else{if(b!==null&&b.flags&128)e:for(b=w.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&uR(b,D,w);else if(b.tag===19)uR(b,D,w);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===w)break e;for(;b.sibling===null;){if(b.return===null||b.return===w)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}R&=1}if(pt(Er,R),!(w.mode&1))w.memoizedState=null;else switch(k){case"forwards":for(D=w.child,k=null;D!==null;)b=D.alternate,b!==null&&z0(b)===null&&(k=D),D=D.sibling;D=k,D===null?(k=w.child,w.child=null):(k=D.sibling,D.sibling=null),h_(w,!1,k,D,X);break;case"backwards":for(D=null,k=w.child,w.child=null;k!==null;){if(b=k.alternate,b!==null&&z0(b)===null){w.child=k;break}b=k.sibling,k.sibling=D,D=k,k=b}h_(w,!0,D,null,X);break;case"together":h_(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function wu(b,w,D){if(b!==null&&(w.dependencies=b.dependencies),Cd|=w.lanes,!(D&w.childLanes))return null;if(b!==null&&w.child!==b.child)throw Error(s(153));if(w.child!==null){for(b=w.child,D=bl(b,b.pendingProps),w.child=D,D.return=w;b.sibling!==null;)b=b.sibling,D=D.sibling=bl(b,b.pendingProps),D.return=w;D.sibling=null}return w.child}function jq(b,w,D){switch(w.tag){case 3:rR(w),wd();break;case 5:M3(w);break;case 1:xr(w.type)&&sn(w);break;case 4:QS(w,w.stateNode.containerInfo);break;case 10:c3(w,w.type._context,w.memoizedProps.value);break;case 13:var R=w.memoizedState;if(R!==null)return R.dehydrated!==null?(pt(Er,Er.current&1),w.flags|=128,null):D&w.child.childLanes?aR(b,w,D):(pt(Er,Er.current&1),b=wu(b,w,D),b!==null?b.sibling:null);pt(Er,Er.current&1);break;case 19:if(R=(D&w.childLanes)!==0,b.flags&128){if(R)return lR(b,w,D);w.flags|=128}var k=w.memoizedState;if(k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),pt(Er,Er.current),R)break;return null;case 22:case 23:return w.lanes=0,eR(b,w,D)}return wu(b,w,D)}function Xq(b,w){switch(XS(w),w.tag){case 1:return xr(w.type)&&In(),b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 3:return Ed(),bt(Gt),bt(kt),t_(),b=w.flags,b&65536&&!(b&128)?(w.flags=b&-65537|128,w):null;case 5:return JS(w),null;case 13:if(bt(Er),b=w.memoizedState,b!==null&&b.dehydrated!==null){if(w.alternate===null)throw Error(s(340));wd()}return b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 19:return bt(Er),null;case 4:return Ed(),null;case 10:return HS(w.type._context),null;case 22:case 23:return R_(),null;case 24:return null;default:return null}}var Q0=!1,kc=!1,Yq=typeof WeakSet=="function"?WeakSet:Set,gt=null;function J0(b,w){var D=b.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(R){Pa(b,w,R)}else D.current=null}function p_(b,w,D){try{D()}catch(R){Pa(b,w,R)}}var cR=!1;function Zq(b,w){for(I(b.containerInfo),gt=w;gt!==null;)if(b=gt,w=b.child,(b.subtreeFlags&1028)!==0&&w!==null)w.return=b,gt=w;else for(;gt!==null;){b=gt;try{var D=b.alternate;if(b.flags&1024)switch(b.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var R=D.memoizedProps,k=D.memoizedState,X=b.stateNode,ge=X.getSnapshotBeforeUpdate(b.elementType===b.type?R:ro(b.type,R),k);X.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:Oe&&Ke(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Ue){Pa(b,b.return,Ue)}if(w=b.sibling,w!==null){w.return=b.return,gt=w;break}gt=b.return}return D=cR,cR=!1,D}function $c(b,w,D){var R=w.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var k=R=R.next;do{if((k.tag&b)===b){var X=k.destroy;k.destroy=void 0,X!==void 0&&p_(w,D,X)}k=k.next}while(k!==R)}}function mm(b,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var D=w=w.next;do{if((D.tag&b)===b){var R=D.create;D.destroy=R()}D=D.next}while(D!==w)}}function m_(b){var w=b.ref;if(w!==null){var D=b.stateNode;switch(b.tag){case 5:b=O(D);break;default:b=D}typeof w=="function"?w(b):w.current=b}}function fR(b,w,D){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount(T0,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(b=w.updateQueue,b!==null&&(b=b.lastEffect,b!==null)){var R=b=b.next;do{var k=R,X=k.destroy;k=k.tag,X!==void 0&&(k&2||k&4)&&p_(w,D,X),R=R.next}while(R!==b)}break;case 1:if(J0(w,D),b=w.stateNode,typeof b.componentWillUnmount=="function")try{b.props=w.memoizedProps,b.state=w.memoizedState,b.componentWillUnmount()}catch(ge){Pa(w,D,ge)}break;case 5:J0(w,D);break;case 4:Oe?gR(b,w,D):ne&&ne&&(w=w.stateNode.containerInfo,D=Dt(w),gn(w,D))}}function dR(b,w,D){for(var R=w;;)if(fR(b,R,D),R.child===null||Oe&&R.tag===4){if(R===w)break;for(;R.sibling===null;){if(R.return===null||R.return===w)return;R=R.return}R.sibling.return=R.return,R=R.sibling}else R.child.return=R,R=R.child}function hR(b){var w=b.alternate;w!==null&&(b.alternate=null,hR(w)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(w=b.stateNode,w!==null&&Me(w)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function pR(b){return b.tag===5||b.tag===3||b.tag===4}function mR(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||pR(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function vR(b){if(Oe){e:{for(var w=b.return;w!==null;){if(pR(w))break e;w=w.return}throw Error(s(160))}var D=w;switch(D.tag){case 5:w=D.stateNode,D.flags&32&&(B(w),D.flags&=-33),D=mR(b),g_(b,D,w);break;case 3:case 4:w=D.stateNode.containerInfo,D=mR(b),v_(b,D,w);break;default:throw Error(s(161))}}}function v_(b,w,D){var R=b.tag;if(R===5||R===6)b=b.stateNode,w?tt(D,b,w):$e(D,b);else if(R!==4&&(b=b.child,b!==null))for(v_(b,w,D),b=b.sibling;b!==null;)v_(b,w,D),b=b.sibling}function g_(b,w,D){var R=b.tag;if(R===5||R===6)b=b.stateNode,w?at(D,b,w):Be(D,b);else if(R!==4&&(b=b.child,b!==null))for(g_(b,w,D),b=b.sibling;b!==null;)g_(b,w,D),b=b.sibling}function gR(b,w,D){for(var R=w,k=!1,X,ge;;){if(!k){k=R.return;e:for(;;){if(k===null)throw Error(s(160));switch(X=k.stateNode,k.tag){case 5:ge=!1;break e;case 3:X=X.containerInfo,ge=!0;break e;case 4:X=X.containerInfo,ge=!0;break e}k=k.return}k=!0}if(R.tag===5||R.tag===6)dR(b,R,D),ge?we(X,R.stateNode):Ze(X,R.stateNode);else if(R.tag===18)ge?Se(X,R.stateNode):De(X,R.stateNode);else if(R.tag===4){if(R.child!==null){X=R.stateNode.containerInfo,ge=!0,R.child.return=R,R=R.child;continue}}else if(fR(b,R,D),R.child!==null){R.child.return=R,R=R.child;continue}if(R===w)break;for(;R.sibling===null;){if(R.return===null||R.return===w)return;R=R.return,R.tag===4&&(k=!1)}R.sibling.return=R.return,R=R.sibling}}function y_(b,w){if(Oe){switch(w.tag){case 0:case 11:case 14:case 15:$c(3,w,w.return),mm(3,w),$c(5,w,w.return);return;case 1:return;case 5:var D=w.stateNode;if(D!=null){var R=w.memoizedProps;b=b!==null?b.memoizedProps:R;var k=w.type,X=w.updateQueue;w.updateQueue=null,X!==null&&Ve(D,X,k,b,R,w)}return;case 6:if(w.stateNode===null)throw Error(s(162));D=w.memoizedProps,Ie(w.stateNode,b!==null?b.memoizedProps:D,D);return;case 3:Le&&b!==null&&b.memoizedState.isDehydrated&&ce(w.stateNode.containerInfo);return;case 12:return;case 13:ey(w);return;case 19:ey(w);return;case 17:return}throw Error(s(163))}switch(w.tag){case 0:case 11:case 14:case 15:$c(3,w,w.return),mm(3,w),$c(5,w,w.return);return;case 12:return;case 13:ey(w);return;case 19:ey(w);return;case 3:Le&&b!==null&&b.memoizedState.isDehydrated&&ce(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,gn(w.containerInfo,w.pendingChildren);break e}throw Error(s(163))}}function ey(b){var w=b.updateQueue;if(w!==null){b.updateQueue=null;var D=b.stateNode;D===null&&(D=b.stateNode=new Yq),w.forEach(function(R){var k=sj.bind(null,b,R);D.has(R)||(D.add(R),R.then(k,k))})}}function Kq(b,w){for(gt=w;gt!==null;){w=gt;var D=w.deletions;if(D!==null)for(var R=0;R<D.length;R++){var k=D[R];try{var X=b;Oe?gR(X,k,w):dR(X,k,w);var ge=k.alternate;ge!==null&&(ge.return=null),k.return=null}catch(Rt){Pa(k,w,Rt)}}if(D=w.child,w.subtreeFlags&12854&&D!==null)D.return=w,gt=D;else for(;gt!==null;){w=gt;try{var Ue=w.flags;if(Ue&32&&Oe&&B(w.stateNode),Ue&512){var Qe=w.alternate;if(Qe!==null){var ct=Qe.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Ue&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Mt=w.alternate;(Mt===null||Mt.memoizedState===null)&&(M_=di())}break;case 22:var tn=w.memoizedState!==null,Lt=w.alternate,sr=Lt!==null&&Lt.memoizedState!==null;if(D=w,Oe){e:if(R=D,k=tn,X=null,Oe)for(var Pt=R;;){if(Pt.tag===5){if(X===null){X=Pt;var ki=Pt.stateNode;k?se(ki):me(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(X===null){var Rs=Pt.stateNode;k?Te(Rs):ve(Rs,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===R)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===R)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===R)break e;X===Pt&&(X=null),Pt=Pt.return}X===Pt&&(X=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(tn&&!sr&&D.mode&1){gt=D;for(var Ge=D.child;Ge!==null;){for(D=gt=Ge;gt!==null;){R=gt;var ze=R.child;switch(R.tag){case 0:case 11:case 14:case 15:$c(4,R,R.return);break;case 1:J0(R,R.return);var Xe=R.stateNode;if(typeof Xe.componentWillUnmount=="function"){var xt=R.return;try{Xe.props=R.memoizedProps,Xe.state=R.memoizedState,Xe.componentWillUnmount()}catch(Rt){Pa(R,xt,Rt)}}break;case 5:J0(R,R.return);break;case 22:if(R.memoizedState!==null){bR(D);continue}}ze!==null?(ze.return=R,gt=ze):bR(D)}Ge=Ge.sibling}}}switch(Ue&4102){case 2:vR(w),w.flags&=-3;break;case 6:vR(w),w.flags&=-3,y_(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,y_(w.alternate,w);break;case 4:y_(w.alternate,w)}}catch(Rt){Pa(w,w.return,Rt)}if(D=w.sibling,D!==null){D.return=w.return,gt=D;break}gt=w.return}}}function Qq(b,w,D){gt=b,yR(b)}function yR(b,w,D){for(var R=(b.mode&1)!==0;gt!==null;){var k=gt,X=k.child;if(k.tag===22&&R){var ge=k.memoizedState!==null||Q0;if(!ge){var Ue=k.alternate,Qe=Ue!==null&&Ue.memoizedState!==null||kc;Ue=Q0;var ct=kc;if(Q0=ge,(kc=Qe)&&!ct)for(gt=k;gt!==null;)ge=gt,Qe=ge.child,ge.tag===22&&ge.memoizedState!==null?wR(k):Qe!==null?(Qe.return=ge,gt=Qe):wR(k);for(;X!==null;)gt=X,yR(X),X=X.sibling;gt=k,Q0=Ue,kc=ct}xR(b)}else k.subtreeFlags&8772&&X!==null?(X.return=k,gt=X):xR(b)}}function xR(b){for(;gt!==null;){var w=gt;if(w.flags&8772){var D=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:kc||mm(5,w);break;case 1:var R=w.stateNode;if(w.flags&4&&!kc)if(D===null)R.componentDidMount();else{var k=w.elementType===w.type?D.memoizedProps:ro(w.type,D.memoizedProps);R.componentDidUpdate(k,D.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var X=w.updateQueue;X!==null&&h3(w,X,R);break;case 3:var ge=w.updateQueue;if(ge!==null){if(D=null,w.child!==null)switch(w.child.tag){case 5:D=O(w.child.stateNode);break;case 1:D=w.child.stateNode}h3(w,ge,D)}break;case 5:var Ue=w.stateNode;D===null&&w.flags&4&&Ye(Ue,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Le&&w.memoizedState===null){var Qe=w.alternate;if(Qe!==null){var ct=Qe.memoizedState;if(ct!==null){var Mt=ct.dehydrated;Mt!==null&&he(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}kc||w.flags&512&&m_(w)}catch(tn){Pa(w,w.return,tn)}}if(w===b){gt=null;break}if(D=w.sibling,D!==null){D.return=w.return,gt=D;break}gt=w.return}}function bR(b){for(;gt!==null;){var w=gt;if(w===b){gt=null;break}var D=w.sibling;if(D!==null){D.return=w.return,gt=D;break}gt=w.return}}function wR(b){for(;gt!==null;){var w=gt;try{switch(w.tag){case 0:case 11:case 15:var D=w.return;try{mm(4,w)}catch(Qe){Pa(w,D,Qe)}break;case 1:var R=w.stateNode;if(typeof R.componentDidMount=="function"){var k=w.return;try{R.componentDidMount()}catch(Qe){Pa(w,k,Qe)}}var X=w.return;try{m_(w)}catch(Qe){Pa(w,X,Qe)}break;case 5:var ge=w.return;try{m_(w)}catch(Qe){Pa(w,ge,Qe)}}}catch(Qe){Pa(w,w.return,Qe)}if(w===b){gt=null;break}var Ue=w.sibling;if(Ue!==null){Ue.return=w.return,gt=Ue;break}gt=w.return}}var ty=0,ny=1,ry=2,iy=3,ay=4;if(typeof Symbol=="function"&&Symbol.for){var vm=Symbol.for;ty=vm("selector.component"),ny=vm("selector.has_pseudo_class"),ry=vm("selector.role"),iy=vm("selector.test_id"),ay=vm("selector.text")}function x_(b){var w=Fe(b);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(s(364));return w}if(b=le(b),b===null)throw Error(s(362));return b.stateNode.current}function b_(b,w){switch(w.$$typeof){case ty:if(b.type===w.value)return!0;break;case ny:e:{w=w.value,b=[b,0];for(var D=0;D<b.length;){var R=b[D++],k=b[D++],X=w[k];if(R.tag!==5||!Y(R)){for(;X!=null&&b_(R,X);)k++,X=w[k];if(k===w.length){w=!0;break e}else for(R=R.child;R!==null;)b.push(R,k),R=R.sibling}}w=!1}return w;case ry:if(b.tag===5&&de(b.stateNode,w.value))return!0;break;case ay:if((b.tag===5||b.tag===6)&&(b=W(b),b!==null&&0<=b.indexOf(w.value)))return!0;break;case iy:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function w_(b){switch(b.$$typeof){case ty:return"<"+(A(b.value)||"Unknown")+">";case ny:return":has("+(w_(b)||"")+")";case ry:return'[role="'+b.value+'"]';case ay:return'"'+b.value+'"';case iy:return'[data-testname="'+b.value+'"]';default:throw Error(s(365))}}function SR(b,w){var D=[];b=[b,0];for(var R=0;R<b.length;){var k=b[R++],X=b[R++],ge=w[X];if(k.tag!==5||!Y(k)){for(;ge!=null&&b_(k,ge);)X++,ge=w[X];if(X===w.length)D.push(k);else for(k=k.child;k!==null;)b.push(k,X),k=k.sibling}}return D}function S_(b,w){if(!G)throw Error(s(363));b=x_(b),b=SR(b,w),w=[],b=Array.from(b);for(var D=0;D<b.length;){var R=b[D++];if(R.tag===5)Y(R)||w.push(R.stateNode);else for(R=R.child;R!==null;)b.push(R),R=R.sibling}return w}var Jq=Math.ceil,sy=o.ReactCurrentDispatcher,__=o.ReactCurrentOwner,Hr=o.ReactCurrentBatchConfig,xn=0,Yr=null,Zr=null,_i=0,Ka=0,Ad=Xt(0),ei=0,gm=null,Cd=0,oy=0,E_=0,ym=null,Na=null,M_=0,A_=1/0;function Td(){A_=di()+500}var uy=!1,C_=null,vl=null,ly=!1,gl=null,cy=0,xm=0,T_=null,fy=-1,dy=0;function la(){return xn&6?di():fy!==-1?fy:fy=di()}function yl(b){return b.mode&1?xn&2&&_i!==0?_i&-_i:Fq.transition!==null?(dy===0&&(b=M0,M0<<=1,!(M0&4194240)&&(M0=64),dy=b),dy):(b=zn,b!==0?b:te()):1}function Ds(b,w,D){if(50<xm)throw xm=0,T_=null,Error(s(185));var R=hy(b,w);return R===null?null:(nm(R,w,D),(!(xn&2)||R!==Yr)&&(R===Yr&&(!(xn&2)&&(oy|=w),ei===4&&xl(R,_i)),Ra(R,D),w===1&&xn===0&&!(b.mode&1)&&(Td(),D0&&$o())),R)}function hy(b,w){b.lanes|=w;var D=b.alternate;for(D!==null&&(D.lanes|=w),D=b,b=b.return;b!==null;)b.childLanes|=w,D=b.alternate,D!==null&&(D.childLanes|=w),D=b,b=b.return;return D.tag===3?D.stateNode:null}function Ra(b,w){var D=b.callbackNode;Aq(b,w);var R=C0(b,b===Yr?_i:0);if(R===0)D!==null&&u3(D),b.callbackNode=null,b.callbackPriority=0;else if(w=R&-R,b.callbackPriority!==w){if(D!=null&&u3(D),w===1)b.tag===0?Oq(ER.bind(null,b)):l3(ER.bind(null,b)),re?V(function(){xn===0&&$o()}):LS(BS,$o),D=null;else{switch(o3(R)){case 1:D=BS;break;case 4:D=Nq;break;case 16:D=US;break;case 536870912:D=Rq;break;default:D=US}D=IR(D,_R.bind(null,b))}b.callbackPriority=w,b.callbackNode=D}}function _R(b,w){if(fy=-1,dy=0,xn&6)throw Error(s(327));var D=b.callbackNode;if(Vc()&&b.callbackNode!==D)return null;var R=C0(b,b===Yr?_i:0);if(R===0)return null;if(R&30||R&b.expiredLanes||w)w=py(b,R);else{w=R;var k=xn;xn|=2;var X=CR();(Yr!==b||_i!==w)&&(Td(),Hc(b,w));do try{nj();break}catch(Ue){AR(b,Ue)}while(!0);$S(),sy.current=X,xn=k,Zr!==null?w=0:(Yr=null,_i=0,w=ei)}if(w!==0){if(w===2&&(k=IS(b),k!==0&&(R=k,w=D_(b,k))),w===1)throw D=gm,Hc(b,0),xl(b,R),Ra(b,di()),D;if(w===6)xl(b,R);else{if(k=b.current.alternate,!(R&30)&&!ej(k)&&(w=py(b,R),w===2&&(X=IS(b),X!==0&&(R=X,w=D_(b,X))),w===1))throw D=gm,Hc(b,0),xl(b,R),Ra(b,di()),D;switch(b.finishedWork=k,b.finishedLanes=R,w){case 0:case 1:throw Error(s(345));case 2:Gc(b,Na);break;case 3:if(xl(b,R),(R&130023424)===R&&(w=M_+500-di(),10<w)){if(C0(b,0)!==0)break;if(k=b.suspendedLanes,(k&R)!==R){la(),b.pingedLanes|=b.suspendedLanes&k;break}b.timeoutHandle=pe(Gc.bind(null,b,Na),w);break}Gc(b,Na);break;case 4:if(xl(b,R),(R&4194240)===R)break;for(w=b.eventTimes,k=-1;0<R;){var ge=31-ur(R);X=1<<ge,ge=w[ge],ge>k&&(k=ge),R&=~X}if(R=k,R=di()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*Jq(R/1960))-R,10<R){b.timeoutHandle=pe(Gc.bind(null,b,Na),R);break}Gc(b,Na);break;case 5:Gc(b,Na);break;default:throw Error(s(329))}}}return Ra(b,di()),b.callbackNode===D?_R.bind(null,b):null}function D_(b,w){var D=ym;return b.current.memoizedState.isDehydrated&&(Hc(b,w).flags|=256),b=py(b,w),b!==2&&(w=Na,Na=D,w!==null&&N_(w)),b}function N_(b){Na===null?Na=b:Na.push.apply(Na,b)}function ej(b){for(var w=b;;){if(w.flags&16384){var D=w.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var R=0;R<D.length;R++){var k=D[R],X=k.getSnapshot;k=k.value;try{if(!ko(X(),k))return!1}catch{return!1}}}if(D=w.child,w.subtreeFlags&16384&&D!==null)D.return=w,w=D;else{if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function xl(b,w){for(w&=~E_,w&=~oy,b.suspendedLanes|=w,b.pingedLanes&=~w,b=b.expirationTimes;0<w;){var D=31-ur(w),R=1<<D;b[D]=-1,w&=~R}}function ER(b){if(xn&6)throw Error(s(327));Vc();var w=C0(b,0);if(!(w&1))return Ra(b,di()),null;var D=py(b,w);if(b.tag!==0&&D===2){var R=IS(b);R!==0&&(w=R,D=D_(b,R))}if(D===1)throw D=gm,Hc(b,0),xl(b,w),Ra(b,di()),D;if(D===6)throw Error(s(345));return b.finishedWork=b.current.alternate,b.finishedLanes=w,Gc(b,Na),Ra(b,di()),null}function MR(b){gl!==null&&gl.tag===0&&!(xn&6)&&Vc();var w=xn;xn|=1;var D=Hr.transition,R=zn;try{if(Hr.transition=null,zn=1,b)return b()}finally{zn=R,Hr.transition=D,xn=w,!(xn&6)&&$o()}}function R_(){Ka=Ad.current,bt(Ad)}function Hc(b,w){b.finishedWork=null,b.finishedLanes=0;var D=b.timeoutHandle;if(D!==Ce&&(b.timeoutHandle=Ce,Pe(D)),Zr!==null)for(D=Zr.return;D!==null;){var R=D;switch(XS(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&In();break;case 3:Ed(),bt(Gt),bt(kt),t_();break;case 5:JS(R);break;case 4:Ed();break;case 13:bt(Er);break;case 19:bt(Er);break;case 10:HS(R.type._context);break;case 22:case 23:R_()}D=D.return}if(Yr=b,Zr=b=bl(b.current,null),_i=Ka=w,ei=0,gm=null,E_=oy=Cd=0,Na=ym=null,Ho!==null){for(w=0;w<Ho.length;w++)if(D=Ho[w],R=D.interleaved,R!==null){D.interleaved=null;var k=R.next,X=D.pending;if(X!==null){var ge=X.next;X.next=k,R.next=ge}D.pending=R}Ho=null}return b}function AR(b,w){do{var D=Zr;try{if($S(),k0.current=q0,$0){for(var R=Fr.memoizedState;R!==null;){var k=R.queue;k!==null&&(k.pending=null),R=R.next}$0=!1}if(Md=0,hi=Bi=Fr=null,um=!1,lm=0,__.current=null,D===null||D.return===null){ei=1,gm=w,Zr=null;break}e:{var X=b,ge=D.return,Ue=D,Qe=w;if(w=_i,Ue.flags|=32768,Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var ct=Qe,Mt=Ue,tn=Mt.tag;if(!(Mt.mode&1)&&(tn===0||tn===11||tn===15)){var Lt=Mt.alternate;Lt?(Mt.updateQueue=Lt.updateQueue,Mt.memoizedState=Lt.memoizedState,Mt.lanes=Lt.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var sr=j3(ge);if(sr!==null){sr.flags&=-257,X3(sr,ge,Ue,X,w),sr.mode&1&&q3(X,ct,w),w=sr,Qe=ct;var Pt=w.updateQueue;if(Pt===null){var ki=new Set;ki.add(Qe),w.updateQueue=ki}else Pt.add(Qe);break e}else{if(!(w&1)){q3(X,ct,w),P_();break e}Qe=Error(s(426))}}else if(br&&Ue.mode&1){var Rs=j3(ge);if(Rs!==null){!(Rs.flags&65536)&&(Rs.flags|=256),X3(Rs,ge,Ue,X,w),KS(Qe);break e}}X=Qe,ei!==4&&(ei=2),ym===null?ym=[X]:ym.push(X),Qe=u_(Qe,Ue),Ue=ge;do{switch(Ue.tag){case 3:Ue.flags|=65536,w&=-w,Ue.lanes|=w;var Ge=V3(Ue,Qe,w);d3(Ue,Ge);break e;case 1:X=Qe;var ze=Ue.type,Xe=Ue.stateNode;if(!(Ue.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(vl===null||!vl.has(Xe)))){Ue.flags|=65536,w&=-w,Ue.lanes|=w;var xt=W3(Ue,X,w);d3(Ue,xt);break e}}Ue=Ue.return}while(Ue!==null)}DR(D)}catch(Rt){w=Rt,Zr===D&&D!==null&&(Zr=D=D.return);continue}break}while(!0)}function CR(){var b=sy.current;return sy.current=q0,b===null?q0:b}function P_(){(ei===0||ei===3||ei===2)&&(ei=4),Yr===null||!(Cd&268435455)&&!(oy&268435455)||xl(Yr,_i)}function py(b,w){var D=xn;xn|=2;var R=CR();Yr===b&&_i===w||Hc(b,w);do try{tj();break}catch(k){AR(b,k)}while(!0);if($S(),xn=D,sy.current=R,Zr!==null)throw Error(s(261));return Yr=null,_i=0,ei}function tj(){for(;Zr!==null;)TR(Zr)}function nj(){for(;Zr!==null&&!Tq();)TR(Zr)}function TR(b){var w=PR(b.alternate,b,Ka);b.memoizedProps=b.pendingProps,w===null?DR(b):Zr=w,__.current=null}function DR(b){var w=b;do{var D=w.alternate;if(b=w.return,w.flags&32768){if(D=Xq(D,w),D!==null){D.flags&=32767,Zr=D;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{ei=6,Zr=null;return}}else if(D=Wq(D,w,Ka),D!==null){Zr=D;return}if(w=w.sibling,w!==null){Zr=w;return}Zr=w=b}while(w!==null);ei===0&&(ei=5)}function Gc(b,w){var D=zn,R=Hr.transition;try{Hr.transition=null,zn=1,rj(b,w,D)}finally{Hr.transition=R,zn=D}return null}function rj(b,w,D){do Vc();while(gl!==null);if(xn&6)throw Error(s(327));var R=b.finishedWork,k=b.finishedLanes;if(R===null)return null;if(b.finishedWork=null,b.finishedLanes=0,R===b.current)throw Error(s(177));b.callbackNode=null,b.callbackPriority=0;var X=R.lanes|R.childLanes;if(Cq(b,X),b===Yr&&(Zr=Yr=null,_i=0),!(R.subtreeFlags&2064)&&!(R.flags&2064)||ly||(ly=!0,IR(US,function(){return Vc(),null})),X=(R.flags&15990)!==0,R.subtreeFlags&15990||X){X=Hr.transition,Hr.transition=null;var ge=zn;zn=1;var Ue=xn;xn|=4,__.current=null,Zq(b,R),Kq(b,R),j(b.containerInfo),b.current=R,Qq(R),Dq(),xn=Ue,zn=ge,Hr.transition=X}else b.current=R;if(ly&&(ly=!1,gl=b,cy=k),X=b.pendingLanes,X===0&&(vl=null),Pq(R.stateNode),Ra(b,di()),w!==null)for(D=b.onRecoverableError,R=0;R<w.length;R++)D(w[R]);if(uy)throw uy=!1,b=C_,C_=null,b;return cy&1&&b.tag!==0&&Vc(),X=b.pendingLanes,X&1?b===T_?xm++:(xm=0,T_=b):xm=0,$o(),null}function Vc(){if(gl!==null){var b=o3(cy),w=Hr.transition,D=zn;try{if(Hr.transition=null,zn=16>b?16:b,gl===null)var R=!1;else{if(b=gl,gl=null,cy=0,xn&6)throw Error(s(331));var k=xn;for(xn|=4,gt=b.current;gt!==null;){var X=gt,ge=X.child;if(gt.flags&16){var Ue=X.deletions;if(Ue!==null){for(var Qe=0;Qe<Ue.length;Qe++){var ct=Ue[Qe];for(gt=ct;gt!==null;){var Mt=gt;switch(Mt.tag){case 0:case 11:case 15:$c(8,Mt,X)}var tn=Mt.child;if(tn!==null)tn.return=Mt,gt=tn;else for(;gt!==null;){Mt=gt;var Lt=Mt.sibling,sr=Mt.return;if(hR(Mt),Mt===ct){gt=null;break}if(Lt!==null){Lt.return=sr,gt=Lt;break}gt=sr}}}var Pt=X.alternate;if(Pt!==null){var ki=Pt.child;if(ki!==null){Pt.child=null;do{var Rs=ki.sibling;ki.sibling=null,ki=Rs}while(ki!==null)}}gt=X}}if(X.subtreeFlags&2064&&ge!==null)ge.return=X,gt=ge;else e:for(;gt!==null;){if(X=gt,X.flags&2048)switch(X.tag){case 0:case 11:case 15:$c(9,X,X.return)}var Ge=X.sibling;if(Ge!==null){Ge.return=X.return,gt=Ge;break e}gt=X.return}}var ze=b.current;for(gt=ze;gt!==null;){ge=gt;var Xe=ge.child;if(ge.subtreeFlags&2064&&Xe!==null)Xe.return=ge,gt=Xe;else e:for(ge=ze;gt!==null;){if(Ue=gt,Ue.flags&2048)try{switch(Ue.tag){case 0:case 11:case 15:mm(9,Ue)}}catch(Rt){Pa(Ue,Ue.return,Rt)}if(Ue===ge){gt=null;break e}var xt=Ue.sibling;if(xt!==null){xt.return=Ue.return,gt=xt;break e}gt=Ue.return}}if(xn=k,$o(),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot(T0,b)}catch{}R=!0}return R}finally{zn=D,Hr.transition=w}}return!1}function NR(b,w,D){w=u_(D,w),w=V3(b,w,1),ml(b,w),w=la(),b=hy(b,1),b!==null&&(nm(b,1,w),Ra(b,w))}function Pa(b,w,D){if(b.tag===3)NR(b,b,D);else for(;w!==null;){if(w.tag===3){NR(w,b,D);break}else if(w.tag===1){var R=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(vl===null||!vl.has(R))){b=u_(D,b),b=W3(w,b,1),ml(w,b),b=la(),w=hy(w,1),w!==null&&(nm(w,1,b),Ra(w,b));break}}w=w.return}}function ij(b,w,D){var R=b.pingCache;R!==null&&R.delete(w),w=la(),b.pingedLanes|=b.suspendedLanes&D,Yr===b&&(_i&D)===D&&(ei===4||ei===3&&(_i&130023424)===_i&&500>di()-M_?Hc(b,0):E_|=D),Ra(b,w)}function RR(b,w){w===0&&(b.mode&1?(w=A0,A0<<=1,!(A0&130023424)&&(A0=4194304)):w=1);var D=la();b=hy(b,w),b!==null&&(nm(b,w,D),Ra(b,D))}function aj(b){var w=b.memoizedState,D=0;w!==null&&(D=w.retryLane),RR(b,D)}function sj(b,w){var D=0;switch(b.tag){case 13:var R=b.stateNode,k=b.memoizedState;k!==null&&(D=k.retryLane);break;case 19:R=b.stateNode;break;default:throw Error(s(314))}R!==null&&R.delete(w),RR(b,D)}var PR;PR=function(b,w,D){if(b!==null)if(b.memoizedProps!==w.pendingProps||Gt.current)Za=!0;else{if(!(b.lanes&D)&&!(w.flags&128))return Za=!1,jq(b,w,D);Za=!!(b.flags&131072)}else Za=!1,br&&w.flags&1048576&&y3(w,B0,w.index);switch(w.lanes=0,w.tag){case 2:var R=w.type;b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps;var k=Or(w,kt.current);yd(w,D),k=r_(null,w,R,b,k,D);var X=i_();return w.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,xr(R)?(X=!0,sn(w)):X=!1,w.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,VS(w),k.updater=F0,w.stateNode=k,k._reactInternals=w,qS(w,R,b,D),w=f_(null,w,R,!0,X,D)):(w.tag=0,br&&X&&jS(w),ua(null,w,k,D),w=w.child),w;case 16:R=w.elementType;e:{switch(b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),b=w.pendingProps,k=R._init,R=k(R._payload),w.type=R,k=w.tag=uj(R),b=ro(R,b),k){case 0:w=c_(null,w,R,b,D);break e;case 1:w=nR(null,w,R,b,D);break e;case 11:w=K3(null,w,R,b,D);break e;case 14:w=Q3(null,w,R,ro(R.type,b),D);break e}throw Error(s(306,R,""))}return w;case 0:return R=w.type,k=w.pendingProps,k=w.elementType===R?k:ro(R,k),c_(b,w,R,k,D);case 1:return R=w.type,k=w.pendingProps,k=w.elementType===R?k:ro(R,k),nR(b,w,R,k,D);case 3:e:{if(rR(w),b===null)throw Error(s(387));R=w.pendingProps,X=w.memoizedState,k=X.element,f3(b,w),O0(w,R,null,D);var ge=w.memoizedState;if(R=ge.element,Le&&X.isDehydrated)if(X={element:R,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},w.updateQueue.baseState=X,w.memoizedState=X,w.flags&256){k=Error(s(423)),w=iR(b,w,R,D,k);break e}else if(R!==k){k=Error(s(424)),w=iR(b,w,R,D,k);break e}else for(Le&&(Ya=mu(w.stateNode.containerInfo),Xa=w,br=!0,io=null,rm=!1),D=E3(w,null,R,D),w.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(wd(),R===k){w=wu(b,w,D);break e}ua(b,w,R,D)}w=w.child}return w;case 5:return M3(w),b===null&&ZS(w),R=w.type,k=w.pendingProps,X=b!==null?b.memoizedProps:null,ge=k.children,be(R,k)?ge=null:X!==null&&be(R,X)&&(w.flags|=32),tR(b,w),ua(b,w,ge,D),w.child;case 6:return b===null&&ZS(w),null;case 13:return aR(b,w,D);case 4:return QS(w,w.stateNode.containerInfo),R=w.pendingProps,b===null?w.child=Sd(w,null,R,D):ua(b,w,R,D),w.child;case 11:return R=w.type,k=w.pendingProps,k=w.elementType===R?k:ro(R,k),K3(b,w,R,k,D);case 7:return ua(b,w,w.pendingProps,D),w.child;case 8:return ua(b,w,w.pendingProps.children,D),w.child;case 12:return ua(b,w,w.pendingProps.children,D),w.child;case 10:e:{if(R=w.type._context,k=w.pendingProps,X=w.memoizedProps,ge=k.value,c3(w,R,ge),X!==null)if(ko(X.value,ge)){if(X.children===k.children&&!Gt.current){w=wu(b,w,D);break e}}else for(X=w.child,X!==null&&(X.return=w);X!==null;){var Ue=X.dependencies;if(Ue!==null){ge=X.child;for(var Qe=Ue.firstContext;Qe!==null;){if(Qe.context===R){if(X.tag===1){Qe=gu(-1,D&-D),Qe.tag=2;var ct=X.updateQueue;if(ct!==null){ct=ct.shared;var Mt=ct.pending;Mt===null?Qe.next=Qe:(Qe.next=Mt.next,Mt.next=Qe),ct.pending=Qe}}X.lanes|=D,Qe=X.alternate,Qe!==null&&(Qe.lanes|=D),GS(X.return,D,w),Ue.lanes|=D;break}Qe=Qe.next}}else if(X.tag===10)ge=X.type===w.type?null:X.child;else if(X.tag===18){if(ge=X.return,ge===null)throw Error(s(341));ge.lanes|=D,Ue=ge.alternate,Ue!==null&&(Ue.lanes|=D),GS(ge,D,w),ge=X.sibling}else ge=X.child;if(ge!==null)ge.return=X;else for(ge=X;ge!==null;){if(ge===w){ge=null;break}if(X=ge.sibling,X!==null){X.return=ge.return,ge=X;break}ge=ge.return}X=ge}ua(b,w,k.children,D),w=w.child}return w;case 9:return k=w.type,R=w.pendingProps.children,yd(w,D),k=Es(k),R=R(k),w.flags|=1,ua(b,w,R,D),w.child;case 14:return R=w.type,k=ro(R,w.pendingProps),k=ro(R.type,k),Q3(b,w,R,k,D);case 15:return J3(b,w,w.type,w.pendingProps,D);case 17:return R=w.type,k=w.pendingProps,k=w.elementType===R?k:ro(R,k),b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,xr(R)?(b=!0,sn(w)):b=!1,yd(w,D),v3(w,R,k),qS(w,R,k,D),f_(null,w,R,!0,b,D);case 19:return lR(b,w,D);case 22:return eR(b,w,D)}throw Error(s(156,w.tag))};function IR(b,w){return LS(b,w)}function oj(b,w,D,R){this.tag=b,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(b,w,D,R){return new oj(b,w,D,R)}function I_(b){return b=b.prototype,!(!b||!b.isReactComponent)}function uj(b){if(typeof b=="function")return I_(b)?1:0;if(b!=null){if(b=b.$$typeof,b===v)return 11;if(b===x)return 14}return 2}function bl(b,w){var D=b.alternate;return D===null?(D=Ns(b.tag,w,b.key,b.mode),D.elementType=b.elementType,D.type=b.type,D.stateNode=b.stateNode,D.alternate=b,b.alternate=D):(D.pendingProps=w,D.type=b.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=b.flags&14680064,D.childLanes=b.childLanes,D.lanes=b.lanes,D.child=b.child,D.memoizedProps=b.memoizedProps,D.memoizedState=b.memoizedState,D.updateQueue=b.updateQueue,w=b.dependencies,D.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},D.sibling=b.sibling,D.index=b.index,D.ref=b.ref,D}function my(b,w,D,R,k,X){var ge=2;if(R=b,typeof b=="function")I_(b)&&(ge=1);else if(typeof b=="string")ge=5;else e:switch(b){case c:return Wc(D.children,k,X,w);case f:ge=8,k|=8;break;case d:return b=Ns(12,D,w,k|2),b.elementType=d,b.lanes=X,b;case y:return b=Ns(13,D,w,k),b.elementType=y,b.lanes=X,b;case p:return b=Ns(19,D,w,k),b.elementType=p,b.lanes=X,b;case S:return vy(D,k,X,w);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case h:ge=10;break e;case m:ge=9;break e;case v:ge=11;break e;case x:ge=14;break e;case g:ge=16,R=null;break e}throw Error(s(130,b==null?b:typeof b,""))}return w=Ns(ge,D,w,k),w.elementType=b,w.type=R,w.lanes=X,w}function Wc(b,w,D,R){return b=Ns(7,b,R,w),b.lanes=D,b}function vy(b,w,D,R){return b=Ns(22,b,R,w),b.elementType=S,b.lanes=D,b.stateNode={},b}function O_(b,w,D){return b=Ns(6,b,null,w),b.lanes=D,b}function F_(b,w,D){return w=Ns(4,b.children!==null?b.children:[],b.key,w),w.lanes=D,w.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},w}function lj(b,w,D,R,k){this.tag=w,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OS(0),this.expirationTimes=OS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OS(0),this.identifierPrefix=R,this.onRecoverableError=k,Le&&(this.mutableSourceEagerHydrationData=null)}function OR(b,w,D,R,k,X,ge,Ue,Qe){return b=new lj(b,w,D,Ue,Qe),w===1?(w=1,X===!0&&(w|=8)):w=0,X=Ns(3,null,null,w),b.current=X,X.stateNode=b,X.memoizedState={element:R,isDehydrated:D,cache:null,transitions:null},VS(X),b}function FR(b){if(!b)return yn;b=b._reactInternals;e:{if(M(b)!==b||b.tag!==1)throw Error(s(170));var w=b;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(xr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(s(171))}if(b.tag===1){var D=b.type;if(xr(D))return _r(b,D,w)}return w}function LR(b){var w=b._reactInternals;if(w===void 0)throw typeof b.render=="function"?Error(s(188)):(b=Object.keys(b).join(","),Error(s(268,b)));return b=P(w),b===null?null:b.stateNode}function BR(b,w){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var D=b.retryLane;b.retryLane=D!==0&&D<w?D:w}}function L_(b,w){BR(b,w),(b=b.alternate)&&BR(b,w)}function cj(b){return b=P(b),b===null?null:b.stateNode}function fj(){return null}return n.attemptContinuousHydration=function(b){if(b.tag===13){var w=la();Ds(b,134217728,w),L_(b,134217728)}},n.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var w=la(),D=yl(b);Ds(b,D,w),L_(b,D)}},n.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var w=b.stateNode;if(w.current.memoizedState.isDehydrated){var D=tm(w.pendingLanes);D!==0&&(FS(w,D|1),Ra(w,di()),!(xn&6)&&(Td(),$o()))}break;case 13:var R=la();MR(function(){return Ds(b,1,R)}),L_(b,1)}},n.batchedUpdates=function(b,w){var D=xn;xn|=1;try{return b(w)}finally{xn=D,xn===0&&(Td(),D0&&$o())}},n.createComponentSelector=function(b){return{$$typeof:ty,value:b}},n.createContainer=function(b,w,D,R,k,X,ge){return OR(b,w,!1,null,D,R,k,X,ge)},n.createHasPseudoClassSelector=function(b){return{$$typeof:ny,value:b}},n.createHydrationContainer=function(b,w,D,R,k,X,ge,Ue,Qe){return b=OR(D,R,!0,b,k,X,ge,Ue,Qe),b.context=FR(null),D=b.current,R=la(),k=yl(D),X=gu(R,k),X.callback=w??null,ml(D,X),b.current.lanes=k,nm(b,k,R),Ra(b,R),b},n.createPortal=function(b,w,D){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:b,containerInfo:w,implementation:D}},n.createRoleSelector=function(b){return{$$typeof:ry,value:b}},n.createTestNameSelector=function(b){return{$$typeof:iy,value:b}},n.createTextSelector=function(b){return{$$typeof:ay,value:b}},n.deferredUpdates=function(b){var w=zn,D=Hr.transition;try{return Hr.transition=null,zn=16,b()}finally{zn=w,Hr.transition=D}},n.discreteUpdates=function(b,w,D,R,k){var X=zn,ge=Hr.transition;try{return Hr.transition=null,zn=1,b(w,D,R,k)}finally{zn=X,Hr.transition=ge,xn===0&&Td()}},n.findAllNodes=S_,n.findBoundingRects=function(b,w){if(!G)throw Error(s(363));w=S_(b,w),b=[];for(var D=0;D<w.length;D++)b.push(_e(w[D]));for(w=b.length-1;0<w;w--){D=b[w];for(var R=D.x,k=R+D.width,X=D.y,ge=X+D.height,Ue=w-1;0<=Ue;Ue--)if(w!==Ue){var Qe=b[Ue],ct=Qe.x,Mt=ct+Qe.width,tn=Qe.y,Lt=tn+Qe.height;if(R>=ct&&X>=tn&&k<=Mt&&ge<=Lt){b.splice(w,1);break}else if(R!==ct||D.width!==Qe.width||Lt<X||tn>ge){if(!(X!==tn||D.height!==Qe.height||Mt<R||ct>k)){ct>R&&(Qe.width+=ct-R,Qe.x=R),Mt<k&&(Qe.width=k-ct),b.splice(w,1);break}}else{tn>X&&(Qe.height+=tn-X,Qe.y=X),Lt<ge&&(Qe.height=ge-tn),b.splice(w,1);break}}}return b},n.findHostInstance=LR,n.findHostInstanceWithNoPortals=function(b){return b=N(b),b=b!==null?L(b):null,b===null?null:b.stateNode},n.findHostInstanceWithWarning=function(b){return LR(b)},n.flushControlled=function(b){var w=xn;xn|=1;var D=Hr.transition,R=zn;try{Hr.transition=null,zn=1,b()}finally{zn=R,Hr.transition=D,xn=w,xn===0&&(Td(),$o())}},n.flushPassiveEffects=Vc,n.flushSync=MR,n.focusWithin=function(b,w){if(!G)throw Error(s(363));for(b=x_(b),w=SR(b,w),w=Array.from(w),b=0;b<w.length;){var D=w[b++];if(!Y(D)){if(D.tag===5&&xe(D.stateNode))return!0;for(D=D.child;D!==null;)w.push(D),D=D.sibling}}return!1},n.getCurrentUpdatePriority=function(){return zn},n.getFindAllNodesFailureDescription=function(b,w){if(!G)throw Error(s(363));var D=0,R=[];b=[x_(b),0];for(var k=0;k<b.length;){var X=b[k++],ge=b[k++],Ue=w[ge];if((X.tag!==5||!Y(X))&&(b_(X,Ue)&&(R.push(w_(Ue)),ge++,ge>D&&(D=ge)),ge<w.length))for(X=X.child;X!==null;)b.push(X,ge),X=X.sibling}if(D<w.length){for(b=[];D<w.length;D++)b.push(w_(w[D]));return`findAllNodes was able to match part of the selector:
  `+(R.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},n.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return O(b.child.stateNode);default:return b.child.stateNode}},n.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:cj,findFiberByHostInstance:b.findFiberByHostInstance||fj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)b=!0;else{try{T0=w.inject(b),zo=w}catch{}b=!!w.checkDCE}}return b},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(b,w,D,R){if(!G)throw Error(s(363));b=S_(b,w);var k=Ne(b,D,R).disconnect;return{disconnect:function(){k()}}},n.registerMutableSourceForHydration=function(b,w){var D=w._getVersion;D=D(w._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[w,D]:b.mutableSourceEagerHydrationData.push(w,D)},n.runWithPriority=function(b,w){var D=zn;try{return zn=b,w()}finally{zn=D}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(b,w,D,R){var k=w.current,X=la(),ge=yl(k);return D=FR(D),w.context===null?w.context=D:w.pendingContext=D,w=gu(X,ge),w.payload={element:b},R=R===void 0?null:R,R!==null&&(w.callback=R),ml(k,w),b=Ds(k,ge,X),b!==null&&I0(b,k,ge),ge},n};X$.exports=Pre;var Ire=X$.exports;const Ore=Qs(Ire);var Y$={exports:{}},Z$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,I){var j=U.length;U.push(I);e:for(;0<j;){var ee=j-1>>>1,J=U[ee];if(0<i(J,I))U[ee]=I,U[j]=J,j=ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var I=U[0],j=U.pop();if(j!==I){U[0]=j;e:for(var ee=0,J=U.length,q=J>>>1;ee<q;){var ae=2*(ee+1)-1,be=U[ae],ue=ae+1,pe=U[ue];if(0>i(be,j))ue<J&&0>i(pe,be)?(U[ee]=pe,U[ue]=j,ee=ue):(U[ee]=be,U[ae]=j,ee=ae);else if(ue<J&&0>i(pe,j))U[ee]=pe,U[ue]=j,ee=ue;else break e}}return I}function i(U,I){var j=U.sortIndex-I.sortIndex;return j!==0?j:U.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var I=n(l);I!==null;){if(I.callback===null)r(l);else if(I.startTime<=U)r(l),I.sortIndex=I.expirationTime,e(u,I);else break;I=n(l)}}function S(U){if(v=!1,g(U),!m)if(n(u)!==null)m=!0,O(E);else{var I=n(l);I!==null&&F(S,I.startTime-U)}}function E(U,I){m=!1,v&&(v=!1,p(T),T=-1),h=!0;var j=d;try{for(g(I),f=n(u);f!==null&&(!(f.expirationTime>I)||U&&!N());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,d=f.priorityLevel;var J=ee(f.expirationTime<=I);I=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(u)&&r(u),g(I)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var ae=n(l);ae!==null&&F(S,ae.startTime-I),q=!1}return q}finally{f=null,d=j,h=!1}}var _=!1,A=null,T=-1,M=5,C=-1;function N(){return!(t.unstable_now()-C<M)}function P(){if(A!==null){var U=t.unstable_now();C=U;var I=!0;try{I=A(!0,U)}finally{I?H():(_=!1,A=null)}}else _=!1}var H;if(typeof x=="function")H=function(){x(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,z=L.port2;L.port1.onmessage=P,H=function(){z.postMessage(null)}}else H=function(){y(P,0)};function O(U){A=U,_||(_=!0,H())}function F(U,I){T=y(function(){U(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(E))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var j=d;d=I;try{return U()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,I){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var j=d;d=U;try{return I()}finally{d=j}},t.unstable_scheduleCallback=function(U,I,j){var ee=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ee+j:ee):j=ee,U){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=j+J,U={id:c++,callback:I,priorityLevel:U,startTime:j,expirationTime:J,sortIndex:-1},j>ee?(U.sortIndex=j,e(l,U),n(u)===null&&U===n(l)&&(v?(p(T),T=-1):v=!0,F(S,j-ee))):(U.sortIndex=J,e(u,U),m||h||(m=!0,O(E))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var I=d;return function(){var j=d;d=I;try{return U.apply(this,arguments)}finally{d=j}}}})(Z$);Y$.exports=Z$;var MO=Y$.exports;const Fre=t=>typeof t=="object"&&typeof t.then=="function",wf=[];function K$(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function Q$(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const a of wf)if(K$(e,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:e,equal:r.equal,remove:()=>{const a=wf.indexOf(i);a!==-1&&wf.splice(a,1)},promise:(Fre(t)?t:t(...e)).then(a=>{i.response=a,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(a=>i.error=a)};if(wf.push(i),!n)throw i.promise}const Lre=(t,e,n)=>Q$(t,e,!1,n),Bre=(t,e,n)=>void Q$(t,e,!0,n),Ure=t=>{if(t===void 0||t.length===0)wf.splice(0,wf.length);else{const e=wf.find(n=>K$(t,n.keys,n.equal));e&&e.remove()}},wD={},t0=t=>void Object.assign(wD,t);function zre(t,e){function n(c,{args:f=[],attach:d,...h},m){let v=`${c[0].toUpperCase()}${c.slice(1)}`,y;if(c==="primitive"){if(h.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const p=h.object;y=sh(p,{type:c,root:m,attach:d,primitive:!0})}else{const p=wD[v];if(!p)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");y=sh(new p(...f),{type:c,root:m,attach:d,memoizedProps:{args:f}})}return y.__r3f.attach===void 0&&(y instanceof Jt?y.__r3f.attach="geometry":y instanceof li&&(y.__r3f.attach="material")),v!=="inject"&&ZE(y,h),y}function r(c,f){let d=!1;if(f){var h,m;(h=f.__r3f)!=null&&h.attach?YE(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),d=!0),d||(m=c.__r3f)==null||m.objects.push(f),f.__r3f||sh(f,{}),f.__r3f.parent=c,_2(f),oh(f)}}function i(c,f,d){let h=!1;if(f){var m,v;if((m=f.__r3f)!=null&&m.attach)YE(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"});const y=c.children.filter(x=>x!==f),p=y.indexOf(d);c.children=[...y.slice(0,p),f,...y.slice(p)],h=!0}h||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||sh(f,{}),f.__r3f.parent=c,_2(f),oh(f)}}function a(c,f,d=!1){c&&[...c].forEach(h=>s(f,h,d))}function s(c,f,d){if(f){var h,m,v;if(f.__r3f&&(f.__r3f.parent=null),(h=c.__r3f)!=null&&h.objects&&(c.__r3f.objects=c.__r3f.objects.filter(S=>S!==f)),(m=f.__r3f)!=null&&m.attach)NO(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var y;c.remove(f),(y=f.__r3f)!=null&&y.root&&jre(Ex(f),f)}const x=(v=f.__r3f)==null?void 0:v.primitive,g=!x&&(d===void 0?f.dispose!==null:d);if(!x){var p;a((p=f.__r3f)==null?void 0:p.objects,f,g),a(f.children,f,g)}if(delete f.__r3f,g&&f.dispose&&f.type!=="Scene"){const S=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?MO.unstable_scheduleCallback(MO.unstable_IdlePriority,S):S()}oh(c)}}function o(c,f,d,h){var m;const v=(m=c.__r3f)==null?void 0:m.parent;if(!v)return;const y=n(f,d,c.__r3f.root);if(c.children){for(const p of c.children)p.__r3f&&r(y,p);c.children=c.children.filter(p=>!p.__r3f)}c.__r3f.objects.forEach(p=>r(y,p)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||s(v,c),y.parent&&(y.__r3f.autoRemovedBeforeAppend=!0),r(v,y),y.raycast&&y.__r3f.eventCount&&Ex(y).getState().internal.interaction.push(y),[h,h.alternate].forEach(p=>{p!==null&&(p.stateNode=y,p.ref&&(typeof p.ref=="function"?p.ref(y):p.ref.current=y))})}const u=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Ore({createInstance:n,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,f))},removeChildFromContainer:(c,f)=>{f&&s(c.getState().scene,f)},insertInContainerBefore:(c,f,d)=>{if(!f||!d)return;const h=c.getState().scene;h.__r3f&&i(h,f,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,d,h){var m;if(((m=c==null?void 0:c.__r3f)!=null?m:{}).primitive&&h.object&&h.object!==c)return[!0];{const{args:y=[],children:p,...x}=h,{args:g=[],children:S,...E}=d;if(!Array.isArray(y))throw new Error("R3F: the args prop must be an array!");if(y.some((A,T)=>A!==g[T]))return[!0];const _=a9(c,x,E,!0);return _.changes.length?[!1,_]:null}},commitUpdate(c,[f,d],h,m,v,y){f?o(c,h,v,y):ZE(c,d)},commitMount(c,f,d,h){var m;const v=(m=c.__r3f)!=null?m:{};c.raycast&&v.handlers&&v.eventCount&&Ex(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>sh(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:d,parent:h}=(f=c.__r3f)!=null?f:{};d&&h&&NO(h,c,d),c.isObject3D&&(c.visible=!1),oh(c)},unhideInstance(c,f){var d;const{attach:h,parent:m}=(d=c.__r3f)!=null?d:{};h&&m&&YE(m,c,h),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),oh(c)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():Ah.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&pr.fun(performance.now)?performance.now:pr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:pr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:pr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ZE}}var AO,CO;const XE=t=>"colorSpace"in t||"outputColorSpace"in t,J$=()=>{var t;return(t=wD.ColorManagement)!=null?t:null},e9=t=>t&&t.isOrthographicCamera,kre=t=>t&&t.hasOwnProperty("current"),Dp=typeof window<"u"&&((AO=window.document)!=null&&AO.createElement||((CO=window.navigator)==null?void 0:CO.product)==="ReactNative")?$.useLayoutEffect:$.useEffect;function t9(t){const e=$.useRef(t);return Dp(()=>void(e.current=t),[t]),e}function $re({set:t}){return Dp(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class n9 extends $.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}n9.getDerivedStateFromError=()=>({error:!0});const r9="__default",TO=new Map,Hre=t=>t&&!!t.memoized&&!!t.changes;function i9(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const zm=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function Ex(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const pr={obj:t=>t===Object(t)&&!pr.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(pr.str(t)||pr.num(t))return t===e;const a=pr.obj(t);if(a&&r==="reference")return t===e;const s=pr.arr(t);if(s&&n==="reference")return t===e;if((s||a)&&t===e)return!0;let o;for(o in t)if(!(o in e))return!1;if(a&&n==="shallow"&&r==="shallow"){for(o in i?e:t)if(!pr.equ(t[o],e[o],{strict:i,objects:"reference"}))return!1}else for(o in i?e:t)if(t[o]!==e[o])return!1;if(pr.und(o)){if(s&&t.length===0&&e.length===0||a&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function Gre(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function Vre(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function sh(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function S2(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((a,s)=>a[s],t),{target:n,key:i}}else return{target:n,key:e}}const DO=/-\d+$/;function YE(t,e,n){if(pr.str(n)){if(DO.test(n)){const a=n.replace(DO,""),{target:s,key:o}=S2(t,a);Array.isArray(s[o])||(s[o]=[])}const{target:r,key:i}=S2(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function NO(t,e,n){var r,i;if(pr.str(n)){const{target:a,key:s}=S2(t,n),o=e.__r3f.previousAttach;o===void 0?delete a[s]:a[s]=o}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function a9(t,{children:e,key:n,ref:r,...i},{children:a,key:s,ref:o,...u}={},l=!1){var c;const f=(c=t==null?void 0:t.__r3f)!=null?c:{},d=Object.entries(i),h=[];if(l){const v=Object.keys(u);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||d.unshift([v[y],r9+"remove"])}d.forEach(([v,y])=>{var p;if((p=t.__r3f)!=null&&p.primitive&&v==="object"||pr.equ(y,u[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,y,!0,[]]);let x=[];v.includes("-")&&(x=v.split("-")),h.push([v,y,!1,x]);for(const g in i){const S=i[g];g.startsWith(`${v}-`)&&h.push([g,S,!1,g.split("-")])}});const m={...i};return f.memoizedProps&&f.memoizedProps.args&&(m.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(m.attach=f.memoizedProps.attach),{memoized:m,changes:h}}const Wre=typeof process<"u"&&!1;function ZE(t,e){var n,r,i;const a=(n=t.__r3f)!=null?n:{},s=a.root,o=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:u,changes:l}=Hre(e)?e:a9(t,e),c=a.eventCount;t.__r3f&&(t.__r3f.memoizedProps=u);for(let d=0;d<l.length;d++){let[h,m,v,y]=l[d];if(XE(t)){const S="srgb",E="srgb-linear";h==="encoding"?(h="colorSpace",m=m===3001?S:E):h==="outputEncoding"&&(h="outputColorSpace",m=m===3001?S:E)}let p=t,x=p[h];if(y.length&&(x=y.reduce((g,S)=>g[S],t),!(x&&x.set))){const[g,...S]=y.reverse();p=S.reverse().reduce((E,_)=>E[_],t),h=g}if(m===r9+"remove")if(p.constructor){let g=TO.get(p.constructor);g||(g=new p.constructor,TO.set(p.constructor,g)),m=g[h]}else m=0;if(v)m?a.handlers[h]=m:delete a.handlers[h],a.eventCount=Object.keys(a.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Tf)){if(Array.isArray(m))x.fromArray?x.fromArray(m):x.set(...m);else if(x.copy&&m&&m.constructor&&(Wre?x.constructor.name===m.constructor.name:x.constructor===m.constructor))x.copy(m);else if(m!==void 0){const g=x instanceof ft;!g&&x.setScalar?x.setScalar(m):x instanceof Tf&&m instanceof Tf?x.mask=m.mask:x.set(m),!J$()&&!o.linear&&g&&x.convertSRGBToLinear()}}else if(p[h]=m,p[h]instanceof yr&&p[h].format===Zi&&p[h].type===Di){const g=p[h];XE(g)&&XE(o.gl)?g.colorSpace=o.gl.outputColorSpace:g.encoding=o.gl.outputEncoding}oh(t)}if(a.parent&&t.raycast&&c!==a.eventCount){const d=Ex(t).getState().internal,h=d.interaction.indexOf(t);h>-1&&d.interaction.splice(h,1),a.eventCount&&d.interaction.push(t)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(i=t.__r3f)!=null&&i.parent&&_2(t),t}function oh(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function _2(t){t.onUpdate==null||t.onUpdate(t)}function s9(t,e){t.manual||(e9(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function A1(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function qre(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ah.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ah.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ah.ContinuousEventPriority;default:return Ah.DefaultEventPriority}}function o9(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function jre(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{o9(n.capturedMap,e,r,i)})}function Xre(t){function e(u){const{internal:l}=t.getState(),c=u.offsetX-l.initialClick[0],f=u.offsetY-l.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function n(u){return u.filter(l=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=l.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(u,l){const c=t.getState(),f=new Set,d=[],h=l?l(c.internal.interaction):c.internal.interaction;for(let p=0;p<h.length;p++){const x=zm(h[p]);x&&(x.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(u,c);function m(p){const x=zm(p);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var g;x.events.compute==null||x.events.compute(u,x,(g=x.previousRoot)==null?void 0:g.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(p,!0):[]}let v=h.flatMap(m).sort((p,x)=>{const g=zm(p.object),S=zm(x.object);return!g||!S?p.distance-x.distance:S.events.priority-g.events.priority||p.distance-x.distance}).filter(p=>{const x=A1(p);return f.has(x)?!1:(f.add(x),!0)});c.events.filter&&(v=c.events.filter(v,c));for(const p of v){let x=p.object;for(;x;){var y;(y=x.__r3f)!=null&&y.eventCount&&d.push({...p,eventObject:x}),x=x.parent}}if("pointerId"in u&&c.internal.capturedMap.has(u.pointerId))for(let p of c.internal.capturedMap.get(u.pointerId).values())f.has(A1(p.intersection))||d.push(p.intersection);return d}function i(u,l,c,f){const d=t.getState();if(u.length){const h={stopped:!1};for(const m of u){const v=zm(m.object)||d,{raycaster:y,pointer:p,camera:x,internal:g}=v,S=new fe(p.x,p.y,0).unproject(x),E=C=>{var N,P;return(N=(P=g.capturedMap.get(C))==null?void 0:P.has(m.eventObject))!=null?N:!1},_=C=>{const N={intersection:m,target:l.target};g.capturedMap.has(C)?g.capturedMap.get(C).set(m.eventObject,N):g.capturedMap.set(C,new Map([[m.eventObject,N]])),l.target.setPointerCapture(C)},A=C=>{const N=g.capturedMap.get(C);N&&o9(g.capturedMap,m.eventObject,N,C)};let T={};for(let C in l){let N=l[C];typeof N!="function"&&(T[C]=N)}let M={...m,...T,pointer:p,intersections:u,stopped:h.stopped,delta:c,unprojectedPoint:S,ray:y.ray,camera:x,stopPropagation(){const C="pointerId"in l&&g.capturedMap.get(l.pointerId);if((!C||C.has(m.eventObject))&&(M.stopped=h.stopped=!0,g.hovered.size&&Array.from(g.hovered.values()).find(N=>N.eventObject===m.eventObject))){const N=u.slice(0,u.indexOf(m));a([...N,m])}},target:{hasPointerCapture:E,setPointerCapture:_,releasePointerCapture:A},currentTarget:{hasPointerCapture:E,setPointerCapture:_,releasePointerCapture:A},nativeEvent:l};if(f(M),h.stopped===!0)break}}return u}function a(u){const{internal:l}=t.getState();for(const c of l.hovered.values())if(!u.length||!u.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const d=c.eventObject.__r3f,h=d==null?void 0:d.handlers;if(l.hovered.delete(A1(c)),d!=null&&d.eventCount){const m={...c,intersections:u};h.onPointerOut==null||h.onPointerOut(m),h.onPointerLeave==null||h.onPointerLeave(m)}}}function s(u,l){for(let c=0;c<l.length;c++){const f=l[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(u)}}function o(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return l=>{const{internal:c}=t.getState();"pointerId"in l&&c.capturedMap.has(l.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(l.pointerId)&&(c.capturedMap.delete(l.pointerId),a([]))})}}return function(c){const{onPointerMissed:f,internal:d}=t.getState();d.lastEvent.current=c;const h=u==="onPointerMove",m=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",y=r(c,h?n:void 0),p=m?e(c):0;u==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=y.map(g=>g.eventObject)),m&&!y.length&&p<=2&&(s(c,d.interaction),f&&f(c)),h&&a(y);function x(g){const S=g.eventObject,E=S.__r3f,_=E==null?void 0:E.handlers;if(E!=null&&E.eventCount)if(h){if(_.onPointerOver||_.onPointerEnter||_.onPointerOut||_.onPointerLeave){const A=A1(g),T=d.hovered.get(A);T?T.stopped&&g.stopPropagation():(d.hovered.set(A,g),_.onPointerOver==null||_.onPointerOver(g),_.onPointerEnter==null||_.onPointerEnter(g))}_.onPointerMove==null||_.onPointerMove(g)}else{const A=_[u];A?(!m||d.initialHits.includes(S))&&(s(c,d.interaction.filter(T=>!d.initialHits.includes(T))),A(g)):m&&d.initialHits.includes(S)&&s(c,d.interaction.filter(T=>!d.initialHits.includes(T)))}}i(y,c,p,x)}}return{handlePointer:o}}const Yre=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],u9=t=>!!(t!=null&&t.render),SD=$.createContext(null),Zre=(t,e)=>{const n=j$((o,u)=>{const l=new fe,c=new fe,f=new fe;function d(p=u().camera,x=c,g=u().size){const{width:S,height:E,top:_,left:A}=g,T=S/E;x instanceof fe?f.copy(x):f.set(...x);const M=p.getWorldPosition(l).distanceTo(f);if(e9(p))return{width:S/p.zoom,height:E/p.zoom,top:_,left:A,factor:1,distance:M,aspect:T};{const C=p.fov*Math.PI/180,N=2*Math.tan(C/2)*M,P=N*(S/E);return{width:P,height:N,top:_,left:A,factor:S/P,distance:M,aspect:T}}}let h;const m=p=>o(x=>({performance:{...x.performance,current:p}})),v=new qe;return{set:o,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(p=1)=>t(u(),p),advance:(p,x)=>e(p,x,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new gD,pointer:v,mouse:v,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const p=u();h&&clearTimeout(h),p.performance.current!==p.performance.min&&m(p.performance.min),h=setTimeout(()=>m(u().performance.max),p.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:p=>o(x=>({...x,events:{...x.events,...p}})),setSize:(p,x,g,S,E)=>{const _=u().camera,A={width:p,height:x,top:S||0,left:E||0,updateStyle:g};o(T=>({size:A,viewport:{...T.viewport,...d(_,c,A)}}))},setDpr:p=>o(x=>{const g=i9(p);return{viewport:{...x.viewport,dpr:g,initialDpr:x.viewport.initialDpr||g}}}),setFrameloop:(p="always")=>{const x=u().clock;x.stop(),x.elapsedTime=0,p!=="never"&&(x.start(),x.elapsedTime=0),o(()=>({frameloop:p}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:$.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(p,x,g)=>{const S=u().internal;return S.priority=S.priority+(x>0?1:0),S.subscribers.push({ref:p,priority:x,store:g}),S.subscribers=S.subscribers.sort((E,_)=>E.priority-_.priority),()=>{const E=u().internal;E!=null&&E.subscribers&&(E.priority=E.priority-(x>0?1:0),E.subscribers=E.subscribers.filter(_=>_.ref!==p))}}}}}),r=n.getState();let i=r.size,a=r.viewport.dpr,s=r.camera;return n.subscribe(()=>{const{camera:o,size:u,viewport:l,gl:c,set:f}=n.getState();if(u.width!==i.width||u.height!==i.height||l.dpr!==a){var d;i=u,a=l.dpr,s9(o,u),c.setPixelRatio(l.dpr);const h=(d=u.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(u.width,u.height,h)}o!==s&&(s=o,f(h=>({viewport:{...h.viewport,...h.viewport.getCurrentViewport(o)}})))}),n.subscribe(o=>t(o)),n};let C1,Kre=new Set,Qre=new Set,Jre=new Set;function KE(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function km(t,e){switch(t){case"before":return KE(Kre,e);case"after":return KE(Qre,e);case"tail":return KE(Jre,e)}}let QE,JE;function eM(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),QE=e.internal.subscribers,C1=0;C1<QE.length;C1++)JE=QE[C1],JE.ref.current(JE.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function eie(t){let e=!1,n,r,i;function a(u){r=requestAnimationFrame(a),e=!0,n=0,km("before",u);for(const c of t.values()){var l;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((l=i.gl.xr)!=null&&l.isPresenting)&&(n+=eM(u,i))}if(km("after",u),n===0)return km("tail",u),e=!1,cancelAnimationFrame(r)}function s(u,l=1){var c;if(!u)return t.forEach(f=>s(f.store.getState()),l);(c=u.gl.xr)!=null&&c.isPresenting||!u.internal.active||u.frameloop==="never"||(u.internal.frames=Math.min(60,u.internal.frames+l),e||(e=!0,requestAnimationFrame(a)))}function o(u,l=!0,c,f){if(l&&km("before",u),c)eM(u,c,f);else for(const d of t.values())eM(u,d.store.getState());l&&km("after",u)}return{loop:a,invalidate:s,advance:o}}function tie(t){const e=$.useRef(null);return Dp(()=>void(e.current=t.current.__r3f),[t]),e}function _D(){const t=$.useContext(SD);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function qi(t=n=>n,e){return _D()(t,e)}function Ro(t,e=0){const n=_D(),r=n.getState().internal.subscribe,i=t9(t);return Dp(()=>r(i,e,n),[e,r,n]),null}const RO=new WeakMap;function l9(t,e){return function(n,...r){let i=RO.get(n);return i||(i=new n,RO.set(n,i)),t&&t(i),Promise.all(r.map(a=>new Promise((s,o)=>i.load(a,u=>{u.scene&&Object.assign(u,Gre(u.scene)),s(u)},e,u=>o(new Error(`Could not load ${a}: ${u==null?void 0:u.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function ED(t,e,n,r){const i=Array.isArray(e)?e:[e],a=Lre(l9(n,r),[t,...i],{equal:pr.equ});return Array.isArray(e)?a:a[0]}ED.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return Bre(l9(n),[t,...r])};ED.clear=function(t,e){const n=Array.isArray(e)?e:[e];return Ure([t,...n])};const rp=new Map,{invalidate:PO,advance:IO}=eie(rp),{reconciler:vg,applyProps:lf}=zre(rp,qre),Kd={objects:"shallow",strict:!1},nie=(t,e)=>{const n=typeof t=="function"?t(e):t;return u9(n)?n:new QT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function rie(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:a,left:s,updateStyle:o=n}=e;return{width:r,height:i,top:a,left:s,updateStyle:o}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:a,left:s}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:a,left:s,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function iie(t){const e=rp.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,a=r||Zre(PO,IO),s=n||vg.createContainer(a,Ah.ConcurrentRoot,null,!1,null,"",i,null);e||rp.set(t,{fiber:s,store:a});let o,u=!1,l;return{configure(c={}){let{gl:f,size:d,scene:h,events:m,onCreated:v,shadows:y=!1,linear:p=!1,flat:x=!1,legacy:g=!1,orthographic:S=!1,frameloop:E="always",dpr:_=[1,2],performance:A,raycaster:T,camera:M,onPointerMissed:C}=c,N=a.getState(),P=N.gl;N.gl||N.set({gl:P=nie(f,t)});let H=N.raycaster;H||N.set({raycaster:H=new bD});const{params:L,...z}=T||{};if(pr.equ(z,H,Kd)||lf(H,{...z}),pr.equ(L,H.params,Kd)||lf(H,{params:{...H.params,...L}}),!N.camera||N.camera===l&&!pr.equ(l,M,Kd)){l=M;const j=M instanceof Mp,ee=j?M:S?new ku(0,0,0,0,.1,1e3):new Tr(75,0,.1,1e3);j||(ee.position.z=5,M&&lf(ee,M),!N.camera&&!(M!=null&&M.rotation)&&ee.lookAt(0,0,0)),N.set({camera:ee}),H.camera=ee}if(!N.scene){let j;h instanceof zf?j=h:(j=new zf,h&&lf(j,h)),N.set({scene:sh(j)})}if(!N.xr){var O;const j=(q,ae)=>{const be=a.getState();be.frameloop!=="never"&&IO(q,!0,be,ae)},ee=()=>{const q=a.getState();q.gl.xr.enabled=q.gl.xr.isPresenting,q.gl.xr.setAnimationLoop(q.gl.xr.isPresenting?j:null),q.gl.xr.isPresenting||PO(q)},J={connect(){const q=a.getState().gl;q.xr.addEventListener("sessionstart",ee),q.xr.addEventListener("sessionend",ee)},disconnect(){const q=a.getState().gl;q.xr.removeEventListener("sessionstart",ee),q.xr.removeEventListener("sessionend",ee)}};typeof((O=P.xr)==null?void 0:O.addEventListener)=="function"&&J.connect(),N.set({xr:J})}if(P.shadowMap){const j=P.shadowMap.enabled,ee=P.shadowMap.type;if(P.shadowMap.enabled=!!y,pr.boo(y))P.shadowMap.type=vv;else if(pr.str(y)){var F;const J={basic:H8,percentage:vw,soft:vv,variance:fo};P.shadowMap.type=(F=J[y])!=null?F:vv}else pr.obj(y)&&Object.assign(P.shadowMap,y);(j!==P.shadowMap.enabled||ee!==P.shadowMap.type)&&(P.shadowMap.needsUpdate=!0)}const U=J$();U&&("enabled"in U?U.enabled=!g:"legacyMode"in U&&(U.legacyMode=g)),u||lf(P,{outputEncoding:p?3e3:3001,toneMapping:x?Eo:DT}),N.legacy!==g&&N.set(()=>({legacy:g})),N.linear!==p&&N.set(()=>({linear:p})),N.flat!==x&&N.set(()=>({flat:x})),f&&!pr.fun(f)&&!u9(f)&&!pr.equ(f,P,Kd)&&lf(P,f),m&&!N.events.handlers&&N.set({events:m(a)});const I=rie(t,d);return pr.equ(I,N.size,Kd)||N.setSize(I.width,I.height,I.updateStyle,I.top,I.left),_&&N.viewport.dpr!==i9(_)&&N.setDpr(_),N.frameloop!==E&&N.setFrameloop(E),N.onPointerMissed||N.set({onPointerMissed:C}),A&&!pr.equ(A,N.performance,Kd)&&N.set(j=>({performance:{...j.performance,...A}})),o=v,u=!0,this},render(c){return u||this.configure(),vg.updateContainer($.createElement(aie,{store:a,children:c,onCreated:o,rootElement:t}),s,null,()=>{}),a},unmount(){c9(t)}}}function aie({store:t,children:e,onCreated:n,rootElement:r}){return Dp(()=>{const i=t.getState();i.set(a=>({internal:{...a.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),$.createElement(SD.Provider,{value:t},e)}function c9(t,e){const n=rp.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),vg.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var a,s,o,u;i.events.disconnect==null||i.events.disconnect(),(a=i.gl)==null||(s=a.renderLists)==null||s.dispose==null||s.dispose(),(o=i.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),Vre(i),rp.delete(t),e&&e(t)}catch{}},500)})}}function f9(t,e,n){return $.createElement(sie,{key:e.uuid,children:t,container:e,state:n})}function sie({state:t={},children:e,container:n}){const{events:r,size:i,...a}=t,s=_D(),[o]=$.useState(()=>new bD),[u]=$.useState(()=>new qe),l=$.useCallback((f,d)=>{const h={...f};Object.keys(f).forEach(v=>{(Yre.includes(v)||f[v]!==d[v]&&d[v])&&delete h[v]});let m;if(d&&i){const v=d.camera;m=f.viewport.getCurrentViewport(v,new fe,i),v!==f.camera&&s9(v,i)}return{...h,scene:n,raycaster:o,pointer:u,mouse:u,previousRoot:s,events:{...f.events,...d==null?void 0:d.events,...r},size:{...f.size,...i},viewport:{...f.viewport,...m},...a}},[t]),[c]=$.useState(()=>{const f=s.getState();return j$((h,m)=>({...f,scene:n,raycaster:o,pointer:u,mouse:u,previousRoot:s,events:{...f.events,...r},size:{...f.size,...i},...a,set:h,get:m,setEvents:v=>h(y=>({...y,events:{...y.events,...v}}))}))});return $.useEffect(()=>{const f=s.subscribe(d=>c.setState(h=>l(d,h)));return()=>{f(),c.destroy()}},[]),$.useEffect(()=>{c.setState(f=>l(s.getState(),f))},[l]),$.createElement($.Fragment,null,vg.createPortal($.createElement(SD.Provider,{value:c},e),c,null))}vg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:$.version});function E2(t,e,n){var r,i,a,s,o;e==null&&(e=100);function u(){var c=Date.now()-s;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(o=t.apply(a,i),a=i=null))}var l=function(){a=this,i=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(o=t.apply(a,i),a=i=null),o};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(o=t.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}E2.debounce=E2;var oie=E2;const OO=Qs(oie);function uie(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=$.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=$.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),l=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=$.useRef(!1);$.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[d,h,m]=$.useMemo(()=>{const x=()=>{if(!u.current.element)return;const{left:g,top:S,width:E,height:_,bottom:A,right:T,x:M,y:C}=u.current.element.getBoundingClientRect(),N={left:g,top:S,width:E,height:_,bottom:A,right:T,x:M,y:C};u.current.element instanceof HTMLElement&&i&&(N.height=u.current.element.offsetHeight,N.width=u.current.element.offsetWidth),Object.freeze(N),f.current&&!die(u.current.lastBounds,N)&&o(u.current.lastBounds=N)};return[x,c?OO(x,c):x,l?OO(x,l):x]},[o,i,l,c]);function v(){u.current.scrollContainers&&(u.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",m,!0)),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function y(){u.current.element&&(u.current.resizeObserver=new a(m),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach(x=>x.addEventListener("scroll",m,{capture:!0,passive:!0})))}const p=x=>{!x||x===u.current.element||(v(),u.current.element=x,u.current.scrollContainers=d9(x),y())};return cie(m,!!n),lie(h),$.useEffect(()=>{v(),y()},[n,m,h]),$.useEffect(()=>v,[]),[p,s,d]}function lie(t){$.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function cie(t,e){$.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function d9(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(a=>a==="auto"||a==="scroll")&&e.push(t),[...e,...d9(t.parentElement)]}const fie=["x","y","top","bottom","left","right","width","height"],die=(t,e)=>fie.every(n=>t[n]===e[n]);var hie=Object.defineProperty,pie=Object.defineProperties,mie=Object.getOwnPropertyDescriptors,FO=Object.getOwnPropertySymbols,vie=Object.prototype.hasOwnProperty,gie=Object.prototype.propertyIsEnumerable,LO=(t,e,n)=>e in t?hie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BO=(t,e)=>{for(var n in e||(e={}))vie.call(e,n)&&LO(t,n,e[n]);if(FO)for(var n of FO(e))gie.call(e,n)&&LO(t,n,e[n]);return t},yie=(t,e)=>pie(t,mie(e));function h9(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=h9(r,e,n);if(i)return i;r=e?null:r.sibling}}function p9(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const MD=p9($.createContext(null));class m9 extends $.Component{render(){return $.createElement(MD.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:UO,ReactCurrentDispatcher:zO}=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function xie(){const t=$.useContext(MD);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=$.useId();return $.useMemo(()=>{for(const r of[UO==null?void 0:UO.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=h9(r,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}function bie(){var t,e;const n=xie(),[r]=$.useState(()=>new Map);r.clear();let i=n;for(;i;){const a=(t=i.type)==null?void 0:t._context;a&&a!==MD&&!r.has(a)&&r.set(a,(e=zO==null?void 0:zO.current)==null?void 0:e.readContext(p9(a))),i=i.return}return r}function wie(){const t=bie();return $.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>$.createElement(e,null,$.createElement(n.Provider,yie(BO({},r),{value:t.get(n)}))),e=>$.createElement(m9,BO({},e))),[t])}const tM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Sie(t){const{handlePointer:e}=Xre(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(tM).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:a}=t.getState();a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:n}})),Object.entries((r=a.handlers)!=null?r:[]).forEach(([s,o])=>{const[u,l]=tM[s];n.addEventListener(u,o,{passive:l})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([a,s])=>{if(r&&r.connected instanceof HTMLElement){const[o]=tM[a];r.connected.removeEventListener(o,s)}}),n(a=>({events:{...a.events,connected:void 0}}))}}}}const _ie=$.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:a,events:s=Sie,eventSource:o,eventPrefix:u,shadows:l,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:y,raycaster:p,camera:x,scene:g,onPointerMissed:S,onCreated:E,..._},A){$.useMemo(()=>t0(Cre),[]);const T=wie(),[M,C]=uie({scroll:!0,debounce:{scroll:50,resize:0},...r}),N=$.useRef(null),P=$.useRef(null);$.useImperativeHandle(A,()=>N.current);const H=t9(S),[L,z]=$.useState(!1),[O,F]=$.useState(!1);if(L)throw L;if(O)throw O;const U=$.useRef(null);Dp(()=>{const j=N.current;C.width>0&&C.height>0&&j&&(U.current||(U.current=iie(j)),U.current.configure({gl:a,events:s,shadows:l,linear:c,flat:f,legacy:d,orthographic:h,frameloop:m,dpr:v,performance:y,raycaster:p,camera:x,scene:g,size:C,onPointerMissed:(...ee)=>H.current==null?void 0:H.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(o?kre(o)?o.current:o:P.current),u&&ee.setEvents({compute:(J,q)=>{const ae=J[u+"X"],be=J[u+"Y"];q.pointer.set(ae/q.size.width*2-1,-(be/q.size.height)*2+1),q.raycaster.setFromCamera(q.pointer,q.camera)}}),E==null||E(ee)}}),U.current.render($.createElement(T,null,$.createElement(n9,{set:F},$.createElement($.Suspense,{fallback:$.createElement($re,{set:z})},e)))))}),$.useEffect(()=>{const j=N.current;if(j)return()=>c9(j)},[]);const I=o?"none":"auto";return $.createElement("div",hn({ref:P,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:I,...i}},_),$.createElement("div",{ref:M,style:{width:"100%",height:"100%"}},$.createElement("canvas",{ref:N,style:{display:"block"}},n)))}),Eie=$.forwardRef(function(e,n){return $.createElement(m9,null,$.createElement(_ie,hn({},e,{ref:n})))});function Mie(t){let e;const n=new Set,r=(l,c)=>{const f=typeof l=="function"?l(e):l;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),n.forEach(h=>h(e,d))}},i=()=>e,a=(l,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const v=d;l(d=m,v)}}return n.add(h),()=>n.delete(h)},u={setState:r,getState:i,subscribe:(l,c,f)=>c||f?a(l,c,f):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,i,u),u}const Aie=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),kO=Aie?$.useEffect:$.useLayoutEffect;function v9(t){const e=typeof t=="function"?Mie(t):t,n=(r=e.getState,i=Object.is)=>{const[,a]=$.useReducer(y=>y+1,0),s=e.getState(),o=$.useRef(s),u=$.useRef(r),l=$.useRef(i),c=$.useRef(!1),f=$.useRef();f.current===void 0&&(f.current=r(s));let d,h=!1;(o.current!==s||u.current!==r||l.current!==i||c.current)&&(d=r(s),h=!i(f.current,d)),kO(()=>{h&&(f.current=d),o.current=s,u.current=r,l.current=i,c.current=!1});const m=$.useRef(s);kO(()=>{const y=()=>{try{const x=e.getState(),g=u.current(x);l.current(f.current,g)||(o.current=x,f.current=g,a())}catch{c.current=!0,a()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const v=h?d:f.current;return $.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}let $m=0;const Cie=v9(t=>(Mh.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-$m)/(r-$m)*100})},Mh.onLoad=()=>{t({active:!1})},Mh.onError=e=>t(n=>({errors:[...n.errors,e]})),Mh.onProgress=(e,n,r)=>{n===r&&($m=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-$m)/(r-$m)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),Tie=t=>`Loading ${t.toFixed(2)}%`;function Die({containerStyles:t,innerStyles:e,barStyles:n,dataStyles:r,dataInterpolation:i=Tie,initialState:a=s=>s}){const{active:s,progress:o}=Cie(),u=$.useRef(0),l=$.useRef(0),c=$.useRef(null),[f,d]=$.useState(a(s));$.useEffect(()=>{let m;return s!==f&&(m=setTimeout(()=>d(s),300)),()=>clearTimeout(m)},[f,s]);const h=$.useCallback(()=>{c.current&&(u.current+=(o-u.current)/2,(u.current>.95*o||o===100)&&(u.current=o),c.current.innerText=i(u.current),u.current<o&&(l.current=requestAnimationFrame(h)))},[i,o]);return $.useEffect(()=>(h(),()=>cancelAnimationFrame(l.current)),[h]),f?$.createElement("div",{style:{...T1.container,opacity:s?1:0,...t}},$.createElement("div",null,$.createElement("div",{style:{...T1.inner,...e}},$.createElement("div",{style:{...T1.bar,transform:`scaleX(${o/100})`,...n}}),$.createElement("span",{ref:c,style:{...T1.data,...r}})))):null}const T1={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Nie(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Rie(t,e,n){return Math.max(e,Math.min(t,n))}const Qi={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function $O(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function HO(t,e,n,r=.15){return r===0?Rie(t,e,n):t<e?-$O(e-t,n-e,r)+e:t>n?+$O(t-n,n-e,r)+n:t}function Pie(t,[e,n],[r,i]){const[[a,s],[o,u]]=t;return[HO(e,a,s,r),HO(n,o,u,i)]}function Iie(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oie(t){var e=Iie(t,"string");return typeof e=="symbol"?e:String(e)}function Fa(t,e,n){return e=Oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GO(Object(n),!0).forEach(function(r){Fa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const g9={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function VO(t){return t?t[0].toUpperCase()+t.slice(1):""}const Fie=["enter","leave"];function Lie(t=!1,e){return t&&!Fie.includes(e)}function Bie(t,e="",n=!1){const r=g9[t],i=r&&r[e]||e;return"on"+VO(t)+VO(i)+(Lie(n,i)?"Capture":"")}const Uie=["gotpointercapture","lostpointercapture"];function zie(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=Uie.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function kie(t,e=""){const n=g9[t],r=n&&n[e]||e;return t+r}function Gw(t){return"touches"in t}function y9(t){return Gw(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function $ie(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function Hie(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function x9(t){return Gw(t)?Hie(t)[0]:t}function Gie(t){return $ie(t).map(e=>e.identifier)}function nM(t){const e=x9(t);return Gw(t)?e.identifier:e.pointerId}function WO(t){const e=x9(t);return[e.clientX,e.clientY]}function Vie(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:a})}return e}function ub(t,...e){return typeof t=="function"?t(...e):t}function Wie(){}function qie(...t){return t.length===0?Wie:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function qO(t,e){return Object.assign({},e,t||{})}const jie=32;class Xie{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?ub(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let a=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Vie(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,a=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const _=n._delta.map(Math.abs);Qi.addTo(n._distance,_)}this.axisIntent&&this.axisIntent(e);const[s,o]=n._movement,[u,l]=r.threshold,{_step:c,values:f}=n;if(r.hasCustomTransform?(c[0]===!1&&(c[0]=Math.abs(s)>=u&&f[0]),c[1]===!1&&(c[1]=Math.abs(o)>=l&&f[1])):(c[0]===!1&&(c[0]=Math.abs(s)>=u&&Math.sign(s)*u),c[1]===!1&&(c[1]=Math.abs(o)>=l&&Math.sign(o)*l)),n.intentional=c[0]!==!1||c[1]!==!1,!n.intentional)return;const d=[0,0];if(r.hasCustomTransform){const[_,A]=f;d[0]=c[0]!==!1?_-c[0]:0,d[1]=c[1]!==!1?A-c[1]:0}else d[0]=c[0]!==!1?s-c[0]:0,d[1]=c[1]!==!1?o-c[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(d);const h=n.offset,m=n._active&&!n._blocked||n.active;m&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=ub(r.bounds,n)),this.setup&&this.setup()),n.movement=d,this.computeOffset()));const[v,y]=n.offset,[[p,x],[g,S]]=n._bounds;n.overflow=[v<p?-1:v>x?1:0,y<g?-1:y>S?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const E=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=Pie(n._bounds,n.offset,E),n.delta=Qi.sub(n.offset,h),this.computeMovement(),m&&(!n.last||a>jie)){n.delta=Qi.sub(n.offset,h);const _=n.delta.map(Math.abs);Qi.addTo(n.distance,_),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&a>0&&(n.velocity=[_[0]/a,_[1]/a],n.timeDelta=a)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(Nr(Nr(Nr({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Yie([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class Zie extends Xie{constructor(...e){super(...e),Fa(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Qi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Qi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[y9(e)]:r.axisThreshold;n.axis=Yie(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Kie=t=>t,jO=.15,b9={enabled(t=!0){return t},eventOptions(t,e,n){return Nr(Nr({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[jO,jO];case!1:return[0,0];default:return Qi.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Qi.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||Kie},threshold(t){return Qi.toVector(t,0)}},Qie=0,n0=Nr(Nr({},b9),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=Qie){return t},bounds(t={}){if(typeof t=="function")return a=>n0.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),XO={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Jie extends Zie{constructor(...e){super(...e),Fa(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=n0.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=nM(e),r._pointerActive=!0,this.computeValues(WO(e)),this.computeInitial(),n.preventScrollAxis&&y9(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=nM(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const a=WO(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=Qi.sub(a,n._values),this.computeValues(a)),Qi.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=nM(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,s]=n._distance;if(n.tap=a<=r.tapsThreshold&&s<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[o,u]=n._delta,[l,c]=n._movement,[f,d]=r.swipe.velocity,[h,m]=r.swipe.distance,v=r.swipe.duration;if(n.elapsedTime<v){const y=Math.abs(o/n.timeDelta),p=Math.abs(u/n.timeDelta);y>f&&Math.abs(l)>h&&(n.swipe[0]=Math.sign(o)),p>d&&Math.abs(c)>m&&(n.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,eae(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=XO[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,Qi.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in XO&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function eae(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const r0=typeof window<"u"&&window.document&&window.document.createElement;function w9(){return r0&&"ontouchstart"in window}function tae(){return w9()||r0&&window.navigator.maxTouchPoints>1}function nae(){return r0&&"onpointerdown"in window}function rae(){return r0&&"exitPointerLock"in window.document}function iae(){try{return"constructor"in GestureEvent}catch{return!1}}const Bs={isBrowser:r0,gesture:iae(),touch:w9(),touchscreen:tae(),pointer:nae(),pointerLock:rae()},aae=250,sae=180,oae=.5,uae=50,lae=250,cae=10,YO={mouse:0,touch:0,pen:8},fae=Nr(Nr({},n0),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&Bs.pointerLock,Bs.touch&&n?"touch":this.pointerLock?"mouse":Bs.pointer&&!i?"pointer":Bs.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?aae:void 0,!(!Bs.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const a=Qi.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:t=oae,distance:e=uae,duration:n=lae}={}){return{velocity:this.transform(Qi.toVector(t)),distance:this.transform(Qi.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return sae;case!1:return 0;default:return t}},axisThreshold(t){return t?Nr(Nr({},YO),t):YO},keyboardDisplacement(t=cae){return t}});Nr(Nr({},b9),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Bs.touch&&Bs.gesture)return"gesture";if(Bs.touch&&r)return"touch";if(Bs.touchscreen){if(Bs.pointer)return"pointer";if(Bs.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=s=>{const o=qO(ub(n,s),{min:-1/0,max:1/0});return[o.min,o.max]},a=s=>{const o=qO(ub(r,s),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof r!="function"?[i(),a()]:s=>[i(s),a(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Qi.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});Nr(Nr({},n0),{},{mouseOnly:(t=!0)=>t});Nr(Nr({},n0),{},{mouseOnly:(t=!0)=>t});const S9=new Map,M2=new Map;function dae(t){S9.set(t.key,t.engine),M2.set(t.key,t.resolver)}const hae={key:"drag",engine:Jie,resolver:fae};function pae(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mae(t,e){if(t==null)return{};var n=pae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const vae={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=Bs.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},gae=["target","eventOptions","window","enabled","transform"];function Mx(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=Mx(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function yae(t,e,n={}){const r=t,{target:i,eventOptions:a,window:s,enabled:o,transform:u}=r,l=mae(r,gae);if(n.shared=Mx({target:i,eventOptions:a,window:s,enabled:o,transform:u},vae),e){const c=M2.get(e);n[e]=Mx(Nr({shared:n.shared},l),c)}else for(const c in l){const f=M2.get(c);f&&(n[c]=Mx(Nr({shared:n.shared},l[c]),f))}return n}class _9{constructor(e,n){Fa(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,a){const s=this._listeners,o=kie(n,r),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=Nr(Nr({},u),a);e.addEventListener(o,i,l);const c=()=>{e.removeEventListener(o,i,l),s.delete(c)};return s.add(c),c}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class xae{constructor(){Fa(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}let bae=class{constructor(e){Fa(this,"gestures",new Set),Fa(this,"_targetEventStore",new _9(this)),Fa(this,"gestureEventStores",{}),Fa(this,"gestureTimeoutStores",{}),Fa(this,"handlers",{}),Fa(this,"config",{}),Fa(this,"pointerIds",new Set),Fa(this,"touchIds",new Set),Fa(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),wae(this,e)}setEventIds(e){if(Gw(e))return this.touchIds=new Set(Gie(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=yae(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const s of this.gestures){const o=this.config[s],u=ZO(r,o.eventOptions,!!i);if(o.enabled){const l=S9.get(s);new l(this,e,s).bind(u)}}const a=ZO(r,n.eventOptions,!!i);for(const s in this.nativeHandlers)a(s,"",o=>this.nativeHandlers[s](Nr(Nr({},this.state.shared),{},{event:o,args:e})),void 0,!0)}for(const a in r)r[a]=qie(...r[a]);if(!i)return r;for(const a in r){const{device:s,capture:o,passive:u}=zie(a);this._targetEventStore.add(i,s,"",r[a],{capture:o,passive:u})}}}};function Qd(t,e){t.gestures.add(e),t.gestureEventStores[e]=new _9(t,e),t.gestureTimeoutStores[e]=new xae}function wae(t,e){e.drag&&Qd(t,"drag"),e.wheel&&Qd(t,"wheel"),e.scroll&&Qd(t,"scroll"),e.move&&Qd(t,"move"),e.pinch&&Qd(t,"pinch"),e.hover&&Qd(t,"hover")}const ZO=(t,e,n)=>(r,i,a,s={},o=!1)=>{var u,l;const c=(u=s.capture)!==null&&u!==void 0?u:e.capture,f=(l=s.passive)!==null&&l!==void 0?l:e.passive;let d=o?r:Bie(r,i,c);n&&f&&(d+="Passive"),t[d]=t[d]||[],t[d].push(a)};function Sae(t,e={},n,r){const i=Ae.useMemo(()=>new bae(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),Ae.useEffect(i.effect.bind(i)),Ae.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function _ae(t,e){return dae(hae),Sae({drag:t},e||{},"drag")}const Eae=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(s,o,u)=>{let l=s;if(o){const c=(u==null?void 0:u.equalityFn)||Object.is;let f=s(r.getState());l=d=>{const h=s(d);if(!c(f,h)){const m=f;o(f=h,m)}},u!=null&&u.fireImmediately&&o(f,f)}return i(l)},t(e,n,r)},E9=$.createContext(null);function Mae({map:t,children:e,onChange:n,domElement:r}){const i=t.map(u=>u.name+u.keys).join("-"),a=$.useMemo(()=>v9(Eae(()=>t.reduce((u,l)=>({...u,[l.name]:!1}),{}))),[i]),s=$.useMemo(()=>[a.subscribe,a.getState,a],[i]),o=a.setState;return $.useEffect(()=>{const l=t.map(({name:h,keys:m,up:v})=>({keys:m,up:v,fn:y=>{o({[h]:y}),n&&n(h,y,s[1]())}})).reduce((h,{keys:m,fn:v,up:y=!0})=>(m.forEach(p=>h[p]={fn:v,pressed:!1,up:y}),h),{}),c=({key:h,code:m})=>{const v=l[h]||l[m];if(!v)return;const{fn:y,pressed:p,up:x}=v;v.pressed=!0,(x||!p)&&y(!0)},f=({key:h,code:m})=>{const v=l[h]||l[m];if(!v)return;const{fn:y,up:p}=v;v.pressed=!1,p&&y(!1)},d=r||window;return d.addEventListener("keydown",c,{passive:!0}),d.addEventListener("keyup",f,{passive:!0}),()=>{d.removeEventListener("keydown",c),d.removeEventListener("keyup",f)}},[r,i]),$.createElement(E9.Provider,{value:s,children:e})}function Aae(t){const[e,n,r]=$.useContext(E9);return t?r(t):[e,n]}let Hm;function Cae(){var t;if(Hm!==void 0)return Hm;try{let e;const n=document.createElement("canvas");return Hm=!!(window.WebGL2RenderingContext&&(e=n.getContext("webgl2"))),e&&((t=e.getExtension("WEBGL_lose_context"))==null||t.loseContext()),Hm}catch{return Hm=!1}}var ks=Uint8Array,Wl=Uint16Array,A2=Uint32Array,M9=new ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A9=new ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tae=new ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),C9=function(t,e){for(var n=new Wl(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new A2(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},T9=C9(M9,2),D9=T9[0],Dae=T9[1];D9[28]=258,Dae[258]=28;var Nae=C9(A9,0),Rae=Nae[0],C2=new Wl(32768);for(var vr=0;vr<32768;++vr){var Nl=(vr&43690)>>>1|(vr&21845)<<1;Nl=(Nl&52428)>>>2|(Nl&13107)<<2,Nl=(Nl&61680)>>>4|(Nl&3855)<<4,C2[vr]=((Nl&65280)>>>8|(Nl&255)<<8)>>>1}var Sv=function(t,e,n){for(var r=t.length,i=0,a=new Wl(e);i<r;++i)++a[t[i]-1];var s=new Wl(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(n){o=new Wl(1<<e);var u=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],c=e-t[i],f=s[t[i]-1]++<<c,d=f|(1<<c)-1;f<=d;++f)o[C2[f]>>>u]=l}else for(o=new Wl(r),i=0;i<r;++i)t[i]&&(o[i]=C2[s[t[i]-1]++]>>>15-t[i]);return o},i0=new ks(288);for(var vr=0;vr<144;++vr)i0[vr]=8;for(var vr=144;vr<256;++vr)i0[vr]=9;for(var vr=256;vr<280;++vr)i0[vr]=7;for(var vr=280;vr<288;++vr)i0[vr]=8;var N9=new ks(32);for(var vr=0;vr<32;++vr)N9[vr]=5;var Pae=Sv(i0,9,1),Iae=Sv(N9,5,1),rM=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},lo=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},iM=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Oae=function(t){return(t/8|0)+(t&7&&1)},Fae=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Wl?Wl:t instanceof A2?A2:ks)(n-e);return r.set(t.subarray(e,n)),r},Lae=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new ks(0);var i=!e||n,a=!n||n.i;n||(n={}),e||(e=new ks(r*3));var s=function(ue){var pe=e.length;if(ue>pe){var Pe=new ks(Math.max(pe*2,ue));Pe.set(e),e=Pe}},o=n.f||0,u=n.p||0,l=n.b||0,c=n.l,f=n.d,d=n.m,h=n.n,m=r*8;do{if(!c){n.f=o=lo(t,u,1);var v=lo(t,u+1,3);if(u+=3,v)if(v==1)c=Pae,f=Iae,d=9,h=5;else if(v==2){var g=lo(t,u,31)+257,S=lo(t,u+10,15)+4,E=g+lo(t,u+5,31)+1;u+=14;for(var _=new ks(E),A=new ks(19),T=0;T<S;++T)A[Tae[T]]=lo(t,u+T*3,7);u+=S*3;for(var M=rM(A),C=(1<<M)-1,N=Sv(A,M,1),T=0;T<E;){var P=N[lo(t,u,C)];u+=P&15;var y=P>>>4;if(y<16)_[T++]=y;else{var H=0,L=0;for(y==16?(L=3+lo(t,u,3),u+=2,H=_[T-1]):y==17?(L=3+lo(t,u,7),u+=3):y==18&&(L=11+lo(t,u,127),u+=7);L--;)_[T++]=H}}var z=_.subarray(0,g),O=_.subarray(g);d=rM(z),h=rM(O),c=Sv(z,d,1),f=Sv(O,h,1)}else throw"invalid block type";else{var y=Oae(u)+4,p=t[y-4]|t[y-3]<<8,x=y+p;if(x>r){if(a)throw"unexpected EOF";break}i&&s(l+p),e.set(t.subarray(y,x),l),n.b=l+=p,n.p=u=x*8;continue}if(u>m){if(a)throw"unexpected EOF";break}}i&&s(l+131072);for(var F=(1<<d)-1,U=(1<<h)-1,I=u;;I=u){var H=c[iM(t,u)&F],j=H>>>4;if(u+=H&15,u>m){if(a)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(j<256)e[l++]=j;else if(j==256){I=u,c=null;break}else{var ee=j-254;if(j>264){var T=j-257,J=M9[T];ee=lo(t,u,(1<<J)-1)+D9[T],u+=J}var q=f[iM(t,u)&U],ae=q>>>4;if(!q)throw"invalid distance";u+=q&15;var O=Rae[ae];if(ae>3){var J=A9[ae];O+=iM(t,u)&(1<<J)-1,u+=J}if(u>m){if(a)throw"unexpected EOF";break}i&&s(l+131072);for(var be=l+ee;l<be;l+=4)e[l]=e[l-O],e[l+1]=e[l+1-O],e[l+2]=e[l+2-O],e[l+3]=e[l+3-O];l=be}}n.l=c,n.p=I,n.b=l,c&&(o=1,n.m=d,n.d=f,n.n=h)}while(!o);return l==e.length?e:Fae(e,0,l)},Bae=new ks(0),Uae=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function D1(t,e){return Lae((Uae(t),t.subarray(2,-4)),e)}var zae=typeof TextDecoder<"u"&&new TextDecoder,kae=0;try{zae.decode(Bae,{stream:!0}),kae=1}catch{}const $ae=t=>t&&t.isCubeTexture;class Hae extends qr{constructor(e,n){var r,i;const a=$ae(e),o=((i=a?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,u=Math.floor(Math.log2(o)),l=Math.pow(2,u),c=3*Math.max(l,16*7),f=4*l,d=[a?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/f}`,`#define CUBEUV_MAX_MIP ${u}.0`],h=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,m=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(ol.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},y=new Kg(1,16),p=new Xr({uniforms:v,fragmentShader:m,vertexShader:h,side:ri});super(y,p)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Gae=Object.defineProperty,Vae=(t,e,n)=>e in t?Gae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>(Vae(t,typeof e!="symbol"?e+"":e,n),n);const N1=new Kf,KO=new Ou,Wae=Math.cos(70*(Math.PI/180)),QO=(t,e)=>(t%e+e)%e;let qae=class extends gs{constructor(e,n){super(),Vt(this,"object"),Vt(this,"domElement"),Vt(this,"enabled",!0),Vt(this,"target",new fe),Vt(this,"minDistance",0),Vt(this,"maxDistance",1/0),Vt(this,"minZoom",0),Vt(this,"maxZoom",1/0),Vt(this,"minPolarAngle",0),Vt(this,"maxPolarAngle",Math.PI),Vt(this,"minAzimuthAngle",-1/0),Vt(this,"maxAzimuthAngle",1/0),Vt(this,"enableDamping",!1),Vt(this,"dampingFactor",.05),Vt(this,"enableZoom",!0),Vt(this,"zoomSpeed",1),Vt(this,"enableRotate",!0),Vt(this,"rotateSpeed",1),Vt(this,"enablePan",!0),Vt(this,"panSpeed",1),Vt(this,"screenSpacePanning",!0),Vt(this,"keyPanSpeed",7),Vt(this,"zoomToCursor",!1),Vt(this,"autoRotate",!1),Vt(this,"autoRotateSpeed",2),Vt(this,"reverseOrbit",!1),Vt(this,"reverseHorizontalOrbit",!1),Vt(this,"reverseVerticalOrbit",!1),Vt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Vt(this,"mouseButtons",{LEFT:af.ROTATE,MIDDLE:af.DOLLY,RIGHT:af.PAN}),Vt(this,"touches",{ONE:sf.ROTATE,TWO:sf.DOLLY_PAN}),Vt(this,"target0"),Vt(this,"position0"),Vt(this,"zoom0"),Vt(this,"_domElementKeyEvents",null),Vt(this,"getPolarAngle"),Vt(this,"getAzimuthalAngle"),Vt(this,"setPolarAngle"),Vt(this,"setAzimuthalAngle"),Vt(this,"getDistance"),Vt(this,"listenToKeyEvents"),Vt(this,"stopListenToKeyEvents"),Vt(this,"saveState"),Vt(this,"reset"),Vt(this,"update"),Vt(this,"connect"),Vt(this,"dispose"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=we=>{let B=QO(we,2*Math.PI),se=c.phi;se<0&&(se+=2*Math.PI),B<0&&(B+=2*Math.PI);let Te=Math.abs(B-se);2*Math.PI-Te<Te&&(B<se?B+=2*Math.PI:se+=2*Math.PI),f.phi=B-se,r.update()},this.setAzimuthalAngle=we=>{let B=QO(we,2*Math.PI),se=c.theta;se<0&&(se+=2*Math.PI),B<0&&(B+=2*Math.PI);let Te=Math.abs(B-se);2*Math.PI-Te<Te&&(B<se?B+=2*Math.PI:se+=2*Math.PI),f.theta=B-se,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=we=>{we.addEventListener("keydown",Be),this._domElementKeyEvents=we},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Be),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),u=o.NONE},this.update=(()=>{const we=new fe,B=new fe(0,1,0),se=new Ni().setFromUnitVectors(e.up,B),Te=se.clone().invert(),me=new fe,ve=new Ni,Ke=2*Math.PI;return function(){const Dt=r.object.position;se.setFromUnitVectors(e.up,B),Te.copy(se).invert(),we.copy(Dt).sub(r.target),we.applyQuaternion(se),c.setFromVector3(we),r.autoRotate&&u===o.NONE&&L(P()),r.enableDamping?(c.theta+=f.theta*r.dampingFactor,c.phi+=f.phi*r.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let _t=r.minAzimuthAngle,an=r.maxAzimuthAngle;isFinite(_t)&&isFinite(an)&&(_t<-Math.PI?_t+=Ke:_t>Math.PI&&(_t-=Ke),an<-Math.PI?an+=Ke:an>Math.PI&&(an-=Ke),_t<=an?c.theta=Math.max(_t,Math.min(an,c.theta)):c.theta=c.theta>(_t+an)/2?Math.max(_t,c.theta):Math.min(an,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),r.zoomToCursor&&M||r.object.isOrthographicCamera?c.radius=J(c.radius):c.radius=J(c.radius*d),we.setFromSpherical(c),we.applyQuaternion(Te),Dt.copy(r.target).add(we),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(f.theta*=1-r.dampingFactor,f.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(f.set(0,0,0),h.set(0,0,0));let gn=!1;if(r.zoomToCursor&&M){let Vn=null;if(r.object instanceof Tr&&r.object.isPerspectiveCamera){const rr=we.length();Vn=J(rr*d);const Sn=rr-Vn;r.object.position.addScaledVector(A,Sn),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const rr=new fe(T.x,T.y,0);rr.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),gn=!0;const Sn=new fe(T.x,T.y,0);Sn.unproject(r.object),r.object.position.sub(Sn).add(rr),r.object.updateMatrixWorld(),Vn=we.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Vn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Vn).add(r.object.position):(N1.origin.copy(r.object.position),N1.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(N1.direction))<Wae?e.lookAt(r.target):(KO.setFromNormalAndCoplanarPoint(r.object.up,r.target),N1.intersectPlane(KO,r.target))))}else r.object instanceof ku&&r.object.isOrthographicCamera&&(gn=d!==1,gn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,M=!1,gn||me.distanceToSquared(r.object.position)>l||8*(1-ve.dot(r.object.quaternion))>l?(r.dispatchEvent(i),me.copy(r.object.position),ve.copy(r.object.quaternion),gn=!1,!0):!1}})(),this.connect=we=>{we===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=we,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ye),r.domElement.addEventListener("pointerdown",le),r.domElement.addEventListener("pointercancel",Y),r.domElement.addEventListener("wheel",Ne)},this.dispose=()=>{var we,B,se,Te,me,ve;(we=r.domElement)==null||we.removeEventListener("contextmenu",Ye),(B=r.domElement)==null||B.removeEventListener("pointerdown",le),(se=r.domElement)==null||se.removeEventListener("pointercancel",Y),(Te=r.domElement)==null||Te.removeEventListener("wheel",Ne),(me=r.domElement)==null||me.ownerDocument.removeEventListener("pointermove",_e),(ve=r.domElement)==null||ve.ownerDocument.removeEventListener("pointerup",W),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",Be)};const r=this,i={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=o.NONE;const l=1e-6,c=new w2,f=new w2;let d=1;const h=new fe,m=new qe,v=new qe,y=new qe,p=new qe,x=new qe,g=new qe,S=new qe,E=new qe,_=new qe,A=new fe,T=new qe;let M=!1;const C=[],N={};function P(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function L(we){r.reverseOrbit||r.reverseHorizontalOrbit?f.theta+=we:f.theta-=we}function z(we){r.reverseOrbit||r.reverseVerticalOrbit?f.phi+=we:f.phi-=we}const O=(()=>{const we=new fe;return function(se,Te){we.setFromMatrixColumn(Te,0),we.multiplyScalar(-se),h.add(we)}})(),F=(()=>{const we=new fe;return function(se,Te){r.screenSpacePanning===!0?we.setFromMatrixColumn(Te,1):(we.setFromMatrixColumn(Te,0),we.crossVectors(r.object.up,we)),we.multiplyScalar(se),h.add(we)}})(),U=(()=>{const we=new fe;return function(se,Te){const me=r.domElement;if(me&&r.object instanceof Tr&&r.object.isPerspectiveCamera){const ve=r.object.position;we.copy(ve).sub(r.target);let Ke=we.length();Ke*=Math.tan(r.object.fov/2*Math.PI/180),O(2*se*Ke/me.clientHeight,r.object.matrix),F(2*Te*Ke/me.clientHeight,r.object.matrix)}else me&&r.object instanceof ku&&r.object.isOrthographicCamera?(O(se*(r.object.right-r.object.left)/r.object.zoom/me.clientWidth,r.object.matrix),F(Te*(r.object.top-r.object.bottom)/r.object.zoom/me.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function I(we){r.object instanceof Tr&&r.object.isPerspectiveCamera||r.object instanceof ku&&r.object.isOrthographicCamera?d/=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(we){r.object instanceof Tr&&r.object.isPerspectiveCamera||r.object instanceof ku&&r.object.isOrthographicCamera?d*=we:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function ee(we){if(!r.zoomToCursor||!r.domElement)return;M=!0;const B=r.domElement.getBoundingClientRect(),se=we.clientX-B.left,Te=we.clientY-B.top,me=B.width,ve=B.height;T.x=se/me*2-1,T.y=-(Te/ve)*2+1,A.set(T.x,T.y,1).unproject(r.object).sub(r.object.position).normalize()}function J(we){return Math.max(r.minDistance,Math.min(r.maxDistance,we))}function q(we){m.set(we.clientX,we.clientY)}function ae(we){ee(we),S.set(we.clientX,we.clientY)}function be(we){p.set(we.clientX,we.clientY)}function ue(we){v.set(we.clientX,we.clientY),y.subVectors(v,m).multiplyScalar(r.rotateSpeed);const B=r.domElement;B&&(L(2*Math.PI*y.x/B.clientHeight),z(2*Math.PI*y.y/B.clientHeight)),m.copy(v),r.update()}function pe(we){E.set(we.clientX,we.clientY),_.subVectors(E,S),_.y>0?I(H()):_.y<0&&j(H()),S.copy(E),r.update()}function Pe(we){x.set(we.clientX,we.clientY),g.subVectors(x,p).multiplyScalar(r.panSpeed),U(g.x,g.y),p.copy(x),r.update()}function Ce(we){ee(we),we.deltaY<0?j(H()):we.deltaY>0&&I(H()),r.update()}function Ee(we){let B=!1;switch(we.code){case r.keys.UP:U(0,r.keyPanSpeed),B=!0;break;case r.keys.BOTTOM:U(0,-r.keyPanSpeed),B=!0;break;case r.keys.LEFT:U(r.keyPanSpeed,0),B=!0;break;case r.keys.RIGHT:U(-r.keyPanSpeed,0),B=!0;break}B&&(we.preventDefault(),r.update())}function Oe(){if(C.length==1)m.set(C[0].pageX,C[0].pageY);else{const we=.5*(C[0].pageX+C[1].pageX),B=.5*(C[0].pageY+C[1].pageY);m.set(we,B)}}function ne(){if(C.length==1)p.set(C[0].pageX,C[0].pageY);else{const we=.5*(C[0].pageX+C[1].pageX),B=.5*(C[0].pageY+C[1].pageY);p.set(we,B)}}function Le(){const we=C[0].pageX-C[1].pageX,B=C[0].pageY-C[1].pageY,se=Math.sqrt(we*we+B*B);S.set(0,se)}function Fe(){r.enableZoom&&Le(),r.enablePan&&ne()}function Q(){r.enableZoom&&Le(),r.enableRotate&&Oe()}function te(we){if(C.length==1)v.set(we.pageX,we.pageY);else{const se=Ze(we),Te=.5*(we.pageX+se.x),me=.5*(we.pageY+se.y);v.set(Te,me)}y.subVectors(v,m).multiplyScalar(r.rotateSpeed);const B=r.domElement;B&&(L(2*Math.PI*y.x/B.clientHeight),z(2*Math.PI*y.y/B.clientHeight)),m.copy(v)}function Me(we){if(C.length==1)x.set(we.pageX,we.pageY);else{const B=Ze(we),se=.5*(we.pageX+B.x),Te=.5*(we.pageY+B.y);x.set(se,Te)}g.subVectors(x,p).multiplyScalar(r.panSpeed),U(g.x,g.y),p.copy(x)}function re(we){const B=Ze(we),se=we.pageX-B.x,Te=we.pageY-B.y,me=Math.sqrt(se*se+Te*Te);E.set(0,me),_.set(0,Math.pow(E.y/S.y,r.zoomSpeed)),I(_.y),S.copy(E)}function V(we){r.enableZoom&&re(we),r.enablePan&&Me(we)}function G(we){r.enableZoom&&re(we),r.enableRotate&&te(we)}function le(we){var B,se;r.enabled!==!1&&(C.length===0&&((B=r.domElement)==null||B.ownerDocument.addEventListener("pointermove",_e),(se=r.domElement)==null||se.ownerDocument.addEventListener("pointerup",W)),Ve(we),we.pointerType==="touch"?$e(we):de(we))}function _e(we){r.enabled!==!1&&(we.pointerType==="touch"?Ie(we):xe(we))}function W(we){var B,se,Te;at(we),C.length===0&&((B=r.domElement)==null||B.releasePointerCapture(we.pointerId),(se=r.domElement)==null||se.ownerDocument.removeEventListener("pointermove",_e),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",W)),r.dispatchEvent(s),u=o.NONE}function Y(we){at(we)}function de(we){let B;switch(we.button){case 0:B=r.mouseButtons.LEFT;break;case 1:B=r.mouseButtons.MIDDLE;break;case 2:B=r.mouseButtons.RIGHT;break;default:B=-1}switch(B){case af.DOLLY:if(r.enableZoom===!1)return;ae(we),u=o.DOLLY;break;case af.ROTATE:if(we.ctrlKey||we.metaKey||we.shiftKey){if(r.enablePan===!1)return;be(we),u=o.PAN}else{if(r.enableRotate===!1)return;q(we),u=o.ROTATE}break;case af.PAN:if(we.ctrlKey||we.metaKey||we.shiftKey){if(r.enableRotate===!1)return;q(we),u=o.ROTATE}else{if(r.enablePan===!1)return;be(we),u=o.PAN}break;default:u=o.NONE}u!==o.NONE&&r.dispatchEvent(a)}function xe(we){if(r.enabled!==!1)switch(u){case o.ROTATE:if(r.enableRotate===!1)return;ue(we);break;case o.DOLLY:if(r.enableZoom===!1)return;pe(we);break;case o.PAN:if(r.enablePan===!1)return;Pe(we);break}}function Ne(we){r.enabled===!1||r.enableZoom===!1||u!==o.NONE&&u!==o.ROTATE||(we.preventDefault(),r.dispatchEvent(a),Ce(we),r.dispatchEvent(s))}function Be(we){r.enabled===!1||r.enablePan===!1||Ee(we)}function $e(we){switch(tt(we),C.length){case 1:switch(r.touches.ONE){case sf.ROTATE:if(r.enableRotate===!1)return;Oe(),u=o.TOUCH_ROTATE;break;case sf.PAN:if(r.enablePan===!1)return;ne(),u=o.TOUCH_PAN;break;default:u=o.NONE}break;case 2:switch(r.touches.TWO){case sf.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Fe(),u=o.TOUCH_DOLLY_PAN;break;case sf.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Q(),u=o.TOUCH_DOLLY_ROTATE;break;default:u=o.NONE}break;default:u=o.NONE}u!==o.NONE&&r.dispatchEvent(a)}function Ie(we){switch(tt(we),u){case o.TOUCH_ROTATE:if(r.enableRotate===!1)return;te(we),r.update();break;case o.TOUCH_PAN:if(r.enablePan===!1)return;Me(we),r.update();break;case o.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;V(we),r.update();break;case o.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;G(we),r.update();break;default:u=o.NONE}}function Ye(we){r.enabled!==!1&&we.preventDefault()}function Ve(we){C.push(we)}function at(we){delete N[we.pointerId];for(let B=0;B<C.length;B++)if(C[B].pointerId==we.pointerId){C.splice(B,1);return}}function tt(we){let B=N[we.pointerId];B===void 0&&(B=new qe,N[we.pointerId]=B),B.set(we.pageX,we.pageY)}function Ze(we){const B=we.pointerId===C[0].pointerId?C[1]:C[0];return N[B.pointerId]}n!==void 0&&this.connect(n),this.update()}};class jae extends pD{constructor(e){super(e),this.type=Ki}parse(e){const o=function(g,S){switch(g){case 1:console.error("THREE.RGBELoader Read Error: "+(S||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(S||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(S||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(S||""))}return-1},f=`
`,d=function(g,S,E){S=S||1024;let A=g.pos,T=-1,M=0,C="",N=String.fromCharCode.apply(null,new Uint16Array(g.subarray(A,A+128)));for(;0>(T=N.indexOf(f))&&M<S&&A<g.byteLength;)C+=N,M+=N.length,A+=128,N+=String.fromCharCode.apply(null,new Uint16Array(g.subarray(A,A+128)));return-1<T?(E!==!1&&(g.pos+=M+T+1),C+N.slice(0,T)):!1},h=function(g){const S=/^#\?(\S+)/,E=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,_=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*FORMAT=(\S+)\s*$/,T=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,M={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let C,N;if(g.pos>=g.byteLength||!(C=d(g)))return o(1,"no header found");if(!(N=C.match(S)))return o(3,"bad initial token");for(M.valid|=1,M.programtype=N[1],M.string+=C+`
`;C=d(g),C!==!1;){if(M.string+=C+`
`,C.charAt(0)==="#"){M.comments+=C+`
`;continue}if((N=C.match(E))&&(M.gamma=parseFloat(N[1])),(N=C.match(_))&&(M.exposure=parseFloat(N[1])),(N=C.match(A))&&(M.valid|=2,M.format=N[1]),(N=C.match(T))&&(M.valid|=4,M.height=parseInt(N[1],10),M.width=parseInt(N[2],10)),M.valid&2&&M.valid&4)break}return M.valid&2?M.valid&4?M:o(3,"missing image size specifier"):o(3,"missing format specifier")},m=function(g,S,E){const _=S;if(_<8||_>32767||g[0]!==2||g[1]!==2||g[2]&128)return new Uint8Array(g);if(_!==(g[2]<<8|g[3]))return o(3,"wrong scanline width");const A=new Uint8Array(4*S*E);if(!A.length)return o(4,"unable to allocate buffer space");let T=0,M=0;const C=4*_,N=new Uint8Array(4),P=new Uint8Array(C);let H=E;for(;H>0&&M<g.byteLength;){if(M+4>g.byteLength)return o(1);if(N[0]=g[M++],N[1]=g[M++],N[2]=g[M++],N[3]=g[M++],N[0]!=2||N[1]!=2||(N[2]<<8|N[3])!=_)return o(3,"bad rgbe scanline format");let L=0,z;for(;L<C&&M<g.byteLength;){z=g[M++];const F=z>128;if(F&&(z-=128),z===0||L+z>C)return o(3,"bad scanline data");if(F){const U=g[M++];for(let I=0;I<z;I++)P[L++]=U}else P.set(g.subarray(M,M+z),L),L+=z,M+=z}const O=_;for(let F=0;F<O;F++){let U=0;A[T]=P[F+U],U+=_,A[T+1]=P[F+U],U+=_,A[T+2]=P[F+U],U+=_,A[T+3]=P[F+U],T+=4}H--}return A},v=function(g,S,E,_){const A=g[S+3],T=Math.pow(2,A-128)/255;E[_+0]=g[S+0]*T,E[_+1]=g[S+1]*T,E[_+2]=g[S+2]*T,E[_+3]=1},y=function(g,S,E,_){const A=g[S+3],T=Math.pow(2,A-128)/255;E[_+0]=xf.toHalfFloat(Math.min(g[S+0]*T,65504)),E[_+1]=xf.toHalfFloat(Math.min(g[S+1]*T,65504)),E[_+2]=xf.toHalfFloat(Math.min(g[S+2]*T,65504)),E[_+3]=xf.toHalfFloat(1)},p=new Uint8Array(e);p.pos=0;const x=h(p);if(x!==-1){const g=x.width,S=x.height,E=m(p.subarray(p.pos),g,S);if(E!==-1){let _,A,T;switch(this.type){case xi:T=E.length/4;const M=new Float32Array(T*4);for(let N=0;N<T;N++)v(E,N*4,M,N*4);_=M,A=xi;break;case Ki:T=E.length/4;const C=new Uint16Array(T*4);for(let N=0;N<T;N++)y(E,N*4,C,N*4);_=C,A=Ki;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:g,height:S,data:_,header:x.string,gamma:x.gamma,exposure:x.exposure,type:A}}}return null}setDataType(e){return this.type=e,this}load(e,n,r,i){function a(s,o){switch(s.type){case xi:case Ki:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=Qn,s.magFilter=Qn,s.generateMipmaps=!1,s.flipY=!0;break}n&&n(s,o)}return super.load(e,a,r,i)}}const Gm="colorSpace"in new yr;class Xae extends pD{constructor(e){super(e),this.type=Ki}parse(e){const M=Math.pow(2.7182818,2.2);function C(K,oe){for(var Re=0,Z=0;Z<65536;++Z)(Z==0||K[Z>>3]&1<<(Z&7))&&(oe[Re++]=Z);for(var ce=Re-1;Re<65536;)oe[Re++]=0;return ce}function N(K){for(var oe=0;oe<16384;oe++)K[oe]={},K[oe].len=0,K[oe].lit=0,K[oe].p=null}const P={l:0,c:0,lc:0};function H(K,oe,Re,Z,ce){for(;Re<K;)oe=oe<<8|Ze(Z,ce),Re+=8;Re-=K,P.l=oe>>Re&(1<<K)-1,P.c=oe,P.lc=Re}const L=new Array(59);function z(K){for(var oe=0;oe<=58;++oe)L[oe]=0;for(var oe=0;oe<65537;++oe)L[K[oe]]+=1;for(var Re=0,oe=58;oe>0;--oe){var Z=Re+L[oe]>>1;L[oe]=Re,Re=Z}for(var oe=0;oe<65537;++oe){var ce=K[oe];ce>0&&(K[oe]=ce|L[ce]++<<6)}}function O(K,oe,Re,Z,ce,he,De){for(var Se=Re,He=0,We=0;ce<=he;ce++){if(Se.value-Re.value>Z)return!1;H(6,He,We,K,Se);var je=P.l;if(He=P.c,We=P.lc,De[ce]=je,je==63){if(Se.value-Re.value>Z)throw"Something wrong with hufUnpackEncTable";H(8,He,We,K,Se);var ke=P.l+6;if(He=P.c,We=P.lc,ce+ke>he+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)De[ce++]=0;ce--}else if(je>=59){var ke=je-59+2;if(ce+ke>he+1)throw"Something wrong with hufUnpackEncTable";for(;ke--;)De[ce++]=0;ce--}}z(De)}function F(K){return K&63}function U(K){return K>>6}function I(K,oe,Re,Z){for(;oe<=Re;oe++){var ce=U(K[oe]),he=F(K[oe]);if(ce>>he)throw"Invalid table entry";if(he>14){var De=Z[ce>>he-14];if(De.len)throw"Invalid table entry";if(De.lit++,De.p){var Se=De.p;De.p=new Array(De.lit);for(var He=0;He<De.lit-1;++He)De.p[He]=Se[He]}else De.p=new Array(1);De.p[De.lit-1]=oe}else if(he)for(var We=0,He=1<<14-he;He>0;He--){var De=Z[(ce<<14-he)+We];if(De.len||De.p)throw"Invalid table entry";De.len=he,De.lit=oe,We++}}return!0}const j={c:0,lc:0};function ee(K,oe,Re,Z){K=K<<8|Ze(Re,Z),oe+=8,j.c=K,j.lc=oe}const J={c:0,lc:0};function q(K,oe,Re,Z,ce,he,De,Se,He,We){if(K==oe){Z<8&&(ee(Re,Z,ce,De),Re=j.c,Z=j.lc),Z-=8;var je=Re>>Z,je=new Uint8Array([je])[0];if(He.value+je>We)return!1;for(var ke=Se[He.value-1];je-- >0;)Se[He.value++]=ke}else if(He.value<We)Se[He.value++]=K;else return!1;J.c=Re,J.lc=Z}function ae(K){return K&65535}function be(K){var oe=ae(K);return oe>32767?oe-65536:oe}const ue={a:0,b:0};function pe(K,oe){var Re=be(K),Z=be(oe),ce=Z,he=Re+(ce&1)+(ce>>1),De=he,Se=he-ce;ue.a=De,ue.b=Se}function Pe(K,oe){var Re=ae(K),Z=ae(oe),ce=Re-(Z>>1)&65535,he=Z+ce-32768&65535;ue.a=he,ue.b=ce}function Ce(K,oe,Re,Z,ce,he,De){for(var Se=De<16384,He=Re>ce?ce:Re,We=1,je;We<=He;)We<<=1;for(We>>=1,je=We,We>>=1;We>=1;){for(var ke=0,ht=ke+he*(ce-je),rt=he*We,it=he*je,yt=Z*We,Nt=Z*je,Ot,Xt,bt,pt;ke<=ht;ke+=it){for(var yn=ke,kt=ke+Z*(Re-je);yn<=kt;yn+=Nt){var Gt=yn+yt,jn=yn+rt,Or=jn+yt;Se?(pe(K[yn+oe],K[jn+oe]),Ot=ue.a,bt=ue.b,pe(K[Gt+oe],K[Or+oe]),Xt=ue.a,pt=ue.b,pe(Ot,Xt),K[yn+oe]=ue.a,K[Gt+oe]=ue.b,pe(bt,pt),K[jn+oe]=ue.a,K[Or+oe]=ue.b):(Pe(K[yn+oe],K[jn+oe]),Ot=ue.a,bt=ue.b,Pe(K[Gt+oe],K[Or+oe]),Xt=ue.a,pt=ue.b,Pe(Ot,Xt),K[yn+oe]=ue.a,K[Gt+oe]=ue.b,Pe(bt,pt),K[jn+oe]=ue.a,K[Or+oe]=ue.b)}if(Re&We){var jn=yn+rt;Se?pe(K[yn+oe],K[jn+oe]):Pe(K[yn+oe],K[jn+oe]),Ot=ue.a,K[jn+oe]=ue.b,K[yn+oe]=Ot}}if(ce&We)for(var yn=ke,kt=ke+Z*(Re-je);yn<=kt;yn+=Nt){var Gt=yn+yt;Se?pe(K[yn+oe],K[Gt+oe]):Pe(K[yn+oe],K[Gt+oe]),Ot=ue.a,K[Gt+oe]=ue.b,K[yn+oe]=Ot}je=We,We>>=1}return ke}function Ee(K,oe,Re,Z,ce,he,De,Se,He,We){for(var je=0,ke=0,ht=Se,rt=Math.trunc(ce.value+(he+7)/8);ce.value<rt;)for(ee(je,ke,Re,ce),je=j.c,ke=j.lc;ke>=14;){var it=je>>ke-14&16383,yt=oe[it];if(yt.len)ke-=yt.len,q(yt.lit,De,je,ke,Re,Z,ce,He,We,ht),je=J.c,ke=J.lc;else{if(!yt.p)throw"hufDecode issues";var Nt;for(Nt=0;Nt<yt.lit;Nt++){for(var Ot=F(K[yt.p[Nt]]);ke<Ot&&ce.value<rt;)ee(je,ke,Re,ce),je=j.c,ke=j.lc;if(ke>=Ot&&U(K[yt.p[Nt]])==(je>>ke-Ot&(1<<Ot)-1)){ke-=Ot,q(yt.p[Nt],De,je,ke,Re,Z,ce,He,We,ht),je=J.c,ke=J.lc;break}}if(Nt==yt.lit)throw"hufDecode issues"}}var Xt=8-he&7;for(je>>=Xt,ke-=Xt;ke>0;){var yt=oe[je<<14-ke&16383];if(yt.len)ke-=yt.len,q(yt.lit,De,je,ke,Re,Z,ce,He,We,ht),je=J.c,ke=J.lc;else throw"hufDecode issues"}return!0}function Oe(K,oe,Re,Z,ce,he){var De={value:0},Se=Re.value,He=tt(oe,Re),We=tt(oe,Re);Re.value+=4;var je=tt(oe,Re);if(Re.value+=4,He<0||He>=65537||We<0||We>=65537)throw"Something wrong with HUF_ENCSIZE";var ke=new Array(65537),ht=new Array(16384);N(ht);var rt=Z-(Re.value-Se);if(O(K,oe,Re,rt,He,We,ke),je>8*(Z-(Re.value-Se)))throw"Something wrong with hufUncompress";I(ke,He,We,ht),Ee(ke,ht,K,oe,Re,je,We,he,ce,De)}function ne(K,oe,Re){for(var Z=0;Z<Re;++Z)oe[Z]=K[oe[Z]]}function Le(K){for(var oe=1;oe<K.length;oe++){var Re=K[oe-1]+K[oe]-128;K[oe]=Re}}function Fe(K,oe){for(var Re=0,Z=Math.floor((K.length+1)/2),ce=0,he=K.length-1;!(ce>he||(oe[ce++]=K[Re++],ce>he));)oe[ce++]=K[Z++]}function Q(K){for(var oe=K.byteLength,Re=new Array,Z=0,ce=new DataView(K);oe>0;){var he=ce.getInt8(Z++);if(he<0){var De=-he;oe-=De+1;for(var Se=0;Se<De;Se++)Re.push(ce.getUint8(Z++))}else{var De=he;oe-=2;for(var He=ce.getUint8(Z++),Se=0;Se<De+1;Se++)Re.push(He)}}return Re}function te(K,oe,Re,Z,ce,he){var Gt=new DataView(he.buffer),De=Re[K.idx[0]].width,Se=Re[K.idx[0]].height,He=3,We=Math.floor(De/8),je=Math.ceil(De/8),ke=Math.ceil(Se/8),ht=De-(je-1)*8,rt=Se-(ke-1)*8,it={value:0},yt=new Array(He),Nt=new Array(He),Ot=new Array(He),Xt=new Array(He),bt=new Array(He);for(let wn=0;wn<He;++wn)bt[wn]=oe[K.idx[wn]],yt[wn]=wn<1?0:yt[wn-1]+je*ke,Nt[wn]=new Float32Array(64),Ot[wn]=new Uint16Array(64),Xt[wn]=new Uint16Array(je*64);for(let wn=0;wn<ke;++wn){var pt=8;wn==ke-1&&(pt=rt);var yn=8;for(let sn=0;sn<je;++sn){sn==je-1&&(yn=ht);for(let En=0;En<He;++En)Ot[En].fill(0),Ot[En][0]=ce[yt[En]++],Me(it,Z,Ot[En]),re(Ot[En],Nt[En]),V(Nt[En]);G(Nt);for(let En=0;En<He;++En)le(Nt[En],Xt[En],sn*64)}let _r=0;for(let sn=0;sn<He;++sn){const En=Re[K.idx[sn]].type;for(let ur=8*wn;ur<8*wn+pt;++ur){_r=bt[sn][ur];for(let _s=0;_s<We;++_s){const oa=_s*64+(ur&7)*8;Gt.setUint16(_r+0*2*En,Xt[sn][oa+0],!0),Gt.setUint16(_r+1*2*En,Xt[sn][oa+1],!0),Gt.setUint16(_r+2*2*En,Xt[sn][oa+2],!0),Gt.setUint16(_r+3*2*En,Xt[sn][oa+3],!0),Gt.setUint16(_r+4*2*En,Xt[sn][oa+4],!0),Gt.setUint16(_r+5*2*En,Xt[sn][oa+5],!0),Gt.setUint16(_r+6*2*En,Xt[sn][oa+6],!0),Gt.setUint16(_r+7*2*En,Xt[sn][oa+7],!0),_r+=8*2*En}}if(We!=je)for(let ur=8*wn;ur<8*wn+pt;++ur){const _s=bt[sn][ur]+8*We*2*En,oa=We*64+(ur&7)*8;for(let Uo=0;Uo<yn;++Uo)Gt.setUint16(_s+Uo*2*En,Xt[sn][oa+Uo],!0)}}}for(var kt=new Uint16Array(De),Gt=new DataView(he.buffer),jn=0;jn<He;++jn){Re[K.idx[jn]].decoded=!0;var Or=Re[K.idx[jn]].type;if(Re[jn].type==2)for(var xr=0;xr<Se;++xr){const wn=bt[jn][xr];for(var In=0;In<De;++In)kt[In]=Gt.getUint16(wn+In*2*Or,!0);for(var In=0;In<De;++In)Gt.setFloat32(wn+In*2*Or,me(kt[In]),!0)}}}function Me(K,oe,Re){for(var Z,ce=1;ce<64;)Z=oe[K.value],Z==65280?ce=64:Z>>8==255?ce+=Z&255:(Re[ce]=Z,ce++),K.value++}function re(K,oe){oe[0]=me(K[0]),oe[1]=me(K[1]),oe[2]=me(K[5]),oe[3]=me(K[6]),oe[4]=me(K[14]),oe[5]=me(K[15]),oe[6]=me(K[27]),oe[7]=me(K[28]),oe[8]=me(K[2]),oe[9]=me(K[4]),oe[10]=me(K[7]),oe[11]=me(K[13]),oe[12]=me(K[16]),oe[13]=me(K[26]),oe[14]=me(K[29]),oe[15]=me(K[42]),oe[16]=me(K[3]),oe[17]=me(K[8]),oe[18]=me(K[12]),oe[19]=me(K[17]),oe[20]=me(K[25]),oe[21]=me(K[30]),oe[22]=me(K[41]),oe[23]=me(K[43]),oe[24]=me(K[9]),oe[25]=me(K[11]),oe[26]=me(K[18]),oe[27]=me(K[24]),oe[28]=me(K[31]),oe[29]=me(K[40]),oe[30]=me(K[44]),oe[31]=me(K[53]),oe[32]=me(K[10]),oe[33]=me(K[19]),oe[34]=me(K[23]),oe[35]=me(K[32]),oe[36]=me(K[39]),oe[37]=me(K[45]),oe[38]=me(K[52]),oe[39]=me(K[54]),oe[40]=me(K[20]),oe[41]=me(K[22]),oe[42]=me(K[33]),oe[43]=me(K[38]),oe[44]=me(K[46]),oe[45]=me(K[51]),oe[46]=me(K[55]),oe[47]=me(K[60]),oe[48]=me(K[21]),oe[49]=me(K[34]),oe[50]=me(K[37]),oe[51]=me(K[47]),oe[52]=me(K[50]),oe[53]=me(K[56]),oe[54]=me(K[59]),oe[55]=me(K[61]),oe[56]=me(K[35]),oe[57]=me(K[36]),oe[58]=me(K[48]),oe[59]=me(K[49]),oe[60]=me(K[57]),oe[61]=me(K[58]),oe[62]=me(K[62]),oe[63]=me(K[63])}function V(K){const oe=.5*Math.cos(.7853975),Re=.5*Math.cos(3.14159/16),Z=.5*Math.cos(3.14159/8),ce=.5*Math.cos(3*3.14159/16),he=.5*Math.cos(5*3.14159/16),De=.5*Math.cos(3*3.14159/8),Se=.5*Math.cos(7*3.14159/16);for(var He=new Array(4),We=new Array(4),je=new Array(4),ke=new Array(4),ht=0;ht<8;++ht){var rt=ht*8;He[0]=Z*K[rt+2],He[1]=De*K[rt+2],He[2]=Z*K[rt+6],He[3]=De*K[rt+6],We[0]=Re*K[rt+1]+ce*K[rt+3]+he*K[rt+5]+Se*K[rt+7],We[1]=ce*K[rt+1]-Se*K[rt+3]-Re*K[rt+5]-he*K[rt+7],We[2]=he*K[rt+1]-Re*K[rt+3]+Se*K[rt+5]+ce*K[rt+7],We[3]=Se*K[rt+1]-he*K[rt+3]+ce*K[rt+5]-Re*K[rt+7],je[0]=oe*(K[rt+0]+K[rt+4]),je[3]=oe*(K[rt+0]-K[rt+4]),je[1]=He[0]+He[3],je[2]=He[1]-He[2],ke[0]=je[0]+je[1],ke[1]=je[3]+je[2],ke[2]=je[3]-je[2],ke[3]=je[0]-je[1],K[rt+0]=ke[0]+We[0],K[rt+1]=ke[1]+We[1],K[rt+2]=ke[2]+We[2],K[rt+3]=ke[3]+We[3],K[rt+4]=ke[3]-We[3],K[rt+5]=ke[2]-We[2],K[rt+6]=ke[1]-We[1],K[rt+7]=ke[0]-We[0]}for(var it=0;it<8;++it)He[0]=Z*K[16+it],He[1]=De*K[16+it],He[2]=Z*K[48+it],He[3]=De*K[48+it],We[0]=Re*K[8+it]+ce*K[24+it]+he*K[40+it]+Se*K[56+it],We[1]=ce*K[8+it]-Se*K[24+it]-Re*K[40+it]-he*K[56+it],We[2]=he*K[8+it]-Re*K[24+it]+Se*K[40+it]+ce*K[56+it],We[3]=Se*K[8+it]-he*K[24+it]+ce*K[40+it]-Re*K[56+it],je[0]=oe*(K[it]+K[32+it]),je[3]=oe*(K[it]-K[32+it]),je[1]=He[0]+He[3],je[2]=He[1]-He[2],ke[0]=je[0]+je[1],ke[1]=je[3]+je[2],ke[2]=je[3]-je[2],ke[3]=je[0]-je[1],K[0+it]=ke[0]+We[0],K[8+it]=ke[1]+We[1],K[16+it]=ke[2]+We[2],K[24+it]=ke[3]+We[3],K[32+it]=ke[3]-We[3],K[40+it]=ke[2]-We[2],K[48+it]=ke[1]-We[1],K[56+it]=ke[0]-We[0]}function G(K){for(var oe=0;oe<64;++oe){var Re=K[0][oe],Z=K[1][oe],ce=K[2][oe];K[0][oe]=Re+1.5747*ce,K[1][oe]=Re-.1873*Z-.4682*ce,K[2][oe]=Re+1.8556*Z}}function le(K,oe,Re){for(var Z=0;Z<64;++Z)oe[Re+Z]=xf.toHalfFloat(_e(K[Z]))}function _e(K){return K<=1?Math.sign(K)*Math.pow(Math.abs(K),2.2):Math.sign(K)*Math.pow(M,Math.abs(K)-1)}function W(K){return new DataView(K.array.buffer,K.offset.value,K.size)}function Y(K){var oe=K.viewer.buffer.slice(K.offset.value,K.offset.value+K.size),Re=new Uint8Array(Q(oe)),Z=new Uint8Array(Re.length);return Le(Re),Fe(Re,Z),new DataView(Z.buffer)}function de(K){var oe=K.array.slice(K.offset.value,K.offset.value+K.size),Re=D1(oe),Z=new Uint8Array(Re.length);return Le(Re),Fe(Re,Z),new DataView(Z.buffer)}function xe(K){for(var oe=K.viewer,Re={value:K.offset.value},Z=new Uint16Array(K.width*K.scanlineBlockSize*(K.channels*K.type)),ce=new Uint8Array(8192),he=0,De=new Array(K.channels),Se=0;Se<K.channels;Se++)De[Se]={},De[Se].start=he,De[Se].end=De[Se].start,De[Se].nx=K.width,De[Se].ny=K.lines,De[Se].size=K.type,he+=De[Se].nx*De[Se].ny*De[Se].size;var He=ve(oe,Re),We=ve(oe,Re);if(We>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(He<=We)for(var Se=0;Se<We-He+1;Se++)ce[Se+He]=we(oe,Re);var je=new Uint16Array(65536),ke=C(ce,je),ht=tt(oe,Re);Oe(K.array,oe,Re,ht,Z,he);for(var Se=0;Se<K.channels;++Se)for(var rt=De[Se],it=0;it<De[Se].size;++it)Ce(Z,rt.start+it,rt.nx,rt.size,rt.ny,rt.nx*rt.size,ke);ne(je,Z,he);for(var yt=0,Nt=new Uint8Array(Z.buffer.byteLength),Ot=0;Ot<K.lines;Ot++)for(var Xt=0;Xt<K.channels;Xt++){var rt=De[Xt],bt=rt.nx*rt.size,pt=new Uint8Array(Z.buffer,rt.end*2,bt*2);Nt.set(pt,yt),yt+=bt*2,rt.end+=bt}return new DataView(Nt.buffer)}function Ne(K){var oe=K.array.slice(K.offset.value,K.offset.value+K.size),Re=D1(oe);const Z=K.lines*K.channels*K.width,ce=K.type==1?new Uint16Array(Z):new Uint32Array(Z);let he=0,De=0;const Se=new Array(4);for(let He=0;He<K.lines;He++)for(let We=0;We<K.channels;We++){let je=0;switch(K.type){case 1:Se[0]=he,Se[1]=Se[0]+K.width,he=Se[1]+K.width;for(let ke=0;ke<K.width;++ke){const ht=Re[Se[0]++]<<8|Re[Se[1]++];je+=ht,ce[De]=je,De++}break;case 2:Se[0]=he,Se[1]=Se[0]+K.width,Se[2]=Se[1]+K.width,he=Se[2]+K.width;for(let ke=0;ke<K.width;++ke){const ht=Re[Se[0]++]<<24|Re[Se[1]++]<<16|Re[Se[2]++]<<8;je+=ht,ce[De]=je,De++}break}}return new DataView(ce.buffer)}function Be(K){var oe=K.viewer,Re={value:K.offset.value},Z=new Uint8Array(K.width*K.lines*(K.channels*K.type*2)),ce={version:B(oe,Re),unknownUncompressedSize:B(oe,Re),unknownCompressedSize:B(oe,Re),acCompressedSize:B(oe,Re),dcCompressedSize:B(oe,Re),rleCompressedSize:B(oe,Re),rleUncompressedSize:B(oe,Re),rleRawSize:B(oe,Re),totalAcUncompressedCount:B(oe,Re),totalDcUncompressedCount:B(oe,Re),acCompression:B(oe,Re)};if(ce.version<2)throw"EXRLoader.parse: "+Li.compression+" version "+ce.version+" is unsupported";for(var he=new Array,De=ve(oe,Re)-2;De>0;){var Se=$e(oe.buffer,Re),He=we(oe,Re),We=He>>2&3,je=(He>>4)-1,ke=new Int8Array([je])[0],ht=we(oe,Re);he.push({name:Se,index:ke,type:ht,compression:We}),De-=Se.length+3}for(var rt=Li.channels,it=new Array(K.channels),yt=0;yt<K.channels;++yt){var Nt=it[yt]={},Ot=rt[yt];Nt.name=Ot.name,Nt.compression=0,Nt.decoded=!1,Nt.type=Ot.pixelType,Nt.pLinear=Ot.pLinear,Nt.width=K.width,Nt.height=K.lines}for(var Xt={idx:new Array(3)},bt=0;bt<K.channels;++bt)for(var Nt=it[bt],yt=0;yt<he.length;++yt){var pt=he[yt];Nt.name==pt.name&&(Nt.compression=pt.compression,pt.index>=0&&(Xt.idx[pt.index]=bt),Nt.offset=bt)}if(ce.acCompressedSize>0)switch(ce.acCompression){case 0:var Gt=new Uint16Array(ce.totalAcUncompressedCount);Oe(K.array,oe,Re,ce.acCompressedSize,Gt,ce.totalAcUncompressedCount);break;case 1:var yn=K.array.slice(Re.value,Re.value+ce.totalAcUncompressedCount),kt=D1(yn),Gt=new Uint16Array(kt.buffer);Re.value+=ce.totalAcUncompressedCount;break}if(ce.dcCompressedSize>0){var jn={array:K.array,offset:Re,size:ce.dcCompressedSize},Or=new Uint16Array(de(jn).buffer);Re.value+=ce.dcCompressedSize}if(ce.rleRawSize>0){var yn=K.array.slice(Re.value,Re.value+ce.rleCompressedSize),kt=D1(yn),xr=Q(kt.buffer);Re.value+=ce.rleCompressedSize}for(var In=0,wn=new Array(it.length),yt=0;yt<wn.length;++yt)wn[yt]=new Array;for(var _r=0;_r<K.lines;++_r)for(var sn=0;sn<it.length;++sn)wn[sn].push(In),In+=it[sn].width*K.type*2;te(Xt,wn,it,Gt,Or,Z);for(var yt=0;yt<it.length;++yt){var Nt=it[yt];if(!Nt.decoded)switch(Nt.compression){case 2:for(var En=0,ur=0,_r=0;_r<K.lines;++_r){for(var _s=wn[yt][En],oa=0;oa<Nt.width;++oa){for(var Uo=0;Uo<2*Nt.type;++Uo)Z[_s++]=xr[ur+Uo*Nt.width*Nt.height];ur++}En++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Z.buffer)}function $e(K,oe){for(var Re=new Uint8Array(K),Z=0;Re[oe.value+Z]!=0;)Z+=1;var ce=new TextDecoder().decode(Re.slice(oe.value,oe.value+Z));return oe.value=oe.value+Z+1,ce}function Ie(K,oe,Re){var Z=new TextDecoder().decode(new Uint8Array(K).slice(oe.value,oe.value+Re));return oe.value=oe.value+Re,Z}function Ye(K,oe){var Re=at(K,oe),Z=tt(K,oe);return[Re,Z]}function Ve(K,oe){var Re=tt(K,oe),Z=tt(K,oe);return[Re,Z]}function at(K,oe){var Re=K.getInt32(oe.value,!0);return oe.value=oe.value+4,Re}function tt(K,oe){var Re=K.getUint32(oe.value,!0);return oe.value=oe.value+4,Re}function Ze(K,oe){var Re=K[oe.value];return oe.value=oe.value+1,Re}function we(K,oe){var Re=K.getUint8(oe.value);return oe.value=oe.value+1,Re}const B=function(K,oe){let Re;return"getBigInt64"in DataView.prototype?Re=Number(K.getBigInt64(oe.value,!0)):Re=K.getUint32(oe.value+4,!0)+Number(K.getUint32(oe.value,!0)<<32),oe.value+=8,Re};function se(K,oe){var Re=K.getFloat32(oe.value,!0);return oe.value+=4,Re}function Te(K,oe){return xf.toHalfFloat(se(K,oe))}function me(K){var oe=(K&31744)>>10,Re=K&1023;return(K>>15?-1:1)*(oe?oe===31?Re?NaN:1/0:Math.pow(2,oe-15)*(1+Re/1024):6103515625e-14*(Re/1024))}function ve(K,oe){var Re=K.getUint16(oe.value,!0);return oe.value+=2,Re}function Ke(K,oe){return me(ve(K,oe))}function lt(K,oe,Re,Z){for(var ce=Re.value,he=[];Re.value<ce+Z-1;){var De=$e(oe,Re),Se=at(K,Re),He=we(K,Re);Re.value+=3;var We=at(K,Re),je=at(K,Re);he.push({name:De,pixelType:Se,pLinear:He,xSampling:We,ySampling:je})}return Re.value+=1,he}function Dt(K,oe){var Re=se(K,oe),Z=se(K,oe),ce=se(K,oe),he=se(K,oe),De=se(K,oe),Se=se(K,oe),He=se(K,oe),We=se(K,oe);return{redX:Re,redY:Z,greenX:ce,greenY:he,blueX:De,blueY:Se,whiteX:He,whiteY:We}}function _t(K,oe){var Re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Z=we(K,oe);return Re[Z]}function an(K,oe){var Re=tt(K,oe),Z=tt(K,oe),ce=tt(K,oe),he=tt(K,oe);return{xMin:Re,yMin:Z,xMax:ce,yMax:he}}function gn(K,oe){var Re=["INCREASING_Y"],Z=we(K,oe);return Re[Z]}function Vn(K,oe){var Re=se(K,oe),Z=se(K,oe);return[Re,Z]}function rr(K,oe){var Re=se(K,oe),Z=se(K,oe),ce=se(K,oe);return[Re,Z,ce]}function Sn(K,oe,Re,Z,ce){if(Z==="string"||Z==="stringvector"||Z==="iccProfile")return Ie(oe,Re,ce);if(Z==="chlist")return lt(K,oe,Re,ce);if(Z==="chromaticities")return Dt(K,Re);if(Z==="compression")return _t(K,Re);if(Z==="box2i")return an(K,Re);if(Z==="lineOrder")return gn(K,Re);if(Z==="float")return se(K,Re);if(Z==="v2f")return Vn(K,Re);if(Z==="v3f")return rr(K,Re);if(Z==="int")return at(K,Re);if(Z==="rational")return Ye(K,Re);if(Z==="timecode")return Ve(K,Re);if(Z==="preview")return Re.value+=ce,"skipped";Re.value+=ce}function $r(K,oe,Re){const Z={};if(K.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Z.version=K.getUint8(4);const ce=K.getUint8(5);Z.spec={singleTile:!!(ce&2),longName:!!(ce&4),deepFormat:!!(ce&8),multiPart:!!(ce&16)},Re.value=8;for(var he=!0;he;){var De=$e(oe,Re);if(De==0)he=!1;else{var Se=$e(oe,Re),He=tt(K,Re),We=Sn(K,oe,Re,Se,He);We===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Se}'.`):Z[De]=We}}if(ce&-5)throw console.error("EXRHeader:",Z),"THREE.EXRLoader: provided file is currently unsupported.";return Z}function Fi(K,oe,Re,Z,ce){const he={size:0,viewer:oe,array:Re,offset:Z,width:K.dataWindow.xMax-K.dataWindow.xMin+1,height:K.dataWindow.yMax-K.dataWindow.yMin+1,channels:K.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:K.channels[0].pixelType,uncompress:null,getter:null,format:null,[Gm?"colorSpace":"encoding"]:null};switch(K.compression){case"NO_COMPRESSION":he.lines=1,he.uncompress=W;break;case"RLE_COMPRESSION":he.lines=1,he.uncompress=Y;break;case"ZIPS_COMPRESSION":he.lines=1,he.uncompress=de;break;case"ZIP_COMPRESSION":he.lines=16,he.uncompress=de;break;case"PIZ_COMPRESSION":he.lines=32,he.uncompress=xe;break;case"PXR24_COMPRESSION":he.lines=16,he.uncompress=Ne;break;case"DWAA_COMPRESSION":he.lines=32,he.uncompress=Be;break;case"DWAB_COMPRESSION":he.lines=256,he.uncompress=Be;break;default:throw"EXRLoader.parse: "+K.compression+" is unsupported"}if(he.scanlineBlockSize=he.lines,he.type==1)switch(ce){case xi:he.getter=Ke,he.inputSize=2;break;case Ki:he.getter=ve,he.inputSize=2;break}else if(he.type==2)switch(ce){case xi:he.getter=se,he.inputSize=4;break;case Ki:he.getter=Te,he.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+he.type+" for "+K.compression+".";he.blockCount=(K.dataWindow.yMax+1)/he.scanlineBlockSize;for(var De=0;De<he.blockCount;De++)B(oe,Z);he.outputChannels=he.channels==3?4:he.channels;const Se=he.width*he.height*he.outputChannels;switch(ce){case xi:he.byteArray=new Float32Array(Se),he.channels<he.outputChannels&&he.byteArray.fill(1,0,Se);break;case Ki:he.byteArray=new Uint16Array(Se),he.channels<he.outputChannels&&he.byteArray.fill(15360,0,Se);break;default:console.error("THREE.EXRLoader: unsupported type: ",ce);break}return he.bytesPerLine=he.width*he.inputSize*he.channels,he.outputChannels==4?he.format=Zi:he.format=OT,Gm?he.colorSpace="srgb-linear":he.encoding=3e3,he}const Ss=new DataView(e),pu=new Uint8Array(e),Da={value:0},Li=$r(Ss,e,Da),Zt=Fi(Li,Ss,pu,Da,this.type),mu={value:0},hl={R:0,G:1,B:2,A:3,Y:0};for(let K=0;K<Zt.height/Zt.scanlineBlockSize;K++){const oe=tt(Ss,Da);Zt.size=tt(Ss,Da),Zt.lines=oe+Zt.scanlineBlockSize>Zt.height?Zt.height-oe:Zt.scanlineBlockSize;const Z=Zt.size<Zt.lines*Zt.bytesPerLine?Zt.uncompress(Zt):W(Zt);Da.value+=Zt.size;for(let ce=0;ce<Zt.scanlineBlockSize;ce++){const he=ce+K*Zt.scanlineBlockSize;if(he>=Zt.height)break;for(let De=0;De<Zt.channels;De++){const Se=hl[Li.channels[De].name];for(let He=0;He<Zt.width;He++){mu.value=(ce*(Zt.channels*Zt.width)+De*Zt.width+He)*Zt.inputSize;const We=(Zt.height-1-he)*(Zt.width*Zt.outputChannels)+He*Zt.outputChannels+Se;Zt.byteArray[We]=Zt.getter(Z,mu)}}}}return{header:Li,width:Zt.width,height:Zt.height,data:Zt.byteArray,format:Zt.format,[Gm?"colorSpace":"encoding"]:Zt[Gm?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function a(s,o){Gm?s.colorSpace=o.colorSpace:s.encoding=o.encoding,s.minFilter=Qn,s.magFilter=Qn,s.generateMipmaps=!1,s.flipY=!1,n&&n(s,o)}return super.load(e,a,r,i)}}function Yae(t,e,n,r){const i=class extends Xr{constructor(s={}){const o=Object.entries(t);super({uniforms:o.reduce((u,[l,c])=>{const f=jT.clone({[l]:{value:c}});return{...u,...f}},{}),vertexShader:e,fragmentShader:n}),this.key="",o.forEach(([u])=>Object.defineProperty(this,u,{get:()=>this.uniforms[u].value,set:l=>this.uniforms[u].value=l})),Object.assign(this,s),r&&r(this)}};return i.key=sb.generateUUID(),i}var Zae=Object.defineProperty,Kae=(t,e,n)=>e in t?Zae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fn=(t,e,n)=>(Kae(t,typeof e!="symbol"?e+"":e,n),n);function aM(t,e,n,r,i){let a;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,i&&e+i):t.slice(e,i&&e+i):t,n.set)n.set(t,r);else for(a=0;a<t.length;a++)n[a+r]=t[a];return n}function Qae(t){return t instanceof Float32Array?t:t instanceof Jt?t.getAttribute("position").array:t.map(e=>{const n=Array.isArray(e);return e instanceof fe?[e.x,e.y,e.z]:e instanceof qe?[e.x,e.y,0]:n&&e.length===3?[e[0],e[1],e[2]]:n&&e.length===2?[e[0],e[1],0]:e}).flat()}class R9 extends Jt{constructor(){super(),Fn(this,"type","MeshLine"),Fn(this,"isMeshLine",!0),Fn(this,"positions",[]),Fn(this,"previous",[]),Fn(this,"next",[]),Fn(this,"side",[]),Fn(this,"width",[]),Fn(this,"indices_array",[]),Fn(this,"uvs",[]),Fn(this,"counters",[]),Fn(this,"widthCallback",null),Fn(this,"_attributes"),Fn(this,"_points",[]),Fn(this,"points"),Fn(this,"matrixWorld",new Ht),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,n){if(e=Qae(e),this._points=e,this.widthCallback=n??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof fe)for(let r=0;r<e.length;r++){const i=e[r],a=r/(e.length-1);this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(a),this.counters.push(a)}else for(let r=0;r<e.length;r+=3){const i=r/(e.length-1);this.positions.push(e[r],e[r+1],e[r+2]),this.positions.push(e[r],e[r+1],e[r+2]),this.counters.push(i),this.counters.push(i)}this.process()}compareV3(e,n){const r=e*6,i=n*6;return this.positions[r]===this.positions[i]&&this.positions[r+1]===this.positions[i+1]&&this.positions[r+2]===this.positions[i+2]}copyV3(e){const n=e*6;return[this.positions[n],this.positions[n+1],this.positions[n+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let n,r;this.compareV3(0,e-1)?r=this.copyV3(e-2):r=[this.positions[0]-(this.positions[6]-this.positions[0]),this.positions[1]-(this.positions[7]-this.positions[1]),this.positions[2]-(this.positions[8]-this.positions[2])],this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);for(let i=0;i<e;i++){if(this.side.push(1),this.side.push(-1),this.widthCallback?n=this.widthCallback(i/(e-1)):n=1,this.width.push(n),this.width.push(n),this.uvs.push(i/(e-1),0),this.uvs.push(i/(e-1),1),i<e-1){r=this.copyV3(i),this.previous.push(r[0],r[1],r[2]),this.previous.push(r[0],r[1],r[2]);const a=i*2;this.indices_array.push(a,a+1,a+2),this.indices_array.push(a+2,a+1,a+3)}i>0&&(r=this.copyV3(i),this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]))}this.compareV3(e-1,0)?r=this.copyV3(1):r=[this.positions[e-1]+(this.positions[e-1]-this.positions[e-1-6]),this.positions[e-2]+(this.positions[e-2]-this.positions[e-2-6]),this.positions[e-3]+(this.positions[e-3]-this.positions[e-3-6])],this.next.push(r[0],r[1],r[2]),this.next.push(r[0],r[1],r[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new dn(new Float32Array(this.positions),3),previous:new dn(new Float32Array(this.previous),3),next:new dn(new Float32Array(this.next),3),side:new dn(new Float32Array(this.side),1),width:new dn(new Float32Array(this.width),1),uv:new dn(new Float32Array(this.uvs),2),index:new dn(new Uint16Array(this.indices_array),1),counters:new dn(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:n,z:r}){const i=this._attributes.position.array,a=this._attributes.previous.array,s=this._attributes.next.array,o=i.length;aM(i,0,a,0,o),aM(i,6,i,0,o-6),i[o-6]=e,i[o-5]=n,i[o-4]=r,i[o-3]=e,i[o-2]=n,i[o-1]=r,aM(i,6,s,0,o-6),s[o-6]=e,s[o-5]=n,s[o-4]=r,s[o-3]=e,s[o-2]=n,s[o-1]=r,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const Jae=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir1 = normalize(currentP - prevP);
    vec2 dir2 = normalize(nextP - currentP);
    vec2 dir = normalize(dir1 + dir2);

    vec2 perp = vec2(-dir1.y, dir1.x);
    vec2 miter = vec2(-dir.y, dir.x);
    //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,ese=parseInt(ol.replace(/\D+/g,"")),tse=ese>=154?"colorspace_fragment":"encodings_fragment",nse=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useGradient == 1.) c = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${tse}>
  }
`;class P9 extends Xr{constructor(e){super({uniforms:{...mt.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new ft(16777215)},gradient:{value:[new ft(16711680),new ft(65280)]},opacity:{value:1},resolution:{value:new qe(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new qe(1,1)}},vertexShader:Jae,fragmentShader:nse}),Fn(this,"lineWidth"),Fn(this,"map"),Fn(this,"useMap"),Fn(this,"alphaMap"),Fn(this,"useAlphaMap"),Fn(this,"color"),Fn(this,"gradient"),Fn(this,"opacity",1),Fn(this,"resolution"),Fn(this,"sizeAttenuation"),Fn(this,"dashArray"),Fn(this,"dashOffset"),Fn(this,"dashRatio"),Fn(this,"useDash"),Fn(this,"useGradient"),Fn(this,"visibility"),Fn(this,"alphaTest",0),Fn(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(n){this.uniforms.lineWidth.value=n}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(n){this.uniforms.map.value=n}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(n){this.uniforms.useMap.value=n}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(n){this.uniforms.alphaMap.value=n}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(n){this.uniforms.useAlphaMap.value=n}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(n){this.uniforms.color.value=n}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(n){this.uniforms.gradient.value=n}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(n){this.uniforms.resolution.value.copy(n)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(n){this.uniforms.sizeAttenuation.value=n}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(n){this.uniforms.dashArray.value=n,this.useDash=n!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(n){this.uniforms.dashOffset.value=n}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(n){this.uniforms.dashRatio.value=n}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(n){this.uniforms.useDash.value=n}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(n){this.uniforms.useGradient.value=n}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(n){this.uniforms.visibility.value=n}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(n){this.uniforms.alphaTest.value=n}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(n){this.uniforms.repeat.value.copy(n)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const I9={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},rse=(t,e=1)=>(t.set(t.subarray(e)),t.fill(-1/0,-e),t);function ise(t,e){const{length:n,local:r,decay:i,interval:a,stride:s}={...I9,...e},o=$.useRef(),[u]=$.useState(()=>new fe);$.useLayoutEffect(()=>{t&&(o.current=Float32Array.from({length:n*10*3},(f,d)=>t.position.getComponent(d%3)))},[n,t]);const l=$.useRef(new fe),c=$.useRef(0);return Ro(()=>{if(t&&o.current){if(c.current===0){let f;r?f=t.position:(t.getWorldPosition(u),f=u);const d=1*i;for(let h=0;h<d;h++)f.distanceTo(l.current)<s||(rse(o.current,3),o.current.set(f.toArray(),o.current.length-3));l.current.copy(f)}c.current++,c.current=c.current%a}}),o}const ase=$.forwardRef((t,e)=>{const{children:n}=t,{width:r,length:i,decay:a,local:s,stride:o,interval:u}={...I9,...t},{color:l="hotpink",attenuation:c,target:f}=t,d=qi(S=>S.size),h=qi(S=>S.scene),m=$.useRef(null),[v,y]=$.useState(null),p=ise(v,{length:i,decay:a,local:s,stride:o,interval:u});$.useEffect(()=>{const S=(f==null?void 0:f.current)||m.current.children.find(E=>E instanceof On);S&&y(S)},[p,f]);const x=$.useMemo(()=>new R9,[]),g=$.useMemo(()=>{var S;const E=new P9({lineWidth:.1*r,color:l,sizeAttenuation:1,resolution:new qe(d.width,d.height)});let _;if(n)if(Array.isArray(n))_=n.find(A=>{const T=A;return typeof T.type=="string"&&T.type==="meshLineMaterial"});else{const A=n;typeof A.type=="string"&&A.type==="meshLineMaterial"&&(_=A)}return typeof((S=_)==null?void 0:S.props)=="object"&&E.setValues(_.props),E},[r,l,d,n]);return $.useEffect(()=>{g.uniforms.resolution.value.set(d.width,d.height)},[d]),Ro(()=>{p.current&&x.setPoints(p.current,c)}),$.createElement("group",null,f9($.createElement("mesh",{ref:e,geometry:x,material:g}),h),$.createElement("group",{ref:m},n))}),sse=$.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:u,...l},c)=>{const f=qi(_=>_.invalidate),d=qi(_=>_.camera),h=qi(_=>_.gl),m=qi(_=>_.events),v=qi(_=>_.setEvents),y=qi(_=>_.set),p=qi(_=>_.get),x=qi(_=>_.performance),g=e||d,S=r||m.connected||h.domElement,E=$.useMemo(()=>new qae(g),[g]);return Ro(()=>{E.enabled&&E.update()},-1),$.useEffect(()=>(a&&E.connect(a===!0?S:a),E.connect(S),()=>void E.dispose()),[a,S,n,E,f]),$.useEffect(()=>{const _=M=>{f(),n&&x.regress(),s&&s(M)},A=M=>{o&&o(M)},T=M=>{u&&u(M)};return E.addEventListener("change",_),E.addEventListener("start",A),E.addEventListener("end",T),()=>{E.removeEventListener("start",A),E.removeEventListener("end",T),E.removeEventListener("change",_)}},[s,o,u,E,f,v]),$.useEffect(()=>{if(t){const _=p().controls;return y({controls:E}),()=>y({controls:_})}},[t,E]),$.createElement("primitive",hn({ref:c,object:E,enableDamping:i},l))});var O9={exports:{}},ose="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",use=ose,lse=use;function F9(){}function L9(){}L9.resetWarningCache=F9;var cse=function(){function t(r,i,a,s,o,u){if(u!==lse){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:L9,resetWarningCache:F9};return n.PropTypes=n,n};O9.exports=cse();var fse=O9.exports;const lr=Qs(fse),sM={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},dse="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",JO=t=>Array.isArray(t);function B9({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){var a;let s=null,o=!1,u;if(n){if(!(n in sM))throw new Error("Preset must be one of: "+Object.keys(sM).join(", "));t=sM[n],e=dse}if(o=JO(t),u=JO(t)?"cube":t.startsWith("data:application/exr")?"exr":t.startsWith("data:application/hdr")?"hdr":(a=t.split(".").pop())==null||(a=a.split("?"))==null||(a=a.shift())==null?void 0:a.toLowerCase(),s=o?R$:u==="hdr"?jae:u==="exr"?Xae:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);const l=ED(s,o?[t]:t,h=>{h.setPath==null||h.setPath(e),i&&i(h)}),c=o?l[0]:l;c.mapping=o?ru:Qh;const f=3001,d=3e3;return"colorSpace"in c?c.colorSpace=r??o?"srgb":"srgb-linear":c.encoding=r??o?f:d,c}const hse=t=>t.current&&t.current.isScene,pse=t=>hse(t)?t.current:t;function AD(t,e,n,r,i=0){const a=pse(e||n),s=a.background,o=a.environment,u=a.backgroundBlurriness||0;return t!=="only"&&(a.environment=r),t&&(a.background=r),t&&a.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=i),()=>{t!=="only"&&(a.environment=o),t&&(a.background=s),t&&a.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=u)}}function CD({scene:t,background:e=!1,blur:n,map:r}){const i=qi(a=>a.scene);return $.useLayoutEffect(()=>{if(r)return AD(e,t,i,r,n)},[i,t,r,e,n]),null}function U9({background:t=!1,scene:e,blur:n,...r}){const i=B9(r),a=qi(s=>s.scene);return $.useLayoutEffect(()=>AD(t,e,a,i,n),[i,t,e,a,n]),null}function mse({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:a,background:s=!1,blur:o,scene:u,files:l,path:c,preset:f=void 0,extensions:d}){const h=qi(g=>g.gl),m=qi(g=>g.scene),v=$.useRef(null),[y]=$.useState(()=>new zf),p=$.useMemo(()=>{const g=new XT(r);return g.texture.type=Ki,g},[r]);$.useLayoutEffect(()=>(i===1&&v.current.update(h,y),AD(s,u,m,p.texture,o)),[t,y,p.texture,u,m,s,i,h]);let x=1;return Ro(()=>{(i===1/0||x<i)&&(v.current.update(h,y),x++)}),$.createElement($.Fragment,null,f9($.createElement($.Fragment,null,t,$.createElement("cubeCamera",{ref:v,args:[e,n,p]}),l||f?$.createElement(U9,{background:!0,files:l,preset:f,path:c,extensions:d}):a?$.createElement(CD,{background:!0,map:a,extensions:d}):null),y))}function vse(t){var e,n,r,i;const a=B9(t),s=t.map||a;$.useMemo(()=>t0({GroundProjectedEnvImpl:Hae}),[]);const o=$.useMemo(()=>[s],[s]),u=(e=t.ground)==null?void 0:e.height,l=(n=t.ground)==null?void 0:n.radius,c=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return $.createElement($.Fragment,null,$.createElement(CD,hn({},t,{map:s})),$.createElement("groundProjectedEnvImpl",{args:o,scale:c,height:u,radius:l}))}function gse(t){return t.ground?$.createElement(vse,t):t.map?$.createElement(CD,t):t.children?$.createElement(mse,t):$.createElement(U9,t)}const oM=$.forwardRef(({args:t,map:e,toneMapped:n=!1,color:r="white",form:i="rect",intensity:a=1,scale:s=1,target:o,children:u,...l},c)=>{const f=$.useRef(null);return $.useLayoutEffect(()=>{!u&&!l.material&&(lf(f.current.material,{color:r}),f.current.material.color.multiplyScalar(a))},[r,a,u,l.material]),$.useLayoutEffect(()=>{o&&f.current.lookAt(Array.isArray(o)?new fe(...o):o)},[o]),s=Array.isArray(s)&&s.length===2?[s[0],s[1],1]:s,$.createElement("mesh",hn({ref:Nie([f,c]),scale:s},l),i==="circle"?$.createElement("ringGeometry",{args:[0,1,64]}):i==="ring"?$.createElement("ringGeometry",{args:[.5,1,64]}):i==="rect"?$.createElement("planeGeometry",null):$.createElement(i,{args:t}),u||(l.material?null:$.createElement("meshBasicMaterial",{toneMapped:n,map:e,side:ri})))});var yse={BASE_URL:"/spherical-trochoids/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const eF=t=>{let e;const n=new Set,r=(c,f)=>{const d=typeof c=="function"?c(e):c;if(!Object.is(d,e)){const h=e;e=f??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(m=>m(e,h))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(yse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=e=t(r,i,u);return u},xse=t=>t?eF(t):eF;var z9={exports:{}},k9={},$9={exports:{}},H9={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=$;function bse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wse=typeof Object.is=="function"?Object.is:bse,Sse=ip.useState,_se=ip.useEffect,Ese=ip.useLayoutEffect,Mse=ip.useDebugValue;function Ase(t,e){var n=e(),r=Sse({inst:{value:n,getSnapshot:e}}),i=r[0].inst,a=r[1];return Ese(function(){i.value=n,i.getSnapshot=e,uM(i)&&a({inst:i})},[t,n,e]),_se(function(){return uM(i)&&a({inst:i}),t(function(){uM(i)&&a({inst:i})})},[t]),Mse(n),n}function uM(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wse(t,n)}catch{return!0}}function Cse(t,e){return e()}var Tse=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cse:Ase;H9.useSyncExternalStore=ip.useSyncExternalStore!==void 0?ip.useSyncExternalStore:Tse;$9.exports=H9;var Dse=$9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw=$,Nse=Dse;function Rse(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pse=typeof Object.is=="function"?Object.is:Rse,Ise=Nse.useSyncExternalStore,Ose=Vw.useRef,Fse=Vw.useEffect,Lse=Vw.useMemo,Bse=Vw.useDebugValue;k9.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var a=Ose(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=Lse(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&s.hasValue){var m=s.value;if(i(m,h))return f=m}return f=h}if(m=f,Pse(c,h))return m;var v=r(h);return i!==void 0&&i(m,v)?m:(c=h,f=v)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,n,r,i]);var o=Ise(t,a[0],a[1]);return Fse(function(){s.hasValue=!0,s.value=o},[o]),Bse(o),o};z9.exports=k9;var Use=z9.exports;const zse=Qs(Use);var G9={BASE_URL:"/spherical-trochoids/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:kse}=Ae,{useSyncExternalStoreWithSelector:$se}=zse;let tF=!1;const Hse=t=>t;function Gse(t,e=Hse,n){(G9?"production":void 0)!=="production"&&n&&!tF&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),tF=!0);const r=$se(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return kse(r),r}const nF=t=>{(G9?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?xse(t):t,n=(r,i)=>Gse(e,r,i);return Object.assign(n,e),n},V9=t=>t?nF(t):nF;var Vse={BASE_URL:"/spherical-trochoids/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Wse=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(s,o,u)=>{let l=s;if(o){const c=(u==null?void 0:u.equalityFn)||Object.is;let f=s(r.getState());l=d=>{const h=s(d);if(!c(f,h)){const m=f;o(f=h,m)}},u!=null&&u.fireImmediately&&o(f,f)}return i(l)},t(e,n,r)},W9=Wse;function qse(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var a;const s=u=>u===null?null:JSON.parse(u,e==null?void 0:e.reviver),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const gg=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return gg(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return gg(r)(n)}}}},jse=(t,e)=>(n,r,i)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:y=>y,version:0,merge:(y,p)=>({...p,...y}),...e},s=!1;const o=new Set,u=new Set;let l;try{l=a.getStorage()}catch{}if(!l)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...y)},r,i);const c=gg(a.serialize),f=()=>{const y=a.partialize({...r()});let p;const x=c({state:y,version:a.version}).then(g=>l.setItem(a.name,g)).catch(g=>{p=g});if(p)throw p;return x},d=i.setState;i.setState=(y,p)=>{d(y,p),f()};const h=t((...y)=>{n(...y),f()},r,i);let m;const v=()=>{var y;if(!l)return;s=!1,o.forEach(x=>x(r()));const p=((y=a.onRehydrateStorage)==null?void 0:y.call(a,r()))||void 0;return gg(l.getItem.bind(l))(a.name).then(x=>{if(x)return a.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var g;return m=a.merge(x,(g=r())!=null?g:h),n(m,!0),f()}).then(()=>{p==null||p(m,void 0),s=!0,u.forEach(x=>x(m))}).catch(x=>{p==null||p(void 0,x)})};return i.persist={setOptions:y=>{a={...a,...y},y.getStorage&&(l=y.getStorage())},clearStorage:()=>{l==null||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>v(),hasHydrated:()=>s,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(u.add(y),()=>{u.delete(y)})},v(),m||h},Xse=(t,e)=>(n,r,i)=>{let a={storage:qse(()=>localStorage),partialize:v=>v,version:0,merge:(v,y)=>({...y,...v}),...e},s=!1;const o=new Set,u=new Set;let l=a.storage;if(!l)return t((...v)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...v)},r,i);const c=()=>{const v=a.partialize({...r()});return l.setItem(a.name,{state:v,version:a.version})},f=i.setState;i.setState=(v,y)=>{f(v,y),c()};const d=t((...v)=>{n(...v),c()},r,i);i.getInitialState=()=>d;let h;const m=()=>{var v,y;if(!l)return;s=!1,o.forEach(x=>{var g;return x((g=r())!=null?g:d)});const p=((y=a.onRehydrateStorage)==null?void 0:y.call(a,(v=r())!=null?v:d))||void 0;return gg(l.getItem.bind(l))(a.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==a.version){if(a.migrate)return a.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var g;return h=a.merge(x,(g=r())!=null?g:d),n(h,!0),c()}).then(()=>{p==null||p(h,void 0),h=r(),s=!0,u.forEach(x=>x(h))}).catch(x=>{p==null||p(void 0,x)})};return i.persist={setOptions:v=>{a={...a,...v},v.storage&&(l=v.storage)},clearStorage:()=>{l==null||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>m(),hasHydrated:()=>s,onHydrate:v=>(o.add(v),()=>{o.delete(v)}),onFinishHydration:v=>(u.add(v),()=>{u.delete(v)})},a.skipHydration||m(),h||d},Yse=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Vse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),jse(t,e)):Xse(t,e),Zse=Yse,vi={calculationType:"Fixed Interval",stepSize:.01,innerGeometryShape:"Sphere",innerGeometryRadius1:4,innerGeometryRadius2:1,outerGeometryShape:"Sphere",outerGeometryRadius:1,dEqualsOuterGeometryRadius:!0,dLineRadius:1,curveTheta:"2t",curvePhi:"t",curveTRange:[-10,40],curveTStart:-10},Ol=20,_v=-200,Ev=200,Ia={stepSizeRange:[.01,.1],innerGeometryRadius1Range:[.25,6],innerGeometryRadius2Range:[.25,6],outerGeometryRadiusRange:[.1,10],dLineRadiusRange:[.1,10],curveTRangeRange:[_v,Ev],curveTStartRange:[_v,Ev-Ol]},wt={backgroundColor:"#171717",innerGeometryVisible:!0,innerGeometryMaterial:"MeshStandardMaterial",innerGeometryColor:"#100e19",innerGeometryEmissive:"#070808",innerGeometryEmissiveIntensity:.4,innerGeometryMetalness:.62,innerGeometryRoughness:.16,innerGeometryFlatShading:!0,innerGeometryWireframe:!1,outerGeometryVisible:!0,outerGeometryMaterial:"MeshStandardMaterial",outerGeometryColor:"#100e19",outerGeometryEmissive:"#070808",outerGeometryEmissiveIntensity:.4,outerGeometryMetalness:.62,outerGeometryRoughness:.16,outerGeometryFlatShading:!0,outerGeometryWireframe:!1,dLineVisible:!0,dLineWidth:.02,dLineMaterial:"MeshStandardMaterial",dLineColor:"#d5d4e3",dLineEmissive:"#d2e0de",dLineEmissiveIntensity:1.3,dLineMetalness:.56,dLineRoughness:.18,dLineFlatShading:!1,dLineWireframe:!1,dPointVisible:!0,dPointRadius:.05,dPointMaterial:"MeshStandardMaterial",dPointColor:"#d5d4e3",dPointEmissive:"#d2e0de",dPointEmissiveIntensity:1.3,dPointMetalness:.56,dPointRoughness:.18,dPointFlatShading:!1,dPointWireframe:!1,curveVisible:!0,curveDrawType:"From Start Point",curveColor:"#ffffff",curveWidth:.05,curveTrailLength:500,curveTrailDecay:.01},dr={ambientEnabled:!0,ambientIntensity:1,ambientColor:"#ffffff",directionalLightEnabled:!0,directionalLightIntensity:.6,directionalLightColor:"#ffffff",directionalLightPosition:[0,0,20],lightformer1Enabled:!0,lightformer1Form:"ring",lightformer1Intensity:2.1,lightformer1Color:"#fdf9ff",lightformer1Scale:31,lightformer1Position:[0,0,20],lightformer2Enabled:!0,lightformer2Form:"circle",lightformer2Intensity:.2,lightformer2Color:"#fdf9ff",lightformer2Scale:56,lightformer2Position:[0,0,-20],lightformer3Enabled:!1,lightformer3Form:"circle",lightformer3Intensity:.4,lightformer3Color:"#50bdff",lightformer3Scale:32,lightformer3Position:[10,10,5]},Kse=t=>{const e=Kn.getState().saveLastNPlots,n=[...Kn.getState().plotHistory];return n.unshift(t),n.length>e&&n.pop(),Kn.setState({currentPlot:t,plotHistory:n}),null},Kn=V9()(W9(Zse(()=>({saveLastNPlots:10,currentPlot:vi,plotHistory:[vi,vi,vi,vi],addToPlotHistory:Kse}),{name:"general-storage"})));var q9={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Kt(t){return typeof t=="number"}function Qt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function qu(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function a0(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Us(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Xi(t){return typeof t=="string"}var Bn=Array.isArray;function Ft(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Zs(t){return Array.isArray(t)||Ft(t)}function lb(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Sf(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function TD(t){return t&&t.constructor.prototype.isRange===!0||!1}function Ww(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Qse(t){return typeof t=="boolean"}function Jse(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function j9(t){return t&&t.constructor.prototype.isHelp===!0||!1}function eoe(t){return typeof t=="function"}function toe(t){return t instanceof Date}function noe(t){return t instanceof RegExp}function s0(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!qu(t)&&!a0(t))}function roe(t){return t===null}function ioe(t){return t===void 0}function Hf(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Os(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function aoe(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function soe(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function ooe(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tn(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function T2(t){return Tn(t)||Qr(t)&&t.args.length===1&&Tn(t.args[0])&&"-+~".includes(t.op)}function o0(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function hc(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Np(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function qn(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function qw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qr(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function el(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function uoe(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function loe(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function bi(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function X9(t){return t&&t.constructor.prototype.isChain===!0||!1}function Jn(t){var e=typeof t;return e==="object"?t===null?"null":Qt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Wt(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Wt(n)});if(t instanceof Date)return new Date(t.valueOf());if(Qt(t))return t;if(s0(t))return coe(t,Wt);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function coe(t,e){var n={};for(var r in t)St(t,r)&&(n[r]=e(t[r]));return n}function Y9(t,e){for(var n in e)St(e,n)&&(t[n]=e[n]);return t}function Gf(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!Gf(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Gf(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function foe(t,e,n){var r=!0,i;Object.defineProperty(t,e,{get:function(){return r&&(i=n(),r=!1),i},set:function(s){i=s,r=!1},configurable:!0,enumerable:!0})}function St(t,e){return t&&Object.hasOwnProperty.call(t,e)}function doe(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],a=t[i];a!==void 0&&(n[i]=a)}return n}var hoe=["Matrix","Array"],poe=["number","BigNumber","Fraction"],et=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(q9)};hn(et,q9,{MATRIX_OPTIONS:hoe,NUMBER_OPTIONS:poe});function rF(){return!0}function Is(){return!1}function Jd(){}const iF="Argument is not a typed-function.";function Z9(){function t(W){return typeof W=="object"&&W!==null&&W.constructor===Object}const e=[{name:"number",test:function(W){return typeof W=="number"}},{name:"string",test:function(W){return typeof W=="string"}},{name:"boolean",test:function(W){return typeof W=="boolean"}},{name:"Function",test:function(W){return typeof W=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(W){return W instanceof Date}},{name:"RegExp",test:function(W){return W instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(W){return W===null}},{name:"undefined",test:function(W){return W===void 0}}],n={name:"any",test:rF,isAny:!0};let r,i,a=0,s={createCount:0};function o(W){const Y=r.get(W);if(Y)return Y;let de='Unknown type "'+W+'"';const xe=W.toLowerCase();let Ne;for(Ne of i)if(Ne.toLowerCase()===xe){de+='. Did you mean "'+Ne+'" ?';break}throw new TypeError(de)}function u(W){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const de=Y?o(Y).index:i.length,xe=[];for(let Be=0;Be<W.length;++Be){if(!W[Be]||typeof W[Be].name!="string"||typeof W[Be].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const $e=W[Be].name;if(r.has($e))throw new TypeError('Duplicate type name "'+$e+'"');xe.push($e),r.set($e,{name:$e,test:W[Be].test,isAny:W[Be].isAny,index:de+Be,conversionsTo:[]})}const Ne=i.slice(de);i=i.slice(0,de).concat(xe).concat(Ne);for(let Be=de+xe.length;Be<i.length;++Be)r.get(i[Be]).index=Be}function l(){r=new Map,i=[],a=0,u([n],!1)}l(),u(e);function c(){let W;for(W of i)r.get(W).conversionsTo=[];a=0}function f(W){const Y=i.filter(de=>{const xe=r.get(de);return!xe.isAny&&xe.test(W)});return Y.length?Y:["any"]}function d(W){return W&&typeof W=="function"&&"_typedFunctionData"in W}function h(W,Y,de){if(!d(W))throw new TypeError(iF);const xe=de&&de.exact,Ne=Array.isArray(Y)?Y.join(","):Y,Be=S(Ne),$e=y(Be);if(!xe||$e in W.signatures){const at=W._typedFunctionData.signatureMap.get($e);if(at)return at}const Ie=Be.length;let Ye;if(xe){Ye=[];let at;for(at in W.signatures)Ye.push(W._typedFunctionData.signatureMap.get(at))}else Ye=W._typedFunctionData.signatures;for(let at=0;at<Ie;++at){const tt=Be[at],Ze=[];let we;for(we of Ye){const B=T(we.params,at);if(!(!B||tt.restParam&&!B.restParam)){if(!B.hasAny){const se=g(B);if(tt.types.some(Te=>!se.has(Te.name)))continue}Ze.push(we)}}if(Ye=Ze,Ye.length===0)break}let Ve;for(Ve of Ye)if(Ve.params.length<=Ie)return Ve;throw new TypeError("Signature not found (signature: "+(W.name||"unnamed")+"("+y(Be,", ")+"))")}function m(W,Y,de){return h(W,Y,de).implementation}function v(W,Y){const de=o(Y);if(de.test(W))return W;const xe=de.conversionsTo;if(xe.length===0)throw new Error("There are no conversions to "+Y+" defined.");for(let Ne=0;Ne<xe.length;Ne++)if(o(xe[Ne].from).test(W))return xe[Ne].convert(W);throw new Error("Cannot convert "+W+" to "+Y)}function y(W){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return W.map(de=>de.name).join(Y)}function p(W){const Y=W.indexOf("...")===0,xe=(Y?W.length>3?W.slice(3):"any":W).split("|").map(Ie=>o(Ie.trim()));let Ne=!1,Be=Y?"...":"";return{types:xe.map(function(Ie){return Ne=Ie.isAny||Ne,Be+=Ie.name+"|",{name:Ie.name,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:null,conversionIndex:-1}}),name:Be.slice(0,-1),hasAny:Ne,hasConversion:!1,restParam:Y}}function x(W){const Y=W.types.map($e=>$e.name),de=F(Y);let xe=W.hasAny,Ne=W.name;const Be=de.map(function($e){const Ie=o($e.from);return xe=Ie.isAny||xe,Ne+="|"+$e.from,{name:$e.from,typeIndex:Ie.index,test:Ie.test,isAny:Ie.isAny,conversion:$e,conversionIndex:$e.index}});return{types:W.types.concat(Be),name:Ne,hasAny:xe,hasConversion:Be.length>0,restParam:W.restParam}}function g(W){return W.typeSet||(W.typeSet=new Set,W.types.forEach(Y=>W.typeSet.add(Y.name))),W.typeSet}function S(W){const Y=[];if(typeof W!="string")throw new TypeError("Signatures must be strings");const de=W.trim();if(de==="")return Y;const xe=de.split(",");for(let Ne=0;Ne<xe.length;++Ne){const Be=p(xe[Ne].trim());if(Be.restParam&&Ne!==xe.length-1)throw new SyntaxError('Unexpected rest parameter "'+xe[Ne]+'": only allowed for the last parameter');if(Be.types.length===0)return null;Y.push(Be)}return Y}function E(W){const Y=Ce(W);return Y?Y.restParam:!1}function _(W){if(!W||W.types.length===0)return rF;if(W.types.length===1)return o(W.types[0].name).test;if(W.types.length===2){const Y=o(W.types[0].name).test,de=o(W.types[1].name).test;return function(Ne){return Y(Ne)||de(Ne)}}else{const Y=W.types.map(function(de){return o(de.name).test});return function(xe){for(let Ne=0;Ne<Y.length;Ne++)if(Y[Ne](xe))return!0;return!1}}}function A(W){let Y,de,xe;if(E(W)){Y=Pe(W).map(_);const Ne=Y.length,Be=_(Ce(W)),$e=function(Ie){for(let Ye=Ne;Ye<Ie.length;Ye++)if(!Be(Ie[Ye]))return!1;return!0};return function(Ye){for(let Ve=0;Ve<Y.length;Ve++)if(!Y[Ve](Ye[Ve]))return!1;return $e(Ye)&&Ye.length>=Ne+1}}else return W.length===0?function(Be){return Be.length===0}:W.length===1?(de=_(W[0]),function(Be){return de(Be[0])&&Be.length===1}):W.length===2?(de=_(W[0]),xe=_(W[1]),function(Be){return de(Be[0])&&xe(Be[1])&&Be.length===2}):(Y=W.map(_),function(Be){for(let $e=0;$e<Y.length;$e++)if(!Y[$e](Be[$e]))return!1;return Be.length===Y.length})}function T(W,Y){return Y<W.length?W[Y]:E(W)?Ce(W):null}function M(W,Y){const de=T(W,Y);return de?g(de):new Set}function C(W){return W.conversion===null||W.conversion===void 0}function N(W,Y){const de=new Set;return W.forEach(xe=>{const Ne=M(xe.params,Y);let Be;for(Be of Ne)de.add(Be)}),de.has("any")?["any"]:Array.from(de)}function P(W,Y,de){let xe,Ne;const Be=W||"unnamed";let $e=de,Ie;for(Ie=0;Ie<Y.length;Ie++){const tt=[];if($e.forEach(Ze=>{const we=T(Ze.params,Ie),B=_(we);(Ie<Ze.params.length||E(Ze.params))&&B(Y[Ie])&&tt.push(Ze)}),tt.length===0){if(Ne=N($e,Ie),Ne.length>0){const Ze=f(Y[Ie]);return xe=new TypeError("Unexpected type of argument in function "+Be+" (expected: "+Ne.join(" or ")+", actual: "+Ze.join(" | ")+", index: "+Ie+")"),xe.data={category:"wrongType",fn:Be,index:Ie,actual:Ze,expected:Ne},xe}}else $e=tt}const Ye=$e.map(function(tt){return E(tt.params)?1/0:tt.params.length});if(Y.length<Math.min.apply(null,Ye))return Ne=N($e,Ie),xe=new TypeError("Too few arguments in function "+Be+" (expected: "+Ne.join(" or ")+", index: "+Y.length+")"),xe.data={category:"tooFewArgs",fn:Be,index:Y.length,expected:Ne},xe;const Ve=Math.max.apply(null,Ye);if(Y.length>Ve)return xe=new TypeError("Too many arguments in function "+Be+" (expected: "+Ve+", actual: "+Y.length+")"),xe.data={category:"tooManyArgs",fn:Be,index:Y.length,expectedLength:Ve},xe;const at=[];for(let tt=0;tt<Y.length;++tt)at.push(f(Y[tt]).join("|"));return xe=new TypeError('Arguments of type "'+at.join(", ")+'" do not match any of the defined signatures of function '+Be+"."),xe.data={category:"mismatch",actual:at},xe}function H(W){let Y=i.length+1;for(let de=0;de<W.types.length;de++)C(W.types[de])&&(Y=Math.min(Y,W.types[de].typeIndex));return Y}function L(W){let Y=a+1;for(let de=0;de<W.types.length;de++)C(W.types[de])||(Y=Math.min(Y,W.types[de].conversionIndex));return Y}function z(W,Y){if(W.hasAny){if(!Y.hasAny)return 1}else if(Y.hasAny)return-1;if(W.restParam){if(!Y.restParam)return 1}else if(Y.restParam)return-1;if(W.hasConversion){if(!Y.hasConversion)return 1}else if(Y.hasConversion)return-1;const de=H(W)-H(Y);if(de<0)return-1;if(de>0)return 1;const xe=L(W)-L(Y);return xe<0?-1:xe>0?1:0}function O(W,Y){const de=W.params,xe=Y.params,Ne=Ce(de),Be=Ce(xe),$e=E(de),Ie=E(xe);if($e&&Ne.hasAny){if(!Ie||!Be.hasAny)return 1}else if(Ie&&Be.hasAny)return-1;let Ye=0,Ve=0,at;for(at of de)at.hasAny&&++Ye,at.hasConversion&&++Ve;let tt=0,Ze=0;for(at of xe)at.hasAny&&++tt,at.hasConversion&&++Ze;if(Ye!==tt)return Ye-tt;if($e&&Ne.hasConversion){if(!Ie||!Be.hasConversion)return 1}else if(Ie&&Be.hasConversion)return-1;if(Ve!==Ze)return Ve-Ze;if($e){if(!Ie)return 1}else if(Ie)return-1;const we=(de.length-xe.length)*($e?-1:1);if(we!==0)return we;const B=[];let se=0;for(let me=0;me<de.length;++me){const ve=z(de[me],xe[me]);B.push(ve),se+=ve}if(se!==0)return se;let Te;for(Te of B)if(Te!==0)return Te;return 0}function F(W){if(W.length===0)return[];const Y=W.map(o);W.length>1&&Y.sort((Ne,Be)=>Ne.index-Be.index);let de=Y[0].conversionsTo;if(W.length===1)return de;de=de.concat([]);const xe=new Set(W);for(let Ne=1;Ne<Y.length;++Ne){let Be;for(Be of Y[Ne].conversionsTo)xe.has(Be.from)||(de.push(Be),xe.add(Be.from))}return de}function U(W,Y){let de=Y;if(W.some(Ne=>Ne.hasConversion)){const Ne=E(W),Be=W.map(I);de=function(){const Ie=[],Ye=Ne?arguments.length-1:arguments.length;for(let Ve=0;Ve<Ye;Ve++)Ie[Ve]=Be[Ve](arguments[Ve]);return Ne&&(Ie[Ye]=arguments[Ye].map(Be[Ye])),Y.apply(this,Ie)}}let xe=de;if(E(W)){const Ne=W.length-1;xe=function(){return de.apply(this,Ee(arguments,0,Ne).concat([Ee(arguments,Ne)]))}}return xe}function I(W){let Y,de,xe,Ne;const Be=[],$e=[];switch(W.types.forEach(function(Ie){Ie.conversion&&(Be.push(o(Ie.conversion.from).test),$e.push(Ie.conversion.convert))}),$e.length){case 0:return function(Ye){return Ye};case 1:return Y=Be[0],xe=$e[0],function(Ye){return Y(Ye)?xe(Ye):Ye};case 2:return Y=Be[0],de=Be[1],xe=$e[0],Ne=$e[1],function(Ye){return Y(Ye)?xe(Ye):de(Ye)?Ne(Ye):Ye};default:return function(Ye){for(let Ve=0;Ve<$e.length;Ve++)if(Be[Ve](Ye))return $e[Ve](Ye);return Ye}}}function j(W){function Y(de,xe,Ne){if(xe<de.length){const Be=de[xe];let $e=[];if(Be.restParam){const Ie=Be.types.filter(C);Ie.length<Be.types.length&&$e.push({types:Ie,name:"..."+Ie.map(Ye=>Ye.name).join("|"),hasAny:Ie.some(Ye=>Ye.isAny),hasConversion:!1,restParam:!0}),$e.push(Be)}else $e=Be.types.map(function(Ie){return{types:[Ie],name:Ie.name,hasAny:Ie.isAny,hasConversion:Ie.conversion,restParam:!1}});return ne($e,function(Ie){return Y(de,xe+1,Ne.concat([Ie]))})}else return[Ne]}return Y(W,0,[])}function ee(W,Y){const de=Math.max(W.length,Y.length);for(let Ie=0;Ie<de;Ie++){const Ye=M(W,Ie),Ve=M(Y,Ie);let at=!1,tt;for(tt of Ve)if(Ye.has(tt)){at=!0;break}if(!at)return!1}const xe=W.length,Ne=Y.length,Be=E(W),$e=E(Y);return Be?$e?xe===Ne:Ne>=xe:$e?xe>=Ne:xe===Ne}function J(W){return W.map(Y=>Me(Y)?Q(Y.referToSelf.callback):te(Y)?Fe(Y.referTo.references,Y.referTo.callback):Y)}function q(W,Y,de){const xe=[];let Ne;for(Ne of W){let Be=de[Ne];if(typeof Be!="number")throw new TypeError('No definition for referenced signature "'+Ne+'"');if(Be=Y[Be],typeof Be!="function")return!1;xe.push(Be)}return xe}function ae(W,Y,de){const xe=J(W),Ne=new Array(xe.length).fill(!1);let Be=!0;for(;Be;){Be=!1;let $e=!0;for(let Ie=0;Ie<xe.length;++Ie){if(Ne[Ie])continue;const Ye=xe[Ie];if(Me(Ye))xe[Ie]=Ye.referToSelf.callback(de),xe[Ie].referToSelf=Ye.referToSelf,Ne[Ie]=!0,$e=!1;else if(te(Ye)){const Ve=q(Ye.referTo.references,xe,Y);Ve?(xe[Ie]=Ye.referTo.callback.apply(this,Ve),xe[Ie].referTo=Ye.referTo,Ne[Ie]=!0,$e=!1):Be=!0}}if($e&&Be)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return xe}function be(W){const Y=/\bthis(\(|\.signatures\b)/;Object.keys(W).forEach(de=>{const xe=W[de];if(Y.test(xe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ue(W,Y){if(s.createCount++,Object.keys(Y).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&be(Y);const de=[],xe=[],Ne={},Be=[];let $e;for($e in Y){if(!Object.prototype.hasOwnProperty.call(Y,$e))continue;const ke=S($e);if(!ke)continue;de.forEach(function(yt){if(ee(yt,ke))throw new TypeError('Conflicting signatures "'+y(yt)+'" and "'+y(ke)+'".')}),de.push(ke);const ht=xe.length;xe.push(Y[$e]);const rt=ke.map(x);let it;for(it of j(rt)){const yt=y(it);Be.push({params:it,name:yt,fn:ht}),it.every(Nt=>!Nt.hasConversion)&&(Ne[yt]=ht)}}Be.sort(O);const Ie=ae(xe,Ne,je);let Ye;for(Ye in Ne)Object.prototype.hasOwnProperty.call(Ne,Ye)&&(Ne[Ye]=Ie[Ne[Ye]]);const Ve=[],at=new Map;for(Ye of Be)at.has(Ye.name)||(Ye.fn=Ie[Ye.fn],Ve.push(Ye),at.set(Ye.name,Ye));const tt=Ve[0]&&Ve[0].params.length<=2&&!E(Ve[0].params),Ze=Ve[1]&&Ve[1].params.length<=2&&!E(Ve[1].params),we=Ve[2]&&Ve[2].params.length<=2&&!E(Ve[2].params),B=Ve[3]&&Ve[3].params.length<=2&&!E(Ve[3].params),se=Ve[4]&&Ve[4].params.length<=2&&!E(Ve[4].params),Te=Ve[5]&&Ve[5].params.length<=2&&!E(Ve[5].params),me=tt&&Ze&&we&&B&&se&&Te;for(let ke=0;ke<Ve.length;++ke)Ve[ke].test=A(Ve[ke].params);const ve=tt?_(Ve[0].params[0]):Is,Ke=Ze?_(Ve[1].params[0]):Is,lt=we?_(Ve[2].params[0]):Is,Dt=B?_(Ve[3].params[0]):Is,_t=se?_(Ve[4].params[0]):Is,an=Te?_(Ve[5].params[0]):Is,gn=tt?_(Ve[0].params[1]):Is,Vn=Ze?_(Ve[1].params[1]):Is,rr=we?_(Ve[2].params[1]):Is,Sn=B?_(Ve[3].params[1]):Is,$r=se?_(Ve[4].params[1]):Is,Fi=Te?_(Ve[5].params[1]):Is;for(let ke=0;ke<Ve.length;++ke)Ve[ke].implementation=U(Ve[ke].params,Ve[ke].fn);const Ss=tt?Ve[0].implementation:Jd,pu=Ze?Ve[1].implementation:Jd,Da=we?Ve[2].implementation:Jd,Li=B?Ve[3].implementation:Jd,Zt=se?Ve[4].implementation:Jd,mu=Te?Ve[5].implementation:Jd,hl=tt?Ve[0].params.length:-1,K=Ze?Ve[1].params.length:-1,oe=we?Ve[2].params.length:-1,Re=B?Ve[3].params.length:-1,Z=se?Ve[4].params.length:-1,ce=Te?Ve[5].params.length:-1,he=me?6:0,De=Ve.length,Se=Ve.map(ke=>ke.test),He=Ve.map(ke=>ke.implementation),We=function(){for(let ht=he;ht<De;ht++)if(Se[ht](arguments))return He[ht].apply(this,arguments);return s.onMismatch(W,arguments,Ve)};function je(ke,ht){return arguments.length===hl&&ve(ke)&&gn(ht)?Ss.apply(this,arguments):arguments.length===K&&Ke(ke)&&Vn(ht)?pu.apply(this,arguments):arguments.length===oe&&lt(ke)&&rr(ht)?Da.apply(this,arguments):arguments.length===Re&&Dt(ke)&&Sn(ht)?Li.apply(this,arguments):arguments.length===Z&&_t(ke)&&$r(ht)?Zt.apply(this,arguments):arguments.length===ce&&an(ke)&&Fi(ht)?mu.apply(this,arguments):We.apply(this,arguments)}try{Object.defineProperty(je,"name",{value:W})}catch{}return je.signatures=Ne,je._typedFunctionData={signatures:Ve,signatureMap:at},je}function pe(W,Y,de){throw P(W,Y,de)}function Pe(W){return Ee(W,0,W.length-1)}function Ce(W){return W[W.length-1]}function Ee(W,Y,de){return Array.prototype.slice.call(W,Y,de)}function Oe(W,Y){for(let de=0;de<W.length;de++)if(Y(W[de]))return W[de]}function ne(W,Y){return Array.prototype.concat.apply([],W.map(Y))}function Le(){const W=Pe(arguments).map(de=>y(S(de))),Y=Ce(arguments);if(typeof Y!="function")throw new TypeError("Callback function expected as last argument");return Fe(W,Y)}function Fe(W,Y){return{referTo:{references:W,callback:Y}}}function Q(W){if(typeof W!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:W}}}function te(W){return W&&typeof W.referTo=="object"&&Array.isArray(W.referTo.references)&&typeof W.referTo.callback=="function"}function Me(W){return W&&typeof W.referToSelf=="object"&&typeof W.referToSelf.callback=="function"}function re(W,Y){if(!W)return Y;if(Y&&Y!==W){const de=new Error("Function names do not match (expected: "+W+", actual: "+Y+")");throw de.data={actual:Y,expected:W},de}return W}function V(W){let Y;for(const de in W)Object.prototype.hasOwnProperty.call(W,de)&&(d(W[de])||typeof W[de].signature=="string")&&(Y=re(Y,W[de].name));return Y}function G(W,Y){let de;for(de in Y)if(Object.prototype.hasOwnProperty.call(Y,de)){if(de in W&&Y[de]!==W[de]){const xe=new Error('Signature "'+de+'" is defined twice');throw xe.data={signature:de,sourceFunction:Y[de],destFunction:W[de]},xe}W[de]=Y[de]}}const le=s;s=function(W){const Y=typeof W=="string",de=Y?1:0;let xe=Y?W:"";const Ne={};for(let Be=de;Be<arguments.length;++Be){const $e=arguments[Be];let Ie={},Ye;if(typeof $e=="function"?(Ye=$e.name,typeof $e.signature=="string"?Ie[$e.signature]=$e:d($e)&&(Ie=$e.signatures)):t($e)&&(Ie=$e,Y||(Ye=V($e))),Object.keys(Ie).length===0){const Ve=new TypeError("Argument to 'typed' at index "+Be+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ve.data={index:Be,argument:$e},Ve}Y||(xe=re(xe,Ye)),G(Ne,Ie)}return ue(xe||"",Ne)},s.create=Z9,s.createCount=le.createCount,s.onMismatch=pe,s.throwMismatchError=pe,s.createError=P,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=o,s.referTo=Le,s.referToSelf=Q,s.convert=v,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(W,Y){let de="any";Y!==!1&&r.has("Object")&&(de="Object"),s.addTypes([W],de)};function _e(W){if(!W||typeof W.from!="string"||typeof W.to!="string"||typeof W.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(W.to===W.from)throw new SyntaxError('Illegal to define conversion from "'+W.from+'" to itself.')}return s.addConversion=function(W){_e(W);const Y=o(W.to);if(Y.conversionsTo.every(function(de){return de.from!==W.from}))Y.conversionsTo.push({from:W.from,convert:W.convert,index:a++});else throw new Error('There is already a conversion from "'+W.from+'" to "'+Y.name+'"')},s.addConversions=function(W){W.forEach(s.addConversion)},s.removeConversion=function(W){_e(W);const Y=o(W.to),de=Oe(Y.conversionsTo,Ne=>Ne.from===W.from);if(!de)throw new Error("Attempt to remove nonexistent conversion from "+W.from+" to "+W.to);if(de.convert!==W.convert)throw new Error("Conversion to remove does not match existing conversion");const xe=Y.conversionsTo.indexOf(de);Y.conversionsTo.splice(xe,1)},s.resolve=function(W,Y){if(!d(W))throw new TypeError(iF);const de=W._typedFunctionData.signatures;for(let xe=0;xe<de.length;++xe)if(de[xe].test(Y))return de[xe];return null},s}const Ch=Z9();function Ct(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}var ql=Math.sign||function(t){return t>0?1:t<0?-1:0},moe=Math.log2||function(e){return Math.log(e)/Math.LN2},voe=Math.log10||function(e){return Math.log(e)/Math.LN10},goe=Math.log1p||function(t){return Math.log(t+1)},yoe=Math.cbrt||function(e){if(e===0)return e;var n=e<0,r;return n&&(e=-e),isFinite(e)?(r=Math.exp(Math.log(e)/3),r=(e/(r*r)+2*r)/3):r=e,n?-r:r},xoe=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function lM(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Ct(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Ct(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),a="i".concat(n)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function Rf(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=K9(e);switch(n){case"fixed":return Q9(t,r);case"exponential":return J9(t,r);case"engineering":return boe(t,r);case"bin":return lM(t,2,i);case"oct":return lM(t,8,i);case"hex":return lM(t,16,i);case"auto":return woe(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function K9(t){var e="auto",n,r;if(t!==void 0)if(Kt(t))n=t;else if(Qt(t))n=t.toNumber();else if(s0(t))t.precision!==void 0&&(n=aF(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=aF(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function jw(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),a=r.indexOf(".");i+=a!==-1?a-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:n,coefficients:s,exponent:i}}function boe(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=jw(t),r=Xw(n,e),i=r.exponent,a=r.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Kt(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),u=0;u<o;u++)a.push(0);for(var l=Math.abs(i-s),c=1;l>0;)c++,l--;var f=a.slice(c).join(""),d=Kt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",h=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return r.sign+h}function Q9(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=jw(t),r=typeof e=="number"?Xw(n,n.exponent+1+e):n,i=r.coefficients,a=r.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(Uh(s-i.length))),a<0&&(i=Uh(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),r.sign+i.join("")}function J9(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=jw(t),r=e?Xw(n,e):n,i=r.coefficients,a=r.exponent;i.length<e&&(i=i.concat(Uh(e-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function woe(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=sF(n==null?void 0:n.lowerExp,-3),i=sF(n==null?void 0:n.upperExp,5),a=jw(t),s=e?Xw(a,e):a;if(s.exponent<r||s.exponent>=i)return J9(t,e);var o=s.coefficients,u=s.exponent;o.length<e&&(o=o.concat(Uh(e-o.length))),o=o.concat(Uh(u-o.length+1+(o.length<e?e-o.length:0))),o=Uh(-u).concat(o);var l=u>0?u:0;return l<o.length-1&&o.splice(l+1,0,"."),s.sign+o.join("")}function Xw(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var a=e-1;for(r[a]++;r[a]===10;)r.pop(),a===0&&(r.unshift(0),n.exponent++,a++),a--,r[a]++}}return n}function Uh(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Soe(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var _oe=Number.EPSILON||2220446049250313e-31;function fs(t,e,n){if(n==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<=_oe?!0:r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}var Eoe=Math.acosh||function(t){return Math.log(Math.sqrt(t*t-1)+t)},Moe=Math.asinh||function(t){return Math.log(Math.sqrt(t*t+1)+t)},Aoe=Math.atanh||function(t){return Math.log((1+t)/(1-t))/2},Coe=Math.cosh||function(t){return(Math.exp(t)+Math.exp(-t))/2},Toe=Math.sinh||function(t){return(Math.exp(t)-Math.exp(-t))/2},Doe=Math.tanh||function(t){var e=Math.exp(2*t);return(e-1)/(e+1)};function Noe(t,e){var n=t>0?!0:t<0?!1:1/t===1/0,r=e>0?!0:e<0?!1:1/e===1/0;return n^r?-t:t}function aF(t,e){if(Kt(t))return t;if(Qt(t))return t.toNumber();e()}function sF(t,e){return Kt(t)?t:Qt(t)?t.toNumber():e}function cM(t,e,n){var r=t.constructor,i=new r(2),a="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Ct(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),a="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Roe(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=K9(e);switch(n){case"fixed":return Ioe(t,r);case"exponential":return oF(t,r);case"engineering":return Poe(t,r);case"bin":return cM(t,2,i);case"oct":return cM(t,8,i);case"hex":return cM(t,16,i);case"auto":{var a=uF(e==null?void 0:e.lowerExp,-3),s=uF(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,u=t.toSignificantDigits(r),l=u.e;return l>=a&&l<s?o=u.toFixed():o=oF(t,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Poe(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),a=i.toPrecision(e);if(a.indexOf("e")!==-1){var s=t.constructor;a=new s(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}function oF(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Ioe(t,e){return t.toFixed(e)}function uF(t,e){return Kt(t)?t:Qt(t)?t.toNumber():e}function Ooe(t,e){var n=t.length-e.length,r=t.length;return t.substring(n,r)===e}function on(t,e){var n=Foe(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Foe(t,e){if(typeof t=="number")return Rf(t,e);if(Qt(t))return Roe(t,e);if(Loe(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return e7(t,e);if(Xi(t))return Th(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Th(r)+": "+on(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Th(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in lF?lF[i]:i,r++}return'"'+n+'"'}var lF={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function $s(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function e7(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=e7(t[i],e);return n+="]",n}else return on(t,e)}function Loe(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function D2(t,e){if(!Xi(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Jn(t)+", index: 0)");if(!Xi(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+Jn(e)+", index: 1)");return t===e?0:t>e?1:-1}function un(t,e,n){if(!(this instanceof un))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}un.prototype=new RangeError;un.prototype.constructor=RangeError;un.prototype.name="DimensionError";un.prototype.isDimensionError=!0;function Po(t,e,n){if(!(this instanceof Po))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Po.prototype=new RangeError;Po.prototype.constructor=RangeError;Po.prototype.name="IndexError";Po.prototype.isIndexError=!0;function Yt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function t7(t,e,n){var r,i=t.length;if(i!==e[n])throw new un(i,e[n]);if(n<e.length-1){var a=n+1;for(r=0;r<i;r++){var s=t[r];if(!Array.isArray(s))throw new un(e.length-1,e.length,"<");t7(t[r],e,a)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new un(e.length+1,e.length,">")}function cF(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new un(t.length,0)}else t7(t,e,0)}function cb(t,e){var n=t.isMatrix?t._size:Yt(t),r=e._sourceSize;r.forEach((i,a)=>{if(i!==null&&i!==n[a])throw new un(i,n[a])})}function Xn(t,e){if(t!==void 0){if(!Kt(t)||!Ct(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Po(t,e)}}function ap(t){for(var e=0;e<t._dimensions.length;++e){var n=t._dimensions[e];if(n._data&&Bn(n._data)){if(n._size[0]===0)return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(Xi(n)&&n.length===0)return!0}return!1}function sp(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Kt(i)||!Ct(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+on(e)+")")}),(Kt(t)||Qt(t))&&(t=[t]);var r=n!==void 0?n:0;return N2(t,e,0,r),t}function N2(t,e,n,r){var i,a,s=t.length,o=e[n],u=Math.min(s,o);if(t.length=o,n<e.length-1){var l=n+1;for(i=0;i<u;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),N2(a,e,l,r);for(i=u;i<o;i++)a=[],t[i]=a,N2(a,e,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=u;i<o;i++)t[i]=r}}function DD(t,e){var n=Pn(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new un(0,r,"!=");e=ND(e,r);var i=n7(e);if(r!==i)throw new un(i,r,"!=");try{return Boe(n,e)}catch(a){throw a instanceof un?new un(i,r,"!="):a}}function ND(t,e){var n=n7(t),r=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,u=e%n===0;if(o)if(u)r[a]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function n7(t){return t.reduce((e,n)=>e*n,1)}function Boe(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var a=e[i];r=[];for(var s=n.length/a,o=0;o<s;o++)r.push(n.slice(o*a,(o+1)*a));n=r}return n}function fb(t,e){for(var n=e||Yt(t);Array.isArray(t)&&t.length===1;)t=t[0],n.shift();for(var r=n.length;n[r-1]===1;)r--;return r<n.length&&(t=r7(t,r,0),n.length=r),t}function r7(t,e,n){var r,i;if(n<e){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=r7(t[r],e,a)}else for(;Array.isArray(t);)t=t[0];return t}function i7(t,e,n,r){var i=r||Yt(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=a7(t,e,0);i.length<e;)i.push(1);return t}function a7(t,e,n){var r,i;if(Array.isArray(t)){var a=n+1;for(r=0,i=t.length;r<i;r++)t[r]=a7(t[r],e,a)}else for(var s=n;s<e;s++)t=[t];return t}function Pn(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function ju(t,e){return Array.prototype.map.call(t,e)}function Yw(t,e){Array.prototype.forEach.call(t,e)}function s7(t,e){if(Yt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,e)}function db(t,e){if(Yt(t).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,n=>e.test(n))}function fF(t,e){return Array.prototype.join.call(t,e)}function op(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;var e=[],n=0;e[0]={value:t[0],identifier:0};for(var r=1;r<t.length;r++)t[r]===t[r-1]?n++:n=0,e.push({value:t[r],identifier:n});return e}function hb(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(t.length===0)return t;for(var e=[],n=0;n<t.length;n++)e.push(t[n].value);return e}function yg(t,e){for(var n,r=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(r=a.length),s&&a.length!==r)return;var o=s?yg(a,e):e(a);if(n===void 0)n=o;else if(n!==o)return"mixed"}return n}function o7(t,e,n,r){if(r<n){if(t.length!==e.length)throw new un(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=o7(t[a],e[a],n,r+1);return i}else return t.concat(e)}function u7(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return o7(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Uoe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(d=>d.length),i=Math.max(...r),a=new Array(i).fill(null),s=0;s<e.length;s++)for(var o=e[s],u=r[s],l=0;l<u;l++){var c=i-u+l;o[l]>a[c]&&(a[c]=o[l])}for(var f=0;f<e.length;f++)pb(e[f],a);return a}function pb(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var a=n-r+i;if(t[i]<e[a]&&t[i]>1||t[i]>e[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[a]))}}function dF(t,e){var n=Yt(t);if(Gf(n,e))return t;pb(n,e);var r=Uoe(n,e),i=r.length,a=[...Array(i-n.length).fill(1),...n],s=koe(t);n.length<i&&(s=DD(s,a),n=Yt(s));for(var o=0;o<i;o++)n[o]<r[o]&&(s=zoe(s,r[o],o),n=Yt(s));return s}function zoe(t,e,n){return u7(...Array(e).fill(t),n)}function koe(t){return hn([],t)}function ie(t,e,n,r){function i(a){var s=doe(a,e.map(Goe));return $oe(t,e,a),n(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function $oe(t,e,n){var r=e.filter(a=>!Hoe(a)).every(a=>n[a]!==void 0);if(!r){var i=e.filter(a=>n[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Hoe(t){return t&&t[0]==="?"}function Goe(t){return t&&t[0]==="?"?t.slice(1):t}function xa(t,e){if(c7(t)&&l7(t,e))return t[e];throw typeof t[e]=="function"&&RD(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function up(t,e,n){if(c7(t)&&l7(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Voe(t,e){return e in t}function l7(t,e){return!t||typeof t!="object"?!1:St(qoe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Woe(t,e){if(!RD(t,e))throw new Error('No access to method "'+e+'"');return t[e]}function RD(t,e){return t==null||typeof t[e]!="function"||St(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:St(joe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function c7(t){return typeof t=="object"&&t&&t.constructor===Object}var qoe={length:!0,name:!0},joe={toString:!0,valueOf:!0,toLocaleString:!0};class PD{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return xa(this.wrappedObject,e)}set(e,n){return up(this.wrappedObject,e,n),this}has(e){return Voe(this.wrappedObject,e)}}function lp(){return new Map}function zh(t){if(!t)return lp();if(ID(t))return t;if(s0(t))return new PD(t);throw new Error("createMap can create maps from objects or Maps")}function Xoe(t){if(t instanceof PD)return t.wrappedObject;var e={};for(var n of t.keys()){var r=t.get(n);up(e,n,r)}return e}function ID(t){return t?t instanceof Map||t instanceof PD||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function hF(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i of n)if(i){if(ID(i))for(var a of i.keys())t.set(a,i.get(a));else if(s0(i))for(var s of Object.keys(i))t.set(s,i[s])}return t}var f7=function(){return f7=Ch.create,Ch},Yoe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Zoe=ie("typed",Yoe,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:a}=e,s=f7();return s.clear(),s.addTypes([{name:"number",test:Kt},{name:"Complex",test:qu},{name:"BigNumber",test:Qt},{name:"Fraction",test:a0},{name:"Unit",test:Us},{name:"identifier",test:o=>Xi&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Xi},{name:"Chain",test:X9},{name:"Array",test:Bn},{name:"Matrix",test:Ft},{name:"DenseMatrix",test:lb},{name:"SparseMatrix",test:Sf},{name:"Range",test:TD},{name:"Index",test:Ww},{name:"boolean",test:Qse},{name:"ResultSet",test:Jse},{name:"Help",test:j9},{name:"function",test:eoe},{name:"Date",test:toe},{name:"RegExp",test:noe},{name:"null",test:roe},{name:"undefined",test:ioe},{name:"AccessorNode",test:Hf},{name:"ArrayNode",test:Os},{name:"AssignmentNode",test:aoe},{name:"BlockNode",test:soe},{name:"ConditionalNode",test:ooe},{name:"ConstantNode",test:Tn},{name:"FunctionNode",test:hc},{name:"FunctionAssignmentNode",test:o0},{name:"IndexNode",test:Np},{name:"Node",test:qn},{name:"ObjectNode",test:qw},{name:"OperatorNode",test:Qr},{name:"ParenthesisNode",test:el},{name:"RangeNode",test:uoe},{name:"RelationalNode",test:loe},{name:"SymbolNode",test:bi},{name:"Map",test:ID},{name:"Object",test:s0}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||fM(u),Soe(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||R1(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||R1(u),new r(u.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||R1(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){a||dM(u);var l=new a(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||fM(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(u){a||dM(u);try{return new a(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||R1(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||fM(u),new n(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return a||dM(u),new a(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||Koe(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Zs(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(o,u,l)=>{var c=s.createError(o,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&Zs(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},s});function fM(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function R1(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Koe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function dM(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var Qoe="ResultSet",Joe=[],eue=ie(Qoe,Joe,()=>{function t(e){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return t.prototype.type="ResultSet",t.prototype.isResultSet=!0,t.prototype.valueOf=function(){return this.entries},t.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},t.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},t.fromJSON=function(e){return new t(e.entries)},t},{isClass:!0});/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Dh=9e15,Dc=1e9,R2="0123456789abcdef",mb="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",vb="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",P2={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Dh,maxE:Dh,crypto:!1},d7,Hu,qt=!0,Zw="[DecimalError] ",pc=Zw+"Invalid argument: ",h7=Zw+"Precision limit exceeded",p7=Zw+"crypto unavailable",m7="[object Decimal]",ia=Math.floor,ni=Math.pow,tue=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,nue=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,rue=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,v7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mo=1e7,zt=7,iue=9007199254740991,aue=mb.length-1,I2=vb.length-1,nt={toStringTag:m7};nt.absoluteValue=nt.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),It(t)};nt.ceil=function(){return It(new this.constructor(this),this.e+1,2)};nt.clampedTo=nt.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(pc+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};nt.comparedTo=nt.cmp=function(t){var e,n,r,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,u=a.s,l=t.s;if(!s||!o)return!u||!l?NaN:u!==l?u:s===o?0:!s^u<0?1:-1;if(!s[0]||!o[0])return s[0]?u:o[0]?-l:0;if(u!==l)return u;if(a.e!==t.e)return a.e>t.e^u<0?1:-1;for(r=s.length,i=o.length,e=0,n=r<i?r:i;e<n;++e)if(s[e]!==o[e])return s[e]>o[e]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};nt.cosine=nt.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+zt,r.rounding=1,n=sue(r,w7(r,n)),r.precision=t,r.rounding=e,It(Hu==2||Hu==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};nt.cubeRoot=nt.cbrt=function(){var t,e,n,r,i,a,s,o,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(qt=!1,a=c.s*ni(c.s*c,1/3),!a||Math.abs(a)==1/0?(n=Ai(c.d),t=c.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=ni(n,1/3),t=ia((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(a.toString()),s=(t=f.precision)+3;;)if(o=r,u=o.times(o).times(o),l=u.plus(c),r=or(l.plus(c).times(o),l.plus(u),s+2,1),Ai(o.d).slice(0,s)===(n=Ai(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(It(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(It(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return qt=!0,It(r,t,f.rounding,e)};nt.decimalPlaces=nt.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-ia(this.e/zt))*zt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};nt.dividedBy=nt.div=function(t){return or(this,new this.constructor(t))};nt.dividedToIntegerBy=nt.divToInt=function(t){var e=this,n=e.constructor;return It(or(e,new n(t),0,1,1),n.precision,n.rounding)};nt.equals=nt.eq=function(t){return this.cmp(t)===0};nt.floor=function(){return It(new this.constructor(this),this.e+1,3)};nt.greaterThan=nt.gt=function(t){return this.cmp(t)>0};nt.greaterThanOrEqualTo=nt.gte=function(t){var e=this.cmp(t);return e==1||e===0};nt.hyperbolicCosine=nt.cosh=function(){var t,e,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/Qw(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=cp(s,1,a.times(e),new s(1),!0);for(var u,l=t,c=new s(8);l--;)u=a.times(a),a=o.minus(u.times(c.minus(u.times(c))));return It(a,s.precision=n,s.rounding=r,!0)};nt.hyperbolicSine=nt.sinh=function(){var t,e,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,r=i.d.length,r<3)i=cp(a,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/Qw(5,t)),i=cp(a,2,i,i,!0);for(var s,o=new a(5),u=new a(16),l=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(u.times(s).plus(l))))}return a.precision=e,a.rounding=n,It(i,e,n,!0)};nt.hyperbolicTangent=nt.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,or(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};nt.inverseCosine=nt.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,a=n.rounding;return r!==-1?r===0?e.isNeg()?bo(n,i,a):new n(0):new n(NaN):e.isZero()?bo(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=bo(n,i+4,a).times(.5),n.precision=i,n.rounding=a,t.minus(e))};nt.inverseHyperbolicCosine=nt.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,qt=!1,n=n.times(n).minus(1).sqrt().plus(n),qt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};nt.inverseHyperbolicSine=nt.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,qt=!1,n=n.times(n).plus(1).sqrt().plus(n),qt=!0,r.precision=t,r.rounding=e,n.ln())};nt.inverseHyperbolicTangent=nt.atanh=function(){var t,e,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?It(new a(i),t,e,!0):(a.precision=n=r-i.e,i=or(i.plus(1),new a(1).minus(i),n+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};nt.inverseSine=nt.asin=function(){var t,e,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),n=a.precision,r=a.rounding,e!==-1?e===0?(t=bo(a,n+4,r).times(.5),t.s=i.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))};nt.inverseTangent=nt.atan=function(){var t,e,n,r,i,a,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=I2)return s=bo(c,f+4,d).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=I2)return s=bo(c,f+4,d).times(.5),s.s=l.s,s}for(c.precision=o=f+10,c.rounding=1,n=Math.min(28,o/zt+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(qt=!1,e=Math.ceil(o/zt),r=1,u=l.times(l),s=new c(l),i=l;t!==-1;)if(i=i.times(u),a=s.minus(i.div(r+=2)),i=i.times(u),s=a.plus(i.div(r+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return n&&(s=s.times(2<<n-1)),qt=!0,It(s,c.precision=f,c.rounding=d,!0)};nt.isFinite=function(){return!!this.d};nt.isInteger=nt.isInt=function(){return!!this.d&&ia(this.e/zt)>this.d.length-2};nt.isNaN=function(){return!this.s};nt.isNegative=nt.isNeg=function(){return this.s<0};nt.isPositive=nt.isPos=function(){return this.s>0};nt.isZero=function(){return!!this.d&&this.d[0]===0};nt.lessThan=nt.lt=function(t){return this.cmp(t)<0};nt.lessThanOrEqualTo=nt.lte=function(t){return this.cmp(t)<1};nt.logarithm=nt.log=function(t){var e,n,r,i,a,s,o,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=i!==1}if(qt=!1,o=f+h,s=jl(l,o),r=e?gb(c,o+10):jl(t,o),u=or(s,r,o,1),xg(u.d,i=f,d))do if(o+=10,s=jl(l,o),r=e?gb(c,o+10):jl(t,o),u=or(s,r,o,1),!a){+Ai(u.d).slice(i+1,i+15)+1==1e14&&(u=It(u,f+1,0));break}while(xg(u.d,i+=10,d));return qt=!0,It(u,f,d)};nt.minus=nt.sub=function(t){var e,n,r,i,a,s,o,u,l,c,f,d,h=this,m=h.constructor;if(t=new m(t),!h.d||!t.d)return!h.s||!t.s?t=new m(NaN):h.d?t.s=-t.s:t=new m(t.d||h.s!==t.s?h:NaN),t;if(h.s!=t.s)return t.s=-t.s,h.plus(t);if(l=h.d,d=t.d,o=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])t.s=-t.s;else if(l[0])t=new m(h);else return new m(u===3?-0:0);return qt?It(t,o,u):t}if(n=ia(t.e/zt),c=ia(h.e/zt),l=l.slice(),a=c-n,a){for(f=a<0,f?(e=l,a=-a,s=d.length):(e=d,n=c,s=l.length),r=Math.max(Math.ceil(o/zt),s)+2,a>r&&(a=r,e.length=1),e.reverse(),r=a;r--;)e.push(0);e.reverse()}else{for(r=l.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}a=0}for(f&&(e=l,l=d,d=e,t.s=-t.s),s=l.length,r=d.length-s;r>0;--r)l[s++]=0;for(r=d.length;r>a;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=Mo-1;--l[i],l[r]+=Mo}l[r]-=d[r]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=Kw(l,n),qt?It(t,o,u):t):new m(u===3?-0:0)};nt.modulo=nt.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?It(new r(n),r.precision,r.rounding):(qt=!1,r.modulo==9?(e=or(n,t.abs(),0,3,1),e.s*=t.s):e=or(n,t,0,r.modulo,1),e=e.times(t),qt=!0,n.minus(e))};nt.naturalExponential=nt.exp=function(){return O2(this)};nt.naturalLogarithm=nt.ln=function(){return jl(this)};nt.negated=nt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,It(t)};nt.plus=nt.add=function(t){var e,n,r,i,a,s,o,u,l,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,o=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(t=new d(f)),qt?It(t,o,u):t;if(a=ia(f.e/zt),r=ia(t.e/zt),l=l.slice(),i=a-r,i){for(i<0?(n=l,i=-i,s=c.length):(n=c,r=a,s=l.length),a=Math.ceil(o/zt),s=a>s?a+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=c.length,s-i<0&&(i=s,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Mo|0,l[i]%=Mo;for(e&&(l.unshift(e),++r),s=l.length;l[--s]==0;)l.pop();return t.d=l,t.e=Kw(l,r),qt?It(t,o,u):t};nt.precision=nt.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(pc+t);return n.d?(e=g7(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};nt.round=function(){var t=this,e=t.constructor;return It(new e(t),t.e+1,e.rounding)};nt.sine=nt.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+zt,r.rounding=1,n=uue(r,w7(r,n)),r.precision=t,r.rounding=e,It(Hu>2?n.neg():n,t,e,!0)):new r(NaN)};nt.squareRoot=nt.sqrt=function(){var t,e,n,r,i,a,s=this,o=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);for(qt=!1,l=Math.sqrt(+s),l==0||l==1/0?(e=Ai(o),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=ia((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),r=new c(e)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(a=r,r=a.plus(or(s,a,n+2,1)).times(.5),Ai(a.d).slice(0,n)===(e=Ai(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(It(a,u+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(It(r,u+1,1),t=!r.times(r).eq(s));break}return qt=!0,It(r,u,c.rounding,t)};nt.tangent=nt.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=or(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,It(Hu==2||Hu==4?n.neg():n,t,e,!0)):new r(NaN)};nt.times=nt.mul=function(t){var e,n,r,i,a,s,o,u,l,c=this,f=c.constructor,d=c.d,h=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!t.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?t.s/0:t.s*0);for(n=ia(c.e/zt)+ia(t.e/zt),u=d.length,l=h.length,u<l&&(a=d,d=h,h=a,s=u,u=l,l=s),a=[],s=u+l,r=s;r--;)a.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)o=a[i]+h[r]*d[i-r-1]+e,a[i--]=o%Mo|0,e=o/Mo|0;a[i]=(a[i]+e)%Mo|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=Kw(a,n),qt?It(t,f.precision,f.rounding):t};nt.toBinary=function(t,e){return OD(this,2,t,e)};nt.toDecimalPlaces=nt.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(qa(t,0,Dc),e===void 0?e=r.rounding:qa(e,0,8),It(n,t+n.e+1,e))};nt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=iu(r,!0):(qa(t,0,Dc),e===void 0?e=i.rounding:qa(e,0,8),r=It(new i(r),t+1,e),n=iu(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};nt.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?n=iu(i):(qa(t,0,Dc),e===void 0?e=a.rounding:qa(e,0,8),r=It(new a(i),t+i.e+1,e),n=iu(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};nt.toFraction=function(t){var e,n,r,i,a,s,o,u,l,c,f,d,h=this,m=h.d,v=h.constructor;if(!m)return new v(h);if(l=n=new v(1),r=u=new v(0),e=new v(r),a=e.e=g7(m)-h.e-1,s=a%zt,e.d[0]=ni(10,s<0?zt+s:s),t==null)t=a>0?e:l;else{if(o=new v(t),!o.isInt()||o.lt(l))throw Error(pc+o);t=o.gt(e)?a>0?e:l:o}for(qt=!1,o=new v(Ai(m)),c=v.precision,v.precision=a=m.length*zt*2;f=or(o,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=e,e=o.minus(f.times(i)),o=i;return i=or(t.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=or(l,r,a,1).minus(h).abs().cmp(or(u,n,a,1).minus(h).abs())<1?[l,r]:[u,n],v.precision=c,qt=!0,d};nt.toHexadecimal=nt.toHex=function(t,e){return OD(this,16,t,e)};nt.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:qa(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(qt=!1,n=or(n,t,0,e,1).times(t),qt=!0,It(n)):(t.s=n.s,n=t),n};nt.toNumber=function(){return+this};nt.toOctal=function(t,e){return OD(this,8,t,e)};nt.toPower=nt.pow=function(t){var e,n,r,i,a,s,o=this,u=o.constructor,l=+(t=new u(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new u(ni(+o,l));if(o=new u(o),o.eq(1))return o;if(r=u.precision,a=u.rounding,t.eq(1))return It(o,r,a);if(e=ia(t.e/zt),e>=t.d.length-1&&(n=l<0?-l:l)<=iue)return i=y7(u,o,n,r),t.s<0?new u(1).div(i):It(i,r,a);if(s=o.s,s<0){if(e<t.d.length-1)return new u(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return n=ni(+o,l),e=n==0||!isFinite(n)?ia(l*(Math.log("0."+Ai(o.d))/Math.LN10+o.e+1)):new u(n+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?s/0:0):(qt=!1,u.rounding=o.s=1,n=Math.min(12,(e+"").length),i=O2(t.times(jl(o,r+n)),r),i.d&&(i=It(i,r+5,1),xg(i.d,r,a)&&(e=r+10,i=It(O2(t.times(jl(o,e+n)),e),e+5,1),+Ai(i.d).slice(r+1,r+15)+1==1e14&&(i=It(i,r+1,0)))),i.s=s,qt=!0,u.rounding=a,It(i,r,a))};nt.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=iu(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(qa(t,1,Dc),e===void 0?e=i.rounding:qa(e,0,8),r=It(new i(r),t,e),n=iu(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};nt.toSignificantDigits=nt.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(qa(t,1,Dc),e===void 0?e=r.rounding:qa(e,0,8)),It(new r(n),t,e)};nt.toString=function(){var t=this,e=t.constructor,n=iu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};nt.truncated=nt.trunc=function(){return It(new this.constructor(this),this.e+1,1)};nt.valueOf=nt.toJSON=function(){var t=this,e=t.constructor,n=iu(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function Ai(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=zt-r.length,n&&(a+=Ul(n)),a+=r;s=t[e],r=s+"",n=zt-r.length,n&&(a+=Ul(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function qa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(pc+t)}function xg(t,e,n,r){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=zt,i=0):(i=Math.ceil((e+1)/zt),e%=zt),a=ni(10,zt-e),o=t[i]%a|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(t[i+1]/a/100|0)==ni(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(r||n<4)&&o==9999||!r&&n>3&&o==4999):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==ni(10,e-3)-1,s}function Ax(t,e,n){for(var r,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=R2.indexOf(t.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function sue(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/Qw(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=cp(t,1,e.times(i),new t(1));for(var a=n;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=n,e}var or=function(){function t(r,i,a){var s,o=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+o,r[u]=s%a|0,o=s/a|0;return o&&r.unshift(o),r}function e(r,i,a,s){var o,u;if(a!=s)u=a>s?1:-1;else for(o=u=0;o<a;o++)if(r[o]!=i[o]){u=r[o]>i[o]?1:-1;break}return u}function n(r,i,a,s){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*s+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s,o,u){var l,c,f,d,h,m,v,y,p,x,g,S,E,_,A,T,M,C,N,P,H=r.constructor,L=r.s==i.s?1:-1,z=r.d,O=i.d;if(!z||!z[0]||!O||!O[0])return new H(!r.s||!i.s||(z?O&&z[0]==O[0]:!O)?NaN:z&&z[0]==0||!O?L*0:L/0);for(u?(h=1,c=r.e-i.e):(u=Mo,h=zt,c=ia(r.e/h)-ia(i.e/h)),N=O.length,M=z.length,p=new H(L),x=p.d=[],f=0;O[f]==(z[f]||0);f++);if(O[f]>(z[f]||0)&&c--,a==null?(_=a=H.precision,s=H.rounding):o?_=a+(r.e-i.e)+1:_=a,_<0)x.push(1),m=!0;else{if(_=_/h+2|0,f=0,N==1){for(d=0,O=O[0],_++;(f<M||d)&&_--;f++)A=d*u+(z[f]||0),x[f]=A/O|0,d=A%O|0;m=d||f<M}else{for(d=u/(O[0]+1)|0,d>1&&(O=t(O,d,u),z=t(z,d,u),N=O.length,M=z.length),T=N,g=z.slice(0,N),S=g.length;S<N;)g[S++]=0;P=O.slice(),P.unshift(0),C=O[0],O[1]>=u/2&&++C;do d=0,l=e(O,g,N,S),l<0?(E=g[0],N!=S&&(E=E*u+(g[1]||0)),d=E/C|0,d>1?(d>=u&&(d=u-1),v=t(O,d,u),y=v.length,S=g.length,l=e(v,g,y,S),l==1&&(d--,n(v,N<y?P:O,y,u))):(d==0&&(l=d=1),v=O.slice()),y=v.length,y<S&&v.unshift(0),n(g,v,S,u),l==-1&&(S=g.length,l=e(O,g,N,S),l<1&&(d++,n(g,N<S?P:O,S,u))),S=g.length):l===0&&(d++,g=[0]),x[f++]=d,l&&g[0]?g[S++]=z[T]||0:(g=[z[T]],S=1);while((T++<M||g[0]!==void 0)&&_--);m=g[0]!==void 0}x[0]||x.shift()}if(h==1)p.e=c,d7=m;else{for(f=1,d=x[0];d>=10;d/=10)f++;p.e=f+c*h-1,It(p,o?a+p.e+1:a,s,m)}return p}}();function It(t,e,n,r){var i,a,s,o,u,l,c,f,d,h=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,o=f[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=zt,s=e,c=f[d=0],u=c/ni(10,i-s-1)%10|0;else if(d=Math.ceil((a+1)/zt),o=f.length,d>=o)if(r){for(;o++<=d;)f.push(0);c=u=0,i=1,a%=zt,s=a-zt+1}else break e;else{for(c=o=f[d],i=1;o>=10;o/=10)i++;a%=zt,s=a-zt+i,u=s<0?0:c/ni(10,i-s-1)%10|0}if(r=r||e<0||f[d+1]!==void 0||(s<0?c:c%ni(10,i-s-1)),l=n<4?(u||r)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(a>0?s>0?c/ni(10,i-s):0:f[d-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=ni(10,(zt-e%zt)%zt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,o=1,d--):(f.length=d+1,o=ni(10,zt-a),f[d]=s>0?(c/ni(10,i-s)%ni(10,s)|0)*o:0),l)for(;;)if(d==0){for(a=1,s=f[0];s>=10;s/=10)a++;for(s=f[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,f[0]==Mo&&(f[0]=1));break}else{if(f[d]+=o,f[d]!=Mo)break;f[d--]=0,o=1}for(a=f.length;f[--a]===0;)f.pop()}return qt&&(t.e>h.maxE?(t.d=null,t.e=NaN):t.e<h.minE&&(t.e=0,t.d=[0])),t}function iu(t,e,n){if(!t.isFinite())return b7(t);var r,i=t.e,a=Ai(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ul(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Ul(-i-1)+a,n&&(r=n-s)>0&&(a+=Ul(r))):i>=s?(a+=Ul(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ul(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ul(r))),a}function Kw(t,e){var n=t[0];for(e*=zt;n>=10;n/=10)e++;return e}function gb(t,e,n){if(e>aue)throw qt=!0,n&&(t.precision=n),Error(h7);return It(new t(mb),e,1,!0)}function bo(t,e,n){if(e>I2)throw Error(h7);return It(new t(vb),e,n,!0)}function g7(t){var e=t.length-1,n=e*zt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Ul(t){for(var e="";t--;)e+="0";return e}function y7(t,e,n,r){var i,a=new t(1),s=Math.ceil(r/zt+4);for(qt=!1;;){if(n%2&&(a=a.times(e),mF(a.d,s)&&(i=!0)),n=ia(n/2),n===0){n=a.d.length-1,i&&a.d[n]===0&&++a.d[n];break}e=e.times(e),mF(e.d,s)}return qt=!0,a}function pF(t){return t.d[t.d.length-1]&1}function x7(t,e,n){for(var r,i=new t(e[0]),a=0;++a<e.length;)if(r=new t(e[a]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function O2(t,e){var n,r,i,a,s,o,u,l=0,c=0,f=0,d=t.constructor,h=d.rounding,m=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(qt=!1,u=m):u=e,o=new d(.03125);t.e>-2;)t=t.times(o),f+=5;for(r=Math.log(ni(2,f))/Math.LN10*2+5|0,u+=r,n=a=s=new d(1),d.precision=u;;){if(a=It(a.times(t),u,1),n=n.times(++c),o=s.plus(or(a,n,u,1)),Ai(o.d).slice(0,u)===Ai(s.d).slice(0,u)){for(i=f;i--;)s=It(s.times(s),u,1);if(e==null)if(l<3&&xg(s.d,u-r,h,l))d.precision=u+=10,n=a=o=new d(1),c=0,l++;else return It(s,d.precision=m,h,qt=!0);else return d.precision=m,s}s=o}}function jl(t,e){var n,r,i,a,s,o,u,l,c,f,d,h=1,m=10,v=t,y=v.d,p=v.constructor,x=p.rounding,g=p.precision;if(v.s<0||!y||!y[0]||!v.e&&y[0]==1&&y.length==1)return new p(y&&!y[0]?-1/0:v.s!=1?NaN:y?0:v);if(e==null?(qt=!1,c=g):c=e,p.precision=c+=m,n=Ai(y),r=n.charAt(0),Math.abs(a=v.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=Ai(v.d),r=n.charAt(0),h++;a=v.e,r>1?(v=new p("0."+n),a++):v=new p(r+"."+n.slice(1))}else return l=gb(p,c+2,g).times(a+""),v=jl(new p(r+"."+n.slice(1)),c-m).plus(l),p.precision=g,e==null?It(v,g,x,qt=!0):v;for(f=v,u=s=v=or(v.minus(1),v.plus(1),c,1),d=It(v.times(v),c,1),i=3;;){if(s=It(s.times(d),c,1),l=u.plus(or(s,new p(i),c,1)),Ai(l.d).slice(0,c)===Ai(u.d).slice(0,c))if(u=u.times(2),a!==0&&(u=u.plus(gb(p,c+2,g).times(a+""))),u=or(u,new p(h),c,1),e==null)if(xg(u.d,c-m,x,o))p.precision=c+=m,l=s=v=or(f.minus(1),f.plus(1),c,1),d=It(v.times(v),c,1),i=o=1;else return It(u,p.precision=g,x,qt=!0);else return p.precision=g,u;u=l,i+=2}}function b7(t){return String(t.s*t.s/0)}function F2(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%zt,n<0&&(r+=zt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=zt;r<i;)t.d.push(+e.slice(r,r+=zt));e=e.slice(r),r=zt-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),qt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function oue(t,e){var n,r,i,a,s,o,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),v7.test(e))return F2(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(nue.test(e))n=16,e=e.toLowerCase();else if(tue.test(e))n=2;else if(rue.test(e))n=8;else throw Error(pc+e);for(a=e.search(/p/i),a>0?(u=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,r=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=y7(r,new r(n),a,a*2)),l=Ax(e,n,Mo),c=l.length-1,a=c;l[a]===0;--a)l.pop();return a<0?new r(t.s*0):(t.e=Kw(l,c),t.d=l,qt=!1,s&&(t=or(t,i,o*4)),u&&(t=t.times(Math.abs(u)<54?ni(2,u):mc.pow(2,u))),qt=!0,t)}function uue(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:cp(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/Qw(5,n)),e=cp(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);n--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function cp(t,e,n,r,i){var a,s,o,u,l=t.precision,c=Math.ceil(l/zt);for(qt=!1,u=n.times(n),o=new t(r);;){if(s=or(o.times(u),new t(e++*e++),l,1),o=i?r.plus(s):r.minus(s),r=or(s.times(u),new t(e++*e++),l,1),s=o.plus(r),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=r,r=s,s=a}return qt=!0,s.d.length=c+1,s}function Qw(t,e){for(var n=t;--e;)n*=t;return n}function w7(t,e){var n,r=e.s<0,i=bo(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return Hu=r?4:1,e;if(n=e.divToInt(i),n.isZero())Hu=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(a))return Hu=pF(n)?r?2:3:r?4:1,e;Hu=pF(n)?r?1:4:r?3:2}return e.minus(i).abs()}function OD(t,e,n,r){var i,a,s,o,u,l,c,f,d,h=t.constructor,m=n!==void 0;if(m?(qa(n,1,Dc),r===void 0?r=h.rounding:qa(r,0,8)):(n=h.precision,r=h.rounding),!t.isFinite())c=b7(t);else{for(c=iu(t),s=c.indexOf("."),m?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=Ax(iu(d),10,i),d.e=d.d.length),f=Ax(c,10,i),a=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?a--:(t=new h(t),t.d=f,t.e=a,t=or(t,d,n,r,0,i),f=t.d,a=t.e,l=d7),s=f[n],o=i/2,l=l||f[n+1]!==void 0,l=r<4?(s!==void 0||l)&&(r===0||r===(t.s<0?3:2)):s>o||s===o&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=R2.charAt(f[s]);if(m){if(u>1)if(e==16||e==8){for(s=e==16?4:3,--u;u%s;u++)c+="0";for(f=Ax(c,i,e),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=R2.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>u)for(a-=u;a--;)c+="0";else a<u&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function mF(t,e){if(t.length>e)return t.length=e,!0}function lue(t){return new this(t).abs()}function cue(t){return new this(t).acos()}function fue(t){return new this(t).acosh()}function due(t,e){return new this(t).plus(e)}function hue(t){return new this(t).asin()}function pue(t){return new this(t).asinh()}function mue(t){return new this(t).atan()}function vue(t){return new this(t).atanh()}function gue(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,a=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=bo(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?bo(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=bo(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(or(t,e,a,1)),e=bo(this,a,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(or(t,e,a,1)),n}function yue(t){return new this(t).cbrt()}function xue(t){return It(t=new this(t),t.e+1,2)}function bue(t,e,n){return new this(t).clamp(e,n)}function wue(t){if(!t||typeof t!="object")throw Error(Zw+"Object expected");var e,n,r,i=t.defaults===!0,a=["precision",1,Dc,"rounding",0,8,"toExpNeg",-Dh,0,"toExpPos",0,Dh,"maxE",0,Dh,"minE",-Dh,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],i&&(this[n]=P2[n]),(r=t[n])!==void 0)if(ia(r)===r&&r>=a[e+1]&&r<=a[e+2])this[n]=r;else throw Error(pc+n+": "+r);if(n="crypto",i&&(this[n]=P2[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(p7);else this[n]=!1;else throw Error(pc+n+": "+r);return this}function Sue(t){return new this(t).cos()}function _ue(t){return new this(t).cosh()}function S7(t){var e,n,r;function i(a){var s,o,u,l=this;if(!(l instanceof i))return new i(a);if(l.constructor=i,vF(a)){l.s=a.s,qt?!a.d||a.e>i.maxE?(l.e=NaN,l.d=null):a.e<i.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(u=typeof a,u==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;qt?s>i.maxE?(l.e=NaN,l.d=null):s<i.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[a]):(l.e=s,l.d=[a]);return}else if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return F2(l,a.toString())}else if(u!=="string")throw Error(pc+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(o===43&&(a=a.slice(1)),l.s=1),v7.test(a)?F2(l,a):oue(l,a)}if(i.prototype=nt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=wue,i.clone=S7,i.isDecimal=vF,i.abs=lue,i.acos=cue,i.acosh=fue,i.add=due,i.asin=hue,i.asinh=pue,i.atan=mue,i.atanh=vue,i.atan2=gue,i.cbrt=yue,i.ceil=xue,i.clamp=bue,i.cos=Sue,i.cosh=_ue,i.div=Eue,i.exp=Mue,i.floor=Aue,i.hypot=Cue,i.ln=Tue,i.log=Due,i.log10=Rue,i.log2=Nue,i.max=Pue,i.min=Iue,i.mod=Oue,i.mul=Fue,i.pow=Lue,i.random=Bue,i.round=Uue,i.sign=zue,i.sin=kue,i.sinh=$ue,i.sqrt=Hue,i.sub=Gue,i.sum=Vue,i.tan=Wue,i.tanh=que,i.trunc=jue,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Eue(t,e){return new this(t).div(e)}function Mue(t){return new this(t).exp()}function Aue(t){return It(t=new this(t),t.e+1,3)}function Cue(){var t,e,n=new this(0);for(qt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return qt=!0,new this(1/0);n=e}return qt=!0,n.sqrt()}function vF(t){return t instanceof mc||t&&t.toStringTag===m7||!1}function Tue(t){return new this(t).ln()}function Due(t,e){return new this(t).log(e)}function Nue(t){return new this(t).log(2)}function Rue(t){return new this(t).log(10)}function Pue(){return x7(this,arguments,"lt")}function Iue(){return x7(this,arguments,"gt")}function Oue(t,e){return new this(t).mod(e)}function Fue(t,e){return new this(t).mul(e)}function Lue(t,e){return new this(t).pow(e)}function Bue(t){var e,n,r,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:qa(t,1,Dc),r=Math.ceil(t/zt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));a<r;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);a<r;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=r/4}else throw Error(p7);else for(;a<r;)o[a++]=Math.random()*1e7|0;for(r=o[--a],t%=zt,r&&t&&(i=ni(10,zt-t),o[a]=(r/i|0)*i);o[a]===0;a--)o.pop();if(a<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=zt)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<zt&&(n-=zt-r)}return s.e=n,s.d=o,s}function Uue(t){return It(t=new this(t),t.e+1,this.rounding)}function zue(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function kue(t){return new this(t).sin()}function $ue(t){return new this(t).sinh()}function Hue(t){return new this(t).sqrt()}function Gue(t,e){return new this(t).sub(e)}function Vue(){var t=0,e=arguments,n=new this(e[t]);for(qt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return qt=!0,It(n,this.precision,this.rounding)}function Wue(t){return new this(t).tan()}function que(t){return new this(t).tanh()}function jue(t){return It(t=new this(t),t.e+1,1)}nt[Symbol.for("nodejs.util.inspect.custom")]=nt.toString;nt[Symbol.toStringTag]="Decimal";var mc=nt.constructor=S7(P2);mb=new mc(mb);vb=new mc(vb);var Xue="BigNumber",Yue=["?on","config"],Zue=ie(Xue,Yue,t=>{var{on:e,config:n}=t,r=mc.clone({precision:n.precision,modulo:mc.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),_7={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(f,d){var h=Math.abs(f),m=Math.abs(d);return h<3e3&&m<3e3?Math.sqrt(h*h+m*m):(h<m?(h=m,m=f/d):m=d/f,h*Math.sqrt(1+m*m))},o=function(){throw SyntaxError("Invalid Param")};function u(f,d){var h=Math.abs(f),m=Math.abs(d);return f===0?Math.log(m):d===0?Math.log(h):h<3e3&&m<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var l=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):o();break;case"string":h.im=h.re=0;var m=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,y=0;m===null&&o();for(var p=0;p<m.length;p++){var x=m[p];x===" "||x==="	"||x===`
`||(x==="+"?v++:x==="-"?y++:x==="i"||x==="I"?(v+y===0&&o(),m[p+1]!==" "&&!isNaN(m[p+1])?(h.im+=parseFloat((y%2?"-":"")+m[p+1]),p++):h.im+=parseFloat((y%2?"-":"")+"1"),v=y=0):((v+y===0||isNaN(x))&&o(),m[p+1]==="i"||m[p+1]==="I"?(h.im+=parseFloat((y%2?"-":"")+x),p++):h.re+=parseFloat((y%2?"-":"")+x),v=y=0))}v+y>0&&o();break;case"number":h.im=0,h.re=f;break;default:o()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=l(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var m=h.re,v=h.im,y,p;return v===0?new c(f/m,d/m):Math.abs(m)<Math.abs(v)?(p=m/v,y=m*p+v,new c((f*p+d)/y,(d*p-f)/y)):(p=v/m,y=v*p+m,new c((f+d*p)/y,(d-f*p)/y))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var m=Math.atan2(d,f),v=u(f,d);return f=Math.exp(h.re*v-h.im*m),d=h.im*v+h.re*m,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),m,v;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);m=.5*Math.sqrt(2*(h+f))}else m=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?v=.5*Math.sqrt(2*(h-f)):v=Math.abs(d)/Math.sqrt(2*(h+f)),new c(m,d<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+a(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(u(f,d),Math.atan2(d,f))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(m.im,-m.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),m=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,m=1-f,v=1+f,y=m*m+d*d,p=y!==0?new c((v*m-d*d)/y,(d*m+v*d)/y):new c(f!==-1?f/0:0,d!==0?d/0:0),x=p.re;return p.re=u(p.re,p.im)/2,p.im=Math.atan2(p.im,x)/2,h&&(p.im=-p.im),p},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(_7);var Kue=_7.exports;const Ei=Qs(Kue);var Que="Complex",Jue=[],ele=ie(Que,Jue,()=>(Object.defineProperty(Ei,"name",{value:"Complex"}),Ei.prototype.constructor=Ei,Ei.prototype.type="Complex",Ei.prototype.isComplex=!0,Ei.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ei.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ei.prototype.format=function(t){var e="",n=this.im,r=this.re,i=Rf(this.re,t),a=Rf(this.im,t),s=Kt(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(r/n)<o&&(r=0),Math.abs(n/r)<o&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=a+"i":n<0?n===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+a+"i",e},Ei.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Ei(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Kt(n)){if(Us(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Kt(r))return new Ei({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ei.prototype.valueOf=Ei.prototype.toString,Ei.fromJSON=function(t){return new Ei(t)},Ei.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ei),{isClass:!0}),E7={exports:{}};/**
 * @license Fraction.js v4.3.0 20/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=2e3,i={s:1,n:0,d:1};function a(p,x){if(isNaN(p=parseInt(p,10)))throw v();return p*x}function s(p,x){if(x===0)throw m();var g=Object.create(h.prototype);g.s=p<0?-1:1,p=p<0?-p:p;var S=d(p,x);return g.n=p/S,g.d=x/S,g}function o(p){for(var x={},g=p,S=2,E=4;E<=g;){for(;g%S===0;)g/=S,x[S]=(x[S]||0)+1;E+=1+2*S++}return g!==p?g>1&&(x[g]=(x[g]||0)+1):x[p]=(x[p]||0)+1,x}var u=function(p,x){var g=0,S=1,E=1,_=0,A=0,T=0,M=1,C=1,N=0,P=1,H=1,L=1,z=1e7,O;if(p!=null)if(x!==void 0){if(g=p,S=x,E=g*S,g%1!==0||S%1!==0)throw y()}else switch(typeof p){case"object":{if("d"in p&&"n"in p)g=p.n,S=p.d,"s"in p&&(g*=p.s);else if(0 in p)g=p[0],1 in p&&(S=p[1]);else throw v();E=g*S;break}case"number":{if(p<0&&(E=p,p=-p),p%1===0)g=p;else if(p>0){for(p>=1&&(C=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=C);P<=z&&L<=z;)if(O=(N+H)/(P+L),p===O){P+L<=z?(g=N+H,S=P+L):L>P?(g=H,S=L):(g=N,S=P);break}else p>O?(N+=H,P+=L):(H+=N,L+=P),P>z?(g=H,S=L):(g=N,S=P);g*=C}else(isNaN(p)||isNaN(x))&&(S=g=NaN);break}case"string":{if(P=p.match(/\d+|./g),P===null)throw v();if(P[N]==="-"?(E=-1,N++):P[N]==="+"&&N++,P.length===N+1?A=a(P[N++],E):P[N+1]==="."||P[N]==="."?(P[N]!=="."&&(_=a(P[N++],E)),N++,(N+1===P.length||P[N+1]==="("&&P[N+3]===")"||P[N+1]==="'"&&P[N+3]==="'")&&(A=a(P[N],E),M=Math.pow(10,P[N].length),N++),(P[N]==="("&&P[N+2]===")"||P[N]==="'"&&P[N+2]==="'")&&(T=a(P[N+1],E),C=Math.pow(10,P[N+1].length)-1,N+=3)):P[N+1]==="/"||P[N+1]===":"?(A=a(P[N],E),M=a(P[N+2],1),N+=3):P[N+3]==="/"&&P[N+1]===" "&&(_=a(P[N],E),A=a(P[N+2],E),M=a(P[N+4],1),N+=5),P.length<=N){S=M*C,E=g=T+S*_+C*A;break}}default:throw v()}if(S===0)throw m();i.s=E<0?-1:1,i.n=Math.abs(g),i.d=Math.abs(S)};function l(p,x,g){for(var S=1;x>0;p=p*p%g,x>>=1)x&1&&(S=S*p%g);return S}function c(p,x){for(;x%2===0;x/=2);for(;x%5===0;x/=5);if(x===1)return 0;for(var g=10%x,S=1;g!==1;S++)if(g=g*10%x,S>r)return 0;return S}function f(p,x,g){for(var S=1,E=l(10,g,x),_=0;_<300;_++){if(S===E)return _;S=S*10%x,E=E*10%x}return 0}function d(p,x){if(!p)return x;if(!x)return p;for(;;){if(p%=x,!p)return x;if(x%=p,!x)return p}}function h(p,x){if(u(p,x),this instanceof h)p=d(i.d,i.n),this.s=i.s,this.n=i.n/p,this.d=i.d/p;else return s(i.s*i.n,i.d)}var m=function(){return new Error("Division by Zero")},v=function(){return new Error("Invalid argument")},y=function(){return new Error("Parameters must be integer")};h.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(p,x){return u(p,x),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(p,x){return u(p,x),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(p,x){return u(p,x),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(p,x){return u(p,x),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(p,x){if(isNaN(this.n)||isNaN(this.d))return new h(NaN);if(p===void 0)return s(this.s*this.n%this.d,1);if(u(p,x),i.n===0&&this.d===0)throw m();return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(p,x){return u(p,x),s(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(p,x){return u(p,x),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new h(NaN):s(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(p,x){if(u(p,x),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var g=o(this.n),S=o(this.d),E=1,_=1;for(var A in g)if(A!=="1"){if(A==="0"){E=0;break}if(g[A]*=i.n,g[A]%i.d===0)g[A]/=i.d;else return null;E*=Math.pow(A,g[A])}for(var A in S)if(A!=="1"){if(S[A]*=i.n,S[A]%i.d===0)S[A]/=i.d;else return null;_*=Math.pow(A,S[A])}return i.s<0?s(_,E):s(E,_)},equals:function(p,x){return u(p,x),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(p,x){u(p,x);var g=this.s*this.n*i.d-i.s*i.n*this.d;return(0<g)-(g<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var x=this.abs(),g=x.toContinued(),S=1;S<g.length;S++){for(var E=s(g[S-1],1),_=S-2;_>=0;_--)E=E.inverse().add(g[_]);if(Math.abs(E.sub(x).valueOf())<p)return E.mul(this.s)}return this},divisible:function(p,x){return u(p,x),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var x,g="",S=this.n,E=this.d;return this.s<0&&(g+="-"),E===1?g+=S:(p&&(x=Math.floor(S/E))>0&&(g+=x,g+=" ",S%=E),g+=S,g+="/",g+=E),g},toLatex:function(p){var x,g="",S=this.n,E=this.d;return this.s<0&&(g+="-"),E===1?g+=S:(p&&(x=Math.floor(S/E))>0&&(g+=x,S%=E),g+="\\frac{",g+=S,g+="}{",g+=E,g+="}"),g},toContinued:function(){var p,x=this.n,g=this.d,S=[];if(isNaN(x)||isNaN(g))return S;do S.push(Math.floor(x/g)),p=x%g,x=g,g=p;while(x!==1);return S},toString:function(p){var x=this.n,g=this.d;if(isNaN(x)||isNaN(g))return"NaN";p=p||15;var S=c(x,g),E=f(x,g,S),_=this.s<0?"-":"";if(_+=x/g|0,x%=g,x*=10,x&&(_+="."),S){for(var A=E;A--;)_+=x/g|0,x%=g,x*=10;_+="(";for(var A=S;A--;)_+=x/g|0,x%=g,x*=10;_+=")"}else for(var A=p;x&&A--;)_+=x/g|0,x%=g,x*=10;return _}},Object.defineProperty(h,"__esModule",{value:!0}),h.default=h,h.Fraction=h,t.exports=h})()})(E7);var tle=E7.exports;const Tu=Qs(tle);var nle="Fraction",rle=[],ile=ie(nle,rle,()=>(Object.defineProperty(Tu,"name",{value:"Fraction"}),Tu.prototype.constructor=Tu,Tu.prototype.type="Fraction",Tu.prototype.isFraction=!0,Tu.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Tu.fromJSON=function(t){return new Tu(t)},Tu),{isClass:!0}),ale="Range",sle=[],ole=ie(ale,sle,()=>{function t(e,n,r){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,a=n!=null,s=r!=null;if(i){if(Qt(e))e=e.toNumber();else if(typeof e!="number")throw new TypeError("Parameter start must be a number")}if(a){if(Qt(n))n=n.toNumber();else if(typeof n!="number")throw new TypeError("Parameter end must be a number")}if(s){if(Qt(r))r=r.toNumber();else if(typeof r!="number")throw new TypeError("Parameter step must be a number")}this.start=i?parseFloat(e):0,this.end=a?parseFloat(n):0,this.step=s?parseFloat(r):1}return t.prototype.type="Range",t.prototype.isRange=!0,t.parse=function(e){if(typeof e!="string")return null;var n=e.split(":"),r=n.map(function(a){return parseFloat(a)}),i=r.some(function(a){return isNaN(a)});if(i)return null;switch(r.length){case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[2],r[1]);default:return null}},t.prototype.clone=function(){return new t(this.start,this.end,this.step)},t.prototype.size=function(){var e=0,n=this.start,r=this.step,i=this.end,a=i-n;return ql(r)===ql(a)?e=Math.ceil(a/r):a===0&&(e=0),isNaN(e)&&(e=0),[e]},t.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},t.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},t.prototype.forEach=function(e){var n=this.start,r=this.step,i=this.end,a=0;if(r>0)for(;n<i;)e(n,[a],this),n+=r,a++;else if(r<0)for(;n>i;)e(n,[a],this),n+=r,a++},t.prototype.map=function(e){var n=[];return this.forEach(function(r,i,a){n[i[0]]=e(r,i,a)}),n},t.prototype.toArray=function(){var e=[];return this.forEach(function(n,r){e[r[0]]=n}),e},t.prototype.valueOf=function(){return this.toArray()},t.prototype.format=function(e){var n=Rf(this.start,e);return this.step!==1&&(n+=":"+Rf(this.step,e)),n+=":"+Rf(this.end,e),n},t.prototype.toString=function(){return this.format()},t.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},t.fromJSON=function(e){return new t(e.start,e.end,e.step)},t},{isClass:!0}),ule="Matrix",lle=[],cle=ie(ule,lle,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function fle(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),a=0,s=function(u){var l=i[u];if(l&&(delete r[l],delete i[u],--e,n===l)){if(!e){a=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(u){var l=i[u],c=++a;if(r[c]=u,i[u]=c,!l)return++e,e<=t?void 0:(u=r[n],s(u),u);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:s,clear:function(){e=a=0,n=1,r=Object.create(null),i=Object.create(null)}}}function u0(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:fle(n||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=e(i);if(r.cache.values.has(s))return r.cache.lru.hit(s),r.cache.values.get(s);var o=t.apply(t,i);return r.cache.values.set(s,o),r.cache.values.delete(r.cache.lru.hit(s)),o}}function M7(t){return Object.keys(t.signatures||{}).reduce(function(e,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var dle="DenseMatrix",hle=["Matrix"],ple=ie(dle,hle,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Xi(f))throw new Error("Invalid datatype: "+f);if(Ft(c))c.type==="DenseMatrix"?(this._data=Wt(c._data),this._size=Wt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Bn(c.data)&&Bn(c.size))this._data=c.data,this._size=c.size,cF(this._data,this._size),this._datatype=f||c.datatype;else if(Bn(c))this._data=l(c),this._size=Yt(this._data),cF(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Jn(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return yg(this._data,Jn)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!Bn(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new un(c.length,this._size.length);for(var f=0;f<c.length;f++)Xn(c[f],this._size[f]);for(var d=this._data,h=0,m=c.length;h<m;h++){var v=c[h];Xn(v,d.length),d=d[v]}return d},n.prototype.set=function(c,f,d){if(!Bn(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new un(c.length,this._size.length,"<");var h,m,v,y=c.map(function(x){return x+1});u(this,y,d);var p=this._data;for(h=0,m=c.length-1;h<m;h++)v=c[h],Xn(v,p.length),p=p[v];return v=c[c.length-1],Xn(v,p.length),p[v]=f,this};function r(c,f){if(!Ww(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new un(h.length,c._size.length);for(var m=f.min(),v=f.max(),y=0,p=c._size.length;y<p;y++)Xn(m[y],c._size[y]),Xn(v[y],c._size[y]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var m=h===d-1,v=f.dimension(h);return m?v.map(function(y){return Xn(y,c.length),c[y]}).valueOf():v.map(function(y){Xn(y,c.length);var p=c[y];return i(p,f,d,h+1)}).valueOf()}function a(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),v=f.isScalar(),y;if(Ft(d)?(y=d.size(),d=d.valueOf()):y=Yt(d),v){if(y.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!Gf(y,m))try{y.length===0?d=dF([d],m):d=dF(d,m),y=Yt(d)}catch{}if(m.length<c._size.length)throw new un(m.length,c._size.length,"<");if(y.length<m.length){for(var p=0,x=0;m[p]===1&&y[p]===1;)p++;for(;m[p]===1;)x++,p++;d=i7(d,m.length,x,y)}if(!Gf(m,y))throw new un(m,y,">");var g=f.max().map(function(_){return _+1});u(c,g,h);var S=m.length,E=0;s(c._data,f,d,S,E)}return c}function s(c,f,d,h,m){var v=m===h-1,y=f.dimension(m);v?y.forEach(function(p,x){Xn(p),c[p]=d[x[0]]}):y.forEach(function(p,x){Xn(p),s(c[p],f,d[x[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!Zs(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),m=d?this.clone():this;return o(m,h,f)};function o(c,f,d){if(f.length===0){for(var h=c._data;Bn(h);)h=h[0];return h}return c._size=f.slice(0),c._data=sp(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=DD(d._data,c);var h=d._size.reduce((m,v)=>m*v);return d._size=ND(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var v=0,y=f.length;v<y;v++)f[v]>h[v]&&(h[v]=f[v],m=!0);m&&o(c,h,d)}n.prototype.clone=function(){var c=new n({data:Wt(this._data),size:Wt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,d=M7(c),h=function y(p,x){return Bn(p)?p.map(function(g,S){return y(g,x.concat(S))}):d===1?c(p):d===2?c(p,x):c(p,x,f)},m=h(this._data,[]),v=this._datatype!==void 0?yg(m,Jn):void 0;return new n(m,v)},n.prototype.forEach=function(c){var f=this,d=function h(m,v){Bn(m)?m.forEach(function(y,p){h(y,v.concat(p))}):c(m,v,f)};d(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(Bn(d))for(var m=0;m<d.length;m++)yield*f(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(p){var x=h.map(g=>[g[p]]);f.push(new n(x,c._datatype))},v=0;v<d[1];v++)m(v);return f},n.prototype.toArray=function(){return Wt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return on(this._data,c)},n.prototype.toString=function(){return on(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Qt(c)&&(c=c.toNumber()),!Kt(c)||!Ct(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],v=Math.min(h-d,m-f),y=[],p=0;p<v;p++)y[p]=this._data[p+d][p+f];return new n({data:y,size:[v],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!Bn(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(A){if(Qt(A)&&(A=A.toNumber()),!Kt(A)||!Ct(A)||A<1)throw new Error("Size values must be positive integers");return A}),d){if(Qt(d)&&(d=d.toNumber()),!Kt(d)||!Ct(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,v=d<0?-d:0,y=c[0],p=c[1],x=Math.min(y-v,p-m),g;if(Bn(f)){if(f.length!==x)throw new Error("Invalid value array length");g=function(T){return f[T]}}else if(Ft(f)){var S=f.size();if(S.length!==1||S[0]!==x)throw new Error("Invalid matrix length");g=function(T){return f.get([T])}}else g=function(){return f};h||(h=Qt(g(0))?g(0).mul(0):0);var E=[];if(c.length>0){E=sp(E,c,h);for(var _=0;_<x;_++)E[_+v][_+m]=g(_)}return new n({data:E,size:[y,p]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!Kt(c)||!Ct(c)||!Kt(f)||!Ct(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xn(c,this._size[0]),Xn(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return Ft(c)?l(c.valueOf()):Bn(c)?c.map(l):c}return n},{isClass:!0}),gF="clone",mle=["typed"],vle=ie(gF,mle,t=>{var{typed:e}=t;return e(gF,{any:Wt})});function A7(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var s=[];for(r=0;r<e;r++)s.push(t[r][i]);a.push(s)}return a}function Rp(t){for(var e=0;e<t.length;e++)if(Zs(t[e]))return!0;return!1}function tl(t,e){Ft(t)&&(t=t.valueOf());for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?tl(i,e):e(i)}}function ln(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return ln(r,e)}):e(t)}function Jw(t,e,n){var r=Array.isArray(t)?Yt(t):t.size();if(e<0||e>=r.length)throw new Po(e,r.length);return Ft(t)?t.create(yb(t.valueOf(),e,n)):yb(t,e,n)}function yb(t,e,n){var r,i,a,s;if(e<=0)if(Array.isArray(t[0])){for(s=A7(t),i=[],r=0;r<s.length;r++)i[r]=yb(s[r],e-1,n);return i}else{for(a=t[0],r=1;r<t.length;r++)a=n(a,t[r]);return a}else{for(i=[],r=0;r<t.length;r++)i[r]=yb(t[r],e-1,n);return i}}function yF(t,e,n,r,i,a,s,o,u,l,c){var f=t._values,d=t._index,h=t._ptr,m,v,y,p;if(r)for(v=h[e],y=h[e+1],m=v;m<y;m++)p=d[m],n[p]!==a?(n[p]=a,s.push(p),l?(r[p]=u?o(f[m],c):o(c,f[m]),i[p]=a):r[p]=f[m]):(r[p]=u?o(f[m],r[p]):o(r[p],f[m]),i[p]=a);else for(v=h[e],y=h[e+1],m=v;m<y;m++)p=d[m],n[p]!==a?(n[p]=a,s.push(p)):i[p]=a}var xF="isInteger",gle=["typed"],yle=ie(xF,gle,t=>{var{typed:e}=t;return e(xF,{number:Ct,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),Io="number",Pp="number, number";function C7(t){return Math.abs(t)}C7.signature=Io;function T7(t,e){return t+e}T7.signature=Pp;function D7(t,e){return t-e}D7.signature=Pp;function N7(t,e){return t*e}N7.signature=Pp;function R7(t){return-t}R7.signature=Io;function P7(t){return t}P7.signature=Io;function nv(t){return yoe(t)}nv.signature=Io;function I7(t){return t*t*t}I7.signature=Io;function O7(t){return Math.exp(t)}O7.signature=Io;function F7(t){return xoe(t)}F7.signature=Io;function L7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Parameters in function lcm must be integer numbers");if(t===0||e===0)return 0;for(var n,r=t*e;e!==0;)n=e,e=t%n,t=n;return Math.abs(r/t)}L7.signature=Pp;function xle(t,e){return e?Math.log(t)/Math.log(e):Math.log(t)}function B7(t){return voe(t)}B7.signature=Io;function U7(t){return moe(t)}U7.signature=Io;function bF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=e<0;if(n&&(e=-e),e===0)throw new Error("Root must be non-zero");if(t<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(t===0)return n?1/0:0;if(!isFinite(t))return n?0:t;var r=Math.pow(Math.abs(t),1/e);return r=t<0?-r:r,n?1/r:r}function L2(t){return ql(t)}L2.signature=Io;function z7(t){return t*t}z7.signature=Io;function k7(t,e){var n,r,i,a=0,s=1,o=1,u=0;if(!Ct(t)||!Ct(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)r=Math.floor(t/e),i=t-r*e,n=a,a=s-r*a,s=n,n=o,o=u-r*o,u=n,t=e,e=i;var l;return t<0?l=[-t,-s,-u]:l=[t,t?s:0,u],l}k7.signature=Pp;function $7(t,e){return t*t<1&&e===1/0||t*t>1&&e===-1/0?0:Math.pow(t,e)}$7.signature=Pp;function wF(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!Ct(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Q9(t,e))}var ble="number",Ip="number, number";function H7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function bitAnd");return t&e}H7.signature=Ip;function G7(t){if(!Ct(t))throw new Error("Integer expected in function bitNot");return~t}G7.signature=ble;function V7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function bitOr");return t|e}V7.signature=Ip;function W7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function bitXor");return t^e}W7.signature=Ip;function q7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function leftShift");return t<<e}q7.signature=Ip;function j7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function rightArithShift");return t>>e}j7.signature=Ip;function X7(t,e){if(!Ct(t)||!Ct(e))throw new Error("Integers expected in function rightLogShift");return t>>>e}X7.signature=Ip;function Gu(t,e){if(e<t)return 1;if(e===t)return e;var n=e+t>>1;return Gu(t,n)*Gu(n+1,e)}function Y7(t,e){if(!Ct(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(!Ct(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>t)throw new TypeError("k must be less than or equal to n");for(var n=t-e,r=1,i=e<n?n+1:e+1,a=2,s=e<n?e:n,o=i;o<=t;++o)for(r*=o;a<=s&&r%a===0;)r/=a,++a;return a<=s&&(r/=Gu(a,s)),r}Y7.signature="number, number";var wle=Math.PI,Sle=2*Math.PI,_le=Math.E,Ele=1.618033988749895,Mle="number",FD="number, number";function Z7(t){return!t}Z7.signature=Mle;function K7(t,e){return!!(t||e)}K7.signature=FD;function Q7(t,e){return!!t!=!!e}Q7.signature=FD;function J7(t,e){return!!(t&&e)}J7.signature=FD;function xb(t){var e;if(Ct(t))return t<=0?isFinite(t)?1/0:NaN:t>171?1/0:Gu(1,t-1);if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*xb(1-t));if(t>=171.35)return 1/0;if(t>85){var n=t*t,r=n*t,i=r*t,a=i*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*t))}--t,e=kh[0];for(var s=1;s<kh.length;++s)e+=kh[s]/(t+s);var o=t+eH+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,t+.5)*Math.exp(-o)*e}xb.signature="number";var eH=4.7421875,kh=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],tH=.9189385332046728,Ale=5,Cle=7,SF=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function bb(t){if(t<0)return NaN;if(t===0)return 1/0;if(!isFinite(t))return t;if(t<.5)return Math.log(Math.PI/Math.sin(Math.PI*t))-bb(1-t);t=t-1;for(var e=t+Ale+.5,n=SF[0],r=Cle-1;r>=1;r--)n+=SF[r]/(t+r);return tH+(t+.5)*Math.log(e)-e+Math.log(n)}bb.signature="number";var aa="number";function nH(t){return Eoe(t)}nH.signature=aa;function rH(t){return Math.atan(1/t)}rH.signature=aa;function iH(t){return isFinite(t)?(Math.log((t+1)/t)+Math.log(t/(t-1)))/2:0}iH.signature=aa;function aH(t){return Math.asin(1/t)}aH.signature=aa;function sH(t){var e=1/t;return Math.log(e+Math.sqrt(e*e+1))}sH.signature=aa;function oH(t){return Math.acos(1/t)}oH.signature=aa;function uH(t){var e=1/t,n=Math.sqrt(e*e-1);return Math.log(n+e)}uH.signature=aa;function lH(t){return Moe(t)}lH.signature=aa;function cH(t){return Aoe(t)}cH.signature=aa;function fH(t){return 1/Math.tan(t)}fH.signature=aa;function dH(t){var e=Math.exp(2*t);return(e+1)/(e-1)}dH.signature=aa;function hH(t){return 1/Math.sin(t)}hH.signature=aa;function pH(t){return t===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(t)-Math.exp(-t)))*ql(t)}pH.signature=aa;function mH(t){return 1/Math.cos(t)}mH.signature=aa;function vH(t){return 2/(Math.exp(t)+Math.exp(-t))}vH.signature=aa;function gH(t){return Toe(t)}gH.signature=aa;var eS="number";function yH(t){return t<0}yH.signature=eS;function xH(t){return t>0}xH.signature=eS;function bH(t){return t===0}bH.signature=eS;function wH(t){return Number.isNaN(t)}wH.signature=eS;var _F="isNegative",Tle=["typed"],Dle=ie(_F,Tle,t=>{var{typed:e}=t;return e(_F,{number:yH,BigNumber:function(r){return r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s<0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),EF="isNumeric",Nle=["typed"],Rle=ie(EF,Nle,t=>{var{typed:e}=t;return e(EF,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),MF="hasNumericValue",Ple=["typed","isNumeric"],Ile=ie(MF,Ple,t=>{var{typed:e,isNumeric:n}=t;return e(MF,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return n(i)}})}),AF="isPositive",Ole=["typed"],Fle=ie(AF,Ole,t=>{var{typed:e}=t;return e(AF,{number:xH,BigNumber:function(r){return!r.isNeg()&&!r.isZero()&&!r.isNaN()},Fraction:function(r){return r.s>0&&r.n>0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),CF="isZero",Lle=["typed"],Ble=ie(CF,Lle,t=>{var{typed:e}=t;return e(CF,{number:bH,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),TF="isNaN",Ule=["typed"],zle=ie(TF,Ule,t=>{var{typed:e}=t;return e(TF,{number:wH,BigNumber:function(r){return r.isNaN()},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":function(r){return ln(r,Number.isNaN)}})}),DF="typeOf",kle=["typed"],$le=ie(DF,kle,t=>{var{typed:e}=t;return e(DF,{any:Jn})});function au(t,e,n){if(n==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}function Hle(t,e,n){return fs(t.re,e.re,n)&&fs(t.im,e.im,n)}var Op=ie("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),wb="equalScalar",Gle=["typed","config"],Vle=ie(wb,Gle,t=>{var{typed:e,config:n}=t,r=Op({typed:e});return e(wb,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return fs(a,s,n.epsilon)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||au(a,s,n.epsilon)},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return Hle(a,s,n.epsilon)}},r)});ie(wb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(wb,{"number, number":function(i,a){return fs(i,a,n.epsilon)}})});var Wle="SparseMatrix",qle=["typed","equalScalar","Matrix"],jle=ie(Wle,qle,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(v,y){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(y&&!Xi(y))throw new Error("Invalid datatype: "+y);if(Ft(v))a(this,v,y);else if(v&&Bn(v.index)&&Bn(v.ptr)&&Bn(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=y||v.datatype;else if(Bn(v))s(this,v,y);else{if(v)throw new TypeError("Unsupported type of data ("+Jn(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=y}}function a(v,y,p){y.type==="SparseMatrix"?(v._values=y._values?Wt(y._values):void 0,v._index=Wt(y._index),v._ptr=Wt(y._ptr),v._size=Wt(y._size),v._datatype=p||y._datatype):s(v,y.valueOf(),p||y._datatype)}function s(v,y,p){v._values=[],v._index=[],v._ptr=[],v._datatype=p;var x=y.length,g=0,S=n,E=0;if(Xi(p)&&(S=e.find(n,[p,p])||n,E=e.convert(0,p)),x>0){var _=0;do{v._ptr.push(v._index.length);for(var A=0;A<x;A++){var T=y[A];if(Bn(T)){if(_===0&&g<T.length&&(g=T.length),_<T.length){var M=T[_];S(M,E)||(v._values.push(M),v._index.push(A))}}else _===0&&g<1&&(g=1),S(T,E)||(v._values.push(T),v._index.push(A))}_++}while(_<g)}v._ptr.push(v._index.length),v._size=[x,g]}i.prototype=new r,i.prototype.createSparseMatrix=function(v,y){return new i(v,y)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return yg(this._values,Jn)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,y){return new i(v,y)},i.prototype.density=function(){var v=this._size[0],y=this._size[1];return v!==0&&y!==0?this._index.length/(v*y):0},i.prototype.subset=function(v,y,p){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return u(this,v,y,p);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,y){if(!Ww(y))throw new TypeError("Invalid index");var p=y.isScalar();if(p)return v.get(y.min());var x=y.size();if(x.length!==v._size.length)throw new un(x.length,v._size.length);var g,S,E,_,A=y.min(),T=y.max();for(g=0,S=v._size.length;g<S;g++)Xn(A[g],v._size[g]),Xn(T[g],v._size[g]);var M=v._values,C=v._index,N=v._ptr,P=y.dimension(0),H=y.dimension(1),L=[],z=[];P.forEach(function(I,j){z[I]=j[0],L[I]=!0});var O=M?[]:void 0,F=[],U=[];return H.forEach(function(I){for(U.push(F.length),E=N[I],_=N[I+1];E<_;E++)g=C[E],L[g]===!0&&(F.push(z[g]),O&&O.push(M[E]))}),U.push(F.length),new i({values:O,index:F,ptr:U,size:x,datatype:v._datatype})}function u(v,y,p,x){if(!y||y.isIndex!==!0)throw new TypeError("Invalid index");var g=y.size(),S=y.isScalar(),E;if(Ft(p)?(E=p.size(),p=p.toArray()):E=Yt(p),S){if(E.length!==0)throw new TypeError("Scalar expected");v.set(y.min(),p,x)}else{if(g.length!==1&&g.length!==2)throw new un(g.length,v._size.length,"<");if(E.length<g.length){for(var _=0,A=0;g[_]===1&&E[_]===1;)_++;for(;g[_]===1;)A++,_++;p=i7(p,g.length,A,E)}if(!Gf(g,E))throw new un(g,E,">");if(g.length===1){var T=y.dimension(0);T.forEach(function(N,P){Xn(N),v.set([N,0],p[P[0]],x)})}else{var M=y.dimension(0),C=y.dimension(1);M.forEach(function(N,P){Xn(N),C.forEach(function(H,L){Xn(H),v.set([N,H],p[P[0]][L[0]],x)})})}}return v}i.prototype.get=function(v){if(!Bn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new un(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var y=v[0],p=v[1];Xn(y,this._size[0]),Xn(p,this._size[1]);var x=l(y,this._ptr[p],this._ptr[p+1],this._index);return x<this._ptr[p+1]&&this._index[x]===y?this._values[x]:0},i.prototype.set=function(v,y,p){if(!Bn(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new un(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=v[0],g=v[1],S=this._size[0],E=this._size[1],_=n,A=0;Xi(this._datatype)&&(_=e.find(n,[this._datatype,this._datatype])||n,A=e.convert(0,this._datatype)),(x>S-1||g>E-1)&&(d(this,Math.max(x+1,S),Math.max(g+1,E),p),S=this._size[0],E=this._size[1]),Xn(x,S),Xn(g,E);var T=l(x,this._ptr[g],this._ptr[g+1],this._index);return T<this._ptr[g+1]&&this._index[T]===x?_(y,A)?c(T,g,this._values,this._index,this._ptr):this._values[T]=y:_(y,A)||f(T,x,g,y,this._values,this._index,this._ptr),this};function l(v,y,p,x){if(p-y===0)return p;for(var g=y;g<p;g++)if(x[g]===v)return g;return y}function c(v,y,p,x,g){p.splice(v,1),x.splice(v,1);for(var S=y+1;S<g.length;S++)g[S]--}function f(v,y,p,x,g,S,E){g.splice(v,0,x),S.splice(v,0,y);for(var _=p+1;_<E.length;_++)E[_]++}i.prototype.resize=function(v,y,p){if(!Zs(v))throw new TypeError("Array or Matrix expected");var x=v.valueOf().map(S=>Array.isArray(S)&&S.length===1?S[0]:S);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(S){if(!Kt(S)||!Ct(S)||S<0)throw new TypeError("Invalid size, must contain positive integers (size: "+on(x)+")")});var g=p?this.clone():this;return d(g,x[0],x[1],y)};function d(v,y,p,x){var g=x||0,S=n,E=0;Xi(v._datatype)&&(S=e.find(n,[v._datatype,v._datatype])||n,E=e.convert(0,v._datatype),g=e.convert(g,v._datatype));var _=!S(g,E),A=v._size[0],T=v._size[1],M,C,N;if(p>T){for(C=T;C<p;C++)if(v._ptr[C]=v._values.length,_)for(M=0;M<A;M++)v._values.push(g),v._index.push(M);v._ptr[p]=v._values.length}else p<T&&(v._ptr.splice(p+1,T-p),v._values.splice(v._ptr[p],v._values.length),v._index.splice(v._ptr[p],v._index.length));if(T=p,y>A){if(_){var P=0;for(C=0;C<T;C++){v._ptr[C]=v._ptr[C]+P,N=v._ptr[C+1]+P;var H=0;for(M=A;M<y;M++,H++)v._values.splice(N+H,0,g),v._index.splice(N+H,0,M),P++}v._ptr[T]=v._values.length}}else if(y<A){var L=0;for(C=0;C<T;C++){v._ptr[C]=v._ptr[C]-L;var z=v._ptr[C],O=v._ptr[C+1]-L;for(N=z;N<O;N++)M=v._index[N],M>y-1&&(v._values.splice(N,1),v._index.splice(N,1),L++)}v._ptr[C]=v._values.length}return v._size[0]=y,v._size[1]=p,v}i.prototype.reshape=function(v,y){if(!Bn(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(I){if(!Kt(I)||!Ct(I)||I<=-2||I===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+on(v)+")")});var p=this._size[0]*this._size[1];v=ND(v,p);var x=v[0]*v[1];if(p!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=y?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return g;for(var S=[],E=0;E<g._ptr.length;E++)for(var _=0;_<g._ptr[E+1]-g._ptr[E];_++)S.push(E);for(var A=g._values.slice(),T=g._index.slice(),M=0;M<g._index.length;M++){var C=T[M],N=S[M],P=C*g._size[1]+N;S[M]=P%v[1],T[M]=Math.floor(P/v[1])}g._values.length=0,g._index.length=0,g._ptr.length=v[1]+1,g._size=v.slice();for(var H=0;H<g._ptr.length;H++)g._ptr[H]=0;for(var L=0;L<A.length;L++){var z=T[L],O=S[L],F=A[L],U=l(z,g._ptr[O],g._ptr[O+1],g._index);f(U,z,O,F,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var v=new i({values:this._values?Wt(this._values):void 0,index:Wt(this._index),ptr:Wt(this._ptr),size:Wt(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,y){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var p=this,x=this._size[0],g=this._size[1],S=M7(v),E=function(A,T,M){return S===1?v(A):S===2?v(A,[T,M]):v(A,[T,M],p)};return h(this,0,x-1,0,g-1,E,y)};function h(v,y,p,x,g,S,E){var _=[],A=[],T=[],M=n,C=0;Xi(v._datatype)&&(M=e.find(n,[v._datatype,v._datatype])||n,C=e.convert(0,v._datatype));for(var N=function(q,ae,be){q=S(q,ae,be),M(q,C)||(_.push(q),A.push(ae))},P=x;P<=g;P++){T.push(_.length);var H=v._ptr[P],L=v._ptr[P+1];if(E)for(var z=H;z<L;z++){var O=v._index[z];O>=y&&O<=p&&N(v._values[z],O-y,P-x)}else{for(var F={},U=H;U<L;U++){var I=v._index[U];F[I]=v._values[U]}for(var j=y;j<=p;j++){var ee=j in F?F[j]:0;N(ee,j-y,P-x)}}}return T.push(_.length),new i({values:_,index:A,ptr:T,size:[p-y+1,g-x+1]})}i.prototype.forEach=function(v,y){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var p=this,x=this._size[0],g=this._size[1],S=0;S<g;S++){var E=this._ptr[S],_=this._ptr[S+1];if(y)for(var A=E;A<_;A++){var T=this._index[A];v(this._values[A],[T,S],p)}else{for(var M={},C=E;C<_;C++){var N=this._index[C];M[N]=this._values[C]}for(var P=0;P<x;P++){var H=P in M?M[P]:0;v(H,[P,S],p)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],y=0;y<v;y++)for(var p=this._ptr[y],x=this._ptr[y+1],g=p;g<x;g++){var S=this._index[g];yield{value:this._values[g],index:[S,y]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(v,y,p,x,g){var S=x[0],E=x[1],_=[],A,T;for(A=0;A<S;A++)for(_[A]=[],T=0;T<E;T++)_[A][T]=0;for(T=0;T<E;T++)for(var M=p[T],C=p[T+1],N=M;N<C;N++)A=y[N],_[A][T]=v?g?Wt(v[N]):v[N]:1;return _}return i.prototype.format=function(v){for(var y=this._size[0],p=this._size[1],x=this.density(),g="Sparse Matrix ["+on(y,v)+" x "+on(p,v)+"] density: "+on(x,v)+`
`,S=0;S<p;S++)for(var E=this._ptr[S],_=this._ptr[S+1],A=E;A<_;A++){var T=this._index[A];g+=`
    (`+on(T,v)+", "+on(S,v)+") ==> "+(this._values?on(this._values[A],v):"X")}return g},i.prototype.toString=function(){return on(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Qt(v)&&(v=v.toNumber()),!Kt(v)||!Ct(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var y=v>0?v:0,p=v<0?-v:0,x=this._size[0],g=this._size[1],S=Math.min(x-p,g-y),E=[],_=[],A=[];A[0]=0;for(var T=y;T<g&&E.length<S;T++)for(var M=this._ptr[T],C=this._ptr[T+1],N=M;N<C;N++){var P=this._index[N];if(P===T-y+p){E.push(this._values[N]),_[E.length-1]=P-p;break}}return A.push(E.length),new i({values:E,index:_,ptr:A,size:[S,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,y,p,x,g){if(!Bn(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(I){if(Qt(I)&&(I=I.toNumber()),!Kt(I)||!Ct(I)||I<1)throw new Error("Size values must be positive integers");return I}),p){if(Qt(p)&&(p=p.toNumber()),!Kt(p)||!Ct(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var S=n,E=0;Xi(g)&&(S=e.find(n,[g,g])||n,E=e.convert(0,g));var _=p>0?p:0,A=p<0?-p:0,T=v[0],M=v[1],C=Math.min(T-A,M-_),N;if(Bn(y)){if(y.length!==C)throw new Error("Invalid value array length");N=function(j){return y[j]}}else if(Ft(y)){var P=y.size();if(P.length!==1||P[0]!==C)throw new Error("Invalid matrix length");N=function(j){return y.get([j])}}else N=function(){return y};for(var H=[],L=[],z=[],O=0;O<M;O++){z.push(H.length);var F=O-_;if(F>=0&&F<C){var U=N(F);S(U,E)||(L.push(F+A),H.push(U))}}return z.push(H.length),new i({values:H,index:L,ptr:z,size:[T,M]})},i.prototype.swapRows=function(v,y){if(!Kt(v)||!Ct(v)||!Kt(y)||!Ct(y))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xn(v,this._size[0]),Xn(y,this._size[0]),i._swapRows(v,y,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,y,p,x,g){for(var S=x[v],E=x[v+1],_=S;_<E;_++)g(p[_],y[_])},i._swapRows=function(v,y,p,x,g,S){for(var E=0;E<p;E++){var _=S[E],A=S[E+1],T=l(v,_,A,g),M=l(y,_,A,g);if(T<A&&M<A&&g[T]===v&&g[M]===y){if(x){var C=x[T];x[T]=x[M],x[M]=C}continue}if(T<A&&g[T]===v&&(M>=A||g[M]!==y)){var N=x?x[T]:void 0;g.splice(M,0,y),x&&x.splice(M,0,N),g.splice(M<=T?T+1:T,1),x&&x.splice(M<=T?T+1:T,1);continue}if(M<A&&g[M]===y&&(T>=A||g[T]!==v)){var P=x?x[M]:void 0;g.splice(T,0,v),x&&x.splice(T,0,P),g.splice(T<=M?M+1:M,1),x&&x.splice(T<=M?M+1:M,1)}}},i},{isClass:!0}),Xle="number",Yle=["typed"];function Zle(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function Kle(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var a=e+n;if(isNaN(a))throw new SyntaxError('String "'+t.input+'" is not a valid number');return a}var Qle=ie(Xle,Yle,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var a=Zle(i);if(a)return Kle(a);var s=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(s=Number(o[2]),i=o[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(u>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),null:function(i){return 0},"Unit, string | Unit":function(i,a){return i.toNumber(a)},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),NF="string",Jle=["typed"],ece=ie(NF,Jle,t=>{var{typed:e}=t;return e(NF,{"":function(){return""},number:Rf,null:function(r){return"null"},boolean:function(r){return r+""},string:function(r){return r},"Array | Matrix":e.referToSelf(n=>r=>ln(r,n)),any:function(r){return String(r)}})}),RF="boolean",tce=["typed"],nce=ie(RF,tce,t=>{var{typed:e}=t;return e(RF,{"":function(){return!1},boolean:function(r){return r},number:function(r){return!!r},null:function(r){return!1},BigNumber:function(r){return!r.isZero()},string:function(r){var i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var a=Number(r);if(r!==""&&!isNaN(a))return!!a;throw new Error('Cannot convert "'+r+'" to a boolean')},"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),rce="bignumber",ice=["typed","BigNumber"],ace=ie(rce,ice,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(a){var s=a[2],o=n(a[1]),u=new n(2).pow(Number(s));if(o.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(s)-1);return o.gte(l)?o.sub(u):o}return new n(i)},BigNumber:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))})}),sce="complex",oce=["typed","Complex"],uce=ie(sce,oce,t=>{var{typed:e,Complex:n}=t;return e("complex",{"":function(){return n.ZERO},number:function(i){return new n(i,0)},"number, number":function(i,a){return new n(i,a)},"BigNumber, BigNumber":function(i,a){return new n(i.toNumber(),a.toNumber())},Fraction:function(i){return new n(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return n(i)},null:function(i){return n(0)},Object:function(i){if("re"in i&&"im"in i)return new n(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new n(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))})}),lce="fraction",cce=["typed","Fraction"],fce=ie(lce,cce,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,a){return new n(i,a)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(r=>i=>{var a=i.clone();return a.value=r(i.value),a}),Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))})}),PF="matrix",dce=["typed","Matrix","DenseMatrix","SparseMatrix"],hce=ie(PF,dce,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(PF,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,u){return a([],o,u)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,u){if(o==="dense"||o==="default"||o===void 0)return new r(s,u);if(o==="sparse")return new i(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),IF="matrixFromFunction",pce=["typed","matrix","isZero"],mce=ie(IF,pce,t=>{var{typed:e,matrix:n,isZero:r}=t;return e(IF,{"Array | Matrix, function, string, string":function(s,o,u,l){return i(s,o,u,l)},"Array | Matrix, function, string":function(s,o,u){return i(s,o,u)},"Matrix, function":function(s,o){return i(s,o,"dense")},"Array, function":function(s,o){return i(s,o,"dense").toArray()},"Array | Matrix, string, function":function(s,o,u){return i(s,u,o)},"Array | Matrix, string, string, function":function(s,o,u,l){return i(s,l,o,u)}});function i(a,s,o,u){var l;return u!==void 0?l=n(o,u):l=n(o),l.resize(a),l.forEach(function(c,f){var d=s(f);r(d)||l.set(f,d)}),l}}),OF="matrixFromRows",vce=["typed","matrix","flatten","size"],gce=ie(OF,vce,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(OF,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var u=s(o[0]),l=[];for(var c of o){var f=s(c);if(f!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(f|0));l.push(r(c))}return l}function s(o){var u=i(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),FF="matrixFromColumns",yce=["typed","matrix","flatten","size"],xce=ie(FF,yce,t=>{var{typed:e,matrix:n,flatten:r,size:i}=t;return e(FF,{"...Array":function(u){return a(u)},"...Matrix":function(u){return n(a(u.map(l=>l.toArray())))}});function a(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var u=s(o[0]),l=[],c=0;c<u;c++)l[c]=[];for(var f of o){var d=s(f);if(d!==u)throw new TypeError("The vectors had different length: "+(u|0)+"  "+(d|0));for(var h=r(f),m=0;m<u;m++)l[m].push(h[m])}return l}function s(o){var u=i(o);if(u.length===1)return u[0];if(u.length===2){if(u[0]===1)return u[1];if(u[1]===1)return u[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),LF="splitUnit",bce=["typed"],wce=ie(LF,bce,t=>{var{typed:e}=t;return e(LF,{"Unit, Array":function(r,i){return r.splitUnit(i)}})}),BF="unaryMinus",Sce=["typed"],_ce=ie(BF,Sce,t=>{var{typed:e}=t;return e(BF,{number:R7,"Complex | BigNumber | Fraction":n=>n.neg(),Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),UF="unaryPlus",Ece=["typed","config","BigNumber"],Mce=ie(UF,Ece,t=>{var{typed:e,config:n,BigNumber:r}=t;return e(UF,{number:P7,Complex:function(a){return a},BigNumber:function(a){return a},Fraction:function(a){return a},Unit:function(a){return a.clone()},"Array | Matrix":e.referToSelf(i=>a=>ln(a,i)),"boolean | string":function(a){return n.number==="BigNumber"?new r(+a):+a}})}),zF="abs",Ace=["typed"],Cce=ie(zF,Ace,t=>{var{typed:e}=t;return e(zF,{number:C7,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),kF="apply",Tce=["typed","isInteger"],LD=ie(kF,Tce,t=>{var{typed:e,isInteger:n}=t;return e(kF,{"Array | Matrix, number | BigNumber, function":function(i,a,s){if(!n(a))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?Yt(i):i.size();if(a<0||a>=o.length)throw new Po(a,o.length);return Ft(i)?i.create(Sb(i.valueOf(),a,s)):Sb(i,a,s)}})});function Sb(t,e,n){var r,i,a;if(e<=0)if(Array.isArray(t[0])){for(a=Dce(t),i=[],r=0;r<a.length;r++)i[r]=Sb(a[r],e-1,n);return i}else return n(t);else{for(i=[],r=0;r<t.length;r++)i[r]=Sb(t[r],e-1,n);return i}}function Dce(t){var e=t.length,n=t[0].length,r,i,a=[];for(i=0;i<n;i++){var s=[];for(r=0;r<e;r++)s.push(t[r][i]);a.push(s)}return a}var $F="addScalar",Nce=["typed"],Rce=ie($F,Nce,t=>{var{typed:e}=t;return e($F,{"number, number":T7,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),HF="subtractScalar",Pce=["typed"],Ice=ie(HF,Pce,t=>{var{typed:e}=t;return e(HF,{"number, number":D7,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var a=r.clone();return a.value=e.find(n,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),GF="cbrt",Oce=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Fce=ie(GF,Oce,t=>{var{config:e,typed:n,isNegative:r,unaryMinus:i,matrix:a,Complex:s,BigNumber:o,Fraction:u}=t;return n(GF,{number:nv,Complex:l,"Complex, boolean":l,BigNumber:function(d){return d.cbrt()},Unit:c});function l(f,d){var h=f.arg()/3,m=f.abs(),v=new s(nv(m),0).mul(new s(0,h).exp());if(d){var y=[v,new s(nv(m),0).mul(new s(0,h+Math.PI*2/3).exp()),new s(nv(m),0).mul(new s(0,h-Math.PI*2/3).exp())];return e.matrix==="Array"?y:a(y)}else return v}function c(f){if(f.value&&qu(f.value)){var d=f.clone();return d.value=1,d=d.pow(1/3),d.value=l(f.value),d}else{var h=r(f.value);h&&(f.value=i(f.value));var m;Qt(f.value)?m=new o(1).div(3):a0(f.value)?m=new u(1,3):m=1/3;var v=f.pow(m);return h&&(v.value=i(v.value)),v}}}),Lce="matAlgo11xS0s",Bce=["typed","equalScalar"],Pi=ie(Lce,Bce,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=n,p=0,x=s;typeof d=="string"&&(v=d,y=e.find(n,[v,v]),p=e.convert(0,v),a=e.convert(a,v),x=e.find(s,[v,v]));for(var g=[],S=[],E=[],_=0;_<m;_++){E[_]=S.length;for(var A=c[_],T=c[_+1],M=A;M<T;M++){var C=l[M],N=o?x(a,u[M]):x(u[M],a);y(N,p)||(S.push(C),g.push(N))}}return E[m]=S.length,i.createSparseMatrix({values:g,index:S,ptr:E,size:[h,m],datatype:v})}}),Uce="matAlgo12xSfs",zce=["typed","DenseMatrix"],ci=ie(Uce,zce,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,a=e.convert(a,v),y=e.find(s,[v,v]));for(var p=[],x=[],g=[],S=0;S<m;S++){for(var E=S+1,_=c[S],A=c[S+1],T=_;T<A;T++){var M=l[T];x[M]=u[T],g[M]=E}for(var C=0;C<h;C++)S===0&&(p[C]=[]),g[C]===E?p[C][S]=o?y(a,x[C]):y(x[C],a):p[C][S]=o?y(a,0):y(0,a)}return new n({data:p,size:[h,m],datatype:v})}}),kce="matAlgo14xDs",$ce=["typed"],Oo=ie(kce,$ce,t=>{var{typed:e}=t;return function(i,a,s,o){var u=i._data,l=i._size,c=i._datatype,f,d=s;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(s,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,a,o):[];return i.createDenseMatrix({data:h,size:Wt(l),datatype:f})};function n(r,i,a,s,o,u,l){var c=[];if(i===a.length-1)for(var f=0;f<s;f++)c[f]=l?r(u,o[f]):r(o[f],u);else for(var d=0;d<s;d++)c[d]=n(r,i+1,a,a[i+1],o[d],u,l);return c}}),B2="ceil",Hce=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Gce=ie(B2,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(B2,{number:function(a){return fs(a,r(a),n.epsilon)?r(a):Math.ceil(a)},"number, number":function(a,s){if(fs(a,r(a,s),n.epsilon))return r(a,s);var[o,u]="".concat(a,"e").split("e"),l=Math.ceil(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),Vce=ie(B2,Hce,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,u=Pi({typed:e,equalScalar:a}),l=ci({typed:e,DenseMatrix:o}),c=Oo({typed:e}),f=Gce({typed:e,config:n,round:r});return e("ceil",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.ceil()},"Complex, number":function(h,m){return h.ceil(m)},"Complex, BigNumber":function(h,m){return h.ceil(m.toNumber())},BigNumber:function(h){return au(h,r(h),n.epsilon)?r(h):h.ceil()},"BigNumber, BigNumber":function(h,m){return au(h,r(h,m),n.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),mc.ROUND_CEIL)},Fraction:function(h){return h.ceil()},"Fraction, number":function(h,m){return h.ceil(m)},"Fraction, BigNumber":function(h,m){return h.ceil(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>ln(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>ln(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>a(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),VF="cube",Wce=["typed"],qce=ie(VF,Wce,t=>{var{typed:e}=t;return e(VF,{number:I7,Complex:function(r){return r.mul(r).mul(r)},BigNumber:function(r){return r.times(r).times(r)},Fraction:function(r){return r.pow(3)},Unit:function(r){return r.pow(3)}})}),WF="exp",jce=["typed"],Xce=ie(WF,jce,t=>{var{typed:e}=t;return e(WF,{number:O7,Complex:function(r){return r.exp()},BigNumber:function(r){return r.exp()}})}),qF="expm1",Yce=["typed","Complex"],Zce=ie(qF,Yce,t=>{var{typed:e,Complex:n}=t;return e(qF,{number:F7,Complex:function(i){var a=Math.exp(i.re);return new n(a*Math.cos(i.im)-1,a*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),U2="fix",Kce=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Qce=ie(U2,["typed","ceil","floor"],t=>{var{typed:e,ceil:n,floor:r}=t;return e(U2,{number:function(a){return a>0?r(a):n(a)},"number, number":function(a,s){return a>0?r(a,s):n(a,s)}})}),Jce=ie(U2,Kce,t=>{var{typed:e,Complex:n,matrix:r,ceil:i,floor:a,equalScalar:s,zeros:o,DenseMatrix:u}=t,l=ci({typed:e,DenseMatrix:u}),c=Oo({typed:e}),f=Qce({typed:e,ceil:i,floor:a});return e("fix",{number:f.signatures.number,"number, number | BigNumber":f.signatures["number,number"],Complex:function(h){return new n(h.re>0?Math.floor(h.re):Math.ceil(h.re),h.im>0?Math.floor(h.im):Math.ceil(h.im))},"Complex, number":function(h,m){return new n(h.re>0?a(h.re,m):i(h.re,m),h.im>0?a(h.im,m):i(h.im,m))},"Complex, BigNumber":function(h,m){var v=m.toNumber();return new n(h.re>0?a(h.re,v):i(h.re,v),h.im>0?a(h.im,v):i(h.im,v))},BigNumber:function(h){return h.isNegative()?i(h):a(h)},"BigNumber, number | BigNumber":function(h,m){return h.isNegative()?i(h,m):a(h,m)},Fraction:function(h){return h.s<0?h.ceil():h.floor()},"Fraction, number | BigNumber":function(h,m){return h.s<0?i(h,m):a(h,m)},"Array | Matrix":e.referToSelf(d=>h=>ln(h,d)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(h,m)=>ln(h,v=>d(v,m))),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(r(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>s(h,0)?o(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),z2="floor",efe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],tfe=ie(z2,["typed","config","round"],t=>{var{typed:e,config:n,round:r}=t;return e(z2,{number:function(a){return fs(a,r(a),n.epsilon)?r(a):Math.floor(a)},"number, number":function(a,s){if(fs(a,r(a,s),n.epsilon))return r(a,s);var[o,u]="".concat(a,"e").split("e"),l=Math.floor(Number("".concat(o,"e").concat(Number(u)+s)));return[o,u]="".concat(l,"e").split("e"),Number("".concat(o,"e").concat(Number(u)-s))}})}),SH=ie(z2,efe,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}=t,u=Pi({typed:e,equalScalar:a}),l=ci({typed:e,DenseMatrix:o}),c=Oo({typed:e}),f=tfe({typed:e,config:n,round:r});return e("floor",{number:f.signatures.number,"number,number":f.signatures["number,number"],Complex:function(h){return h.floor()},"Complex, number":function(h,m){return h.floor(m)},"Complex, BigNumber":function(h,m){return h.floor(m.toNumber())},BigNumber:function(h){return au(h,r(h),n.epsilon)?r(h):h.floor()},"BigNumber, BigNumber":function(h,m){return au(h,r(h,m),n.epsilon)?r(h,m):h.toDecimalPlaces(m.toNumber(),mc.ROUND_FLOOR)},Fraction:function(h){return h.floor()},"Fraction, number":function(h,m){return h.floor(m)},"Fraction, BigNumber":function(h,m){return h.floor(m.toNumber())},"Array | Matrix":e.referToSelf(d=>h=>ln(h,d)),"Array, number | BigNumber":e.referToSelf(d=>(h,m)=>ln(h,v=>d(v,m))),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>u(h,m,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(h,m)=>c(h,m,d,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(h,m)=>c(i(m),h,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(h,m)=>a(h,0)?s(m.size(),m.storage()):m.storage()==="dense"?c(m,h,d,!0):l(m,h,d,!0))})}),nfe="matAlgo02xDS0",rfe=["typed","equalScalar"],Fo=ie(nfe,rfe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s,o){var u=i._data,l=i._size,c=i._datatype,f=a._values,d=a._index,h=a._ptr,m=a._size,v=a._datatype;if(l.length!==m.length)throw new un(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var y=l[0],p=l[1],x,g=n,S=0,E=s;typeof c=="string"&&c===v&&(x=c,g=e.find(n,[x,x]),S=e.convert(0,x),E=e.find(s,[x,x]));for(var _=[],A=[],T=[],M=0;M<p;M++){T[M]=A.length;for(var C=h[M],N=h[M+1],P=C;P<N;P++){var H=d[P],L=o?E(f[P],u[H][M]):E(u[H][M],f[P]);g(L,S)||(A.push(H),_.push(L))}}return T[p]=A.length,a.createSparseMatrix({values:_,index:A,ptr:T,size:[y,p],datatype:x})}}),ife="matAlgo03xDSf",afe=["typed"],Aa=ie(ife,afe,t=>{var{typed:e}=t;return function(r,i,a,s){var o=r._data,u=r._size,l=r._datatype,c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype;if(u.length!==h.length)throw new un(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],p,x=0,g=a;typeof l=="string"&&l===m&&(p=l,x=e.convert(0,p),g=e.find(a,[p,p]));for(var S=[],E=0;E<v;E++)S[E]=[];for(var _=[],A=[],T=0;T<y;T++){for(var M=T+1,C=d[T],N=d[T+1],P=C;P<N;P++){var H=f[P];_[H]=s?g(c[P],o[H][T]):g(o[H][T],c[P]),A[H]=M}for(var L=0;L<v;L++)A[L]===M?S[L][T]=_[L]:S[L][T]=s?g(x,o[L][T]):g(o[L][T],x)}return r.createDenseMatrix({data:S,size:[v,y],datatype:p})}}),sfe="matAlgo05xSfSf",ofe=["typed","equalScalar"],tS=ie(sfe,ofe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,d=a._values,h=a._index,m=a._ptr,v=a._size,y=a._datatype;if(c.length!==v.length)throw new un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],x=c[1],g,S=n,E=0,_=s;typeof f=="string"&&f===y&&(g=f,S=e.find(n,[g,g]),E=e.convert(0,g),_=e.find(s,[g,g]));var A=o&&d?[]:void 0,T=[],M=[],C=A?[]:void 0,N=A?[]:void 0,P=[],H=[],L,z,O,F;for(z=0;z<x;z++){M[z]=T.length;var U=z+1;for(O=l[z],F=l[z+1];O<F;O++)L=u[O],T.push(L),P[L]=U,C&&(C[L]=o[O]);for(O=m[z],F=m[z+1];O<F;O++)L=h[O],P[L]!==U&&T.push(L),H[L]=U,N&&(N[L]=d[O]);if(A)for(O=M[z];O<T.length;){L=T[O];var I=P[L],j=H[L];if(I===U||j===U){var ee=I===U?C[L]:E,J=j===U?N[L]:E,q=_(ee,J);S(q,E)?T.splice(O,1):(A.push(q),O++)}}}return M[x]=T.length,i.createSparseMatrix({values:A,index:T,ptr:M,size:[p,x],datatype:g})}}),ufe="matAlgo13xDD",lfe=["typed"],cfe=ie(ufe,lfe,t=>{var{typed:e}=t;return function(i,a,s){var o=i._data,u=i._size,l=i._datatype,c=a._data,f=a._size,d=a._datatype,h=[];if(u.length!==f.length)throw new un(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var v,y=s;typeof l=="string"&&l===d&&(v=l,y=e.find(s,[v,v]));var p=h.length>0?n(y,0,h,h[0],o,c):[];return i.createDenseMatrix({data:p,size:h,datatype:v})};function n(r,i,a,s,o,u){var l=[];if(i===a.length-1)for(var c=0;c<s;c++)l[c]=r(o[c],u[c]);else for(var f=0;f<s;f++)l[f]=n(r,i+1,a,a[i+1],o[f],u[f]);return l}}),ffe="broadcast",dfe=["concat"],hfe=ie(ffe,dfe,t=>{var{concat:e}=t;return function(i,a){var s=Math.max(i._size.length,a._size.length);if(i._size.length===a._size.length&&i._size.every((m,v)=>m===a._size[v]))return[i,a];for(var o=n(i._size,s,0),u=n(a._size,s,0),l=[],c=0;c<s;c++)l[c]=Math.max(o[c],u[c]);pb(o,l),pb(u,l);var f=i.clone(),d=a.clone();f._size.length<s?f.reshape(n(f._size,s,1)):d._size.length<s&&d.reshape(n(d._size,s,1));for(var h=0;h<s;h++)f._size[h]<l[h]&&(f=r(f,l[h],h)),d._size[h]<l[h]&&(d=r(d,l[h],h));return[f,d]};function n(i,a,s){return[...Array(a-i.length).fill(s),...i]}function r(i,a,s){return e(...Array(a).fill(i),s)}}),pfe="matrixAlgorithmSuite",mfe=["typed","matrix","concat"],ar=ie(pfe,mfe,t=>{var{typed:e,matrix:n,concat:r}=t,i=cfe({typed:e}),a=Oo({typed:e}),s=hfe({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(v,y)=>i(...s(v,y),l),"Array, Array":(v,y)=>i(...s(n(v),n(y)),l).valueOf(),"Array, DenseMatrix":(v,y)=>i(...s(n(v),y),l),"DenseMatrix, Array":(v,y)=>i(...s(v,n(y)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(v,y)=>u.SS(...s(v,y),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(v,y)=>u.DS(...s(v,y),l,!1),f["Array, SparseMatrix"]=(v,y)=>u.DS(...s(n(v),y),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,y)=>c(...s(y,v),l,!0),f["SparseMatrix, Array"]=(v,y)=>c(...s(n(y),v),l,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(y,p)=>i(...s(y,p),v)),"Array, Array":e.referToSelf(v=>(y,p)=>i(...s(n(y),n(p)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(y,p)=>i(...s(n(y),p),v)),"DenseMatrix, Array":e.referToSelf(v=>(y,p)=>i(...s(y,n(p)),v))},u.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,p)=>u.SS(...s(y,p),v,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(y,p)=>u.DS(...s(y,p),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(y,p)=>u.DS(...s(n(y),p),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(y,p)=>c(...s(p,y),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(y,p)=>c(...s(n(p),y),v,!0))));var d=u.scalar||"any",h=u.Ds||u.Ss;h&&(l?(f["DenseMatrix,"+d]=(v,y)=>a(v,y,l,!1),f[d+", DenseMatrix"]=(v,y)=>a(y,v,l,!0),f["Array,"+d]=(v,y)=>a(n(v),y,l,!1).valueOf(),f[d+", Array"]=(v,y)=>a(n(y),v,l,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(v=>(y,p)=>a(y,p,v,!1)),f[d+", DenseMatrix"]=e.referToSelf(v=>(y,p)=>a(p,y,v,!0)),f["Array,"+d]=e.referToSelf(v=>(y,p)=>a(n(y),p,v,!1).valueOf()),f[d+", Array"]=e.referToSelf(v=>(y,p)=>a(n(p),y,v,!0).valueOf())));var m=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+d]=(v,y)=>u.Ss(v,y,l,!1)),m&&(f[d+", SparseMatrix"]=(v,y)=>m(y,v,l,!0))):(u.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(v=>(y,p)=>u.Ss(y,p,v,!1))),m&&(f[d+", SparseMatrix"]=e.referToSelf(v=>(y,p)=>m(p,y,v,!0)))),l&&l.signatures&&Y9(f,l.signatures),f}}),jF="mod",vfe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],_H=ie(jF,vfe,t=>{var{typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o,concat:u}=t,l=SH({typed:e,config:n,round:r,matrix:i,equalScalar:a,zeros:s,DenseMatrix:o}),c=Fo({typed:e,equalScalar:a}),f=Aa({typed:e}),d=tS({typed:e,equalScalar:a}),h=Pi({typed:e,equalScalar:a}),m=ci({typed:e,DenseMatrix:o}),v=ar({typed:e,matrix:i,concat:u});return e(jF,{"number, number":y,"BigNumber, BigNumber":function(x,g){return g.isZero()?x:x.sub(g.mul(l(x.div(g))))},"Fraction, Fraction":function(x,g){return g.equals(0)?x:x.sub(g.mul(l(x.div(g))))}},v({SS:d,DS:f,SD:c,Ss:h,sS:m}));function y(p,x){return x===0?p:p-x*l(p/x)}}),gfe="matAlgo01xDSid",yfe=["typed"],Nc=ie(gfe,yfe,t=>{var{typed:e}=t;return function(r,i,a,s){var o=r._data,u=r._size,l=r._datatype,c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype;if(u.length!==h.length)throw new un(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=u[0],y=u[1],p=typeof l=="string"&&l===m?l:void 0,x=p?e.find(a,[p,p]):a,g,S,E=[];for(g=0;g<v;g++)E[g]=[];var _=[],A=[];for(S=0;S<y;S++){for(var T=S+1,M=d[S],C=d[S+1],N=M;N<C;N++)g=f[N],_[g]=s?x(c[N],o[g][S]):x(o[g][S],c[N]),A[g]=T;for(g=0;g<v;g++)A[g]===T?E[g][S]=_[g]:E[g][S]=o[g][S]}return r.createDenseMatrix({data:E,size:[v,y],datatype:p})}}),xfe="matAlgo04xSidSid",bfe=["typed","equalScalar"],BD=ie(xfe,bfe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,d=a._values,h=a._index,m=a._ptr,v=a._size,y=a._datatype;if(c.length!==v.length)throw new un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],x=c[1],g,S=n,E=0,_=s;typeof f=="string"&&f===y&&(g=f,S=e.find(n,[g,g]),E=e.convert(0,g),_=e.find(s,[g,g]));var A=o&&d?[]:void 0,T=[],M=[],C=o&&d?[]:void 0,N=o&&d?[]:void 0,P=[],H=[],L,z,O,F,U;for(z=0;z<x;z++){M[z]=T.length;var I=z+1;for(F=l[z],U=l[z+1],O=F;O<U;O++)L=u[O],T.push(L),P[L]=I,C&&(C[L]=o[O]);for(F=m[z],U=m[z+1],O=F;O<U;O++)if(L=h[O],P[L]===I){if(C){var j=_(C[L],d[O]);S(j,E)?P[L]=null:C[L]=j}}else T.push(L),H[L]=I,N&&(N[L]=d[O]);if(C&&N)for(O=M[z];O<T.length;)L=T[O],P[L]===I?(A[O]=C[L],O++):H[L]===I?(A[O]=N[L],O++):T.splice(O,1)}return M[x]=T.length,i.createSparseMatrix({values:A,index:T,ptr:M,size:[p,x],datatype:g})}}),wfe="matAlgo10xSids",Sfe=["typed","DenseMatrix"],nd=ie(wfe,Sfe,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,a,s,o){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],v,y=s;typeof d=="string"&&(v=d,a=e.convert(a,v),y=e.find(s,[v,v]));for(var p=[],x=[],g=[],S=0;S<m;S++){for(var E=S+1,_=c[S],A=c[S+1],T=_;T<A;T++){var M=l[T];x[M]=u[T],g[M]=E}for(var C=0;C<h;C++)S===0&&(p[C]=[]),g[C]===E?p[C][S]=o?y(a,x[C]):y(x[C],a):p[C][S]=a}return new n({data:p,size:[h,m],datatype:v})}});function rd(t,e,n,r){if(!(this instanceof rd))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(r!=null?"-"+r:"")+" expected)",this.stack=new Error().stack}rd.prototype=new Error;rd.prototype.constructor=Error;rd.prototype.name="ArgumentsError";rd.prototype.isArgumentsError=!0;var XF="gcd",_fe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],hM="number | BigNumber | Fraction | Matrix | Array",Efe="".concat(hM,", ").concat(hM,", ...").concat(hM);function YF(t){return!t.some(e=>Array.isArray(e))}var Mfe=ie(XF,_fe,t=>{var{typed:e,matrix:n,config:r,round:i,equalScalar:a,zeros:s,BigNumber:o,DenseMatrix:u,concat:l}=t,c=_H({typed:e,config:r,round:i,matrix:n,equalScalar:a,zeros:s,DenseMatrix:u,concat:l}),f=Nc({typed:e}),d=BD({typed:e,equalScalar:a}),h=nd({typed:e,DenseMatrix:u}),m=ar({typed:e,matrix:n,concat:l});return e(XF,{"number, number":v,"BigNumber, BigNumber":y,"Fraction, Fraction":(p,x)=>p.gcd(x)},m({SS:d,DS:f,Ss:h}),{[Efe]:e.referToSelf(p=>(x,g,S)=>{for(var E=p(x,g),_=0;_<S.length;_++)E=p(E,S[_]);return E}),Array:e.referToSelf(p=>x=>{if(x.length===1&&Array.isArray(x[0])&&YF(x[0]))return p(...x[0]);if(YF(x))return p(...x);throw new rd("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(p=>x=>p(x.toArray()))});function v(p,x){if(!Ct(p)||!Ct(x))throw new Error("Parameters in function gcd must be integer numbers");for(var g;x!==0;)g=c(p,x),p=x,x=g;return p<0?-p:p}function y(p,x){if(!p.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var g=new o(0);!x.isZero();){var S=c(p,x);p=x,x=S}return p.lt(g)?p.neg():p}}),Afe="matAlgo06xS0S0",Cfe=["typed","equalScalar"],nS=ie(Afe,Cfe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s){var o=i._values,u=i._size,l=i._datatype,c=a._values,f=a._size,d=a._datatype;if(u.length!==f.length)throw new un(u.length,f.length);if(u[0]!==f[0]||u[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");var h=u[0],m=u[1],v,y=n,p=0,x=s;typeof l=="string"&&l===d&&(v=l,y=e.find(n,[v,v]),p=e.convert(0,v),x=e.find(s,[v,v]));for(var g=o&&c?[]:void 0,S=[],E=[],_=g?[]:void 0,A=[],T=[],M=0;M<m;M++){E[M]=S.length;var C=M+1;if(yF(i,M,A,_,T,C,S,x),yF(a,M,A,_,T,C,S,x),_)for(var N=E[M];N<S.length;){var P=S[N];if(T[P]===C){var H=_[P];y(H,p)?S.splice(N,1):(g.push(H),N++)}else S.splice(N,1)}else for(var L=E[M];L<S.length;){var z=S[L];T[z]!==C?S.splice(L,1):L++}}return E[m]=S.length,i.createSparseMatrix({values:g,index:S,ptr:E,size:[h,m],datatype:v})}}),ZF="lcm",Tfe=["typed","matrix","equalScalar","concat"],Dfe=ie(ZF,Tfe,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Fo({typed:e,equalScalar:r}),s=nS({typed:e,equalScalar:r}),o=Pi({typed:e,equalScalar:r}),u=ar({typed:e,matrix:n,concat:i}),l="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(l,", ").concat(l,", ...").concat(l)]=e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),p=0;p<v.length;p++)y=d(y,v[p]);return y}),e(ZF,{"number, number":L7,"BigNumber, BigNumber":f,"Fraction, Fraction":(d,h)=>d.lcm(h)},u({SS:s,DS:a,Ss:o}),c);function f(d,h){if(!d.isInt()||!h.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(h.isZero())return h;for(var m=d.times(h);!h.isZero();){var v=h;h=d.mod(v),d=v}return m.div(d).abs()}}),KF="log10",Nfe=["typed","config","Complex"],Rfe=ie(KF,Nfe,t=>{var{typed:e,config:n,Complex:r}=t;return e(KF,{number:function(a){return a>=0||n.predictable?B7(a):new r(a,0).log().div(Math.LN10)},Complex:function(a){return new r(a).log().div(Math.LN10)},BigNumber:function(a){return!a.isNegative()||n.predictable?a.log():new r(a.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":e.referToSelf(i=>a=>ln(a,i))})}),QF="log2",Pfe=["typed","config","Complex"],Ife=ie(QF,Pfe,t=>{var{typed:e,config:n,Complex:r}=t;return e(QF,{number:function(s){return s>=0||n.predictable?U7(s):i(new r(s,0))},Complex:i,BigNumber:function(s){return!s.isNegative()||n.predictable?s.log(2):i(new r(s.toNumber(),0))},"Array | Matrix":e.referToSelf(a=>s=>ln(s,a))});function i(a){var s=Math.sqrt(a.re*a.re+a.im*a.im);return new r(Math.log2?Math.log2(s):Math.log(s)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),Ofe="multiplyScalar",Ffe=["typed"],Lfe=ie(Ofe,Ffe,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":N7,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),JF="multiply",Bfe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Ufe=ie(JF,Bfe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:s}=t,o=Pi({typed:e,equalScalar:a}),u=Oo({typed:e});function l(E,_){switch(E.length){case 1:switch(_.length){case 1:if(E[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(E[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+_[0]+")");break;case 2:if(E[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function c(E,_,A){if(A===0)throw new Error("Cannot multiply two empty vectors");return s(E,_)}function f(E,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,_)}function d(E,_){var A=E._data,T=E._size,M=E._datatype,C=_._data,N=_._size,P=_._datatype,H=T[0],L=N[1],z,O=r,F=i;M&&P&&M===P&&typeof M=="string"&&(z=M,O=e.find(r,[z,z]),F=e.find(i,[z,z]));for(var U=[],I=0;I<L;I++){for(var j=F(A[0],C[0][I]),ee=1;ee<H;ee++)j=O(j,F(A[ee],C[ee][I]));U[I]=j}return E.createDenseMatrix({data:U,size:[L],datatype:z})}var h=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":x}),m=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":y,"DenseMatrix, SparseMatrix":p,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":S});function v(E,_){var A=E._data,T=E._size,M=E._datatype,C=_._data,N=_._datatype,P=T[0],H=T[1],L,z=r,O=i;M&&N&&M===N&&typeof M=="string"&&(L=M,z=e.find(r,[L,L]),O=e.find(i,[L,L]));for(var F=[],U=0;U<P;U++){for(var I=A[U],j=O(I[0],C[0]),ee=1;ee<H;ee++)j=z(j,O(I[ee],C[ee]));F[U]=j}return E.createDenseMatrix({data:F,size:[P],datatype:L})}function y(E,_){var A=E._data,T=E._size,M=E._datatype,C=_._data,N=_._size,P=_._datatype,H=T[0],L=T[1],z=N[1],O,F=r,U=i;M&&P&&M===P&&typeof M=="string"&&(O=M,F=e.find(r,[O,O]),U=e.find(i,[O,O]));for(var I=[],j=0;j<H;j++){var ee=A[j];I[j]=[];for(var J=0;J<z;J++){for(var q=U(ee[0],C[0][J]),ae=1;ae<L;ae++)q=F(q,U(ee[ae],C[ae][J]));I[j][J]=q}}return E.createDenseMatrix({data:I,size:[H,z],datatype:O})}function p(E,_){var A=E._data,T=E._size,M=E._datatype,C=_._values,N=_._index,P=_._ptr,H=_._size,L=_._datatype;if(!C)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=T[0],O=H[1],F,U=r,I=i,j=a,ee=0;M&&L&&M===L&&typeof M=="string"&&(F=M,U=e.find(r,[F,F]),I=e.find(i,[F,F]),j=e.find(a,[F,F]),ee=e.convert(0,F));for(var J=[],q=[],ae=[],be=_.createSparseMatrix({values:J,index:q,ptr:ae,size:[z,O],datatype:F}),ue=0;ue<O;ue++){ae[ue]=q.length;var pe=P[ue],Pe=P[ue+1];if(Pe>pe)for(var Ce=0,Ee=0;Ee<z;Ee++){for(var Oe=Ee+1,ne=void 0,Le=pe;Le<Pe;Le++){var Fe=N[Le];Ce!==Oe?(ne=I(A[Ee][Fe],C[Le]),Ce=Oe):ne=U(ne,I(A[Ee][Fe],C[Le]))}Ce===Oe&&!j(ne,ee)&&(q.push(Ee),J.push(ne))}}return ae[O]=q.length,be}function x(E,_){var A=E._values,T=E._index,M=E._ptr,C=E._datatype;if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=_._data,P=_._datatype,H=E._size[0],L=_._size[0],z=[],O=[],F=[],U,I=r,j=i,ee=a,J=0;C&&P&&C===P&&typeof C=="string"&&(U=C,I=e.find(r,[U,U]),j=e.find(i,[U,U]),ee=e.find(a,[U,U]),J=e.convert(0,U));var q=[],ae=[];F[0]=0;for(var be=0;be<L;be++){var ue=N[be];if(!ee(ue,J))for(var pe=M[be],Pe=M[be+1],Ce=pe;Ce<Pe;Ce++){var Ee=T[Ce];ae[Ee]?q[Ee]=I(q[Ee],j(ue,A[Ce])):(ae[Ee]=!0,O.push(Ee),q[Ee]=j(ue,A[Ce]))}}for(var Oe=O.length,ne=0;ne<Oe;ne++){var Le=O[ne];z[ne]=q[Le]}return F[1]=O.length,E.createSparseMatrix({values:z,index:O,ptr:F,size:[H,1],datatype:U})}function g(E,_){var A=E._values,T=E._index,M=E._ptr,C=E._datatype;if(!A)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var N=_._data,P=_._datatype,H=E._size[0],L=_._size[0],z=_._size[1],O,F=r,U=i,I=a,j=0;C&&P&&C===P&&typeof C=="string"&&(O=C,F=e.find(r,[O,O]),U=e.find(i,[O,O]),I=e.find(a,[O,O]),j=e.convert(0,O));for(var ee=[],J=[],q=[],ae=E.createSparseMatrix({values:ee,index:J,ptr:q,size:[H,z],datatype:O}),be=[],ue=[],pe=0;pe<z;pe++){q[pe]=J.length;for(var Pe=pe+1,Ce=0;Ce<L;Ce++){var Ee=N[Ce][pe];if(!I(Ee,j))for(var Oe=M[Ce],ne=M[Ce+1],Le=Oe;Le<ne;Le++){var Fe=T[Le];ue[Fe]!==Pe?(ue[Fe]=Pe,J.push(Fe),be[Fe]=U(Ee,A[Le])):be[Fe]=F(be[Fe],U(Ee,A[Le]))}}for(var Q=q[pe],te=J.length,Me=Q;Me<te;Me++){var re=J[Me];ee[Me]=be[re]}}return q[z]=J.length,ae}function S(E,_){var A=E._values,T=E._index,M=E._ptr,C=E._datatype,N=_._values,P=_._index,H=_._ptr,L=_._datatype,z=E._size[0],O=_._size[1],F=A&&N,U,I=r,j=i;C&&L&&C===L&&typeof C=="string"&&(U=C,I=e.find(r,[U,U]),j=e.find(i,[U,U]));for(var ee=F?[]:void 0,J=[],q=[],ae=E.createSparseMatrix({values:ee,index:J,ptr:q,size:[z,O],datatype:U}),be=F?[]:void 0,ue=[],pe,Pe,Ce,Ee,Oe,ne,Le,Fe,Q=0;Q<O;Q++){q[Q]=J.length;var te=Q+1;for(Oe=H[Q],ne=H[Q+1],Ee=Oe;Ee<ne;Ee++)if(Fe=P[Ee],F)for(Pe=M[Fe],Ce=M[Fe+1],pe=Pe;pe<Ce;pe++)Le=T[pe],ue[Le]!==te?(ue[Le]=te,J.push(Le),be[Le]=j(N[Ee],A[pe])):be[Le]=I(be[Le],j(N[Ee],A[pe]));else for(Pe=M[Fe],Ce=M[Fe+1],pe=Pe;pe<Ce;pe++)Le=T[pe],ue[Le]!==te&&(ue[Le]=te,J.push(Le));if(F)for(var Me=q[Q],re=J.length,V=Me;V<re;V++){var G=J[V];ee[V]=be[G]}}return q[O]=J.length,ae}return e(JF,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(_,A)=>{l(Yt(_),Yt(A));var T=E(n(_),n(A));return Ft(T)?T.valueOf():T}),"Matrix, Matrix":function(_,A){var T=_.size(),M=A.size();return l(T,M),T.length===1?M.length===1?c(_,A,T[0]):f(_,A):M.length===1?h(_,A):m(_,A)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(_,A)=>E(_,n(A))),"Array, Matrix":e.referToSelf(E=>(_,A)=>E(n(_,A.storage()),A)),"SparseMatrix, any":function(_,A){return o(_,A,i,!1)},"DenseMatrix, any":function(_,A){return u(_,A,i,!1)},"any, SparseMatrix":function(_,A){return o(A,_,i,!0)},"any, DenseMatrix":function(_,A){return u(A,_,i,!0)},"Array, any":function(_,A){return u(n(_),A,i,!1).valueOf()},"any, Array":function(_,A){return u(n(A),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(_,A,T)=>{for(var M=E(_,A),C=0;C<T.length;C++)M=E(M,T[C]);return M})})}),eL="nthRoot",zfe=["typed","matrix","equalScalar","BigNumber","concat"],kfe=ie(eL,zfe,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,concat:a}=t,s=Nc({typed:e}),o=Fo({typed:e,equalScalar:r}),u=nS({typed:e,equalScalar:r}),l=Pi({typed:e,equalScalar:r}),c=ar({typed:e,matrix:n,concat:a});function f(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(eL,{number:bF,"number, number":bF,BigNumber:h=>d(h,new i(2)),"BigNumber, BigNumber":d,Complex:f,"Complex, number":f,Array:e.referTo("DenseMatrix,number",h=>m=>h(n(m),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",h=>m=>h(m,2)),SparseMatrix:e.referTo("SparseMatrix,number",h=>m=>h(m,2)),"SparseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return u(m,v,h);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return s(m,v,h,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",h=>(m,v)=>h(n(m),v)),"number | BigNumber, SparseMatrix":e.referToSelf(h=>(m,v)=>{if(v.density()===1)return l(v,m,h,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:l,sS:!1}));function d(h,m){var v=i.precision,y=i.clone({precision:v+2}),p=new i(0),x=new y(1),g=m.isNegative();if(g&&(m=m.neg()),m.isZero())throw new Error("Root must be non-zero");if(h.isNegative()&&!m.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(h.isZero())return g?new y(1/0):0;if(!h.isFinite())return g?p:h;var S=h.abs().pow(x.div(m));return S=h.isNeg()?S.neg():S,new i((g?x.div(S):S).toPrecision(v))}}),tL="sign",$fe=["typed","BigNumber","Fraction","complex"],Hfe=ie(tL,$fe,t=>{var{typed:e,BigNumber:n,complex:r,Fraction:i}=t;return e(tL,{number:L2,Complex:function(s){return s.im===0?r(L2(s.re)):s.sign()},BigNumber:function(s){return new n(s.cmp(0))},Fraction:function(s){return new i(s.s,1)},"Array | Matrix":e.referToSelf(a=>s=>ln(s,a)),Unit:e.referToSelf(a=>s=>{if(!s._isDerived()&&s.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(a,s.valueType())(s.value)})})}),Gfe="sqrt",Vfe=["config","typed","Complex"],Wfe=ie(Gfe,Vfe,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||e.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(a){return isNaN(a)?NaN:a>=0||e.predictable?Math.sqrt(a):new r(a,0).sqrt()}}),nL="square",qfe=["typed"],jfe=ie(nL,qfe,t=>{var{typed:e}=t;return e(nL,{number:z7,Complex:function(r){return r.mul(r)},BigNumber:function(r){return r.times(r)},Fraction:function(r){return r.mul(r)},Unit:function(r){return r.pow(2)}})}),rL="subtract",Xfe=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Yfe=ie(rL,Xfe,t=>{var{typed:e,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=t,u=Nc({typed:e}),l=Aa({typed:e}),c=tS({typed:e,equalScalar:r}),f=nd({typed:e,DenseMatrix:s}),d=ci({typed:e,DenseMatrix:s}),h=ar({typed:e,matrix:n,concat:o});return e(rL,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),iL="xgcd",Zfe=["typed","config","matrix","BigNumber"],Kfe=ie(iL,Zfe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(iL,{"number, number":function(o,u){var l=k7(o,u);return n.matrix==="Array"?l:r(l)},"BigNumber, BigNumber":a});function a(s,o){var u,l,c,f=new i(0),d=new i(1),h=f,m=d,v=d,y=f;if(!s.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)l=s.div(o).floor(),c=s.mod(o),u=h,h=m.minus(l.times(h)),m=u,u=v,v=y.minus(l.times(v)),y=u,s=o,o=c;var p;return s.lt(f)?p=[s.neg(),m.neg(),y.neg()]:p=[s,s.isZero()?0:m,y],n.matrix==="Array"?p:r(p)}}),aL="invmod",Qfe=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],Jfe=ie(aL,Qfe,t=>{var{typed:e,config:n,BigNumber:r,xgcd:i,equal:a,smaller:s,mod:o,add:u,isInteger:l}=t;return e(aL,{"number, number":c,"BigNumber, BigNumber":c});function c(f,d){if(!l(f)||!l(d))throw new Error("Parameters in function invmod must be integer numbers");if(f=o(f,d),a(d,0))throw new Error("Divisor must be non zero");var h=i(f,d);h=h.valueOf();var[m,v]=h;return a(m,r(1))?(v=o(v,d),s(v,r(0))&&(v=u(v,d)),v):NaN}}),ede="matAlgo09xS0Sf",tde=["typed","equalScalar"],EH=ie(ede,tde,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,d=a._values,h=a._index,m=a._ptr,v=a._size,y=a._datatype;if(c.length!==v.length)throw new un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var p=c[0],x=c[1],g,S=n,E=0,_=s;typeof f=="string"&&f===y&&(g=f,S=e.find(n,[g,g]),E=e.convert(0,g),_=e.find(s,[g,g]));var A=o&&d?[]:void 0,T=[],M=[],C=A?[]:void 0,N=[],P,H,L,z,O;for(H=0;H<x;H++){M[H]=T.length;var F=H+1;if(C)for(z=m[H],O=m[H+1],L=z;L<O;L++)P=h[L],N[P]=F,C[P]=d[L];for(z=l[H],O=l[H+1],L=z;L<O;L++)if(P=u[L],C){var U=N[P]===F?C[P]:E,I=_(o[L],U);S(I,E)||(T.push(P),A.push(I))}else T.push(P)}return M[x]=T.length,i.createSparseMatrix({values:A,index:T,ptr:M,size:[p,x],datatype:g})}}),sL="dotMultiply",nde=["typed","matrix","equalScalar","multiplyScalar","concat"],rde=ie(sL,nde,t=>{var{typed:e,matrix:n,equalScalar:r,multiplyScalar:i,concat:a}=t,s=Fo({typed:e,equalScalar:r}),o=EH({typed:e,equalScalar:r}),u=Pi({typed:e,equalScalar:r}),l=ar({typed:e,matrix:n,concat:a});return e(sL,l({elop:i,SS:o,DS:s,Ss:u}))});function ide(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero()||e.eq(-1)||t.eq(e))return t;if(e.isZero()||t.eq(-1))return e;if(!t.isFinite()||!e.isFinite()){if(!t.isFinite()&&!e.isFinite())return t.isNegative()===e.isNegative()?t:new n(0);if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e;if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t}return UD(t,e,function(r,i){return r&i})}function bg(t){if(t.isFinite()&&!t.isInteger())throw new Error("Integer expected in function bitNot");var e=t.constructor,n=e.precision;e.config({precision:1e9});var r=t.plus(new e(1));return r.s=-r.s||null,e.config({precision:n}),r}function ade(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);var r=new n(-1);return t.isZero()||e.eq(r)||t.eq(e)?e:e.isZero()||t.eq(r)?t:!t.isFinite()||!e.isFinite()?!t.isFinite()&&!t.isNegative()&&e.isNegative()||t.isNegative()&&!e.isNegative()&&!e.isFinite()?r:t.isNegative()&&e.isNegative()?t.isFinite()?t:e:t.isFinite()?e:t:UD(t,e,function(i,a){return i|a})}function UD(t,e,n){var r=t.constructor,i,a,s=+(t.s<0),o=+(e.s<0);if(s){i=P1(bg(t));for(var u=0;u<i.length;++u)i[u]^=1}else i=P1(t);if(o){a=P1(bg(e));for(var l=0;l<a.length;++l)a[l]^=1}else a=P1(e);var c,f,d;i.length<=a.length?(c=i,f=a,d=s):(c=a,f=i,d=o);var h=c.length,m=f.length,v=n(s,o)^1,y=new r(v^1),p=new r(1),x=new r(2),g=r.precision;for(r.config({precision:1e9});h>0;)n(c[--h],f[--m])===v&&(y=y.plus(p)),p=p.times(x);for(;m>0;)n(d,f[--m])===v&&(y=y.plus(p)),p=p.times(x);return r.config({precision:g}),v===0&&(y.s=-y.s),y}function P1(t){for(var e=t.d,n=e[0]+"",r=1;r<e.length;++r){for(var i=e[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var s=n.length;n.charAt(s)==="0";)s--;var o=t.e,u=n.slice(0,s+1||1),l=u.length;if(o>0)if(++o>l)for(o-=l;o--;)u+="0";else o<l&&(u=u.slice(0,o)+"."+u.slice(o));for(var c=[0],f=0;f<u.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(u.charAt(f++));for(var h=0;h<c.length;++h)c[h]>1&&((c[h+1]===null||c[h+1]===void 0)&&(c[h+1]=0),c[h+1]+=c[h]>>1,c[h]&=1)}return c.reverse()}function sde(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var n=t.constructor;if(t.isNaN()||e.isNaN())return new n(NaN);if(t.isZero())return e;if(e.isZero())return t;if(t.eq(e))return new n(0);var r=new n(-1);return t.eq(r)?bg(e):e.eq(r)?bg(t):!t.isFinite()||!e.isFinite()?!t.isFinite()&&!e.isFinite()?r:new n(t.isNegative()===e.isNegative()?1/0:-1/0):UD(t,e,function(i,a){return i^a})}function ode(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:!t.isFinite()&&!e.isFinite()?new n(NaN):e.lt(55)?t.times(Math.pow(2,e.toNumber())+""):t.times(new n(2).pow(e))}function ude(t,e){if(t.isFinite()&&!t.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var n=t.constructor;return t.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new n(NaN):t.isZero()||e.isZero()?t:e.isFinite()?e.lt(55)?t.div(Math.pow(2,e.toNumber())+"").floor():t.div(new n(2).pow(e)).floor():t.isNegative()?new n(-1):t.isFinite()?new n(0):new n(NaN)}var oL="bitAnd",lde=["typed","matrix","equalScalar","concat"],MH=ie(oL,lde,t=>{var{typed:e,matrix:n,equalScalar:r,concat:i}=t,a=Fo({typed:e,equalScalar:r}),s=nS({typed:e,equalScalar:r}),o=Pi({typed:e,equalScalar:r}),u=ar({typed:e,matrix:n,concat:i});return e(oL,{"number, number":H7,"BigNumber, BigNumber":ide},u({SS:s,DS:a,Ss:o}))}),uL="bitNot",cde=["typed"],fde=ie(uL,cde,t=>{var{typed:e}=t;return e(uL,{number:G7,BigNumber:bg,"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),lL="bitOr",dde=["typed","matrix","equalScalar","DenseMatrix","concat"],AH=ie(lL,dde,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,s=Nc({typed:e}),o=BD({typed:e,equalScalar:r}),u=nd({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:n,concat:a});return e(lL,{"number, number":V7,"BigNumber, BigNumber":ade},l({SS:o,DS:s,Ss:u}))}),hde="matAlgo07xSSf",pde=["typed","DenseMatrix"],cu=ie(hde,pde,t=>{var{typed:e,DenseMatrix:n}=t;return function(a,s,o){var u=a._size,l=a._datatype,c=s._size,f=s._datatype;if(u.length!==c.length)throw new un(u.length,c.length);if(u[0]!==c[0]||u[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+c+")");var d=u[0],h=u[1],m,v=0,y=o;typeof l=="string"&&l===f&&(m=l,v=e.convert(0,m),y=e.find(o,[m,m]));var p,x,g=[];for(p=0;p<d;p++)g[p]=[];var S=[],E=[],_=[],A=[];for(x=0;x<h;x++){var T=x+1;for(r(a,x,_,S,T),r(s,x,A,E,T),p=0;p<d;p++){var M=_[p]===T?S[p]:v,C=A[p]===T?E[p]:v;g[p][x]=y(M,C)}}return new n({data:g,size:[d,h],datatype:m})};function r(i,a,s,o,u){for(var l=i._values,c=i._index,f=i._ptr,d=f[a],h=f[a+1];d<h;d++){var m=c[d];s[m]=u,o[m]=l[d]}}}),cL="bitXor",mde=["typed","matrix","DenseMatrix","concat"],vde=ie(cL,mde,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i}=t,a=Aa({typed:e}),s=cu({typed:e,DenseMatrix:r}),o=ci({typed:e,DenseMatrix:r}),u=ar({typed:e,matrix:n,concat:i});return e(cL,{"number, number":W7,"BigNumber, BigNumber":sde},u({SS:s,DS:a,Ss:o}))}),fL="arg",gde=["typed"],yde=ie(fL,gde,t=>{var{typed:e}=t;return e(fL,{number:function(r){return Math.atan2(0,r)},BigNumber:function(r){return r.constructor.atan2(0,r)},Complex:function(r){return r.arg()},"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),dL="conj",xde=["typed"],bde=ie(dL,xde,t=>{var{typed:e}=t;return e(dL,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),hL="im",wde=["typed"],Sde=ie(hL,wde,t=>{var{typed:e}=t;return e(hL,{number:()=>0,"BigNumber | Fraction":n=>n.mul(0),Complex:n=>n.im,"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),pL="re",_de=["typed"],Ede=ie(pL,_de,t=>{var{typed:e}=t;return e(pL,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.re,"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),mL="not",Mde=["typed"],Ade=ie(mL,Mde,t=>{var{typed:e}=t;return e(mL,{"null | undefined":()=>!0,number:Z7,Complex:function(r){return r.re===0&&r.im===0},BigNumber:function(r){return r.isZero()||r.isNaN()},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),vL="or",Cde=["typed","matrix","equalScalar","DenseMatrix","concat"],CH=ie(vL,Cde,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=tS({typed:e,equalScalar:r}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:n,concat:a});return e(vL,{"number, number":K7,"Complex, Complex":function(f,d){return f.re!==0||f.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(f,d){return!f.isZero()&&!f.isNaN()||!d.isZero()&&!d.isNaN()},"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f.value||0,d.value||0))},l({SS:o,DS:s,Ss:u}))}),gL="xor",Tde=["typed","matrix","DenseMatrix","concat"],Dde=ie(gL,Tde,t=>{var{typed:e,matrix:n,DenseMatrix:r,concat:i}=t,a=Aa({typed:e}),s=cu({typed:e,DenseMatrix:r}),o=ci({typed:e,DenseMatrix:r}),u=ar({typed:e,matrix:n,concat:i});return e(gL,{"number, number":Q7,"Complex, Complex":function(c,f){return(c.re!==0||c.im!==0)!=(f.re!==0||f.im!==0)},"BigNumber, BigNumber":function(c,f){return(!c.isZero()&&!c.isNaN())!=(!f.isZero()&&!f.isNaN())},"Unit, Unit":e.referToSelf(l=>(c,f)=>l(c.value||0,f.value||0))},u({SS:s,DS:a,Ss:o}))}),yL="concat",Nde=["typed","matrix","isInteger"],TH=ie(yL,Nde,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(yL,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,u=-1,l,c=!1,f=[];for(s=0;s<o;s++){var d=a[s];if(Ft(d)&&(c=!0),Kt(d)||Qt(d)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Po(u,l+1)}else{var h=Wt(d).valueOf(),m=Yt(h);if(f[s]=h,l=u,u=m.length-1,s>0&&u!==l)throw new un(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=u7(v,f.shift(),u);return c?n(v):v},"...string":function(a){return a.join("")}})}),xL="column",Rde=["typed","Index","matrix","range"],DH=ie(xL,Rde,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(xL,{"Matrix, number":a,"Array, number":function(o,u){return a(r(Wt(o)),u).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Xn(o,s.size()[1]);var u=i(0,s.size()[0]),l=new n(u,o),c=s.subset(l);return Ft(c)?c:r([[c]])}}),bL="count",Pde=["typed","size","prod"],Ide=ie(bL,Pde,t=>{var{typed:e,size:n,prod:r}=t;return e(bL,{string:function(a){return a.length},"Matrix | Array":function(a){return r(n(a))}})}),wL="cross",Ode=["typed","matrix","subtract","multiply"],Fde=ie(wL,Ode,t=>{var{typed:e,matrix:n,subtract:r,multiply:i}=t;return e(wL,{"Matrix, Matrix":function(o,u){return n(a(o.toArray(),u.toArray()))},"Matrix, Array":function(o,u){return n(a(o.toArray(),u))},"Array, Matrix":function(o,u){return n(a(o,u.toArray()))},"Array, Array":a});function a(s,o){var u=Math.max(Yt(s).length,Yt(o).length);s=fb(s),o=fb(o);var l=Yt(s),c=Yt(o);if(l.length!==1||c.length!==1||l[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+l.join(", ")+"], B = ["+c.join(", ")+"])");var f=[r(i(s[1],o[2]),i(s[2],o[1])),r(i(s[2],o[0]),i(s[0],o[2])),r(i(s[0],o[1]),i(s[1],o[0]))];return u>1?[f]:f}}),SL="diag",Lde=["typed","matrix","DenseMatrix","SparseMatrix"],Bde=ie(SL,Lde,t=>{var{typed:e,matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(SL,{Array:function(l){return a(l,0,Yt(l),null)},"Array, number":function(l,c){return a(l,c,Yt(l),null)},"Array, BigNumber":function(l,c){return a(l,c.toNumber(),Yt(l),null)},"Array, string":function(l,c){return a(l,0,Yt(l),c)},"Array, number, string":function(l,c,f){return a(l,c,Yt(l),f)},"Array, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),Yt(l),f)},Matrix:function(l){return a(l,0,l.size(),l.storage())},"Matrix, number":function(l,c){return a(l,c,l.size(),l.storage())},"Matrix, BigNumber":function(l,c){return a(l,c.toNumber(),l.size(),l.storage())},"Matrix, string":function(l,c){return a(l,0,l.size(),c)},"Matrix, number, string":function(l,c,f){return a(l,c,l.size(),f)},"Matrix, BigNumber, string":function(l,c,f){return a(l,c.toNumber(),l.size(),f)}});function a(u,l,c,f){if(!Ct(l))throw new TypeError("Second parameter in function diag must be an integer");var d=l>0?l:0,h=l<0?-l:0;switch(c.length){case 1:return s(u,l,f,c[0],h,d);case 2:return o(u,l,f,c,h,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function s(u,l,c,f,d,h){var m=[f+d,f+h];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var v=c==="sparse"?i.diagonal(m,u,l):r.diagonal(m,u,l);return c!==null?v:v.valueOf()}function o(u,l,c,f,d,h){if(Ft(u)){var m=u.diagonal(l);return c!==null?c!==m.storage()?n(m,c):m:m.valueOf()}for(var v=Math.min(f[0]-d,f[1]-h),y=[],p=0;p<v;p++)y[p]=u[p+d][p+h];return c!==null?n(y):y}});function Fp(t,e,n,r,i){if(Ch.isTypedFunction(t)){var a=[e,n,r],s=Ch.resolve(t,a);if(s)return f(s.implementation,a);var o=[e,n],u=Ch.resolve(t,o);if(u)return f(u.implementation,o);var l=[e],c=Ch.resolve(t,l);return c?f(c.implementation,l):f(t,a)}else return t(e,n,r);function f(d,h){try{return d.apply(d,h)}catch(y){var m;if(y instanceof TypeError&&((m=y.data)===null||m===void 0?void 0:m.category)==="wrongType"){var v=[];throw v.push("value: ".concat(Jn(e))),h.length>=2&&v.push("index: ".concat(Jn(n))),h.length>=3&&v.push("array: ".concat(Jn(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(t.name,"(").concat(v.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(t.name,": ").concat(y.message))}}}var Ude="filter",zde=["typed"],kde=ie(Ude,zde,t=>{var{typed:e}=t;return e("filter",{"Array, function":_L,"Matrix, function":function(r,i){return r.create(_L(r.toArray(),i))},"Array, RegExp":db,"Matrix, RegExp":function(r,i){return r.create(db(r.toArray(),i))}})});function _L(t,e){return s7(t,function(n,r,i){return Fp(e,n,[r],i,"filter")})}var EL="flatten",$de=["typed","matrix"],Hde=ie(EL,$de,t=>{var{typed:e,matrix:n}=t;return e(EL,{Array:function(i){return Pn(i)},Matrix:function(i){var a=Pn(i.toArray());return n(a)}})}),ML="forEach",Gde=["typed"],Vde=ie(ML,Gde,t=>{var{typed:e}=t;return e(ML,{"Array, function":Wde,"Matrix, function":function(r,i){r.forEach(i)}})});function Wde(t,e){var n=function r(i,a){if(Array.isArray(i))Yw(i,function(s,o){r(s,a.concat(o))});else return Fp(e,i,a,t,"forEach")};n(t,[])}var AL="getMatrixDataType",qde=["typed"],jde=ie(AL,qde,t=>{var{typed:e}=t;return e(AL,{Array:function(r){return yg(r,Jn)},Matrix:function(r){return r.getDataType()}})}),CL="identity",Xde=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Yde=ie(CL,Xde,t=>{var{typed:e,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:s}=t;return e(CL,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return o(c)},"Array, string":function(c,f){return o(c,f)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return o(c.valueOf(),f)}});function o(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Qt(l)||Qt(c)?i:null;if(Qt(l)&&(l=l.toNumber()),Qt(c)&&(c=c.toNumber()),!Ct(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Ct(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,v=[l,c];if(f){if(f==="sparse")return s.diagonal(v,h,0,m);if(f==="dense")return a.diagonal(v,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var y=sp([],v,m),p=l<c?l:c,x=0;x<p;x++)y[x][x]=h;return y}}),TL="kron",Zde=["typed","matrix","multiplyScalar"],Kde=ie(TL,Zde,t=>{var{typed:e,matrix:n,multiplyScalar:r}=t;return e(TL,{"Matrix, Matrix":function(s,o){return n(i(s.toArray(),o.toArray()))},"Matrix, Array":function(s,o){return n(i(s.toArray(),o))},"Array, Matrix":function(s,o){return n(i(s,o.toArray()))},"Array, Array":i});function i(a,s){if(Yt(a).length===1&&(a=[a]),Yt(s).length===1&&(s=[s]),Yt(a).length>2||Yt(s).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(a.length)+", y = "+JSON.stringify(s.length)+")");var o=[],u=[];return a.map(function(l){return s.map(function(c){return u=[],o.push(u),l.map(function(f){return c.map(function(d){return u.push(r(f,d))})})})})&&o}}),DL="map",Qde=["typed"],Jde=ie(DL,Qde,t=>{var{typed:e}=t;return e(DL,{"Array, function":ehe,"Matrix, function":function(r,i){return r.map(i)}})});function ehe(t,e){var n=function r(i,a){return Array.isArray(i)?i.map(function(s,o){return r(s,a.concat(o))}):Fp(e,i,a,t,"map")};return n(t,[])}var NL="diff",the=["typed","matrix","subtract","number"],NH=ie(NL,the,t=>{var{typed:e,matrix:n,subtract:r,number:i}=t;return e(NL,{"Array | Matrix":function(c){return Ft(c)?n(s(c.toArray())):s(c)},"Array | Matrix, number":function(c,f){if(!Ct(f))throw new RangeError("Dimension must be a whole number");return Ft(c)?n(a(c.toArray(),f)):a(c,f)},"Array, BigNumber":e.referTo("Array,number",l=>(c,f)=>l(c,i(f))),"Matrix, BigNumber":e.referTo("Matrix,number",l=>(c,f)=>l(c,i(f)))});function a(l,c){if(Ft(l)&&(l=l.toArray()),!Array.isArray(l))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var f=[];return l.forEach(d=>{f.push(a(d,c-1))}),f}else{if(c===0)return s(l);throw RangeError("Cannot have negative dimension")}}function s(l){for(var c=[],f=l.length,d=1;d<f;d++)c.push(o(l[d-1],l[d]));return c}function o(l,c){Ft(l)&&(l=l.toArray()),Ft(c)&&(c=c.toArray());var f=Array.isArray(l),d=Array.isArray(c);if(f&&d)return u(l,c);if(!f&&!d)return r(c,l);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function u(l,c){if(l.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var f=[],d=l.length,h=0;h<d;h++)f.push(o(l[h],c[h]));return f}}),nhe="ones",rhe=["typed","config","matrix","BigNumber"],ihe=ie(nhe,rhe,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e("ones",{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=s(u),f=c?new i(1):1;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?sp(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){Qt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!Ct(l)||l<0)throw new Error("Parameters in function ones must be positive integers")})}});function zD(){throw new Error('No "bignumber" implementation available')}function RH(){throw new Error('No "fraction" implementation available')}function PH(){throw new Error('No "matrix" implementation available')}var RL="range",ahe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],IH=ie(RL,ahe,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t;return e(RL,{string:d,"string, boolean":d,"number, number":function(y,p){return f(h(y,p,1,!1))},"number, number, number":function(y,p,x){return f(h(y,p,x,!1))},"number, number, boolean":function(y,p,x){return f(h(y,p,1,x))},"number, number, number, boolean":function(y,p,x,g){return f(h(y,p,x,g))},"BigNumber, BigNumber":function(y,p){var x=y.constructor;return f(h(y,p,new x(1),!1))},"BigNumber, BigNumber, BigNumber":function(y,p,x){return f(h(y,p,x,!1))},"BigNumber, BigNumber, boolean":function(y,p,x){var g=y.constructor;return f(h(y,p,new g(1),x))},"BigNumber, BigNumber, BigNumber, boolean":function(y,p,x,g){return f(h(y,p,x,g))},"Unit, Unit, Unit":function(y,p,x){return f(h(y,p,x,!1))},"Unit, Unit, Unit, boolean":function(y,p,x,g){return f(h(y,p,x,g))}});function f(v){return n.matrix==="Matrix"?r?r(v):PH():v}function d(v,y){var p=m(v);if(!p)throw new SyntaxError('String "'+v+'" is no valid range');return n.number==="BigNumber"?(i===void 0&&zD(),f(h(i(p.start),i(p.end),i(p.step)))):f(h(p.start,p.end,p.step,y))}function h(v,y,p,x){for(var g=[],S=c(p)?x?s:a:x?u:o,E=v;S(E,y);)g.push(E),E=l(E,p);return g}function m(v){var y=v.split(":"),p=y.map(function(g){return Number(g)}),x=p.some(function(g){return isNaN(g)});if(x)return null;switch(p.length){case 2:return{start:p[0],end:p[1],step:1};case 3:return{start:p[0],end:p[2],step:p[1]};default:return null}}}),PL="reshape",she=["typed","isInteger","matrix"],ohe=ie(PL,she,t=>{var{typed:e,isInteger:n}=t;return e(PL,{"Matrix, Array":function(i,a){return i.reshape(a,!0)},"Array, Array":function(i,a){return a.forEach(function(s){if(!n(s))throw new TypeError("Invalid size for dimension: "+s)}),DD(i,a)}})}),uhe="resize",lhe=["config","matrix"],che=ie(uhe,lhe,t=>{var{config:e,matrix:n}=t;return function(a,s,o){if(arguments.length!==2&&arguments.length!==3)throw new rd("resize",arguments.length,2,3);if(Ft(s)&&(s=s.valueOf()),Qt(s[0])&&(s=s.map(function(c){return Qt(c)?c.toNumber():c})),Ft(a))return a.resize(s,o,!0);if(typeof a=="string")return r(a,s,o);var u=Array.isArray(a)?!1:e.matrix!=="Array";if(s.length===0){for(;Array.isArray(a);)a=a[0];return Wt(a)}else{Array.isArray(a)||(a=[a]),a=Wt(a);var l=sp(a,s,o);return u?n(l):l}};function r(i,a,s){if(s!==void 0){if(typeof s!="string"||s.length!==1)throw new TypeError("Single character expected as defaultValue")}else s=" ";if(a.length!==1)throw new un(a.length,1);var o=a[0];if(typeof o!="number"||!Ct(o))throw new TypeError("Invalid size, must contain positive integers (size: "+on(a)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var u=i,l=0,c=o-i.length;l<c;l++)u+=s;return u}else return i}}),IL="rotate",fhe=["typed","multiply","rotationMatrix"],dhe=ie(IL,fhe,t=>{var{typed:e,multiply:n,rotationMatrix:r}=t;return e(IL,{"Array , number | BigNumber | Complex | Unit":function(s,o){i(s,2);var u=n(r(o),s);return u.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(s,o){return i(s,2),n(r(o),s)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){i(s,3);var l=n(r(o,u),s);return l},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(s,o,u){return i(s,3),n(r(o,u),s)}});function i(a,s){var o=Array.isArray(a)?Yt(a):a.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(s));if(o[0]!==s)throw new RangeError("Vector must be of dimensions 1x".concat(s))}}),OL="rotationMatrix",hhe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],phe=ie(OL,hhe,t=>{var{typed:e,config:n,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:s,BigNumber:o,matrix:u,DenseMatrix:l,SparseMatrix:c,cos:f,sin:d}=t;return e(OL,{"":function(){return n.matrix==="Matrix"?u([]):[]},string:function(g){return u(g)},"number | BigNumber | Complex | Unit":function(g){return h(g,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(g,S){return h(g,S)},"number | BigNumber | Complex | Unit, Array":function(g,S){var E=u(S);return m(E),p(g,E,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(g,S){m(S);var E=S.storage()||(n.matrix==="Matrix"?"dense":void 0);return p(g,S,E)},"number | BigNumber | Complex | Unit, Array, string":function(g,S,E){var _=u(S);return m(_),p(g,_,E)},"number | BigNumber | Complex | Unit, Matrix, string":function(g,S,E){return m(S),p(g,S,E)}});function h(x,g){var S=Qt(x),E=S?new o(-1):-1,_=f(x),A=d(x),T=[[_,r(E,A)],[A,_]];return y(T,g)}function m(x){var g=x.size();if(g.length<1||g[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function v(x){return x.reduce((g,S)=>r(g,S))}function y(x,g){if(g){if(g==="sparse")return new c(x);if(g==="dense")return new l(x);throw new TypeError('Unknown matrix type "'.concat(g,'"'))}return x}function p(x,g,S){var E=s(g);if(E===0)throw new RangeError("Rotation around zero vector");var _=Qt(x)?o:null,A=_?new _(1):1,T=_?new _(-1):-1,M=_?new _(g.get([0])/E):g.get([0])/E,C=_?new _(g.get([1])/E):g.get([1])/E,N=_?new _(g.get([2])/E):g.get([2])/E,P=f(x),H=i(A,a(P)),L=d(x),z=i(P,v([M,M,H])),O=i(v([M,C,H]),v([T,N,L])),F=i(v([M,N,H]),v([C,L])),U=i(v([M,C,H]),v([N,L])),I=i(P,v([C,C,H])),j=i(v([C,N,H]),v([T,M,L])),ee=i(v([M,N,H]),v([T,C,L])),J=i(v([C,N,H]),v([M,L])),q=i(P,v([N,N,H])),ae=[[z,O,F],[U,I,j],[ee,J,q]];return y(ae,S)}}),FL="row",mhe=["typed","Index","matrix","range"],OH=ie(FL,mhe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t;return e(FL,{"Matrix, number":a,"Array, number":function(o,u){return a(r(Wt(o)),u).valueOf()}});function a(s,o){if(s.size().length!==2)throw new Error("Only two dimensional matrix is supported");Xn(o,s.size()[0]);var u=i(0,s.size()[1]),l=new n(o,u),c=s.subset(l);return Ft(c)?c:r([[c]])}}),LL="size",vhe=["typed","config","?matrix"],ghe=ie(LL,vhe,t=>{var{typed:e,config:n,matrix:r}=t;return e(LL,{Matrix:function(a){return a.create(a.size())},Array:Yt,string:function(a){return n.matrix==="Array"?[a.length]:r([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return n.matrix==="Array"?[]:r?r([]):PH()}})}),BL="squeeze",yhe=["typed","matrix"],xhe=ie(BL,yhe,t=>{var{typed:e,matrix:n}=t;return e(BL,{Array:function(i){return fb(Wt(i))},Matrix:function(i){var a=fb(i.toArray());return Array.isArray(a)?n(a):a},any:function(i){return Wt(i)}})}),UL="subset",bhe=["typed","matrix","zeros","add"],FH=ie(UL,bhe,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t;return e(UL,{"Matrix, Index":function(o,u){return ap(u)?n():(cb(o,u),o.subset(u))},"Array, Index":e.referTo("Matrix, Index",function(s){return function(o,u){var l=s(n(o),u);return u.isScalar()?l:l.valueOf()}}),"Object, Index":She,"string, Index":whe,"Matrix, Index, any, any":function(o,u,l,c){return ap(u)?o:(cb(o,u),o.clone().subset(u,a(l,u),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l,c){var f=s(n(o),u,l,c);return f.isMatrix?f.valueOf():f}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(n(o),u,l,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(s){return function(o,u,l){return s(o,u,l,void 0)}}),"string, Index, string":zL,"string, Index, string, string":zL,"Object, Index, any":_he});function a(s,o){if(typeof s=="string")throw new Error("can't boradcast a string");if(o._isScalar)return s;var u=o.size();if(u.every(l=>l>0))try{return i(s,r(u))}catch{return s}else return s}});function whe(t,e){if(!Ww(e))throw new TypeError("Index expected");if(ap(e))return"";if(cb(Array.from(t),e),e.size().length!==1)throw new un(e.size().length,1);var n=t.length;Xn(e.min()[0],n),Xn(e.max()[0],n);var r=e.dimension(0),i="";return r.forEach(function(a){i+=t.charAt(a)}),i}function zL(t,e,n,r){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(ap(e))return t;if(cb(Array.from(t),e),e.size().length!==1)throw new un(e.size().length,1);if(r!==void 0){if(typeof r!="string"||r.length!==1)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=e.dimension(0),a=i.size()[0];if(a!==n.length)throw new un(i.size()[0],n.length);var s=t.length;Xn(e.min()[0]),Xn(e.max()[0]);for(var o=[],u=0;u<s;u++)o[u]=t.charAt(u);if(i.forEach(function(f,d){o[f]=n.charAt(d[0])}),o.length>s)for(var l=s-1,c=o.length;l<c;l++)o[l]||(o[l]=r);return o.join("")}function She(t,e){if(!ap(e)){if(e.size().length!==1)throw new un(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");return xa(t,n)}}function _he(t,e,n){if(ap(e))return t;if(e.size().length!==1)throw new un(e.size(),1);var r=e.dimension(0);if(typeof r!="string")throw new TypeError("String expected as index to retrieve an object property");var i=Wt(t);return up(i,r,n),i}var kL="transpose",Ehe=["typed","matrix"],Mhe=ie(kL,Ehe,t=>{var{typed:e,matrix:n}=t;return e(kL,{Array:s=>r(n(s)).valueOf(),Matrix:r,any:Wt});function r(s){var o=s.size(),u;switch(o.length){case 1:u=s.clone();break;case 2:{var l=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+on(o)+")");switch(s.storage()){case"dense":u=i(s,l,c);break;case"sparse":u=a(s,l,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+on(o)+")")}return u}function i(s,o,u){for(var l=s._data,c=[],f,d=0;d<u;d++){f=c[d]=[];for(var h=0;h<o;h++)f[h]=Wt(l[h][d])}return s.createDenseMatrix({data:c,size:[u,o],datatype:s._datatype})}function a(s,o,u){for(var l=s._values,c=s._index,f=s._ptr,d=l?[]:void 0,h=[],m=[],v=[],y=0;y<o;y++)v[y]=0;var p,x,g;for(p=0,x=c.length;p<x;p++)v[c[p]]++;for(var S=0,E=0;E<o;E++)m.push(S),S+=v[E],v[E]=m[E];for(m.push(S),g=0;g<u;g++)for(var _=f[g],A=f[g+1],T=_;T<A;T++){var M=v[c[T]]++;h[M]=g,l&&(d[M]=Wt(l[T]))}return s.createSparseMatrix({values:d,index:h,ptr:m,size:[u,o],datatype:s._datatype})}}),$L="ctranspose",Ahe=["typed","transpose","conj"],Che=ie($L,Ahe,t=>{var{typed:e,transpose:n,conj:r}=t;return e($L,{any:function(a){return r(n(a))}})}),HL="zeros",The=["typed","config","matrix","BigNumber"],Dhe=ie(HL,The,t=>{var{typed:e,config:n,matrix:r,BigNumber:i}=t;return e(HL,{"":function(){return n.matrix==="Array"?a([]):a([],"default")},"...number | BigNumber | string":function(l){var c=l[l.length-1];if(typeof c=="string"){var f=l.pop();return a(l,f)}else return n.matrix==="Array"?a(l):a(l,"default")},Array:a,Matrix:function(l){var c=l.storage();return a(l.valueOf(),c)},"Array | Matrix, string":function(l,c){return a(l.valueOf(),c)}});function a(u,l){var c=s(u),f=c?new i(0):0;if(o(u),l){var d=r(l);return u.length>0?d.resize(u,f):d}else{var h=[];return u.length>0?sp(h,u,f):h}}function s(u){var l=!1;return u.forEach(function(c,f,d){Qt(c)&&(l=!0,d[f]=c.toNumber())}),l}function o(u){u.forEach(function(l){if(typeof l!="number"||!Ct(l)||l<0)throw new Error("Parameters in function zeros must be positive integers")})}}),GL="fft",Nhe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Rhe=ie(GL,Nhe,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:a,exp:s,tau:o,i:u,dotDivide:l,conj:c,pow:f,ceil:d,log2:h}=t;return e(GL,{Array:m,Matrix:function(g){return g.create(m(g.toArray()))}});function m(x){var g=Yt(x);return g.length===1?p(x,g[0]):v(x.map(S=>m(S,g.slice(1))),0)}function v(x,g){var S=Yt(x);if(g!==0)return new Array(S[0]).fill(0).map((_,A)=>v(x[A],g-1));if(S.length===1)return p(x);function E(_){var A=Yt(_);return new Array(A[1]).fill(0).map((T,M)=>new Array(A[0]).fill(0).map((C,N)=>_[N][M]))}return E(v(E(x),1))}function y(x){for(var g=x.length,S=s(a(i(-1,i(u,o)),g)),E=[],_=1-g;_<g;_++)E.push(f(S,a(f(_,2),2)));for(var A=f(2,d(h(g+g-1))),T=[...new Array(g).fill(0).map((O,F)=>i(x[F],E[g-1+F])),...new Array(A-g).fill(0)],M=[...new Array(g+g-1).fill(0).map((O,F)=>a(1,E[F])),...new Array(A-(g+g-1)).fill(0)],C=p(T),N=p(M),P=new Array(A).fill(0).map((O,F)=>i(C[F],N[F])),H=l(c(m(c(P))),A),L=[],z=g-1;z<g+g-1;z++)L.push(i(H[z],E[z]));return L}function p(x){var g=x.length;if(g===1)return[x[0]];if(g%2===0){for(var S=[...p(x.filter((T,M)=>M%2===0)),...p(x.filter((T,M)=>M%2===1))],E=0;E<g/2;E++){var _=S[E],A=i(S[E+g/2],s(i(i(o,u),a(-E,g))));S[E]=r(_,A),S[E+g/2]=r(_,i(-1,A))}return S}else return y(x)}}),VL="ifft",Phe=["typed","fft","dotDivide","conj"],Ihe=ie(VL,Phe,t=>{var{typed:e,fft:n,dotDivide:r,conj:i}=t;return e(VL,{"Array | Matrix":function(s){var o=Ft(s)?s.size():Yt(s);return r(i(n(i(s))),o.reduce((u,l)=>u*l,1))}})});function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function Ohe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fhe(t){var e=Ohe(t,"string");return wg(e)=="symbol"?e:String(e)}function si(t,e,n){return e=Fhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(r){si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Bhe="solveODE",Uhe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],zhe=ie(Bhe,Uhe,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,max:s,map:o,abs:u,isPositive:l,isNegative:c,larger:f,smaller:d,matrix:h,bignumber:m,unaryMinus:v}=t;function y(T){return function(M,C,N,P){var H=!(C.length===2&&(C.every(_)||C.every(Us)));if(H)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var L=C[0],z=C[1],O=f(z,L),F=P.firstStep;if(F!==void 0&&!l(F))throw new Error('"firstStep" must be positive');var U=P.maxStep;if(U!==void 0&&!l(U))throw new Error('"maxStep" must be positive');var I=P.minStep;if(I&&c(I))throw new Error('"minStep" must be positive or zero');var j=[L,z,F,I,U].filter(W=>W!==void 0);if(!(j.every(_)||j.every(Us)))throw new Error('Inconsistent type of "t" dependant variables');for(var ee=1,J=P.tol?P.tol:1e-4,q=P.minDelta?P.minDelta:.2,ae=P.maxDelta?P.maxDelta:5,be=P.maxIter?P.maxIter:1e4,ue=[L,z,...N,U,I].some(Qt),[pe,Pe,Ce,Ee]=ue?[m(T.a),m(T.c),m(T.b),m(T.bp)]:[T.a,T.c,T.b,T.bp],Oe=F?O?F:v(F):a(r(z,L),ee),ne=[L],Le=[N],Fe=r(Ce,Ee),Q=0,te=0,Me=S(O),re=E(O);Me(ne[Q],z);){var V=[];Oe=re(ne[Q],z,Oe),V.push(M(ne[Q],Le[Q]));for(var G=1;G<Pe.length;++G)V.push(M(n(ne[Q],i(Pe[G],Oe)),n(Le[Q],i(Oe,pe[G],V))));var le=s(u(o(i(Fe,V),W=>Us(W)?W.value:W)));le<J&&J/le>1/4&&(ne.push(n(ne[Q],Oe)),Le.push(n(Le[Q],i(Oe,Ce,V))),Q++);var _e=.84*(J/le)**(1/5);if(d(_e,q)?_e=q:f(_e,ae)&&(_e=ae),_e=ue?m(_e):_e,Oe=i(Oe,_e),U&&f(u(Oe),U)?Oe=O?U:v(U):I&&d(u(Oe),I)&&(Oe=O?I:v(I)),te++,te>be)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ne,y:Le}}}function p(T,M,C,N){var P=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],H=[null,1/2,3/4,1],L=[2/9,1/3,4/9,0],z=[7/24,1/4,1/3,1/8],O={a:P,c:H,b:L,bp:z};return y(O)(T,M,C,N)}function x(T,M,C,N){var P=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],H=[null,1/5,3/10,4/5,8/9,1,1],L=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],z=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],O={a:P,c:H,b:L,bp:z};return y(O)(T,M,C,N)}function g(T,M,C,N){var P=N.method?N.method:"RK45",H={RK23:p,RK45:x};if(P.toUpperCase()in H){var L=Lhe({},N);return delete L.method,H[P.toUpperCase()](T,M,C,L)}else{var z=Object.keys(H).map(F=>'"'.concat(F,'"')),O="".concat(z.slice(0,-1).join(", ")," and ").concat(z.slice(-1));throw new Error('Unavailable method "'.concat(P,'". Available methods are ').concat(O))}}function S(T){return T?d:f}function E(T){var M=T?f:d;return function(C,N,P){var H=n(C,P);return M(H,N)?r(N,C):P}}function _(T){return Qt(T)||Kt(T)}function A(T,M,C,N){var P=g(T,M.toArray(),C.toArray(),N);return{t:h(P.t),y:h(P.y)}}return e("solveODE",{"function, Array, Array, Object":g,"function, Matrix, Matrix, Object":A,"function, Array, Array":(T,M,C)=>g(T,M,C,{}),"function, Matrix, Matrix":(T,M,C)=>A(T,M,C,{}),"function, Array, number | BigNumber | Unit":(T,M,C)=>{var N=g(T,M,[C],{});return{t:N.t,y:N.y.map(P=>P[0])}},"function, Matrix, number | BigNumber | Unit":(T,M,C)=>{var N=g(T,M.toArray(),[C],{});return{t:h(N.t),y:h(N.y.map(P=>P[0]))}},"function, Array, number | BigNumber | Unit, Object":(T,M,C,N)=>{var P=g(T,M,[C],N);return{t:P.t,y:P.y.map(H=>H[0])}},"function, Matrix, number | BigNumber | Unit, Object":(T,M,C,N)=>{var P=g(T,M.toArray(),[C],N);return{t:h(P.t),y:h(P.y.map(H=>H[0]))}}})}),khe="erf",$he=["typed"],Hhe=ie(khe,$he,t=>{var{typed:e}=t;return e("name",{number:function(s){var o=Math.abs(s);return o>=Whe?ql(s):o<=Ghe?ql(s)*n(o):o<=4?ql(s)*(1-r(o)):ql(s)*(1-i(o))},"Array | Matrix":e.referToSelf(a=>s=>ln(s,a))});function n(a){var s=a*a,o=Du[0][4]*s,u=s,l;for(l=0;l<3;l+=1)o=(o+Du[0][l])*s,u=(u+eh[0][l])*s;return a*(o+Du[0][3])/(u+eh[0][3])}function r(a){var s=Du[1][8]*a,o=a,u;for(u=0;u<7;u+=1)s=(s+Du[1][u])*a,o=(o+eh[1][u])*a;var l=(s+Du[1][7])/(o+eh[1][7]),c=parseInt(a*16)/16,f=(a-c)*(a+c);return Math.exp(-c*c)*Math.exp(-f)*l}function i(a){var s=1/(a*a),o=Du[2][5]*s,u=s,l;for(l=0;l<4;l+=1)o=(o+Du[2][l])*s,u=(u+eh[2][l])*s;var c=s*(o+Du[2][4])/(u+eh[2][4]);c=(Vhe-c)/a,s=parseInt(a*16)/16;var f=(a-s)*(a+s);return Math.exp(-s*s)*Math.exp(-f)*c}}),Ghe=.46875,Vhe=.5641895835477563,Du=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],eh=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],Whe=Math.pow(2,53),qL="zeta",qhe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],jhe=ie(qL,qhe,t=>{var{typed:e,config:n,multiply:r,pow:i,divide:a,factorial:s,equal:o,smallerEq:u,isNegative:l,gamma:c,sin:f,subtract:d,add:h,Complex:m,BigNumber:v,pi:y}=t;return e(qL,{number:_=>p(_,A=>A,()=>20),BigNumber:_=>p(_,A=>new v(A),()=>Math.abs(Math.log10(n.epsilon))),Complex:x});function p(_,A,T){return o(_,0)?A(-.5):o(_,1)?A(NaN):isFinite(_)?g(_,A,T,M=>M):l(_)?A(NaN):A(1)}function x(_){return _.re===0&&_.im===0?new m(-.5):_.re===1?new m(NaN,NaN):_.re===1/0&&_.im===0?new m(1):_.im===1/0||_.re===-1/0?new m(NaN,NaN):g(_,A=>A,A=>Math.round(1.3*15+.9*Math.abs(A.im)),A=>A.re)}function g(_,A,T,M){var C=T(_);if(M(_)>-(C-1)/2)return E(_,A(C),A);var N=r(i(2,_),i(A(y),d(_,1)));return N=r(N,f(r(a(A(y),2),_))),N=r(N,c(d(1,_))),r(N,g(d(1,_),A,T,M))}function S(_,A){for(var T=_,M=_;u(M,A);M=h(M,1)){var C=a(r(s(h(A,d(M,1))),i(4,M)),r(s(d(A,M)),s(r(2,M))));T=h(T,C)}return r(A,T)}function E(_,A,T){for(var M=a(1,r(S(T(0),A),d(1,i(2,d(1,_))))),C=T(0),N=T(1);u(N,A);N=h(N,1))C=h(C,a(r((-1)**(N-1),S(N,A)),i(N,_)));return r(M,C)}}),jL="mode",Xhe=["typed","isNaN","isNumeric"],Yhe=ie(jL,Xhe,t=>{var{typed:e,isNaN:n,isNumeric:r}=t;return e(jL,{"Array | Matrix":i,"...":function(s){return i(s)}});function i(a){a=Pn(a.valueOf());var s=a.length;if(s===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},u=[],l=0,c=0;c<a.length;c++){var f=a[c];if(r(f)&&n(f))throw new Error("Cannot calculate mode of an array containing NaN values");f in o||(o[f]=0),o[f]++,o[f]===l?u.push(f):o[f]>l&&(l=o[f],u=[f])}return u}});function Sa(t,e,n){var r;return String(t).indexOf("Unexpected type")!==-1?(r=arguments.length>2?" (type: "+Jn(n)+", value: "+JSON.stringify(n)+")":" (type: "+t.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+r)):String(t).indexOf("complex numbers")!==-1?(r=arguments.length>2?" (type: "+Jn(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+r)):t}var XL="prod",Zhe=["typed","config","multiplyScalar","numeric"],Khe=ie(XL,Zhe,t=>{var{typed:e,config:n,multiplyScalar:r,numeric:i}=t;return e(XL,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(o,u){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return a(o)}});function a(s){var o;if(tl(s,function(u){try{o=o===void 0?u:r(o,u)}catch(l){throw Sa(l,"prod",u)}}),typeof o=="string"&&(o=i(o,n.number)),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),YL="format",Qhe=["typed"],Jhe=ie(YL,Qhe,t=>{var{typed:e}=t;return e(YL,{any:on,"any, Object | function | number | BigNumber":on})}),ZL="bin",epe=["typed","format"],tpe=ie(ZL,epe,t=>{var{typed:e,format:n}=t;return e(ZL,{"number | BigNumber":function(i){return n(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"bin",wordSize:a})}})}),KL="oct",npe=["typed","format"],rpe=ie(KL,npe,t=>{var{typed:e,format:n}=t;return e(KL,{"number | BigNumber":function(i){return n(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"oct",wordSize:a})}})}),QL="hex",ipe=["typed","format"],ape=ie(QL,ipe,t=>{var{typed:e,format:n}=t;return e(QL,{"number | BigNumber":function(i){return n(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,a){return n(i,{notation:"hex",wordSize:a})}})}),LH=/\$([\w.]+)/g,JL="print",spe=["typed"],BH=ie(JL,spe,t=>{var{typed:e}=t;return e(JL,{"string, Object | Array":e4,"string, Object | Array, number | Object":e4})});function e4(t,e,n){return t.replace(LH,function(r,i){var a=i.split("."),s=e[a.shift()];for(s!==void 0&&s.isMatrix&&(s=s.toArray());a.length&&s!==void 0;){var o=a.shift();s=o?s[o]:s+"."}return s!==void 0?Xi(s)?s:on(s,n):r})}var t4="to",ope=["typed","matrix","concat"],upe=ie(t4,ope,t=>{var{typed:e,matrix:n,concat:r}=t,i=ar({typed:e,matrix:n,concat:r});return e(t4,{"Unit, Unit | string":(a,s)=>a.to(s)},i({Ds:!0}))}),n4="isPrime",lpe=["typed"],cpe=ie(n4,lpe,t=>{var{typed:e}=t;return e(n4,{number:function(r){if(r*0!==0)return!1;if(r<=3)return r>1;if(r%2===0||r%3===0)return!1;for(var i=5;i*i<=r;i+=6)if(r%i===0||r%(i+2)===0)return!1;return!0},BigNumber:function(r){if(r.toNumber()*0!==0)return!1;if(r.lte(3))return r.gt(1);if(r.mod(2).eq(0)||r.mod(3).eq(0))return!1;if(r.lt(Math.pow(2,32))){for(var i=r.toNumber(),a=5;a*a<=i;a+=6)if(i%a===0||i%(a+2)===0)return!1;return!0}function s(x,g,S){for(var E=1;!g.eq(0);)g.mod(2).eq(0)?(g=g.div(2),x=x.mul(x).mod(S)):(g=g.sub(1),E=x.mul(E).mod(S));return E}var o=r.constructor.clone({precision:r.toFixed(0).length*2});r=new o(r);for(var u=0,l=r.sub(1);l.mod(2).eq(0);)l=l.div(2),u+=1;var c=null;if(r.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<r);else{var f=Math.min(r.toNumber()-2,Math.floor(2*Math.pow(r.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=f;d+=1)c.push(f)}for(var h=0;h<c.length;h+=1){var m=c[h],v=s(r.sub(r).add(m),l,r);if(!v.eq(1)){for(var y=0,p=v;!p.eq(r.sub(1));y+=1,p=p.mul(p).mod(r))if(y===u-1)return!1}}return!0},"Array | Matrix":e.referToSelf(n=>r=>ln(r,n))})}),fpe="numeric",dpe=["number","?bignumber","?fraction"],hpe=ie(fpe,dpe,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:s=>e(s),BigNumber:n?s=>n(s):zD,Fraction:r?s=>r(s):RH};return function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Jn(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in a))throw new TypeError("Cannot convert "+o+' to type "'+u+'"; valid output types are '+Object.keys(a).join(", "));return u===c?o:a[u](o)}}),r4="divideScalar",ppe=["typed","numeric"],mpe=ie(r4,ppe,t=>{var{typed:e,numeric:n}=t;return e(r4,{"number, number":function(i,a){return i/a},"Complex, Complex":function(i,a){return i.div(a)},"BigNumber, BigNumber":function(i,a){return i.div(a)},"Fraction, Fraction":function(i,a){return i.div(a)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),i4="pow",vpe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],gpe=ie(i4,vpe,t=>{var{typed:e,config:n,identity:r,multiply:i,matrix:a,inv:s,number:o,fraction:u,Complex:l}=t;return e(i4,{"number, number":c,"Complex, Complex":function(m,v){return m.pow(v)},"BigNumber, BigNumber":function(m,v){return v.isInteger()||m>=0||n.predictable?m.pow(v):new l(m.toNumber(),0).pow(v.toNumber(),0)},"Fraction, Fraction":function(m,v){var y=m.pow(v);if(y!=null)return y;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(m.valueOf(),v.valueOf())},"Array, number":f,"Array, BigNumber":function(m,v){return f(m,v.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(m,v){return d(m,v.toNumber())},"Unit, number | BigNumber":function(m,v){return m.pow(v)}});function c(h,m){if(n.predictable&&!Ct(m)&&h<0)try{var v=u(m),y=o(v);if((m===y||Math.abs((m-y)/m)<1e-14)&&v.d%2===1)return(v.n%2===0?1:-1)*Math.pow(-h,m)}catch{}return n.predictable&&(h<-1&&m===1/0||h>-1&&h<0&&m===-1/0)?NaN:Ct(m)||h>=0||n.predictable?$7(h,m):h*h<1&&m===1/0||h*h>1&&m===-1/0?0:new l(h,0).pow(m,0)}function f(h,m){if(!Ct(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var v=Yt(h);if(v.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+v.length+" dimensions)");if(v[0]!==v[1])throw new Error("For A^b, A must be square (size is "+v[0]+"x"+v[1]+")");if(m<0)try{return f(s(h),-m)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):x}for(var y=r(v[0]).valueOf(),p=h;m>=1;)(m&1)===1&&(y=i(p,y)),m>>=1,p=i(p,p);return y}function d(h,m){return a(f(h.valueOf(),m))}}),th="Number of decimals in function round must be an integer",a4="round",ype=["typed","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],xpe=ie(a4,ype,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,BigNumber:a,DenseMatrix:s}=t,o=Pi({typed:e,equalScalar:r}),u=ci({typed:e,DenseMatrix:s}),l=Oo({typed:e});return e(a4,{number:wF,"number, number":wF,"number, BigNumber":function(f,d){if(!d.isInteger())throw new TypeError(th);return new a(f).toDecimalPlaces(d.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,d){if(d%1)throw new TypeError(th);return f.round(d)},"Complex, BigNumber":function(f,d){if(!d.isInteger())throw new TypeError(th);var h=d.toNumber();return f.round(h)},BigNumber:function(f){return f.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,d){if(!d.isInteger())throw new TypeError(th);return f.toDecimalPlaces(d.toNumber())},Fraction:function(f){return f.round()},"Fraction, number":function(f,d){if(d%1)throw new TypeError(th);return f.round(d)},"Fraction, BigNumber":function(f,d){if(!d.isInteger())throw new TypeError(th);return f.round(d.toNumber())},"Unit, number, Unit":e.referToSelf(c=>function(f,d,h){var m=f.toNumeric(h);return h.multiply(c(m,d))}),"Unit, BigNumber, Unit":e.referToSelf(c=>(f,d,h)=>c(f,d.toNumber(),h)),"Unit, Unit":e.referToSelf(c=>(f,d)=>c(f,0,d)),"Array | Matrix, number, Unit":e.referToSelf(c=>(f,d,h)=>ln(f,m=>c(m,d,h))),"Array | Matrix, BigNumber, Unit":e.referToSelf(c=>(f,d,h)=>c(f,d.toNumber(),h)),"Array | Matrix, Unit":e.referToSelf(c=>(f,d)=>c(f,0,d)),"Array | Matrix":e.referToSelf(c=>f=>ln(f,c)),"SparseMatrix, number | BigNumber":e.referToSelf(c=>(f,d)=>o(f,d,c,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(c=>(f,d)=>l(f,d,c,!1)),"Array, number | BigNumber":e.referToSelf(c=>(f,d)=>l(n(f),d,c,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(c=>(f,d)=>r(f,0)?i(d.size(),d.storage()):u(d,f,c,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(c=>(f,d)=>r(f,0)?i(d.size(),d.storage()):l(d,f,c,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(c=>(f,d)=>l(n(d),f,c,!0).valueOf())})}),s4="log",bpe=["config","typed","divideScalar","Complex"],wpe=ie(s4,bpe,t=>{var{typed:e,config:n,divideScalar:r,Complex:i}=t;return e(s4,{number:function(s){return s>=0||n.predictable?xle(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||n.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":e.referToSelf(a=>(s,o)=>r(a(s),a(o)))})}),o4="log1p",Spe=["typed","config","divideScalar","log","Complex"],_pe=ie(o4,Spe,t=>{var{typed:e,config:n,divideScalar:r,log:i,Complex:a}=t;return e(o4,{number:function(u){return u>=-1||n.predictable?goe(u):s(new a(u,0))},Complex:s,BigNumber:function(u){var l=u.plus(1);return!l.isNegative()||n.predictable?l.ln():s(new a(u.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>u=>ln(u,o)),"any, any":e.referToSelf(o=>(u,l)=>r(o(u),i(l)))});function s(o){var u=o.re+1;return new a(Math.log(Math.sqrt(u*u+o.im*o.im)),Math.atan2(o.im,u))}}),u4="nthRoots",Epe=["config","typed","divideScalar","Complex"],Mpe=ie(u4,Epe,t=>{var{typed:e,config:n,divideScalar:r,Complex:i}=t,a=[function(u){return new i(u,0)},function(u){return new i(0,u)},function(u){return new i(-u,0)},function(u){return new i(0,-u)}];function s(o,u){if(u<0)throw new Error("Root must be greater than zero");if(u===0)throw new Error("Root must be non-zero");if(u%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var l=typeof o=="number",c;(l||o.re===0||o.im===0)&&(l?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var f=o.arg(),d=o.abs(),h=[],m=Math.pow(d,1/u),v=0;v<u;v++){var y=(c+4*v)/u;if(y===Math.round(y)){h.push(a[y%4](m));continue}h.push(new i({r:m,phi:(f+2*Math.PI*v)/u}))}return h}return e(u4,{Complex:function(u){return s(u,2)},"Complex, number":s})}),l4="dotPow",Ape=["typed","equalScalar","matrix","pow","DenseMatrix","concat"],Cpe=ie(l4,Ape,t=>{var{typed:e,equalScalar:n,matrix:r,pow:i,DenseMatrix:a,concat:s}=t,o=Aa({typed:e}),u=cu({typed:e,DenseMatrix:a}),l=Pi({typed:e,equalScalar:n}),c=ci({typed:e,DenseMatrix:a}),f=ar({typed:e,matrix:r,concat:s}),d={};for(var h in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,h)&&!h.includes("Matrix")&&!h.includes("Array")&&(d[h]=i.signatures[h]);var m=e(d);return e(l4,f({elop:m,SS:u,DS:o,Ss:l,sS:c}))}),c4="dotDivide",Tpe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat"],Dpe=ie(c4,Tpe,t=>{var{typed:e,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:s}=t,o=Fo({typed:e,equalScalar:r}),u=Aa({typed:e}),l=cu({typed:e,DenseMatrix:a}),c=Pi({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:a}),d=ar({typed:e,matrix:n,concat:s});return e(c4,d({elop:i,SS:l,DS:u,SD:o,Ss:c,sS:f}))});function l0(t){var{DenseMatrix:e}=t;return function(r,i,a){var s=r.size();if(s.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+on(s)+")");var o=s[0],u=s[1];if(o!==u)throw new RangeError("Matrix must be square (size: "+on(s)+")");var l=[];if(Ft(i)){var c=i.size(),f=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)l[d]=[f[d]];return new e({data:l,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(lb(i)){if(a){l=[];for(var h=0;h<o;h++)l[h]=[f[h][0]];return new e({data:l,size:[o,1],datatype:i._datatype})}return i}if(Sf(i)){for(var m=0;m<o;m++)l[m]=[0];for(var v=i._values,y=i._index,p=i._ptr,x=p[1],g=p[0];g<x;g++){var S=y[g];l[S][0]=v[g]}return new e({data:l,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Bn(i)){var E=Yt(i);if(E.length===1){if(E[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<o;_++)l[_]=[i[_]];return new e({data:l,size:[o,1]})}if(E.length===2){if(E[0]!==o||E[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<o;A++)l[A]=[i[A][0]];return new e({data:l,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var f4="lsolve",Npe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Rpe=ie(f4,Npe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,u=l0({DenseMatrix:o});return e(f4,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],p=f._data,x=0;x<v;x++){var g=h[x][0]||0,S=void 0;if(s(g,0))S=0;else{var E=p[x][x];if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(g,E);for(var _=x+1;_<m;_++)h[_]=[a(h[_][0]||0,i(S,p[_][x]))]}y[x]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,p=f._index,x=f._ptr,g=[],S=0;S<v;S++){var E=h[S][0]||0;if(s(E,0))g[S]=[0];else{for(var _=0,A=[],T=[],M=x[S],C=x[S+1],N=M;N<C;N++){var P=p[N];P===S?_=y[N]:P>S&&(A.push(y[N]),T.push(P))}if(s(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var H=r(E,_),L=0,z=T.length;L<z;L++){var O=T[L];h[O]=[a(h[O][0]||0,i(H,A[L]))]}g[S]=[H]}}return new o({data:g,size:[m,1]})}}),d4="usolve",Ppe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Ipe=ie(d4,Ppe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,u=l0({DenseMatrix:o});return e(d4,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.valueOf()}});function l(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=[],p=f._data,x=v-1;x>=0;x--){var g=h[x][0]||0,S=void 0;if(s(g,0))S=0;else{var E=p[x][x];if(s(E,0))throw new Error("Linear system cannot be solved since matrix is singular");S=r(g,E);for(var _=x-1;_>=0;_--)h[_]=[a(h[_][0]||0,i(S,p[_][x]))]}y[x]=[S]}return new o({data:y,size:[m,1]})}function c(f,d){d=u(f,d,!0);for(var h=d._data,m=f._size[0],v=f._size[1],y=f._values,p=f._index,x=f._ptr,g=[],S=v-1;S>=0;S--){var E=h[S][0]||0;if(s(E,0))g[S]=[0];else{for(var _=0,A=[],T=[],M=x[S],C=x[S+1],N=C-1;N>=M;N--){var P=p[N];P===S?_=y[N]:P<S&&(A.push(y[N]),T.push(P))}if(s(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var H=r(E,_),L=0,z=T.length;L<z;L++){var O=T[L];h[O]=[a(h[O][0],i(H,A[L]))]}g[S]=[H]}}return new o({data:g,size:[m,1]})}}),h4="lsolveAll",Ope=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Fpe=ie(h4,Ope,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,u=l0({DenseMatrix:o});return e(h4,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(T=>T[0])],m=f._data,v=f._size[0],y=f._size[1],p=0;p<y;p++)for(var x=h.length,g=0;g<x;g++){var S=h[g];if(s(m[p][p],0))if(s(S[p],0)){if(g===0){var _=[...S];_[p]=1;for(var A=p+1;A<y;A++)_[A]=a(_[A],m[A][p]);h.push(_)}}else{if(g===0)return[];h.splice(g,1),g-=1,x-=1}else{S[p]=r(S[p],m[p][p]);for(var E=p+1;E<y;E++)S[E]=a(S[E],i(S[p],m[E][p]))}}return h.map(T=>new o({data:T.map(M=>[M]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(ee=>ee[0])],m=f._size[0],v=f._size[1],y=f._values,p=f._index,x=f._ptr,g=0;g<v;g++)for(var S=h.length,E=0;E<S;E++){for(var _=h[E],A=[],T=[],M=x[g],C=x[g+1],N=0,P=M;P<C;P++){var H=p[P];H===g?N=y[P]:H>g&&(A.push(y[P]),T.push(H))}if(s(N,0))if(s(_[g],0)){if(E===0){var F=[..._];F[g]=1;for(var U=0,I=T.length;U<I;U++){var j=T[U];F[j]=a(F[j],A[U])}h.push(F)}}else{if(E===0)return[];h.splice(E,1),E-=1,S-=1}else{_[g]=r(_[g],N);for(var L=0,z=T.length;L<z;L++){var O=T[L];_[O]=a(_[O],i(_[g],A[L]))}}}return h.map(ee=>new o({data:ee.map(J=>[J]),size:[m,1]}))}}),p4="usolveAll",Lpe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Bpe=ie(p4,Lpe,t=>{var{typed:e,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:s,DenseMatrix:o}=t,u=l0({DenseMatrix:o});return e(p4,{"SparseMatrix, Array | Matrix":function(d,h){return c(d,h)},"DenseMatrix, Array | Matrix":function(d,h){return l(d,h)},"Array, Array | Matrix":function(d,h){var m=n(d),v=l(m,h);return v.map(y=>y.valueOf())}});function l(f,d){for(var h=[u(f,d,!0)._data.map(T=>T[0])],m=f._data,v=f._size[0],y=f._size[1],p=y-1;p>=0;p--)for(var x=h.length,g=0;g<x;g++){var S=h[g];if(s(m[p][p],0))if(s(S[p],0)){if(g===0){var _=[...S];_[p]=1;for(var A=p-1;A>=0;A--)_[A]=a(_[A],m[A][p]);h.push(_)}}else{if(g===0)return[];h.splice(g,1),g-=1,x-=1}else{S[p]=r(S[p],m[p][p]);for(var E=p-1;E>=0;E--)S[E]=a(S[E],i(S[p],m[E][p]))}}return h.map(T=>new o({data:T.map(M=>[M]),size:[v,1]}))}function c(f,d){for(var h=[u(f,d,!0)._data.map(ee=>ee[0])],m=f._size[0],v=f._size[1],y=f._values,p=f._index,x=f._ptr,g=v-1;g>=0;g--)for(var S=h.length,E=0;E<S;E++){for(var _=h[E],A=[],T=[],M=x[g],C=x[g+1],N=0,P=C-1;P>=M;P--){var H=p[P];H===g?N=y[P]:H<g&&(A.push(y[P]),T.push(H))}if(s(N,0))if(s(_[g],0)){if(E===0){var F=[..._];F[g]=1;for(var U=0,I=T.length;U<I;U++){var j=T[U];F[j]=a(F[j],A[U])}h.push(F)}}else{if(E===0)return[];h.splice(E,1),E-=1,S-=1}else{_[g]=r(_[g],N);for(var L=0,z=T.length;L<z;L++){var O=T[L];_[O]=a(_[O],i(_[g],A[L]))}}}return h.map(ee=>new o({data:ee.map(J=>[J]),size:[m,1]}))}}),Upe="matAlgo08xS0Sid",zpe=["typed","equalScalar"],kD=ie(Upe,zpe,t=>{var{typed:e,equalScalar:n}=t;return function(i,a,s){var o=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype,d=a._values,h=a._index,m=a._ptr,v=a._size,y=a._datatype;if(c.length!==v.length)throw new un(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var p=c[0],x=c[1],g,S=n,E=0,_=s;typeof f=="string"&&f===y&&(g=f,S=e.find(n,[g,g]),E=e.convert(0,g),_=e.find(s,[g,g]));for(var A=[],T=[],M=[],C=[],N=[],P,H,L,z,O=0;O<x;O++){M[O]=T.length;var F=O+1;for(H=l[O],L=l[O+1],P=H;P<L;P++)z=u[P],N[z]=F,C[z]=o[P],T.push(z);for(H=m[O],L=m[O+1],P=H;P<L;P++)z=h[P],N[z]===F&&(C[z]=_(C[z],d[P]));for(P=M[O];P<T.length;){z=T[P];var U=C[z];S(U,E)?T.splice(P,1):(A.push(U),P++)}}return M[x]=T.length,i.createSparseMatrix({values:A,index:T,ptr:M,size:[p,x],datatype:g})}}),$D=ie("useMatrixForArrayScalar",["typed","matrix"],t=>{var{typed:e,matrix:n}=t;return{"Array, number":e.referTo("DenseMatrix, number",r=>(i,a)=>r(n(i),a).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",r=>(i,a)=>r(n(i),a).valueOf()),"number, Array":e.referTo("number, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",r=>(i,a)=>r(i,n(a)).valueOf())}}),m4="leftShift",kpe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],$pe=ie(m4,kpe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:s}=t,o=Nc({typed:e}),u=Fo({typed:e,equalScalar:r}),l=kD({typed:e,equalScalar:r}),c=nd({typed:e,DenseMatrix:a}),f=Pi({typed:e,equalScalar:r}),d=Oo({typed:e}),h=ar({typed:e,matrix:n,concat:s}),m=$D({typed:e,matrix:n});return e(m4,{"number, number":q7,"BigNumber, BigNumber":ode,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),v4="rightArithShift",Hpe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Gpe=ie(v4,Hpe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:s}=t,o=Nc({typed:e}),u=Fo({typed:e,equalScalar:r}),l=kD({typed:e,equalScalar:r}),c=nd({typed:e,DenseMatrix:a}),f=Pi({typed:e,equalScalar:r}),d=Oo({typed:e}),h=ar({typed:e,matrix:n,concat:s}),m=$D({typed:e,matrix:n});return e(v4,{"number, number":j7,"BigNumber, BigNumber":ude,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),g4="rightLogShift",Vpe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Wpe=ie(g4,Vpe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:s}=t,o=Nc({typed:e}),u=Fo({typed:e,equalScalar:r}),l=kD({typed:e,equalScalar:r}),c=nd({typed:e,DenseMatrix:a}),f=Pi({typed:e,equalScalar:r}),d=Oo({typed:e}),h=ar({typed:e,matrix:n,concat:s}),m=$D({typed:e,matrix:n});return e(g4,{"number, number":X7,"SparseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():f(y,p,v,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(v=>(y,p)=>r(p,0)?y.clone():d(y,p,v,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):c(p,y,v,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(v=>(y,p)=>r(y,0)?i(p.size(),p.storage()):d(p,y,v,!0))},m,h({SS:l,DS:o,SD:u}))}),y4="and",qpe=["typed","matrix","equalScalar","zeros","not","concat"],UH=ie(y4,qpe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:s}=t,o=Fo({typed:e,equalScalar:r}),u=nS({typed:e,equalScalar:r}),l=Pi({typed:e,equalScalar:r}),c=Oo({typed:e}),f=ar({typed:e,matrix:n,concat:s});return e(y4,{"number, number":J7,"Complex, Complex":function(h,m){return(h.re!==0||h.im!==0)&&(m.re!==0||m.im!==0)},"BigNumber, BigNumber":function(h,m){return!h.isZero()&&!m.isZero()&&!h.isNaN()&&!m.isNaN()},"Unit, Unit":e.referToSelf(d=>(h,m)=>d(h.value||0,m.value||0)),"SparseMatrix, any":e.referToSelf(d=>(h,m)=>a(m)?i(h.size(),h.storage()):l(h,m,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(h,m)=>a(m)?i(h.size(),h.storage()):c(h,m,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(h,m)=>a(h)?i(h.size(),h.storage()):l(m,h,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(h,m)=>a(h)?i(h.size(),h.storage()):c(m,h,d,!0)),"Array, any":e.referToSelf(d=>(h,m)=>d(n(h),m).valueOf()),"any, Array":e.referToSelf(d=>(h,m)=>d(h,n(m)).valueOf())},f({SS:u,DS:o}))}),_b="compare",jpe=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],Xpe=ie(_b,jpe,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,BigNumber:a,Fraction:s,DenseMatrix:o,concat:u}=t,l=Aa({typed:e}),c=tS({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:o}),d=ar({typed:e,matrix:i,concat:u}),h=Op({typed:e});return e(_b,Ype({typed:e,config:n}),{"boolean, boolean":function(v,y){return v===y?0:v>y?1:-1},"BigNumber, BigNumber":function(v,y){return au(v,y,n.epsilon)?new a(0):new a(v.cmp(y))},"Fraction, Fraction":function(v,y){return new s(v.compare(y))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,d({SS:c,DS:l,Ss:f}))}),Ype=ie(_b,["typed","config"],t=>{var{typed:e,config:n}=t;return e(_b,{"number, number":function(i,a){return fs(i,a,n.epsilon)?0:i>a?1:-1}})}),Zpe=function t(e,n){var r=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,o=/^0/,u=function(g){return t.insensitive&&(""+g).toLowerCase()||""+g},l=u(e).replace(i,"")||"",c=u(n).replace(i,"")||"",f=l.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(r,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(l.match(s),16)||f.length!==1&&l.match(a)&&Date.parse(l),m=parseInt(c.match(s),16)||h&&c.match(a)&&Date.parse(c)||null,v,y;if(m){if(h<m)return-1;if(h>m)return 1}for(var p=0,x=Math.max(f.length,d.length);p<x;p++){if(v=!(f[p]||"").match(o)&&parseFloat(f[p])||f[p]||0,y=!(d[p]||"").match(o)&&parseFloat(d[p])||d[p]||0,isNaN(v)!==isNaN(y))return isNaN(v)?1:-1;if(typeof v!=typeof y&&(v+="",y+=""),v<y)return-1;if(v>y)return 1}return 0};const nh=Qs(Zpe);var x4="compareNatural",Kpe=["typed","compare"],Qpe=ie(x4,Kpe,t=>{var{typed:e,compare:n}=t,r=n.signatures["boolean,boolean"];return e(x4,{"any, any":i});function i(u,l){var c=Jn(u),f=Jn(l),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(f==="number"||f==="BigNumber"||f==="Fraction"))return d=n(u,l),d.toString()!=="0"?d>0?1:-1:nh(c,f);var h=["Array","DenseMatrix","SparseMatrix"];if(h.includes(c)||h.includes(f))return d=a(i,u,l),d!==0?d:nh(c,f);if(c!==f)return nh(c,f);if(c==="Complex")return Jpe(u,l);if(c==="Unit")return u.equalBase(l)?i(u.value,l.value):s(i,u.formatUnits(),l.formatUnits());if(c==="boolean")return r(u,l);if(c==="string")return nh(u,l);if(c==="Object")return o(i,u,l);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function a(u,l,c){return Sf(l)&&Sf(c)?s(u,l.toJSON().values,c.toJSON().values):Sf(l)?a(u,l.toArray(),c):Sf(c)?a(u,l,c.toArray()):lb(l)?a(u,l.toJSON().data,c):lb(c)?a(u,l,c.toJSON().data):Array.isArray(l)?Array.isArray(c)?s(u,l,c):a(u,l,[c]):a(u,[l],c)}function s(u,l,c){for(var f=0,d=Math.min(l.length,c.length);f<d;f++){var h=u(l[f],c[f]);if(h!==0)return h}return l.length>c.length?1:l.length<c.length?-1:0}function o(u,l,c){var f=Object.keys(l),d=Object.keys(c);f.sort(nh),d.sort(nh);var h=s(u,f,d);if(h!==0)return h;for(var m=0;m<f.length;m++){var v=u(l[f[m]],c[d[m]]);if(v!==0)return v}return 0}});function Jpe(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0}var b4="compareText",eme=["typed","matrix","concat"];D2.signature="any, any";var tme=ie(b4,eme,t=>{var{typed:e,matrix:n,concat:r}=t,i=ar({typed:e,matrix:n,concat:r});return e(b4,D2,i({elop:D2,Ds:!0}))}),Eb="equal",nme=["typed","matrix","equalScalar","DenseMatrix","concat"],rme=ie(Eb,nme,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=cu({typed:e,DenseMatrix:i}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:n,concat:a});return e(Eb,ime({typed:e,equalScalar:r}),l({elop:r,SS:o,DS:s,Ss:u}))}),ime=ie(Eb,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(Eb,{"any, any":function(i,a){return i===null?a===null:a===null?i===null:i===void 0?a===void 0:a===void 0?i===void 0:n(i,a)}})}),w4="equalText",ame=["typed","compareText","isZero"],sme=ie(w4,ame,t=>{var{typed:e,compareText:n,isZero:r}=t;return e(w4,{"any, any":function(a,s){return r(n(a,s))}})}),Mb="smaller",ome=["typed","config","matrix","DenseMatrix","concat"],ume=ie(Mb,ome,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=cu({typed:e,DenseMatrix:i}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:r,concat:a}),c=Op({typed:e});return e(Mb,lme({typed:e,config:n}),{"boolean, boolean":(f,d)=>f<d,"BigNumber, BigNumber":function(d,h){return d.lt(h)&&!au(d,h,n.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===-1,"Complex, Complex":function(d,h){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),lme=ie(Mb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Mb,{"number, number":function(i,a){return i<a&&!fs(i,a,n.epsilon)}})}),Ab="smallerEq",cme=["typed","config","matrix","DenseMatrix","concat"],fme=ie(Ab,cme,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=cu({typed:e,DenseMatrix:i}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:r,concat:a}),c=Op({typed:e});return e(Ab,dme({typed:e,config:n}),{"boolean, boolean":(f,d)=>f<=d,"BigNumber, BigNumber":function(d,h){return d.lte(h)||au(d,h,n.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),dme=ie(Ab,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Ab,{"number, number":function(i,a){return i<=a||fs(i,a,n.epsilon)}})}),Cb="larger",hme=["typed","config","matrix","DenseMatrix","concat"],pme=ie(Cb,hme,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=cu({typed:e,DenseMatrix:i}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:r,concat:a}),c=Op({typed:e});return e(Cb,mme({typed:e,config:n}),{"boolean, boolean":(f,d)=>f>d,"BigNumber, BigNumber":function(d,h){return d.gt(h)&&!au(d,h,n.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),mme=ie(Cb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Cb,{"number, number":function(i,a){return i>a&&!fs(i,a,n.epsilon)}})}),Tb="largerEq",vme=["typed","config","matrix","DenseMatrix","concat"],gme=ie(Tb,vme,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:a}=t,s=Aa({typed:e}),o=cu({typed:e,DenseMatrix:i}),u=ci({typed:e,DenseMatrix:i}),l=ar({typed:e,matrix:r,concat:a}),c=Op({typed:e});return e(Tb,yme({typed:e,config:n}),{"boolean, boolean":(f,d)=>f>=d,"BigNumber, BigNumber":function(d,h){return d.gte(h)||au(d,h,n.epsilon)},"Fraction, Fraction":(f,d)=>f.compare(d)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,l({SS:o,DS:s,Ss:u}))}),yme=ie(Tb,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Tb,{"number, number":function(i,a){return i>=a||fs(i,a,n.epsilon)}})}),S4="deepEqual",xme=["typed","equal"],bme=ie(S4,xme,t=>{var{typed:e,equal:n}=t;return e(S4,{"any, any":function(a,s){return r(a.valueOf(),s.valueOf())}});function r(i,a){if(Array.isArray(i))if(Array.isArray(a)){var s=i.length;if(s!==a.length)return!1;for(var o=0;o<s;o++)if(!r(i[o],a[o]))return!1;return!0}else return!1;else return Array.isArray(a)?!1:n(i,a)}}),Db="unequal",wme=["typed","config","equalScalar","matrix","DenseMatrix","concat"],Sme=ie(Db,wme,t=>{var{typed:e,config:n,equalScalar:r,matrix:i,DenseMatrix:a,concat:s}=t,o=Aa({typed:e}),u=cu({typed:e,DenseMatrix:a}),l=ci({typed:e,DenseMatrix:a}),c=ar({typed:e,matrix:i,concat:s});return e(Db,_me({typed:e,equalScalar:r}),c({elop:f,SS:u,DS:o,Ss:l}));function f(d,h){return!r(d,h)}}),_me=ie(Db,["typed","equalScalar"],t=>{var{typed:e,equalScalar:n}=t;return e(Db,{"any, any":function(i,a){return i===null?a!==null:a===null?i!==null:i===void 0?a!==void 0:a===void 0?i!==void 0:!n(i,a)}})}),_4="partitionSelect",Eme=["typed","isNumeric","isNaN","compare"],Mme=ie(_4,Eme,t=>{var{typed:e,isNumeric:n,isNaN:r,compare:i}=t,a=i,s=(l,c)=>-i(l,c);return e(_4,{"Array | Matrix, number":function(c,f){return o(c,f,a)},"Array | Matrix, number, string":function(c,f,d){if(d==="asc")return o(c,f,a);if(d==="desc")return o(c,f,s);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(l,c,f){if(!Ct(c)||c<0)throw new Error("k must be a non-negative integer");if(Ft(l)){var d=l.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return u(l.valueOf(),c,f)}if(Array.isArray(l))return u(l,c,f)}function u(l,c,f){if(c>=l.length)throw new Error("k out of bounds");for(var d=0;d<l.length;d++)if(n(l[d])&&r(l[d]))return l[d];for(var h=0,m=l.length-1;h<m;){for(var v=h,y=m,p=l[Math.floor(Math.random()*(m-h+1))+h];v<y;)if(f(l[v],p)>=0){var x=l[y];l[y]=l[v],l[v]=x,--y}else++v;f(l[v],p)>0&&--v,c<=v?m=v:h=v+1}return l[c]}}),E4="sort",Ame=["typed","matrix","compare","compareNatural"],Cme=ie(E4,Ame,t=>{var{typed:e,matrix:n,compare:r,compareNatural:i}=t,a=r,s=(c,f)=>-r(c,f);return e(E4,{Array:function(f){return u(f),f.sort(a)},Matrix:function(f){return l(f),n(f.toArray().sort(a),f.storage())},"Array, function":function(f,d){return u(f),f.sort(d)},"Matrix, function":function(f,d){return l(f),n(f.toArray().sort(d),f.storage())},"Array, string":function(f,d){return u(f),f.sort(o(d))},"Matrix, string":function(f,d){return l(f),n(f.toArray().sort(o(d)),f.storage())}});function o(c){if(c==="asc")return a;if(c==="desc")return s;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function u(c){if(Yt(c).length!==1)throw new Error("One dimensional array expected")}function l(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),M4="max",Tme=["typed","config","numeric","larger"],zH=ie(M4,Tme,t=>{var{typed:e,config:n,numeric:r,larger:i}=t;return e(M4,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Jw(u,l.valueOf(),a)},"...":function(u){if(Rp(u))throw new TypeError("Scalar values expected in function max");return s(u)}});function a(o,u){try{return i(o,u)?o:u}catch(l){throw Sa(l,"max",u)}}function s(o){var u;if(tl(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||i(l,u))&&(u=l)}catch(c){throw Sa(c,"max",l)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=r(u,n.number)),u}}),A4="min",Dme=["typed","config","numeric","smaller"],kH=ie(A4,Dme,t=>{var{typed:e,config:n,numeric:r,smaller:i}=t;return e(A4,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(u,l){return Jw(u,l.valueOf(),a)},"...":function(u){if(Rp(u))throw new TypeError("Scalar values expected in function min");return s(u)}});function a(o,u){try{return i(o,u)?o:u}catch(l){throw Sa(l,"min",u)}}function s(o){var u;if(tl(o,function(l){try{isNaN(l)&&typeof l=="number"?u=NaN:(u===void 0||i(l,u))&&(u=l)}catch(c){throw Sa(c,"min",l)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=r(u,n.number)),u}}),Nme="ImmutableDenseMatrix",Rme=["smaller","DenseMatrix"],Pme=ie(Nme,Rme,t=>{var{smaller:e,DenseMatrix:n}=t;function r(i,a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(a&&!Xi(a))throw new Error("Invalid datatype: "+a);if(Ft(i)||Bn(i)){var s=new n(i,a);this._data=s._data,this._size=s._size,this._datatype=s._datatype,this._min=null,this._max=null}else if(i&&Bn(i.data)&&Bn(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+Jn(i)+")");this._data=[],this._size=[0],this._datatype=a,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(i){switch(arguments.length){case 1:{var a=n.prototype.subset.call(this,i);return Ft(a)?new r({data:a._data,size:a._size,datatype:a._datatype}):a}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:Wt(this._data),size:Wt(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(i){return new r(i)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(a){(i===null||e(a,i))&&(i=a)}),this._min=i!==null?i:void 0}return this._min},r.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(a){(i===null||e(i,a))&&(i=a)}),this._max=i!==null?i:void 0}return this._max},r},{isClass:!0}),Ime="Index",Ome=["ImmutableDenseMatrix","getMatrixDataType"],Fme=ie(Ime,Ome,t=>{var{ImmutableDenseMatrix:e,getMatrixDataType:n}=t;function r(a){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,o=arguments.length;s<o;s++){var u=arguments[s],l=Bn(u),c=Ft(u),f=null;if(TD(u))this._dimensions.push(u),this._isScalar=!1;else if(l||c){var d=void 0;n(u)==="boolean"?(l&&(d=i(C4(u).valueOf())),c&&(d=i(C4(u._data).valueOf())),f=u.valueOf().length):d=i(u.valueOf()),this._dimensions.push(d);var h=d.size();(h.length!==1||h[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof u=="number")this._dimensions.push(i([u]));else if(typeof u=="string")this._dimensions.push(u);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}r.prototype.type="Index",r.prototype.isIndex=!0;function i(a){for(var s=0,o=a.length;s<o;s++)if(typeof a[s]!="number"||!Ct(a[s]))throw new TypeError("Index parameters must be positive integer numbers");return new e(a)}return r.prototype.clone=function(){var a=new r;return a._dimensions=Wt(this._dimensions),a._isScalar=this._isScalar,a._sourceSize=this._sourceSize,a},r.create=function(a){var s=new r;return r.apply(s,a),s},r.prototype.size=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?1:u.size()[0]}return a},r.prototype.max=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.max()}return a},r.prototype.min=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a[s]=typeof u=="string"?u:u.min()}return a},r.prototype.forEach=function(a){for(var s=0,o=this._dimensions.length;s<o;s++)a(this._dimensions[s],s,this)},r.prototype.dimension=function(a){return this._dimensions[a]||null},r.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];a.push(typeof u=="string"?u:u.toArray())}return a},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var a=[],s=0,o=this._dimensions.length;s<o;s++){var u=this._dimensions[s];typeof u=="string"?a.push(JSON.stringify(u)):a.push(u.toString())}return"["+a.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(a){return r.create(a.dimensions)},r},{isClass:!0});function C4(t){var e=[];return t.forEach((n,r)=>{n&&e.push(r)}),e}var Lme="FibonacciHeap",Bme=["smaller","larger"],Ume=ie(Lme,Bme,t=>{var{smaller:e,larger:n}=t,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,f){var d={key:c,value:f,degree:0};if(this._minimum){var h=this._minimum;d.left=h,d.right=h.right,h.right=d,d.right.left=d,e(c,h.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var f=this._minimum,d=c.degree,h=c.child;d>0;){var m=h.right;h.left.right=h.right,h.right.left=h.left,h.left=f,h.right=f.right,f.right=h,h.right.left=h,h.parent=null,h=m,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?f=null:(f=c.right,f=l(f,this._size)),this._size--,this._minimum=f,c},i.prototype.remove=function(c){this._minimum=a(this._minimum,c,-1),this.extractMinimum()};function a(c,f,d){f.key=d;var h=f.parent;return h&&e(f.key,h.key)&&(s(c,f,h),o(c,h)),e(f.key,c.key)&&(c=f),c}function s(c,f,d){f.left.right=f.right,f.right.left=f.left,d.degree--,d.child===f&&(d.child=f.right),d.degree===0&&(d.child=null),f.left=c,f.right=c.right,c.right=f,f.right.left=f,f.parent=null,f.mark=!1}function o(c,f){var d=f.parent;d&&(f.mark?(s(c,f,d),o(d)):f.mark=!0)}var u=function(f,d){f.left.right=f.right,f.right.left=f.left,f.parent=d,d.child?(f.left=d.child,f.right=d.child.right,d.child.right=f,f.right.left=f):(d.child=f,f.right=f,f.left=f),d.degree++,f.mark=!1};function l(c,f){var d=Math.floor(Math.log(f)*r)+1,h=new Array(d),m=0,v=c;if(v)for(m++,v=v.right;v!==c;)m++,v=v.right;for(var y;m>0;){for(var p=v.degree,x=v.right;y=h[p],!!y;){if(n(v.key,y.key)){var g=y;y=v,v=g}u(y,v),h[p]=null,p++}h[p]=v,v=x,m--}c=null;for(var S=0;S<d;S++)y=h[S],y&&(c?(y.left.right=y.right,y.right.left=y.left,y.left=c,y.right=c.right,c.right=y,y.right.left=y,e(y.key,c.key)&&(c=y)):c=y);return c}return i},{isClass:!0}),zme="Spa",kme=["addScalar","equalScalar","FibonacciHeap"],$me=ie(zme,kme,t=>{var{addScalar:e,equalScalar:n,FibonacciHeap:r}=t;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(a,s){if(this._values[a])this._values[a].value=s;else{var o=this._heap.insert(a,s);this._values[a]=o}},i.prototype.get=function(a){var s=this._values[a];return s?s.value:0},i.prototype.accumulate=function(a,s){var o=this._values[a];o?o.value=e(o.value,s):(o=this._heap.insert(a,s),this._values[a]=o)},i.prototype.forEach=function(a,s,o){var u=this._heap,l=this._values,c=[],f=u.extractMinimum();for(f&&c.push(f);f&&f.key<=s;)f.key>=a&&(n(f.value,0)||o(f.key,f.value,this)),f=u.extractMinimum(),f&&c.push(f);for(var d=0;d<c.length;d++){var h=c[d];f=u.insert(h.key,h.value),l[f.key]=f}},i.prototype.swap=function(a,s){var o=this._values[a],u=this._values[s];if(!o&&u)o=this._heap.insert(a,u.value),this._heap.remove(u),this._values[a]=o,this._values[s]=void 0;else if(o&&!u)u=this._heap.insert(s,o.value),this._heap.remove(o),this._values[s]=u,this._values[a]=void 0;else if(o&&u){var l=o.value;o.value=u.value,u.value=l}},i},{isClass:!0}),Hme=u0(function(t){return new t(1).exp()},{hasher:rS}),Gme=u0(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:rS}),HD=u0(function(t){return t.acos(-1)},{hasher:rS}),Vme=u0(function(t){return HD(t).times(2)},{hasher:rS});function rS(t){return t[0].precision}function T4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T4(Object(n),!0).forEach(function(r){si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Wme="Unit",qme=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],jme=ie(Wme,qme,t=>{var{on:e,config:n,addScalar:r,subtractScalar:i,multiplyScalar:a,divideScalar:s,pow:o,abs:u,fix:l,round:c,equal:f,isNumeric:d,format:h,number:m,Complex:v,BigNumber:y,Fraction:p}=t,x=m;function g(Q,te){if(!(this instanceof g))throw new Error("Constructor must be called with the new operator");if(!(Q==null||d(Q)||qu(Q)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,te===void 0)this.units=[],this.dimensions=U.map(re=>0);else if(typeof te=="string"){var Me=g.parse(te);this.units=Me.units,this.dimensions=Me.dimensions}else if(Us(te)&&te.value===null)this.fixPrefix=te.fixPrefix,this.skipAutomaticSimplification=te.skipAutomaticSimplification,this.dimensions=te.dimensions.slice(0),this.units=te.units.map(re=>hn({},re));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Q)}Object.defineProperty(g,"name",{value:"Unit"}),g.prototype.constructor=g,g.prototype.type="Unit",g.prototype.isUnit=!0;var S,E,_;function A(){for(;_===" "||_==="	";)C()}function T(Q){return Q>="0"&&Q<="9"||Q==="."}function M(Q){return Q>="0"&&Q<="9"}function C(){E++,_=S.charAt(E)}function N(Q){E=Q,_=S.charAt(E)}function P(){var Q="",te=E;if(_==="+"?C():_==="-"&&(Q+=_,C()),!T(_))return N(te),null;if(_==="."){if(Q+=_,C(),!M(_))return N(te),null}else{for(;M(_);)Q+=_,C();_==="."&&(Q+=_,C())}for(;M(_);)Q+=_,C();if(_==="E"||_==="e"){var Me="",re=E;if(Me+=_,C(),(_==="+"||_==="-")&&(Me+=_,C()),!M(_))return N(re),Q;for(Q=Q+Me;M(_);)Q+=_,C()}return Q}function H(){for(var Q="";M(_)||g.isValidAlpha(_);)Q+=_,C();var te=Q.charAt(0);return g.isValidAlpha(te)?Q:null}function L(Q){return _===Q?(C(),Q):null}g.parse=function(Q,te){if(te=te||{},S=Q,E=-1,_="",typeof S!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var Me=new g;Me.units=[];var re=1,V=!1;C(),A();var G=P(),le=null;if(G){if(n.number==="BigNumber")le=new y(G);else if(n.number==="Fraction")try{le=new p(G)}catch{le=parseFloat(G)}else le=parseFloat(G);A(),L("*")?(re=1,V=!0):L("/")&&(re=-1,V=!0)}for(var _e=[],W=1;;){for(A();_==="(";)_e.push(re),W*=re,re=1,C(),A();var Y=void 0;if(_){var de=_;if(Y=H(),Y===null)throw new SyntaxError('Unexpected "'+de+'" in "'+S+'" at index '+E.toString())}else break;var xe=z(Y);if(xe===null)throw new SyntaxError('Unit "'+Y+'" not found.');var Ne=re*W;if(A(),L("^")){A();var Be=P();if(Be===null)throw new SyntaxError('In "'+Q+'", "^" must be followed by a floating-point number');Ne*=Be}Me.units.push({unit:xe.unit,prefix:xe.prefix,power:Ne});for(var $e=0;$e<U.length;$e++)Me.dimensions[$e]+=(xe.unit.dimensions[$e]||0)*Ne;for(A();_===")";){if(_e.length===0)throw new SyntaxError('Unmatched ")" in "'+S+'" at index '+E.toString());W/=_e.pop(),C(),A()}if(V=!1,L("*")?(re=1,V=!0):L("/")?(re=-1,V=!0):re=1,xe.unit.base){var Ie=xe.unit.base.key;ue.auto[Ie]={unit:xe.unit,prefix:xe.prefix}}}if(A(),_)throw new SyntaxError('Could not parse: "'+Q+'"');if(V)throw new SyntaxError('Trailing characters: "'+Q+'"');if(_e.length!==0)throw new SyntaxError('Unmatched "(" in "'+S+'"');if(Me.units.length===0&&!te.allowNoUnits)throw new SyntaxError('"'+Q+'" contains no units');return Me.value=le!==void 0?Me._normalize(le):null,Me},g.prototype.clone=function(){var Q=new g;Q.fixPrefix=this.fixPrefix,Q.skipAutomaticSimplification=this.skipAutomaticSimplification,Q.value=Wt(this.value),Q.dimensions=this.dimensions.slice(0),Q.units=[];for(var te=0;te<this.units.length;te++){Q.units[te]={};for(var Me in this.units[te])St(this.units[te],Me)&&(Q.units[te][Me]=this.units[te][Me])}return Q},g.prototype.valueType=function(){return Jn(this.value)},g.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},g.prototype._normalize=function(Q){if(Q==null||this.units.length===0)return Q;for(var te=Q,Me=g._getNumberConverter(Jn(Q)),re=0;re<this.units.length;re++){var V=Me(this.units[re].unit.value),G=Me(this.units[re].prefix.value),le=Me(this.units[re].power);te=a(te,o(a(V,G),le))}return te},g.prototype._denormalize=function(Q,te){if(Q==null||this.units.length===0)return Q;for(var Me=Q,re=g._getNumberConverter(Jn(Q)),V=0;V<this.units.length;V++){var G=re(this.units[V].unit.value),le=re(this.units[V].prefix.value),_e=re(this.units[V].power);Me=s(Me,o(a(G,le),_e))}return Me};var z=u0(Q=>{if(St(q,Q)){var te=q[Q],Me=te.prefixes[""];return{unit:te,prefix:Me}}for(var re in q)if(St(q,re)&&Ooe(Q,re)){var V=q[re],G=Q.length-re.length,le=Q.substring(0,G),_e=St(V.prefixes,le)?V.prefixes[le]:void 0;if(_e!==void 0)return{unit:V,prefix:_e}}return null},{hasher:Q=>Q[0],limit:100});g.isValuelessUnit=function(Q){return z(Q)!==null},g.prototype.hasBase=function(Q){if(typeof Q=="string"&&(Q=I[Q]),!Q)return!1;for(var te=0;te<U.length;te++)if(Math.abs((this.dimensions[te]||0)-(Q.dimensions[te]||0))>1e-12)return!1;return!0},g.prototype.equalBase=function(Q){for(var te=0;te<U.length;te++)if(Math.abs((this.dimensions[te]||0)-(Q.dimensions[te]||0))>1e-12)return!1;return!0},g.prototype.equals=function(Q){return this.equalBase(Q)&&f(this.value,Q.value)},g.prototype.multiply=function(Q){for(var te=this.clone(),Me=Us(Q)?Q:new g(Q),re=0;re<U.length;re++)te.dimensions[re]=(this.dimensions[re]||0)+(Me.dimensions[re]||0);for(var V=0;V<Me.units.length;V++){var G=pM({},Me.units[V]);te.units.push(G)}if(this.value!==null||Me.value!==null){var le=this.value===null?this._normalize(1):this.value,_e=Me.value===null?Me._normalize(1):Me.value;te.value=a(le,_e)}else te.value=null;return Us(Q)&&(te.skipAutomaticSimplification=!1),O(te)},g.prototype.divideInto=function(Q){return new g(Q).divide(this)},g.prototype.divide=function(Q){for(var te=this.clone(),Me=Us(Q)?Q:new g(Q),re=0;re<U.length;re++)te.dimensions[re]=(this.dimensions[re]||0)-(Me.dimensions[re]||0);for(var V=0;V<Me.units.length;V++){var G=pM(pM({},Me.units[V]),{},{power:-Me.units[V].power});te.units.push(G)}if(this.value!==null||Me.value!==null){var le=this.value===null?this._normalize(1):this.value,_e=Me.value===null?Me._normalize(1):Me.value;te.value=s(le,_e)}else te.value=null;return Us(Q)&&(te.skipAutomaticSimplification=!1),O(te)},g.prototype.pow=function(Q){for(var te=this.clone(),Me=0;Me<U.length;Me++)te.dimensions[Me]=(this.dimensions[Me]||0)*Q;for(var re=0;re<te.units.length;re++)te.units[re].power*=Q;return te.value!==null?te.value=o(te.value,Q):te.value=null,te.skipAutomaticSimplification=!1,O(te)};function O(Q){return Q.equalBase(I.NONE)&&Q.value!==null&&!n.predictable?Q.value:Q}g.prototype.abs=function(){var Q=this.clone();if(Q.value!==null)if(Q._isDerived()||Q.units.length===0||Q.units[0].unit.offset===0)Q.value=u(Q.value);else{var te=Q._numberConverter(),Me=te(Q.units[0].unit.value),re=te(Q.units[0].unit.offset),V=a(Me,re);Q.value=i(u(r(Q.value,V)),V)}for(var G in Q.units)(Q.units[G].unit.name==="VA"||Q.units[G].unit.name==="VAR")&&(Q.units[G].unit=q.W);return Q},g.prototype.to=function(Q){var te=this.value===null?this._normalize(1):this.value,Me;if(typeof Q=="string")Me=g.parse(Q);else if(Us(Q))Me=Q.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(Me))throw new Error("Units do not match ('".concat(Me.toString(),"' != '").concat(this.toString(),"')"));if(Me.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||Me.units.length===0||this.units[0].unit.offset===Me.units[0].unit.offset)Me.value=Wt(te);else{var re=g._getNumberConverter(Jn(te)),V=this.units[0].unit.value,G=this.units[0].unit.offset,le=a(V,G),_e=Me.units[0].unit.value,W=Me.units[0].unit.offset,Y=a(_e,W);Me.value=r(te,re(i(le,Y)))}return Me.fixPrefix=!0,Me.skipAutomaticSimplification=!0,Me},g.prototype.toNumber=function(Q){return x(this.toNumeric(Q))},g.prototype.toNumeric=function(Q){var te;return Q?te=this.to(Q):te=this.clone(),te._isDerived()||te.units.length===0?te._denormalize(te.value):te._denormalize(te.value,te.units[0].prefix.value)},g.prototype.toString=function(){return this.format()},g.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},g.fromJSON=function(Q){var te=new g(Q.value,Q.unit);return te.fixPrefix=Q.fixPrefix||!1,te},g.prototype.valueOf=g.prototype.toString,g.prototype.simplify=function(){var Q=this.clone(),te=[],Me;for(var re in pe)if(St(pe,re)&&Q.hasBase(I[re])){Me=re;break}if(Me==="NONE")Q.units=[];else{var V;if(Me&&St(pe,Me)&&(V=pe[Me]),V)Q.units=[{unit:V.unit,prefix:V.prefix,power:1}];else{for(var G=!1,le=0;le<U.length;le++){var _e=U[le];Math.abs(Q.dimensions[le]||0)>1e-12&&(St(pe,_e)?te.push({unit:pe[_e].unit,prefix:pe[_e].prefix,power:Q.dimensions[le]||0}):G=!0)}te.length<Q.units.length&&!G&&(Q.units=te)}}return Q},g.prototype.toSI=function(){for(var Q=this.clone(),te=[],Me=0;Me<U.length;Me++){var re=U[Me];if(Math.abs(Q.dimensions[Me]||0)>1e-12)if(St(ue.si,re))te.push({unit:ue.si[re].unit,prefix:ue.si[re].prefix,power:Q.dimensions[Me]||0});else throw new Error("Cannot express custom unit "+re+" in SI units")}return Q.units=te,Q.fixPrefix=!0,Q.skipAutomaticSimplification=!0,this.value!==null?(Q.value=null,this.to(Q)):Q},g.prototype.formatUnits=function(){for(var Q="",te="",Me=0,re=0,V=0;V<this.units.length;V++)this.units[V].power>0?(Me++,Q+=" "+this.units[V].prefix.name+this.units[V].unit.name,Math.abs(this.units[V].power-1)>1e-15&&(Q+="^"+this.units[V].power)):this.units[V].power<0&&re++;if(re>0)for(var G=0;G<this.units.length;G++)this.units[G].power<0&&(Me>0?(te+=" "+this.units[G].prefix.name+this.units[G].unit.name,Math.abs(this.units[G].power+1)>1e-15&&(te+="^"+-this.units[G].power)):(te+=" "+this.units[G].prefix.name+this.units[G].unit.name,te+="^"+this.units[G].power));Q=Q.substr(1),te=te.substr(1),Me>1&&re>0&&(Q="("+Q+")"),re>1&&Me>0&&(te="("+te+")");var le=Q;return Me>0&&re>0&&(le+=" / "),le+=te,le},g.prototype.format=function(Q){var te=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),Me=!1;typeof te.value<"u"&&te.value!==null&&qu(te.value)&&(Me=Math.abs(te.value.re)<1e-14);for(var re in te.units)St(te.units,re)&&te.units[re].unit&&(te.units[re].unit.name==="VA"&&Me?te.units[re].unit=q.VAR:te.units[re].unit.name==="VAR"&&!Me&&(te.units[re].unit=q.VA));te.units.length===1&&!te.fixPrefix&&Math.abs(te.units[0].power-Math.round(te.units[0].power))<1e-14&&(te.units[0].prefix=te._bestPrefix());var V=te._denormalize(te.value),G=te.value!==null?h(V,Q||{}):"",le=te.formatUnits();return te.value&&qu(te.value)&&(G="("+G+")"),le.length>0&&G.length>0&&(G+=" "),G+=le,G},g.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Q=this.value!==null?u(this.value):0,te=u(this.units[0].unit.value),Me=this.units[0].prefix;if(Q===0)return Me;var re=this.units[0].power,V=Math.log(Q/Math.pow(Me.value*te,re))/Math.LN10-1.2;if(V>-2.200001&&V<1.800001)return Me;V=Math.abs(V);var G=this.units[0].unit.prefixes;for(var le in G)if(St(G,le)){var _e=G[le];if(_e.scientific){var W=Math.abs(Math.log(Q/Math.pow(_e.value*te,re))/Math.LN10-1.2);(W<V||W===V&&_e.name.length<Me.name.length)&&(Me=_e,V=W)}}return Me},g.prototype.splitUnit=function(Q){for(var te=this.clone(),Me=[],re=0;re<Q.length&&(te=te.to(Q[re]),re!==Q.length-1);re++){var V=te.toNumeric(),G=c(V),le=void 0,_e=f(G,V);_e?le=G:le=l(te.toNumeric());var W=new g(le,Q[re].toString());Me.push(W),te=i(te,W)}for(var Y=0,de=0;de<Me.length;de++)Y=r(Y,Me[de].value);return f(Y,this.value)&&(te.value=0),Me.push(te),Me};var F={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};F.SHORTLONG=hn({},F.SHORT,F.LONG),F.BINARY_SHORT=hn({},F.BINARY_SHORT_SI,F.BINARY_SHORT_IEC),F.BINARY_LONG=hn({},F.BINARY_LONG_SI,F.BINARY_LONG_IEC);var U=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],I={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var j in I)St(I,j)&&(I[j].key=j);var ee={},J={name:"",base:ee,value:1,offset:0,dimensions:U.map(Q=>0)},q={meter:{name:"meter",base:I.LENGTH,prefixes:F.LONG,value:1,offset:0},inch:{name:"inch",base:I.LENGTH,prefixes:F.NONE,value:.0254,offset:0},foot:{name:"foot",base:I.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yard:{name:"yard",base:I.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mile:{name:"mile",base:I.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},link:{name:"link",base:I.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rod:{name:"rod",base:I.LENGTH,prefixes:F.NONE,value:5.0292,offset:0},chain:{name:"chain",base:I.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:I.LENGTH,prefixes:F.NONE,value:1e-10,offset:0},m:{name:"m",base:I.LENGTH,prefixes:F.SHORT,value:1,offset:0},in:{name:"in",base:I.LENGTH,prefixes:F.NONE,value:.0254,offset:0},ft:{name:"ft",base:I.LENGTH,prefixes:F.NONE,value:.3048,offset:0},yd:{name:"yd",base:I.LENGTH,prefixes:F.NONE,value:.9144,offset:0},mi:{name:"mi",base:I.LENGTH,prefixes:F.NONE,value:1609.344,offset:0},li:{name:"li",base:I.LENGTH,prefixes:F.NONE,value:.201168,offset:0},rd:{name:"rd",base:I.LENGTH,prefixes:F.NONE,value:5.02921,offset:0},ch:{name:"ch",base:I.LENGTH,prefixes:F.NONE,value:20.1168,offset:0},mil:{name:"mil",base:I.LENGTH,prefixes:F.NONE,value:254e-7,offset:0},m2:{name:"m2",base:I.SURFACE,prefixes:F.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:I.SURFACE,prefixes:F.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:I.SURFACE,prefixes:F.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:I.SURFACE,prefixes:F.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:I.SURFACE,prefixes:F.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:I.SURFACE,prefixes:F.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:I.SURFACE,prefixes:F.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:I.SURFACE,prefixes:F.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:I.SURFACE,prefixes:F.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:I.SURFACE,prefixes:F.NONE,value:1e4,offset:0},m3:{name:"m3",base:I.VOLUME,prefixes:F.CUBIC,value:1,offset:0},L:{name:"L",base:I.VOLUME,prefixes:F.SHORT,value:.001,offset:0},l:{name:"l",base:I.VOLUME,prefixes:F.SHORT,value:.001,offset:0},litre:{name:"litre",base:I.VOLUME,prefixes:F.LONG,value:.001,offset:0},cuin:{name:"cuin",base:I.VOLUME,prefixes:F.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:I.VOLUME,prefixes:F.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:I.VOLUME,prefixes:F.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:I.VOLUME,prefixes:F.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:I.VOLUME,prefixes:F.NONE,value:15e-6,offset:0},drop:{name:"drop",base:I.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:I.VOLUME,prefixes:F.NONE,value:5e-8,offset:0},minim:{name:"minim",base:I.VOLUME,prefixes:F.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:I.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:I.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:I.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:I.VOLUME,prefixes:F.NONE,value:1e-6,offset:0},cup:{name:"cup",base:I.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:I.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:I.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:I.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:I.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:I.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:I.VOLUME,prefixes:F.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:I.VOLUME,prefixes:F.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:I.VOLUME,prefixes:F.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:I.VOLUME,prefixes:F.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:I.VOLUME,prefixes:F.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:I.VOLUME,prefixes:F.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:I.VOLUME,prefixes:F.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:I.VOLUME,prefixes:F.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:I.VOLUME,prefixes:F.NONE,value:.1173478,offset:0},obl:{name:"obl",base:I.VOLUME,prefixes:F.NONE,value:.1589873,offset:0},g:{name:"g",base:I.MASS,prefixes:F.SHORT,value:.001,offset:0},gram:{name:"gram",base:I.MASS,prefixes:F.LONG,value:.001,offset:0},ton:{name:"ton",base:I.MASS,prefixes:F.SHORT,value:907.18474,offset:0},t:{name:"t",base:I.MASS,prefixes:F.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:I.MASS,prefixes:F.LONG,value:1e3,offset:0},grain:{name:"grain",base:I.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:I.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:I.MASS,prefixes:F.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:I.MASS,prefixes:F.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:I.MASS,prefixes:F.NONE,value:45.359237,offset:0},stick:{name:"stick",base:I.MASS,prefixes:F.NONE,value:.115,offset:0},stone:{name:"stone",base:I.MASS,prefixes:F.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:I.MASS,prefixes:F.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:I.MASS,prefixes:F.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:I.MASS,prefixes:F.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:I.MASS,prefixes:F.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:I.MASS,prefixes:F.NONE,value:45.359237,offset:0},s:{name:"s",base:I.TIME,prefixes:F.SHORT,value:1,offset:0},min:{name:"min",base:I.TIME,prefixes:F.NONE,value:60,offset:0},h:{name:"h",base:I.TIME,prefixes:F.NONE,value:3600,offset:0},second:{name:"second",base:I.TIME,prefixes:F.LONG,value:1,offset:0},sec:{name:"sec",base:I.TIME,prefixes:F.LONG,value:1,offset:0},minute:{name:"minute",base:I.TIME,prefixes:F.NONE,value:60,offset:0},hour:{name:"hour",base:I.TIME,prefixes:F.NONE,value:3600,offset:0},day:{name:"day",base:I.TIME,prefixes:F.NONE,value:86400,offset:0},week:{name:"week",base:I.TIME,prefixes:F.NONE,value:7*86400,offset:0},month:{name:"month",base:I.TIME,prefixes:F.NONE,value:2629800,offset:0},year:{name:"year",base:I.TIME,prefixes:F.NONE,value:31557600,offset:0},decade:{name:"decade",base:I.TIME,prefixes:F.NONE,value:315576e3,offset:0},century:{name:"century",base:I.TIME,prefixes:F.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:I.TIME,prefixes:F.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:I.FREQUENCY,prefixes:F.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:I.FREQUENCY,prefixes:F.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:I.ANGLE,prefixes:F.SHORT,value:1,offset:0},radian:{name:"radian",base:I.ANGLE,prefixes:F.LONG,value:1,offset:0},deg:{name:"deg",base:I.ANGLE,prefixes:F.SHORT,value:null,offset:0},degree:{name:"degree",base:I.ANGLE,prefixes:F.LONG,value:null,offset:0},grad:{name:"grad",base:I.ANGLE,prefixes:F.SHORT,value:null,offset:0},gradian:{name:"gradian",base:I.ANGLE,prefixes:F.LONG,value:null,offset:0},cycle:{name:"cycle",base:I.ANGLE,prefixes:F.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:I.ANGLE,prefixes:F.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:I.ANGLE,prefixes:F.NONE,value:null,offset:0},A:{name:"A",base:I.CURRENT,prefixes:F.SHORT,value:1,offset:0},ampere:{name:"ampere",base:I.CURRENT,prefixes:F.LONG,value:1,offset:0},K:{name:"K",base:I.TEMPERATURE,prefixes:F.SHORT,value:1,offset:0},degC:{name:"degC",base:I.TEMPERATURE,prefixes:F.SHORT,value:1,offset:273.15},degF:{name:"degF",base:I.TEMPERATURE,prefixes:F.SHORT,value:new p(5,9),offset:459.67},degR:{name:"degR",base:I.TEMPERATURE,prefixes:F.SHORT,value:new p(5,9),offset:0},kelvin:{name:"kelvin",base:I.TEMPERATURE,prefixes:F.LONG,value:1,offset:0},celsius:{name:"celsius",base:I.TEMPERATURE,prefixes:F.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:I.TEMPERATURE,prefixes:F.LONG,value:new p(5,9),offset:459.67},rankine:{name:"rankine",base:I.TEMPERATURE,prefixes:F.LONG,value:new p(5,9),offset:0},mol:{name:"mol",base:I.AMOUNT_OF_SUBSTANCE,prefixes:F.SHORT,value:1,offset:0},mole:{name:"mole",base:I.AMOUNT_OF_SUBSTANCE,prefixes:F.LONG,value:1,offset:0},cd:{name:"cd",base:I.LUMINOUS_INTENSITY,prefixes:F.SHORT,value:1,offset:0},candela:{name:"candela",base:I.LUMINOUS_INTENSITY,prefixes:F.LONG,value:1,offset:0},N:{name:"N",base:I.FORCE,prefixes:F.SHORT,value:1,offset:0},newton:{name:"newton",base:I.FORCE,prefixes:F.LONG,value:1,offset:0},dyn:{name:"dyn",base:I.FORCE,prefixes:F.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:I.FORCE,prefixes:F.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:I.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:I.FORCE,prefixes:F.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:I.FORCE,prefixes:F.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:I.FORCE,prefixes:F.NONE,value:9.80665,offset:0},J:{name:"J",base:I.ENERGY,prefixes:F.SHORT,value:1,offset:0},joule:{name:"joule",base:I.ENERGY,prefixes:F.LONG,value:1,offset:0},erg:{name:"erg",base:I.ENERGY,prefixes:F.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:I.ENERGY,prefixes:F.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:I.ENERGY,prefixes:F.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:I.ENERGY,prefixes:F.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:I.ENERGY,prefixes:F.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:I.POWER,prefixes:F.SHORT,value:1,offset:0},watt:{name:"watt",base:I.POWER,prefixes:F.LONG,value:1,offset:0},hp:{name:"hp",base:I.POWER,prefixes:F.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:I.POWER,prefixes:F.SHORT,value:v.I,offset:0},VA:{name:"VA",base:I.POWER,prefixes:F.SHORT,value:1,offset:0},Pa:{name:"Pa",base:I.PRESSURE,prefixes:F.SHORT,value:1,offset:0},psi:{name:"psi",base:I.PRESSURE,prefixes:F.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:I.PRESSURE,prefixes:F.NONE,value:101325,offset:0},bar:{name:"bar",base:I.PRESSURE,prefixes:F.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:I.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:I.PRESSURE,prefixes:F.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:I.PRESSURE,prefixes:F.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:I.PRESSURE,prefixes:F.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:I.ELECTRIC_CHARGE,prefixes:F.LONG,value:1,offset:0},C:{name:"C",base:I.ELECTRIC_CHARGE,prefixes:F.SHORT,value:1,offset:0},farad:{name:"farad",base:I.ELECTRIC_CAPACITANCE,prefixes:F.LONG,value:1,offset:0},F:{name:"F",base:I.ELECTRIC_CAPACITANCE,prefixes:F.SHORT,value:1,offset:0},volt:{name:"volt",base:I.ELECTRIC_POTENTIAL,prefixes:F.LONG,value:1,offset:0},V:{name:"V",base:I.ELECTRIC_POTENTIAL,prefixes:F.SHORT,value:1,offset:0},ohm:{name:"ohm",base:I.ELECTRIC_RESISTANCE,prefixes:F.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:I.ELECTRIC_INDUCTANCE,prefixes:F.LONG,value:1,offset:0},H:{name:"H",base:I.ELECTRIC_INDUCTANCE,prefixes:F.SHORT,value:1,offset:0},siemens:{name:"siemens",base:I.ELECTRIC_CONDUCTANCE,prefixes:F.LONG,value:1,offset:0},S:{name:"S",base:I.ELECTRIC_CONDUCTANCE,prefixes:F.SHORT,value:1,offset:0},weber:{name:"weber",base:I.MAGNETIC_FLUX,prefixes:F.LONG,value:1,offset:0},Wb:{name:"Wb",base:I.MAGNETIC_FLUX,prefixes:F.SHORT,value:1,offset:0},tesla:{name:"tesla",base:I.MAGNETIC_FLUX_DENSITY,prefixes:F.LONG,value:1,offset:0},T:{name:"T",base:I.MAGNETIC_FLUX_DENSITY,prefixes:F.SHORT,value:1,offset:0},b:{name:"b",base:I.BIT,prefixes:F.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:I.BIT,prefixes:F.BINARY_LONG,value:1,offset:0},B:{name:"B",base:I.BIT,prefixes:F.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:I.BIT,prefixes:F.BINARY_LONG,value:8,offset:0}},ae={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function be(Q){if(Q.number==="BigNumber"){var te=HD(y);q.rad.value=new y(1),q.deg.value=te.div(180),q.grad.value=te.div(200),q.cycle.value=te.times(2),q.arcsec.value=te.div(648e3),q.arcmin.value=te.div(10800)}else q.rad.value=1,q.deg.value=Math.PI/180,q.grad.value=Math.PI/200,q.cycle.value=Math.PI*2,q.arcsec.value=Math.PI/648e3,q.arcmin.value=Math.PI/10800;q.radian.value=q.rad.value,q.degree.value=q.deg.value,q.gradian.value=q.grad.value}be(n),e&&e("config",function(Q,te){Q.number!==te.number&&be(Q)});var ue={si:{NONE:{unit:J,prefix:F.NONE[""]},LENGTH:{unit:q.m,prefix:F.SHORT[""]},MASS:{unit:q.g,prefix:F.SHORT.k},TIME:{unit:q.s,prefix:F.SHORT[""]},CURRENT:{unit:q.A,prefix:F.SHORT[""]},TEMPERATURE:{unit:q.K,prefix:F.SHORT[""]},LUMINOUS_INTENSITY:{unit:q.cd,prefix:F.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:q.mol,prefix:F.SHORT[""]},ANGLE:{unit:q.rad,prefix:F.SHORT[""]},BIT:{unit:q.bits,prefix:F.SHORT[""]},FORCE:{unit:q.N,prefix:F.SHORT[""]},ENERGY:{unit:q.J,prefix:F.SHORT[""]},POWER:{unit:q.W,prefix:F.SHORT[""]},PRESSURE:{unit:q.Pa,prefix:F.SHORT[""]},ELECTRIC_CHARGE:{unit:q.C,prefix:F.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:q.F,prefix:F.SHORT[""]},ELECTRIC_POTENTIAL:{unit:q.V,prefix:F.SHORT[""]},ELECTRIC_RESISTANCE:{unit:q.ohm,prefix:F.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:q.H,prefix:F.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:q.S,prefix:F.SHORT[""]},MAGNETIC_FLUX:{unit:q.Wb,prefix:F.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:q.T,prefix:F.SHORT[""]},FREQUENCY:{unit:q.Hz,prefix:F.SHORT[""]}}};ue.cgs=JSON.parse(JSON.stringify(ue.si)),ue.cgs.LENGTH={unit:q.m,prefix:F.SHORT.c},ue.cgs.MASS={unit:q.g,prefix:F.SHORT[""]},ue.cgs.FORCE={unit:q.dyn,prefix:F.SHORT[""]},ue.cgs.ENERGY={unit:q.erg,prefix:F.NONE[""]},ue.us=JSON.parse(JSON.stringify(ue.si)),ue.us.LENGTH={unit:q.ft,prefix:F.NONE[""]},ue.us.MASS={unit:q.lbm,prefix:F.NONE[""]},ue.us.TEMPERATURE={unit:q.degF,prefix:F.NONE[""]},ue.us.FORCE={unit:q.lbf,prefix:F.NONE[""]},ue.us.ENERGY={unit:q.BTU,prefix:F.BTU[""]},ue.us.POWER={unit:q.hp,prefix:F.NONE[""]},ue.us.PRESSURE={unit:q.psi,prefix:F.NONE[""]},ue.auto=JSON.parse(JSON.stringify(ue.si));var pe=ue.auto;g.setUnitSystem=function(Q){if(St(ue,Q))pe=ue[Q];else throw new Error("Unit system "+Q+" does not exist. Choices are: "+Object.keys(ue).join(", "))},g.getUnitSystem=function(){for(var Q in ue)if(St(ue,Q)&&ue[Q]===pe)return Q},g.typeConverters={BigNumber:function(te){return te!=null&&te.isFraction?new y(te.n).div(te.d).times(te.s):new y(te+"")},Fraction:function(te){return new p(te)},Complex:function(te){return te},number:function(te){return te!=null&&te.isFraction?m(te):te}},g.prototype._numberConverter=function(){var Q=g.typeConverters[this.valueType()];if(Q)return Q;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},g._getNumberConverter=function(Q){if(!g.typeConverters[Q])throw new TypeError('Unsupported type "'+Q+'"');return g.typeConverters[Q]};for(var Pe in q)if(St(q,Pe)){var Ce=q[Pe];Ce.dimensions=Ce.base.dimensions}for(var Ee in ae)if(St(ae,Ee)){var Oe=q[ae[Ee]],ne={};for(var Le in Oe)St(Oe,Le)&&(ne[Le]=Oe[Le]);ne.name=Ee,q[Ee]=ne}g.isValidAlpha=function(te){return/^[a-zA-Z]$/.test(te)};function Fe(Q){for(var te=0;te<Q.length;te++){if(_=Q.charAt(te),te===0&&!g.isValidAlpha(_))throw new Error('Invalid unit name (must begin with alpha character): "'+Q+'"');if(te>0&&!(g.isValidAlpha(_)||M(_)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Q+'"')}}return g.createUnit=function(Q,te){if(typeof Q!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(te&&te.override){for(var Me in Q)if(St(Q,Me)&&g.deleteUnit(Me),Q[Me].aliases)for(var re=0;re<Q[Me].aliases.length;re++)g.deleteUnit(Q[Me].aliases[re])}var V;for(var G in Q)St(Q,G)&&(V=g.createUnitSingle(G,Q[G]));return V},g.createUnitSingle=function(Q,te){if((typeof te>"u"||te===null)&&(te={}),typeof Q!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(St(q,Q))throw new Error('Cannot create unit "'+Q+'": a unit with that name already exists');Fe(Q);var Me=null,re=[],V=0,G,le,_e;if(te&&te.type==="Unit")Me=te.clone();else if(typeof te=="string")te!==""&&(G=te);else if(typeof te=="object")G=te.definition,le=te.prefixes,V=te.offset,_e=te.baseName,te.aliases&&(re=te.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Q+'" from "'+te.toString()+'": expecting "string" or "Unit" or "Object"');if(re){for(var W=0;W<re.length;W++)if(St(q,re[W]))throw new Error('Cannot create alias "'+re[W]+'": a unit with that name already exists')}if(G&&typeof G=="string"&&!Me)try{Me=g.parse(G,{allowNoUnits:!0})}catch(B){throw B.message='Could not create unit "'+Q+'" from "'+G+'": '+B.message,B}else G&&G.type==="Unit"&&(Me=G.clone());re=re||[],V=V||0,le&&le.toUpperCase?le=F[le.toUpperCase()]||F.NONE:le=F.NONE;var Y={};if(Me){Y={name:Q,value:Me.value,dimensions:Me.dimensions.slice(0),prefixes:le,offset:V};var Be=!1;for(var $e in I)if(St(I,$e)){for(var Ie=!0,Ye=0;Ye<U.length;Ye++)if(Math.abs((Y.dimensions[Ye]||0)-(I[$e].dimensions[Ye]||0))>1e-12){Ie=!1;break}if(Ie){Be=!0,Y.base=I[$e];break}}if(!Be){_e=_e||Q+"_STUFF";var Ve={dimensions:Me.dimensions.slice(0)};Ve.key=_e,I[_e]=Ve,pe[_e]={unit:Y,prefix:F.NONE[""]},Y.base=I[_e]}}else{if(_e=_e||Q+"_STUFF",U.indexOf(_e)>=0)throw new Error('Cannot create new base unit "'+Q+'": a base unit with that name already exists (and cannot be overridden)');U.push(_e);for(var de in I)St(I,de)&&(I[de].dimensions[U.length-1]=0);for(var xe={dimensions:[]},Ne=0;Ne<U.length;Ne++)xe.dimensions[Ne]=0;xe.dimensions[U.length-1]=1,xe.key=_e,I[_e]=xe,Y={name:Q,value:1,dimensions:I[_e].dimensions.slice(0),prefixes:le,offset:V,base:I[_e]},pe[_e]={unit:Y,prefix:F.NONE[""]}}g.UNITS[Q]=Y;for(var at=0;at<re.length;at++){var tt=re[at],Ze={};for(var we in Y)St(Y,we)&&(Ze[we]=Y[we]);Ze.name=tt,g.UNITS[tt]=Ze}return delete z.cache,new g(null,Q)},g.deleteUnit=function(Q){delete g.UNITS[Q]},g.PREFIXES=F,g.BASE_DIMENSIONS=U,g.BASE_UNITS=I,g.UNIT_SYSTEMS=ue,g.UNITS=q,g},{isClass:!0}),D4="unit",Xme=["typed","Unit"],Yme=ie(D4,Xme,t=>{var{typed:e,Unit:n}=t;return e(D4,{Unit:function(i){return i.clone()},string:function(i){return n.isValuelessUnit(i)?new n(null,i):n.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,a){return new n(i,a)},"number | BigNumber | Fraction":function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))})}),N4="sparse",Zme=["typed","SparseMatrix"],Kme=ie(N4,Zme,t=>{var{typed:e,SparseMatrix:n}=t;return e(N4,{"":function(){return new n([])},string:function(i){return new n([],i)},"Array | Matrix":function(i){return new n(i)},"Array | Matrix, string":function(i,a){return new n(i,a)}})}),R4="createUnit",Qme=["typed","Unit"],Jme=ie(R4,Qme,t=>{var{typed:e,Unit:n}=t;return e(R4,{"Object, Object":function(i,a){return n.createUnit(i,a)},Object:function(i){return n.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,a,s){var o={};return o[i]=a,n.createUnit(o,s)},"string, Unit | string | Object":function(i,a){var s={};return s[i]=a,n.createUnit(s,{})},string:function(i){var a={};return a[i]={},n.createUnit(a,{})}})}),P4="acos",eve=["typed","config","Complex"],tve=ie(P4,eve,t=>{var{typed:e,config:n,Complex:r}=t;return e(P4,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.acos(a):new r(a,0).acos()},Complex:function(a){return a.acos()},BigNumber:function(a){return a.acos()}})}),I4="acosh",nve=["typed","config","Complex"],rve=ie(I4,nve,t=>{var{typed:e,config:n,Complex:r}=t;return e(I4,{number:function(a){return a>=1||n.predictable?nH(a):a<=-1?new r(Math.log(Math.sqrt(a*a-1)-a),Math.PI):new r(a,0).acosh()},Complex:function(a){return a.acosh()},BigNumber:function(a){return a.acosh()}})}),O4="acot",ive=["typed","BigNumber"],ave=ie(O4,ive,t=>{var{typed:e,BigNumber:n}=t;return e(O4,{number:rH,Complex:function(i){return i.acot()},BigNumber:function(i){return new n(1).div(i).atan()}})}),F4="acoth",sve=["typed","config","Complex","BigNumber"],ove=ie(F4,sve,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(F4,{number:function(s){return s>=1||s<=-1||n.predictable?iH(s):new r(s,0).acoth()},Complex:function(s){return s.acoth()},BigNumber:function(s){return new i(1).div(s).atanh()}})}),L4="acsc",uve=["typed","config","Complex","BigNumber"],lve=ie(L4,uve,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(L4,{number:function(s){return s<=-1||s>=1||n.predictable?aH(s):new r(s,0).acsc()},Complex:function(s){return s.acsc()},BigNumber:function(s){return new i(1).div(s).asin()}})}),B4="acsch",cve=["typed","BigNumber"],fve=ie(B4,cve,t=>{var{typed:e,BigNumber:n}=t;return e(B4,{number:sH,Complex:function(i){return i.acsch()},BigNumber:function(i){return new n(1).div(i).asinh()}})}),U4="asec",dve=["typed","config","Complex","BigNumber"],hve=ie(U4,dve,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(U4,{number:function(s){return s<=-1||s>=1||n.predictable?oH(s):new r(s,0).asec()},Complex:function(s){return s.asec()},BigNumber:function(s){return new i(1).div(s).acos()}})}),z4="asech",pve=["typed","config","Complex","BigNumber"],mve=ie(z4,pve,t=>{var{typed:e,config:n,Complex:r,BigNumber:i}=t;return e(z4,{number:function(s){if(s<=1&&s>=-1||n.predictable){var o=1/s;if(o>0||n.predictable)return uH(s);var u=Math.sqrt(o*o-1);return new r(Math.log(u-o),Math.PI)}return new r(s,0).asech()},Complex:function(s){return s.asech()},BigNumber:function(s){return new i(1).div(s).acosh()}})}),k4="asin",vve=["typed","config","Complex"],gve=ie(k4,vve,t=>{var{typed:e,config:n,Complex:r}=t;return e(k4,{number:function(a){return a>=-1&&a<=1||n.predictable?Math.asin(a):new r(a,0).asin()},Complex:function(a){return a.asin()},BigNumber:function(a){return a.asin()}})}),yve="asinh",xve=["typed"],bve=ie(yve,xve,t=>{var{typed:e}=t;return e("asinh",{number:lH,Complex:function(r){return r.asinh()},BigNumber:function(r){return r.asinh()}})}),wve="atan",Sve=["typed"],_ve=ie(wve,Sve,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),$4="atan2",Eve=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],Mve=ie($4,Eve,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:s}=t,o=Fo({typed:e,equalScalar:r}),u=Aa({typed:e}),l=EH({typed:e,equalScalar:r}),c=Pi({typed:e,equalScalar:r}),f=ci({typed:e,DenseMatrix:a}),d=ar({typed:e,matrix:n,concat:s});return e($4,{"number, number":Math.atan2,"BigNumber, BigNumber":(h,m)=>i.atan2(h,m)},d({scalar:"number | BigNumber",SS:l,DS:u,SD:o,Ss:c,sS:f}))}),H4="atanh",Ave=["typed","config","Complex"],Cve=ie(H4,Ave,t=>{var{typed:e,config:n,Complex:r}=t;return e(H4,{number:function(a){return a<=1&&a>=-1||n.predictable?cH(a):new r(a,0).atanh()},Complex:function(a){return a.atanh()},BigNumber:function(a){return a.atanh()}})}),Lp=ie("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),G4="cos",Tve=["typed"],Dve=ie(G4,Tve,t=>{var{typed:e}=t,n=Lp({typed:e});return e(G4,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),V4="cosh",Nve=["typed"],Rve=ie(V4,Nve,t=>{var{typed:e}=t;return e(V4,{number:Coe,"Complex | BigNumber":n=>n.cosh()})}),W4="cot",Pve=["typed","BigNumber"],Ive=ie(W4,Pve,t=>{var{typed:e,BigNumber:n}=t,r=Lp({typed:e});return e(W4,{number:fH,Complex:i=>i.cot(),BigNumber:i=>new n(1).div(i.tan())},r)}),q4="coth",Ove=["typed","BigNumber"],Fve=ie(q4,Ove,t=>{var{typed:e,BigNumber:n}=t;return e(q4,{number:dH,Complex:r=>r.coth(),BigNumber:r=>new n(1).div(r.tanh())})}),j4="csc",Lve=["typed","BigNumber"],Bve=ie(j4,Lve,t=>{var{typed:e,BigNumber:n}=t,r=Lp({typed:e});return e(j4,{number:hH,Complex:i=>i.csc(),BigNumber:i=>new n(1).div(i.sin())},r)}),X4="csch",Uve=["typed","BigNumber"],zve=ie(X4,Uve,t=>{var{typed:e,BigNumber:n}=t;return e(X4,{number:pH,Complex:r=>r.csch(),BigNumber:r=>new n(1).div(r.sinh())})}),Y4="sec",kve=["typed","BigNumber"],$ve=ie(Y4,kve,t=>{var{typed:e,BigNumber:n}=t,r=Lp({typed:e});return e(Y4,{number:mH,Complex:i=>i.sec(),BigNumber:i=>new n(1).div(i.cos())},r)}),Z4="sech",Hve=["typed","BigNumber"],Gve=ie(Z4,Hve,t=>{var{typed:e,BigNumber:n}=t;return e(Z4,{number:vH,Complex:r=>r.sech(),BigNumber:r=>new n(1).div(r.cosh())})}),K4="sin",Vve=["typed"],Wve=ie(K4,Vve,t=>{var{typed:e}=t,n=Lp({typed:e});return e(K4,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),Q4="sinh",qve=["typed"],jve=ie(Q4,qve,t=>{var{typed:e}=t;return e(Q4,{number:gH,"Complex | BigNumber":n=>n.sinh()})}),J4="tan",Xve=["typed"],Yve=ie(J4,Xve,t=>{var{typed:e}=t,n=Lp({typed:e});return e(J4,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),Zve="tanh",Kve=["typed"],Qve=ie(Zve,Kve,t=>{var{typed:e}=t;return e("tanh",{number:Doe,"Complex | BigNumber":n=>n.tanh()})}),eB="setCartesian",Jve=["typed","size","subset","compareNatural","Index","DenseMatrix"],ege=ie(eB,Jve,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(eB,{"Array | Matrix, Array | Matrix":function(u,l){var c=[];if(r(n(u),new a(0))!==0&&r(n(l),new a(0))!==0){var f=Pn(Array.isArray(u)?u:u.toArray()).sort(i),d=Pn(Array.isArray(l)?l:l.toArray()).sort(i);c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)c.push([f[h],d[m]])}return Array.isArray(u)&&Array.isArray(l)?c:new s(c)}})}),tB="setDifference",tge=["typed","size","subset","compareNatural","Index","DenseMatrix"],nge=ie(tB,tge,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(tB,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0)c=[];else{if(r(n(l),new a(0))===0)return Pn(u.toArray());var f=op(Pn(Array.isArray(u)?u:u.toArray()).sort(i)),d=op(Pn(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h,m=0;m<f.length;m++){h=!1;for(var v=0;v<d.length;v++)if(i(f[m].value,d[v].value)===0&&f[m].identifier===d[v].identifier){h=!0;break}h||c.push(f[m])}}return Array.isArray(u)&&Array.isArray(l)?hb(c):new s(hb(c))}})}),nB="setDistinct",rge=["typed","size","subset","compareNatural","Index","DenseMatrix"],ige=ie(nB,rge,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(nB,{"Array | Matrix":function(u){var l;if(r(n(u),new a(0))===0)l=[];else{var c=Pn(Array.isArray(u)?u:u.toArray()).sort(i);l=[],l.push(c[0]);for(var f=1;f<c.length;f++)i(c[f],c[f-1])!==0&&l.push(c[f])}return Array.isArray(u)?l:new s(l)}})}),rB="setIntersect",age=["typed","size","subset","compareNatural","Index","DenseMatrix"],sge=ie(rB,age,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:s}=t;return e(rB,{"Array | Matrix, Array | Matrix":function(u,l){var c;if(r(n(u),new a(0))===0||r(n(l),new a(0))===0)c=[];else{var f=op(Pn(Array.isArray(u)?u:u.toArray()).sort(i)),d=op(Pn(Array.isArray(l)?l:l.toArray()).sort(i));c=[];for(var h=0;h<f.length;h++)for(var m=0;m<d.length;m++)if(i(f[h].value,d[m].value)===0&&f[h].identifier===d[m].identifier){c.push(f[h]);break}}return Array.isArray(u)&&Array.isArray(l)?hb(c):new s(hb(c))}})}),iB="setIsSubset",oge=["typed","size","subset","compareNatural","Index"],uge=ie(iB,oge,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(iB,{"Array | Matrix, Array | Matrix":function(o,u){if(r(n(o),new a(0))===0)return!0;if(r(n(u),new a(0))===0)return!1;for(var l=op(Pn(Array.isArray(o)?o:o.toArray()).sort(i)),c=op(Pn(Array.isArray(u)?u:u.toArray()).sort(i)),f,d=0;d<l.length;d++){f=!1;for(var h=0;h<c.length;h++)if(i(l[d].value,c[h].value)===0&&l[d].identifier===c[h].identifier){f=!0;break}if(f===!1)return!1}return!0}})}),aB="setMultiplicity",lge=["typed","size","subset","compareNatural","Index"],cge=ie(aB,lge,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(aB,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,u){if(r(n(u),new a(0))===0)return 0;for(var l=Pn(Array.isArray(u)?u:u.toArray()),c=0,f=0;f<l.length;f++)i(l[f],o)===0&&c++;return c}})}),sB="setPowerset",fge=["typed","size","subset","compareNatural","Index"],dge=ie(sB,fge,t=>{var{typed:e,size:n,subset:r,compareNatural:i,Index:a}=t;return e(sB,{"Array | Matrix":function(l){if(r(n(l),new a(0))===0)return[];for(var c=Pn(Array.isArray(l)?l:l.toArray()).sort(i),f=[],d=0;d.toString(2).length<=c.length;)f.push(s(c,d.toString(2).split("").reverse())),d++;return o(f)}});function s(u,l){for(var c=[],f=0;f<l.length;f++)l[f]==="1"&&c.push(u[f]);return c}function o(u){for(var l=[],c=u.length-1;c>0;c--)for(var f=0;f<c;f++)u[f].length>u[f+1].length&&(l=u[f],u[f]=u[f+1],u[f+1]=l);return u}}),oB="setSize",hge=["typed","compareNatural"],pge=ie(oB,hge,t=>{var{typed:e,compareNatural:n}=t;return e(oB,{"Array | Matrix":function(i){return Array.isArray(i)?Pn(i).length:Pn(i.toArray()).length},"Array | Matrix, boolean":function(i,a){if(a===!1||i.length===0)return Array.isArray(i)?Pn(i).length:Pn(i.toArray()).length;for(var s=Pn(Array.isArray(i)?i:i.toArray()).sort(n),o=1,u=1;u<s.length;u++)n(s[u],s[u-1])!==0&&o++;return o}})}),uB="setSymDifference",mge=["typed","size","concat","subset","setDifference","Index"],vge=ie(uB,mge,t=>{var{typed:e,size:n,concat:r,subset:i,setDifference:a,Index:s}=t;return e(uB,{"Array | Matrix, Array | Matrix":function(u,l){if(i(n(u),new s(0))===0)return Pn(l);if(i(n(l),new s(0))===0)return Pn(u);var c=Pn(u),f=Pn(l);return r(a(c,f),a(f,c))}})}),lB="setUnion",gge=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],yge=ie(lB,gge,t=>{var{typed:e,size:n,concat:r,subset:i,setIntersect:a,setSymDifference:s,Index:o}=t;return e(lB,{"Array | Matrix, Array | Matrix":function(l,c){if(i(n(l),new o(0))===0)return Pn(c);if(i(n(c),new o(0))===0)return Pn(l);var f=Pn(l),d=Pn(c);return r(s(f,d),a(f,d))}})}),cB="add",xge=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],bge=ie(cB,xge,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=t,u=Nc({typed:e}),l=BD({typed:e,equalScalar:i}),c=nd({typed:e,DenseMatrix:a}),f=ar({typed:e,matrix:n,concat:o});return e(cB,{"any, any":r,"any, any, ...any":e.referToSelf(d=>(h,m,v)=>{for(var y=d(h,m),p=0;p<v.length;p++)y=d(y,v[p]);return y})},f({elop:r,DS:u,SS:l,Ss:c}))}),fB="hypot",wge=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],Sge=ie(fB,wge,t=>{var{typed:e,abs:n,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:s,smaller:o,isPositive:u}=t;return e(fB,{"... number | BigNumber":l,Array:l,Matrix:c=>l(Pn(c.toArray()))});function l(c){for(var f=0,d=0,h=0;h<c.length;h++){if(qu(c[h]))throw new TypeError("Unexpected type of argument to hypot");var m=n(c[h]);o(d,m)?(f=a(f,a(i(d,m),i(d,m))),f=r(f,1),d=m):f=r(f,u(m)?a(i(m,d),i(m,d)):m)}return a(d,s(f))}}),dB="norm",_ge=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Ege=ie(dB,_ge,t=>{var{typed:e,abs:n,add:r,pow:i,conj:a,sqrt:s,multiply:o,equalScalar:u,larger:l,smaller:c,matrix:f,ctranspose:d,eigs:h}=t;return e(dB,{number:Math.abs,Complex:function(T){return T.abs()},BigNumber:function(T){return T.abs()},boolean:function(T){return Math.abs(T)},Array:function(T){return _(f(T),2)},Matrix:function(T){return _(T,2)},"Array, number | BigNumber | string":function(T,M){return _(f(T),M)},"Matrix, number | BigNumber | string":function(T,M){return _(T,M)}});function m(A){var T=0;return A.forEach(function(M){var C=n(M);l(C,T)&&(T=C)},!0),T}function v(A){var T;return A.forEach(function(M){var C=n(M);(!T||c(C,T))&&(T=C)},!0),T||0}function y(A,T){if(T===Number.POSITIVE_INFINITY||T==="inf")return m(A);if(T===Number.NEGATIVE_INFINITY||T==="-inf")return v(A);if(T==="fro")return _(A,2);if(typeof T=="number"&&!isNaN(T)){if(!u(T,0)){var M=0;return A.forEach(function(C){M=r(i(n(C),T),M)},!0),i(M,1/T)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function p(A){var T=0;return A.forEach(function(M,C){T=r(T,o(M,a(M)))}),n(s(T))}function x(A){var T=[],M=0;return A.forEach(function(C,N){var P=N[1],H=r(T[P]||0,n(C));l(H,M)&&(M=H),T[P]=H},!0),M}function g(A){var T=A.size();if(T[0]!==T[1])throw new RangeError("Invalid matrix dimensions");var M=d(A),C=o(M,A),N=h(C).values.toArray(),P=N[N.length-1];return n(s(P))}function S(A){var T=[],M=0;return A.forEach(function(C,N){var P=N[0],H=r(T[P]||0,n(C));l(H,M)&&(M=H),T[P]=H},!0),M}function E(A,T){if(T===1)return x(A);if(T===Number.POSITIVE_INFINITY||T==="inf")return S(A);if(T==="fro")return p(A);if(T===2)return g(A);throw new Error("Unsupported parameter value "+T)}function _(A,T){var M=A.size();if(M.length===1)return y(A,T);if(M.length===2){if(M[0]&&M[1])return E(A,T);throw new RangeError("Invalid matrix dimensions")}}}),hB="dot",Mge=["typed","addScalar","multiplyScalar","conj","size"],Age=ie(hB,Mge,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:a}=t;return e(hB,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":u});function s(c,f){var d=l(c),h=l(f),m,v;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==v)throw new RangeError("Vectors must have equal length ("+m+" != "+v+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function o(c,f){var d=s(c,f),h=Ft(c)?c._data:c,m=Ft(c)?c._datatype:void 0,v=Ft(f)?f._data:f,y=Ft(f)?f._datatype:void 0,p=l(c).length===2,x=l(f).length===2,g=n,S=r;if(m&&y&&m===y&&typeof m=="string"){var E=m;g=e.find(n,[E,E]),S=e.find(r,[E,E])}if(!p&&!x){for(var _=S(i(h[0]),v[0]),A=1;A<d;A++)_=g(_,S(i(h[A]),v[A]));return _}if(!p&&x){for(var T=S(i(h[0]),v[0][0]),M=1;M<d;M++)T=g(T,S(i(h[M]),v[M][0]));return T}if(p&&!x){for(var C=S(i(h[0][0]),v[0]),N=1;N<d;N++)C=g(C,S(i(h[N][0]),v[N]));return C}if(p&&x){for(var P=S(i(h[0][0]),v[0][0]),H=1;H<d;H++)P=g(P,S(i(h[H][0]),v[H][0]));return P}}function u(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,v=f._values,y=0,p=n,x=r,g=0,S=0;g<d.length&&S<m.length;){var E=d[g],_=m[S];if(E<_){g++;continue}if(E>_){S++;continue}E===_&&(y=p(y,x(h[g],v[S])),g++,S++)}return y}function l(c){return Ft(c)?c.size():a(c)}}),Cge="trace",Tge=["typed","matrix","add"],Dge=ie(Cge,Tge,t=>{var{typed:e,matrix:n,add:r}=t;return e("trace",{Array:function(o){return i(n(o))},SparseMatrix:a,DenseMatrix:i,any:Wt});function i(s){var o=s._size,u=s._data;switch(o.length){case 1:if(o[0]===1)return Wt(u[0]);throw new RangeError("Matrix must be square (size: "+on(o)+")");case 2:{var l=o[0],c=o[1];if(l===c){for(var f=0,d=0;d<l;d++)f=r(f,u[d][d]);return f}else throw new RangeError("Matrix must be square (size: "+on(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+on(o)+")")}}function a(s){var o=s._values,u=s._index,l=s._ptr,c=s._size,f=c[0],d=c[1];if(f===d){var h=0;if(o.length>0)for(var m=0;m<d;m++)for(var v=l[m],y=l[m+1],p=v;p<y;p++){var x=u[p];if(x===m){h=r(h,o[p]);break}if(x>m)break}return h}throw new RangeError("Matrix must be square (size: "+on(c)+")")}}),pB="index",Nge=["typed","Index"],Rge=ie(pB,Nge,t=>{var{typed:e,Index:n}=t;return e(pB,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var a=i.map(function(o){return Qt(o)?o.toNumber():Bn(o)||Ft(o)?o.map(function(u){return Qt(u)?u.toNumber():u}):o}),s=new n;return n.apply(s,a),s}})}),$H=new Set(["end"]),Pge="Node",Ige=["mathWithTransform"],Oge=ie(Pge,Ige,t=>{var{mathWithTransform:e}=t;function n(i){for(var a of[...$H])if(i.has(a))throw new Error('Scope contains an illegal symbol, "'+a+'" is a reserved keyword')}class r{get type(){return"Node"}get isNode(){return!0}evaluate(a){return this.compile().evaluate(a)}compile(){var a=this._compile(e,{}),s={},o=null;function u(l){var c=zh(l);return n(c),a(c,s,o)}return{evaluate:u}}_compile(a,s){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(a){throw new Error("Cannot run forEach on a Node interface")}map(a){throw new Error("Cannot run map on a Node interface")}_ifNode(a){if(!qn(a))throw new TypeError("Callback function must return a Node");return a}traverse(a){a(this,null,null);function s(o,u){o.forEach(function(l,c,f){u(l,c,f),s(l,u)})}s(this,a)}transform(a){function s(o,u,l){var c=a(o,u,l);return c!==o?c:o.map(s)}return s(this,null,null)}filter(a){var s=[];return this.traverse(function(o,u,l){a(o,u,l)&&s.push(o)}),s}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(a){return a.cloneDeep()})}equals(a){return a?this.type===a.type&&Gf(this,a):!1}toString(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toString(a)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toHTML(a)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(a){var s=this._getCustomString(a);return typeof s<"u"?s:this._toTex(a)}_toTex(a){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(a){if(a&&typeof a=="object")switch(typeof a.handler){case"object":case"undefined":return;case"function":return a.handler(this,a);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return r},{isClass:!0,isNode:!0});function Ca(t){return t&&t.isIndexError?new Po(t.index+1,t.min+1,t.max!==void 0?t.max+1:void 0):t}function HH(t){var{subset:e}=t;return function(r,i){try{if(Array.isArray(r))return e(r,i);if(r&&typeof r.subset=="function")return r.subset(i);if(typeof r=="string")return e(r,i);if(typeof r=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return xa(r,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw Ca(a)}}}var I1="AccessorNode",Fge=["subset","Node"],Lge=ie(I1,Fge,t=>{var{subset:e,Node:n}=t,r=HH({subset:e});function i(s){return!(Hf(s)||Os(s)||Tn(s)||hc(s)||qw(s)||el(s)||bi(s))}class a extends n{constructor(o,u){if(super(),!qn(o))throw new TypeError('Node expected for parameter "object"');if(!Np(u))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return I1}get isAccessorNode(){return!0}_compile(o,u){var l=this.object._compile(o,u),c=this.index._compile(o,u);if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(h,m,v){return xa(l(h,m,v),f)}}else return function(h,m,v){var y=l(h,m,v),p=c(h,m,y);return r(y,p)}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new a(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(o){var u=this.object.toString(o);return i(this.object)&&(u="("+u+")"),u+this.index.toString(o)}_toHTML(o){var u=this.object.toHTML(o);return i(this.object)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+this.index.toHTML(o)}_toTex(o){var u=this.object.toTex(o);return i(this.object)&&(u="\\left(' + object + '\\right)"),u+this.index.toTex(o)}toJSON(){return{mathjs:I1,object:this.object,index:this.index}}static fromJSON(o){return new a(o.object,o.index)}}return si(a,"name",I1),a},{isClass:!0,isNode:!0}),O1="ArrayNode",Bge=["Node"],Uge=ie(O1,Bge,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(qn))throw new TypeError("Array containing Nodes expected")}get type(){return O1}get isArrayNode(){return!0}_compile(i,a){var s=ju(this.items,function(l){return l._compile(i,a)}),o=i.config.matrix!=="Array";if(o){var u=i.matrix;return function(c,f,d){return u(ju(s,function(h){return h(c,f,d)}))}}else return function(c,f,d){return ju(s,function(h){return h(c,f,d)})}}forEach(i){for(var a=0;a<this.items.length;a++){var s=this.items[a];i(s,"items["+a+"]",this)}}map(i){for(var a=[],s=0;s<this.items.length;s++)a[s]=this._ifNode(i(this.items[s],"items["+s+"]",this));return new n(a)}clone(){return new n(this.items.slice(0))}_toString(i){var a=this.items.map(function(s){return s.toString(i)});return"["+a.join(", ")+"]"}toJSON(){return{mathjs:O1,items:this.items}}static fromJSON(i){return new n(i.items)}_toHTML(i){var a=this.items.map(function(s){return s.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function a(s,o){var u=s.some(Os)&&!s.every(Os),l=o||u,c=l?"&":"\\\\",f=s.map(function(d){return d.items?a(d.items,!o):d.toTex(i)}).join(c);return u||!l||l&&!o?"\\begin{bmatrix}"+f+"\\end{bmatrix}":f}return a(this.items,!1)}}return si(n,"name",O1),n},{isClass:!0,isNode:!0});function zge(t){var{subset:e,matrix:n}=t;return function(i,a,s){try{if(Array.isArray(i)){var o=n(i).subset(a,s).valueOf();return o.forEach((u,l)=>{i[l]=u}),i}else{if(i&&typeof i.subset=="function")return i.subset(a,s);if(typeof i=="string")return e(i,a,s);if(typeof i=="object"){if(!a.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return up(i,a.getObjectProperty(),s),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(u){throw Ca(u)}}}var vo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function F1(t,e){if(!e||e!=="auto")return t;for(var n=t;el(n);)n=n.content;return n}function Zn(t,e,n,r){var i=t;e!=="keep"&&(i=t.getContent());for(var a=i.getIdentifier(),s=null,o=0;o<vo.length;o++)if(a in vo[o]){s=o;break}if(a==="OperatorNode:multiply"&&i.implicit&&n!=="show"){var u=F1(i.args[0],e);!(Tn(u)&&r&&r.getIdentifier()==="OperatorNode:divide"&&T2(F1(r.args[0],e)))&&!(u.getIdentifier()==="OperatorNode:divide"&&T2(F1(u.args[0],e))&&Tn(F1(u.args[1])))&&(s+=1)}return s}function Vm(t,e){var n=t;e!=="keep"&&(n=t.getContent());var r=n.getIdentifier(),i=Zn(n,e);if(i===null)return null;var a=vo[i][r];if(St(a,"associativity")){if(a.associativity==="left")return"left";if(a.associativity==="right")return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function mM(t,e,n){var r=n!=="keep"?t.getContent():t,i=n!=="keep"?t.getContent():e,a=r.getIdentifier(),s=i.getIdentifier(),o=Zn(r,n);if(o===null)return null;var u=vo[o][a];if(St(u,"associativeWith")&&u.associativeWith instanceof Array){for(var l=0;l<u.associativeWith.length;l++)if(u.associativeWith[l]===s)return!0;return!1}return null}function kge(t){var e="OperatorNode:"+t;for(var n of vo)if(e in n)return n[e].op;return null}var L1="AssignmentNode",$ge=["subset","?matrix","Node"],Hge=ie(L1,$ge,t=>{var{subset:e,matrix:n,Node:r}=t,i=HH({subset:e}),a=zge({subset:e,matrix:n});function s(u,l,c){l||(l="keep");var f=Zn(u,l,c),d=Zn(u.value,l,c);return l==="all"||d!==null&&d<=f}class o extends r{constructor(l,c,f){if(super(),this.object=l,this.index=f?c:null,this.value=f||c,!bi(l)&&!Hf(l))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(bi(l)&&l.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Np(this.index))throw new TypeError('IndexNode expected as "index"');if(!qn(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return L1}get isAssignmentNode(){return!0}_compile(l,c){var f=this.object._compile(l,c),d=this.index?this.index._compile(l,c):null,h=this.value._compile(l,c),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var v=this.index.getObjectProperty();return function(S,E,_){var A=f(S,E,_),T=h(S,E,_);return up(A,v,T),T}}else{if(bi(this.object))return function(S,E,_){var A=f(S,E,_),T=h(S,E,_),M=d(S,E,A);return S.set(m,a(A,M,T)),T};var y=this.object.object._compile(l,c);if(this.object.index.isObjectProperty()){var p=this.object.index.getObjectProperty();return function(S,E,_){var A=y(S,E,_),T=xa(A,p),M=d(S,E,T),C=h(S,E,_);return up(A,p,a(T,M,C)),C}}else{var x=this.object.index._compile(l,c);return function(S,E,_){var A=y(S,E,_),T=x(S,E,A),M=i(A,T),C=d(S,E,M),N=h(S,E,_);return a(A,T,a(M,C,N)),N}}}else{if(!bi(this.object))throw new TypeError("SymbolNode expected as object");return function(S,E,_){var A=h(S,E,_);return S.set(m,A),A}}}forEach(l){l(this.object,"object",this),this.index&&l(this.index,"index",this),l(this.value,"value",this)}map(l){var c=this._ifNode(l(this.object,"object",this)),f=this.index?this._ifNode(l(this.index,"index",this)):null,d=this._ifNode(l(this.value,"value",this));return new o(c,f,d)}clone(){return new o(this.object,this.index,this.value)}_toString(l){var c=this.object.toString(l),f=this.index?this.index.toString(l):"",d=this.value.toString(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="("+d+")"),c+f+" = "+d}toJSON(){return{mathjs:L1,object:this.object,index:this.index,value:this.value}}static fromJSON(l){return new o(l.object,l.index,l.value)}_toHTML(l){var c=this.object.toHTML(l),f=this.index?this.index.toHTML(l):"",d=this.value.toHTML(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+f+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(l){var c=this.object.toTex(l),f=this.index?this.index.toTex(l):"",d=this.value.toTex(l);return s(this,l&&l.parenthesis,l&&l.implicit)&&(d="\\left(".concat(d,"\\right)")),c+f+"="+d}}return si(o,"name",L1),o},{isClass:!0,isNode:!0}),B1="BlockNode",Gge=["ResultSet","Node"],Vge=ie(B1,Gge,t=>{var{ResultSet:e,Node:n}=t;class r extends n{constructor(a){if(super(),!Array.isArray(a))throw new Error("Array expected");this.blocks=a.map(function(s){var o=s&&s.node,u=s&&s.visible!==void 0?s.visible:!0;if(!qn(o))throw new TypeError('Property "node" must be a Node');if(typeof u!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:u}})}get type(){return B1}get isBlockNode(){return!0}_compile(a,s){var o=ju(this.blocks,function(u){return{evaluate:u.node._compile(a,s),visible:u.visible}});return function(l,c,f){var d=[];return Yw(o,function(m){var v=m.evaluate(l,c,f);m.visible&&d.push(v)}),new e(d)}}forEach(a){for(var s=0;s<this.blocks.length;s++)a(this.blocks[s].node,"blocks["+s+"].node",this)}map(a){for(var s=[],o=0;o<this.blocks.length;o++){var u=this.blocks[o],l=this._ifNode(a(u.node,"blocks["+o+"].node",this));s[o]={node:l,visible:u.visible}}return new r(s)}clone(){var a=this.blocks.map(function(s){return{node:s.node,visible:s.visible}});return new r(a)}_toString(a){return this.blocks.map(function(s){return s.node.toString(a)+(s.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:B1,blocks:this.blocks}}static fromJSON(a){return new r(a.blocks)}_toHTML(a){return this.blocks.map(function(s){return s.node.toHTML(a)+(s.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(a){return this.blocks.map(function(s){return s.node.toTex(a)+(s.visible?"":";")}).join(`\\;\\;
`)}}return si(r,"name",B1),r},{isClass:!0,isNode:!0}),U1="ConditionalNode",Wge=["Node"],qge=ie(U1,Wge,t=>{var{Node:e}=t;function n(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(Qt(i))return!i.isZero();if(qu(i))return!!(i.re||i.im);if(Us(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+Jn(i)+'"')}class r extends e{constructor(a,s,o){if(super(),!qn(a))throw new TypeError("Parameter condition must be a Node");if(!qn(s))throw new TypeError("Parameter trueExpr must be a Node");if(!qn(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=a,this.trueExpr=s,this.falseExpr=o}get type(){return U1}get isConditionalNode(){return!0}_compile(a,s){var o=this.condition._compile(a,s),u=this.trueExpr._compile(a,s),l=this.falseExpr._compile(a,s);return function(f,d,h){return n(o(f,d,h))?u(f,d,h):l(f,d,h)}}forEach(a){a(this.condition,"condition",this),a(this.trueExpr,"trueExpr",this),a(this.falseExpr,"falseExpr",this)}map(a){return new r(this._ifNode(a(this.condition,"condition",this)),this._ifNode(a(this.trueExpr,"trueExpr",this)),this._ifNode(a(this.falseExpr,"falseExpr",this)))}clone(){return new r(this.condition,this.trueExpr,this.falseExpr)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=Zn(this,s,a&&a.implicit),u=this.condition.toString(a),l=Zn(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u="("+u+")");var c=this.trueExpr.toString(a),f=Zn(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c="("+c+")");var d=this.falseExpr.toString(a),h=Zn(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d="("+d+")"),u+" ? "+c+" : "+d}toJSON(){return{mathjs:U1,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(a){return new r(a.condition,a.trueExpr,a.falseExpr)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=Zn(this,s,a&&a.implicit),u=this.condition.toHTML(a),l=Zn(this.condition,s,a&&a.implicit);(s==="all"||this.condition.type==="OperatorNode"||l!==null&&l<=o)&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(a),f=Zn(this.trueExpr,s,a&&a.implicit);(s==="all"||this.trueExpr.type==="OperatorNode"||f!==null&&f<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(a),h=Zn(this.falseExpr,s,a&&a.implicit);return(s==="all"||this.falseExpr.type==="OperatorNode"||h!==null&&h<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(a){return"\\begin{cases} {"+this.trueExpr.toTex(a)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(a)+"}\\\\{"+this.falseExpr.toTex(a)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return si(r,"name",U1),r},{isClass:!0,isNode:!0}),k2=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jge={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},Xge={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},Yge=function(e,n){return k2({},e,n)},Zge=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.preserveFormatting,r=n===void 0?!1:n,i=e.escapeMapFn,a=i===void 0?Yge:i,s=String(t),o="",u=a(k2({},jge),r?k2({},Xge):{}),l=Object.keys(u),c=function(){var d=!1;l.forEach(function(h,m){d||s.length>=h.length&&s.slice(0,h.length)===h&&(o+=u[l[m]],s=s.slice(h.length,s.length),d=!0)}),d||(o+=s.slice(0,1),s=s.slice(1,s.length))};s;)c();return o};const Kge=Qs(Zge);var $2={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Cn={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},mB={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Cn.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Cn.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Cn.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Cn.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Cn.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Cn.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Cn.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Cn.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Cn.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Cn.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Cn.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Cn.bitAnd,"${args[1]}\\right)")},bitNot:{1:Cn.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Cn.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Cn.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Cn.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Cn.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Cn.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Cn.and,"${args[1]}\\right)")},not:{1:Cn.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Cn.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Cn.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Cn.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Cn.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Cn.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Cn.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Cn.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Cn.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Cn.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Cn.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Cn.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Cn.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Cn.to,"${args[1]}\\right)")},numeric:function(e,n){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat($2.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},Qge="\\mathrm{${name}}\\left(${args}\\right)",vB={deg:"^\\circ"};function H2(t){return Kge(t,{preserveFormatting:!0})}function GH(t,e){return e=typeof e>"u"?!1:e,e?St(vB,t)?vB[t]:"\\mathrm{"+H2(t)+"}":St($2,t)?$2[t]:H2(t)}var z1="ConstantNode",Jge=["Node"],e0e=ie(z1,Jge,t=>{var{Node:e}=t;class n extends e{constructor(i){super(),this.value=i}get type(){return z1}get isConstantNode(){return!0}_compile(i,a){var s=this.value;return function(){return s}}forEach(i){}map(i){return this.clone()}clone(){return new n(this.value)}_toString(i){return on(this.value,i)}_toHTML(i){var a=this._toString(i);switch(Jn(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:z1,value:this.value}}static fromJSON(i){return new n(i.value)}_toTex(i){var a=this._toString(i);switch(Jn(this.value)){case"string":return"\\mathtt{"+H2(a)+"}";case"number":case"BigNumber":{if(!isFinite(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var s=a.toLowerCase().indexOf("e");if(s!==-1)return a.substring(0,s)+"\\cdot10^{"+a.substring(s+1)+"}"}return a;case"Fraction":return this.value.toLatex();default:return a}}}return si(n,"name",z1),n},{isClass:!0,isNode:!0}),k1="FunctionAssignmentNode",t0e=["typed","Node"],n0e=ie(k1,t0e,t=>{var{typed:e,Node:n}=t;function r(a,s,o){var u=Zn(a,s,o),l=Zn(a.expr,s,o);return s==="all"||l!==null&&l<=u}class i extends n{constructor(s,o,u){if(super(),typeof s!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!qn(u))throw new TypeError('Node expected for parameter "expr"');if($H.has(s))throw new Error('Illegal function name, "'+s+'" is a reserved keyword');var l=new Set;for(var c of o){var f=typeof c=="string"?c:c.name;if(l.has(f))throw new Error('Duplicate parameter name "'.concat(f,'"'));l.add(f)}this.name=s,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=u}get type(){return k1}get isFunctionAssignmentNode(){return!0}_compile(s,o){var u=Object.create(o);Yw(this.params,function(m){u[m]=!0});var l=this.expr._compile(s,u),c=this.name,f=this.params,d=fF(this.types,","),h=c+"("+fF(this.params,", ")+")";return function(v,y,p){var x={};x[d]=function(){for(var S=Object.create(y),E=0;E<f.length;E++)S[f[E]]=arguments[E];return l(v,S,p)};var g=e(c,x);return g.syntax=h,v.set(c,g),g}}forEach(s){s(this.expr,"expr",this)}map(s){var o=this._ifNode(s(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toString(s);return r(this,o,s&&s.implicit)&&(u="("+u+")"),this.name+"("+this.params.join(", ")+") = "+u}toJSON(){var s=this.types;return{mathjs:k1,name:this.name,params:this.params.map(function(o,u){return{name:o,type:s[u]}}),expr:this.expr}}static fromJSON(s){return new i(s.name,s.params,s.expr)}_toHTML(s){for(var o=s&&s.parenthesis?s.parenthesis:"keep",u=[],l=0;l<this.params.length;l++)u.push('<span class="math-symbol math-parameter">'+$s(this.params[l])+"</span>");var c=this.expr.toHTML(s);return r(this,o,s&&s.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+$s(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=this.expr.toTex(s);return r(this,o,s&&s.implicit)&&(u="\\left(".concat(u,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(GH).join(",")+"\\right)="+u}}return si(i,"name",k1),i},{isClass:!0,isNode:!0}),$1="IndexNode",r0e=["Node","size"],i0e=ie($1,r0e,t=>{var{Node:e,size:n}=t;class r extends e{constructor(a,s){if(super(),this.dimensions=a,this.dotNotation=s||!1,!Array.isArray(a)||!a.every(qn))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return $1}get isIndexNode(){return!0}_compile(a,s){var o=ju(this.dimensions,function(l,c){var f=l.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(f){var d=Object.create(s);d.end=!0;var h=l._compile(a,d);return function(v,y,p){if(!Ft(p)&&!Bn(p)&&!Xi(p))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Jn(p));var x=n(p).valueOf(),g=Object.create(y);return g.end=x[c],h(v,g,p)}}else return l._compile(a,s)}),u=xa(a,"index");return function(c,f,d){var h=ju(o,function(m){return m(c,f,d)});return u(...h)}}forEach(a){for(var s=0;s<this.dimensions.length;s++)a(this.dimensions[s],"dimensions["+s+"]",this)}map(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this._ifNode(a(this.dimensions[o],"dimensions["+o+"]",this));return new r(s,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Tn(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(a){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:$1,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(a){return new r(a.dimensions,a.dotNotation)}_toHTML(a){for(var s=[],o=0;o<this.dimensions.length;o++)s[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+$s(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(a){var s=this.dimensions.map(function(o){return o.toTex(a)});return this.dotNotation?"."+this.getObjectProperty():"_{"+s.join(",")+"}"}}return si(r,"name",$1),r},{isClass:!0,isNode:!0}),H1="ObjectNode",a0e=["Node"],s0e=ie(H1,a0e,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(a){return qn(i[a])})))throw new TypeError("Object containing Nodes expected")}get type(){return H1}get isObjectNode(){return!0}_compile(i,a){var s={};for(var o in this.properties)if(St(this.properties,o)){var u=Th(o),l=JSON.parse(u),c=xa(this.properties,o);s[l]=c._compile(i,a)}return function(d,h,m){var v={};for(var y in s)St(s,y)&&(v[y]=s[y](d,h,m));return v}}forEach(i){for(var a in this.properties)St(this.properties,a)&&i(this.properties[a],"properties["+Th(a)+"]",this)}map(i){var a={};for(var s in this.properties)St(this.properties,s)&&(a[s]=this._ifNode(i(this.properties[s],"properties["+Th(s)+"]",this)));return new n(a)}clone(){var i={};for(var a in this.properties)St(this.properties,a)&&(i[a]=this.properties[a]);return new n(i)}_toString(i){var a=[];for(var s in this.properties)St(this.properties,s)&&a.push(Th(s)+": "+this.properties[s].toString(i));return"{"+a.join(", ")+"}"}toJSON(){return{mathjs:H1,properties:this.properties}}static fromJSON(i){return new n(i.properties)}_toHTML(i){var a=[];for(var s in this.properties)St(this.properties,s)&&a.push('<span class="math-symbol math-property">'+$s(s)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[s].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var a=[];for(var s in this.properties)St(this.properties,s)&&a.push("\\mathbf{"+s+":} & "+this.properties[s].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+a.join(`
`)+"\\end{array}\\right\\}";return o}}return si(n,"name",H1),n},{isClass:!0,isNode:!0}),G1="OperatorNode",o0e=["Node"],u0e=ie(G1,o0e,t=>{var{Node:e}=t;function n(a,s){var o=a;if(s==="auto")for(;el(o);)o=o.content;return Tn(o)?!0:Qr(o)?n(o.args[0],s):!1}function r(a,s,o,u,l){var c=Zn(a,s,o),f=Vm(a,s);if(s==="all"||u.length>2&&a.getIdentifier()!=="OperatorNode:add"&&a.getIdentifier()!=="OperatorNode:multiply")return u.map(function(C){switch(C.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(u.length){case 0:d=[];break;case 1:{var h=Zn(u[0],s,o,a);if(l&&h!==null){var m,v;if(s==="keep"?(m=u[0].getIdentifier(),v=a.getIdentifier()):(m=u[0].getContent().getIdentifier(),v=a.getContent().getIdentifier()),vo[c][v].latexLeftParens===!1){d=[!1];break}if(vo[h][m].latexParens===!1){d=[!1];break}}if(h===null){d=[!1];break}if(h<=c){d=[!0];break}d=[!1]}break;case 2:{var y,p=Zn(u[0],s,o,a),x=mM(a,u[0],s);p===null?y=!1:p===c&&f==="right"&&!x||p<c?y=!0:y=!1;var g,S=Zn(u[1],s,o,a),E=mM(a,u[1],s);if(S===null?g=!1:S===c&&f==="left"&&!E||S<c?g=!0:g=!1,l){var _,A,T;s==="keep"?(_=a.getIdentifier(),A=a.args[0].getIdentifier(),T=a.args[1].getIdentifier()):(_=a.getContent().getIdentifier(),A=a.args[0].getContent().getIdentifier(),T=a.args[1].getContent().getIdentifier()),p!==null&&(vo[c][_].latexLeftParens===!1&&(y=!1),vo[p][A].latexParens===!1&&(y=!1)),S!==null&&(vo[c][_].latexRightParens===!1&&(g=!1),vo[S][T].latexParens===!1&&(g=!1))}d=[y,g]}break;default:(a.getIdentifier()==="OperatorNode:add"||a.getIdentifier()==="OperatorNode:multiply")&&(d=u.map(function(C){var N=Zn(C,s,o,a),P=mM(a,C,s),H=Vm(C,s);return N===null?!1:c===N&&f===H&&!P?!0:N<c}));break}if(u.length>=2&&a.getIdentifier()==="OperatorNode:multiply"&&a.implicit&&s!=="all"&&o==="hide")for(var M=1;M<d.length;++M)n(u[M],s)&&!d[M-1]&&(s!=="keep"||!el(u[M-1]))&&(d[M]=!0);return d}class i extends e{constructor(s,o,u,l,c){if(super(),typeof s!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(u)||!u.every(qn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=l===!0,this.isPercentage=c===!0,this.op=s,this.fn=o,this.args=u||[]}get type(){return G1}get isOperatorNode(){return!0}_compile(s,o){if(typeof this.fn!="string"||!RD(s,this.fn))throw s[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var u=xa(s,this.fn),l=ju(this.args,function(m){return m._compile(s,o)});if(typeof u=="function"&&u.rawArgs===!0){var c=this.args;return function(v,y,p){return u(c,s,v)}}else if(l.length===1){var f=l[0];return function(v,y,p){return u(f(v,y,p))}}else if(l.length===2){var d=l[0],h=l[1];return function(v,y,p){return u(d(v,y,p),h(v,y,p))}}else return function(v,y,p){return u.apply(null,ju(l,function(x){return x(v,y,p)}))}}forEach(s){for(var o=0;o<this.args.length;o++)s(this.args[o],"args["+o+"]",this)}map(s){for(var o=[],u=0;u<this.args.length;u++)o[u]=this._ifNode(s(this.args[u],"args["+u+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=Vm(this,o),d=l[0].toString(s);c[0]&&(d="("+d+")");var h=/[a-zA-Z]+/.test(this.op);return f==="right"?this.op+(h?" ":"")+d:f==="left"?d+(h?" ":"")+this.op:d+this.op}else if(l.length===2){var m=l[0].toString(s),v=l[1].toString(s);return c[0]&&(m="("+m+")"),c[1]&&(v="("+v+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?m+" "+v:m+" "+this.op+" "+v}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=l.map(function(p,x){return p=p.toString(s),c[x]&&(p="("+p+")"),p});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?y.join(" "):y.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:G1,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(s){return new i(s.op,s.fn,s.args,s.implicit,s.isPercentage)}_toHTML(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!1);if(l.length===1){var f=Vm(this,o),d=l[0].toHTML(s);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),f==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+$s(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+$s(this.op)+"</span>"}else if(l.length===2){var h=l[0].toHTML(s),m=l[1].toHTML(s);return c[0]&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?h+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:h+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$s(this.op)+"</span>"+m}else{var v=l.map(function(y,p){return y=y.toHTML(s),c[p]&&(y='<span class="math-parenthesis math-round-parenthesis">(</span>'+y+'<span class="math-parenthesis math-round-parenthesis">)</span>'),y});return l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&u==="hide"?v.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):v.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$s(this.op)+"</span>"):'<span class="math-function">'+$s(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+v.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(s){var o=s&&s.parenthesis?s.parenthesis:"keep",u=s&&s.implicit?s.implicit:"hide",l=this.args,c=r(this,o,u,l,!0),f=Cn[this.fn];if(f=typeof f>"u"?this.op:f,l.length===1){var d=Vm(this,o),h=l[0].toTex(s);return c[0]&&(h="\\left(".concat(h,"\\right)")),d==="right"?f+h:h+f}else if(l.length===2){var m=l[0],v=m.toTex(s);c[0]&&(v="\\left(".concat(v,"\\right)"));var y=l[1],p=y.toTex(s);c[1]&&(p="\\left(".concat(p,"\\right)"));var x;switch(o==="keep"?x=m.getIdentifier():x=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return f+"{"+v+"}{"+p+"}";case"OperatorNode:pow":switch(v="{"+v+"}",p="{"+p+"}",x){case"ConditionalNode":case"OperatorNode:divide":v="\\left(".concat(v,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&u==="hide")return v+"~"+p}return v+f+p}else if(l.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=l.map(function(S,E){return S=S.toTex(s),c[E]&&(S="\\left(".concat(S,"\\right)")),S});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&u==="hide"?g.join("~"):g.join(f)}else return"\\mathrm{"+this.fn+"}\\left("+l.map(function(S){return S.toTex(s)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return si(i,"name",G1),i},{isClass:!0,isNode:!0}),V1="ParenthesisNode",l0e=["Node"],c0e=ie(V1,l0e,t=>{var{Node:e}=t;class n extends e{constructor(i){if(super(),!qn(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return V1}get isParenthesisNode(){return!0}_compile(i,a){return this.content._compile(i,a)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var a=i(this.content,"content",this);return new n(a)}clone(){return new n(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:V1,content:this.content}}static fromJSON(i){return new n(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return si(n,"name",V1),n},{isClass:!0,isNode:!0}),W1="RangeNode",f0e=["Node"],d0e=ie(W1,f0e,t=>{var{Node:e}=t;function n(i,a,s){var o=Zn(i,a,s),u={},l=Zn(i.start,a,s);if(u.start=l!==null&&l<=o||a==="all",i.step){var c=Zn(i.step,a,s);u.step=c!==null&&c<=o||a==="all"}var f=Zn(i.end,a,s);return u.end=f!==null&&f<=o||a==="all",u}class r extends e{constructor(a,s,o){if(super(),!qn(a))throw new TypeError("Node expected");if(!qn(s))throw new TypeError("Node expected");if(o&&!qn(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=a,this.end=s,this.step=o||null}get type(){return W1}get isRangeNode(){return!0}needsEnd(){var a=this.filter(function(s){return bi(s)&&s.name==="end"});return a.length>0}_compile(a,s){var o=a.range,u=this.start._compile(a,s),l=this.end._compile(a,s);if(this.step){var c=this.step._compile(a,s);return function(d,h,m){return o(u(d,h,m),l(d,h,m),c(d,h,m))}}else return function(d,h,m){return o(u(d,h,m),l(d,h,m))}}forEach(a){a(this.start,"start",this),a(this.end,"end",this),this.step&&a(this.step,"step",this)}map(a){return new r(this._ifNode(a(this.start,"start",this)),this._ifNode(a(this.end,"end",this)),this.step&&this._ifNode(a(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=n(this,s,a&&a.implicit),u,l=this.start.toString(a);if(o.start&&(l="("+l+")"),u=l,this.step){var c=this.step.toString(a);o.step&&(c="("+c+")"),u+=":"+c}var f=this.end.toString(a);return o.end&&(f="("+f+")"),u+=":"+f,u}toJSON(){return{mathjs:W1,start:this.start,end:this.end,step:this.step}}static fromJSON(a){return new r(a.start,a.end,a.step)}_toHTML(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=n(this,s,a&&a.implicit),u,l=this.start.toHTML(a);if(o.start&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u=l,this.step){var c=this.step.toHTML(a);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+c}var f=this.end.toHTML(a);return o.end&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),u+='<span class="math-operator math-range-operator">:</span>'+f,u}_toTex(a){var s=a&&a.parenthesis?a.parenthesis:"keep",o=n(this,s,a&&a.implicit),u=this.start.toTex(a);if(o.start&&(u="\\left(".concat(u,"\\right)")),this.step){var l=this.step.toTex(a);o.step&&(l="\\left(".concat(l,"\\right)")),u+=":"+l}var c=this.end.toTex(a);return o.end&&(c="\\left(".concat(c,"\\right)")),u+=":"+c,u}}return si(r,"name",W1),r},{isClass:!0,isNode:!0}),q1="RelationalNode",h0e=["Node"],p0e=ie(q1,h0e,t=>{var{Node:e}=t,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends e{constructor(a,s){if(super(),!Array.isArray(a))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(s))throw new TypeError("Parameter params must be an array");if(a.length!==s.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=a,this.params=s}get type(){return q1}get isRelationalNode(){return!0}_compile(a,s){var o=this,u=this.params.map(l=>l._compile(a,s));return function(c,f,d){for(var h,m=u[0](c,f,d),v=0;v<o.conditionals.length;v++){h=m,m=u[v+1](c,f,d);var y=xa(a,o.conditionals[v]);if(!y(h,m))return!1}return!0}}forEach(a){this.params.forEach((s,o)=>a(s,"params["+o+"]",this),this)}map(a){return new r(this.conditionals.slice(),this.params.map((s,o)=>this._ifNode(a(s,"params["+o+"]",this)),this))}clone(){return new r(this.conditionals,this.params)}_toString(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Zn(this,s,a&&a.implicit),u=this.params.map(function(f,d){var h=Zn(f,s,a&&a.implicit);return s==="all"||h!==null&&h<=o?"("+f.toString(a)+")":f.toString(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=" "+n[this.conditionals[c]],l+=" "+u[c+1];return l}toJSON(){return{mathjs:q1,conditionals:this.conditionals,params:this.params}}static fromJSON(a){return new r(a.conditionals,a.params)}_toHTML(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Zn(this,s,a&&a.implicit),u=this.params.map(function(f,d){var h=Zn(f,s,a&&a.implicit);return s==="all"||h!==null&&h<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+f.toHTML(a)+'<span class="math-parenthesis math-round-parenthesis">)</span>':f.toHTML(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+$s(n[this.conditionals[c]])+"</span>"+u[c+1];return l}_toTex(a){for(var s=a&&a.parenthesis?a.parenthesis:"keep",o=Zn(this,s,a&&a.implicit),u=this.params.map(function(f,d){var h=Zn(f,s,a&&a.implicit);return s==="all"||h!==null&&h<=o?"\\left("+f.toTex(a)+"\right)":f.toTex(a)}),l=u[0],c=0;c<this.conditionals.length;c++)l+=Cn[this.conditionals[c]]+u[c+1];return l}}return si(r,"name",q1),r},{isClass:!0,isNode:!0}),m0e="SymbolNode",v0e=["math","?Unit","Node"],g0e=ie(m0e,v0e,t=>{var{math:e,Unit:n,Node:r}=t;function i(s){return n?n.isValuelessUnit(s):!1}class a extends r{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,u){var l=this.name;if(u[l]===!0)return function(f,d,h){return xa(d,l)};if(l in o)return function(f,d,h){return f.has(l)?f.get(l):xa(o,l)};var c=i(l);return function(f,d,h){return f.has(l)?f.get(l):c?new n(null,l):a.onUndefinedSymbol(l)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new a(this.name)}_toString(o){return this.name}_toHTML(o){var u=$s(this.name);return u==="true"||u==="false"?'<span class="math-symbol math-boolean">'+u+"</span>":u==="i"?'<span class="math-symbol math-imaginary-symbol">'+u+"</span>":u==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+u+"</span>":u==="NaN"?'<span class="math-symbol math-nan-symbol">'+u+"</span>":u==="null"?'<span class="math-symbol math-null-symbol">'+u+"</span>":u==="undefined"?'<span class="math-symbol math-undefined-symbol">'+u+"</span>":'<span class="math-symbol">'+u+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new a(o.name)}_toTex(o){var u=!1;typeof e[this.name]>"u"&&i(this.name)&&(u=!0);var l=GH(this.name,u);return l[0]==="\\"?l:" "+l}}return a},{isClass:!0,isNode:!0});function rv(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return typeof t.createSubScope=="function"?hF(t.createSubScope(),...n):hF(lp(),t,...n)}var j1="FunctionNode",y0e=["math","Node","SymbolNode"],x0e=ie(j1,y0e,t=>{var e,{math:n,Node:r,SymbolNode:i}=t,a=u=>on(u,{truncate:78});function s(u,l,c){for(var f="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,h=0,m;(m=d.exec(u))!==null;)if(f+=u.substring(h,m.index),h=m.index,m[0]==="$$")f+="$",h++;else{h+=m[0].length;var v=l[m[1]];if(!v)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof v){case"string":f+=v;break;case"object":if(qn(v))f+=v.toTex(c);else if(Array.isArray(v))f+=v.map(function(y,p){if(qn(y))return y.toTex(c);throw new TypeError("Template: "+m[1]+"["+p+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(qn(v[m[2]]&&v[m[2]]))f+=v[m[2]].toTex(c);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return f+=u.slice(h),f}class o extends r{constructor(l,c){if(super(),typeof l=="string"&&(l=new i(l)),!qn(l))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(qn))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=l,this.args=c||[]}get name(){return this.fn.name||""}get type(){return j1}get isFunctionNode(){return!0}_compile(l,c){var f=this.args.map(T=>T._compile(l,c));if(bi(this.fn)){var d=this.fn.name;if(c[d]){var p=this.args;return function(M,C,N){var P=xa(C,d);if(typeof P!="function")throw new TypeError("Argument '".concat(d,"' was not a function; received: ").concat(a(P)));if(P.rawArgs)return P(p,l,rv(M,C));var H=f.map(L=>L(M,C,N));return P.apply(P,H)}}else{var h=d in l?xa(l,d):void 0,m=typeof h=="function"&&h.rawArgs===!0,v=T=>{var M;if(T.has(d))M=T.get(d);else if(d in l)M=xa(l,d);else return o.onUndefinedFunction(d);if(typeof M=="function")return M;throw new TypeError("'".concat(d,`' is not a function; its value is:
  `).concat(a(M)))};if(m){var y=this.args;return function(M,C,N){var P=v(M);return P(y,l,rv(M,C))}}else switch(f.length){case 0:return function(M,C,N){var P=v(M);return P()};case 1:return function(M,C,N){var P=v(M),H=f[0];return P(H(M,C,N))};case 2:return function(M,C,N){var P=v(M),H=f[0],L=f[1];return P(H(M,C,N),L(M,C,N))};default:return function(M,C,N){var P=v(M),H=f.map(L=>L(M,C,N));return P(...H)}}}}else if(Hf(this.fn)&&Np(this.fn.index)&&this.fn.index.isObjectProperty()){var x=this.fn.object._compile(l,c),g=this.fn.index.getObjectProperty(),S=this.args;return function(M,C,N){var P=x(M,C,N),H=Woe(P,g);if(H!=null&&H.rawArgs)return H(S,l,rv(M,C));var L=f.map(z=>z(M,C,N));return H.apply(P,L)}}else{var E=this.fn.toString(),_=this.fn._compile(l,c),A=this.args;return function(M,C,N){var P=_(M,C,N);if(typeof P!="function")throw new TypeError("Expression '".concat(E,"' did not evaluate to a function; value is:")+`
  `.concat(a(P)));if(P.rawArgs)return P(A,l,rv(M,C));var H=f.map(L=>L(M,C,N));return P.apply(P,H)}}}forEach(l){l(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)l(this.args[c],"args["+c+"]",this)}map(l){for(var c=this._ifNode(l(this.fn,"fn",this)),f=[],d=0;d<this.args.length;d++)f[d]=this._ifNode(l(this.args[d],"args["+d+"]",this));return new o(c,f)}clone(){return new o(this.fn,this.args.slice(0))}toString(l){var c,f=this.fn.toString(l);return l&&typeof l.handler=="object"&&St(l.handler,f)&&(c=l.handler[f](this,l)),typeof c<"u"?c:super.toString(l)}_toString(l){var c=this.args.map(function(d){return d.toString(l)}),f=o0(this.fn)?"("+this.fn.toString(l)+")":this.fn.toString(l);return f+"("+c.join(", ")+")"}toJSON(){return{mathjs:j1,fn:this.fn,args:this.args}}_toHTML(l){var c=this.args.map(function(f){return f.toHTML(l)});return'<span class="math-function">'+$s(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(l){var c;return l&&typeof l.handler=="object"&&St(l.handler,this.name)&&(c=l.handler[this.name](this,l)),typeof c<"u"?c:super.toTex(l)}_toTex(l){var c=this.args.map(function(h){return h.toTex(l)}),f;mB[this.name]&&(f=mB[this.name]),n[this.name]&&(typeof n[this.name].toTex=="function"||typeof n[this.name].toTex=="object"||typeof n[this.name].toTex=="string")&&(f=n[this.name].toTex);var d;switch(typeof f){case"function":d=f(this,l);break;case"string":d=s(f,this,l);break;case"object":switch(typeof f[c.length]){case"function":d=f[c.length](this,l);break;case"string":d=s(f[c.length],this,l);break}}return typeof d<"u"?d:s(Qge,this,l)}getIdentifier(){return this.type+":"+this.name}}return e=o,si(o,"name",j1),si(o,"onUndefinedFunction",function(u){throw new Error("Undefined function "+u)}),si(o,"fromJSON",function(u){return new e(u.fn,u.args)}),o},{isClass:!0,isNode:!0}),gB="parse",b0e=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],w0e=ie(gB,b0e,t=>{var{typed:e,numeric:n,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:s,BlockNode:o,ConditionalNode:u,ConstantNode:l,FunctionAssignmentNode:c,FunctionNode:f,IndexNode:d,ObjectNode:h,OperatorNode:m,ParenthesisNode:v,RangeNode:y,RelationalNode:p,SymbolNode:x}=t,g=e(gB,{string:function(se){return ee(se,{})},"Array | Matrix":function(se){return S(se,{})},"string, Object":function(se,Te){var me=Te.nodes!==void 0?Te.nodes:{};return ee(se,me)},"Array | Matrix, Object":S});function S(B){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Te=se.nodes!==void 0?se.nodes:{};return ln(B,function(me){if(typeof me!="string")throw new TypeError("String expected");return ee(me,Te)})}var E={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},A={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},T={true:!0,false:!1,null:null,undefined:void 0},M=["NaN","Infinity"],C={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function N(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:E.NULL,nestingLevel:0,conditionalLevel:null}}function P(B,se){return B.expression.substr(B.index,se)}function H(B){return P(B,1)}function L(B){B.index++}function z(B){return B.expression.charAt(B.index-1)}function O(B){return B.expression.charAt(B.index+1)}function F(B){for(B.tokenType=E.NULL,B.token="",B.comment="";;){if(H(B)==="#")for(;H(B)!==`
`&&H(B)!=="";)B.comment+=H(B),L(B);if(g.isWhitespace(H(B),B.nestingLevel))L(B);else break}if(H(B)===""){B.tokenType=E.DELIMITER;return}if(H(B)===`
`&&!B.nestingLevel){B.tokenType=E.DELIMITER,B.token=H(B),L(B);return}var se=H(B),Te=P(B,2),me=P(B,3);if(me.length===3&&_[me]){B.tokenType=E.DELIMITER,B.token=me,L(B),L(B),L(B);return}if(Te.length===2&&_[Te]){B.tokenType=E.DELIMITER,B.token=Te,L(B),L(B);return}if(_[se]){B.tokenType=E.DELIMITER,B.token=se,L(B);return}if(g.isDigitDot(se)){B.tokenType=E.NUMBER;var ve=P(B,2);if(ve==="0b"||ve==="0o"||ve==="0x"){for(B.token+=H(B),L(B),B.token+=H(B),L(B);g.isHexDigit(H(B));)B.token+=H(B),L(B);if(H(B)===".")for(B.token+=".",L(B);g.isHexDigit(H(B));)B.token+=H(B),L(B);else if(H(B)==="i")for(B.token+="i",L(B);g.isDigit(H(B));)B.token+=H(B),L(B);return}if(H(B)==="."){if(B.token+=H(B),L(B),!g.isDigit(H(B))){B.tokenType=E.DELIMITER;return}}else{for(;g.isDigit(H(B));)B.token+=H(B),L(B);g.isDecimalMark(H(B),O(B))&&(B.token+=H(B),L(B))}for(;g.isDigit(H(B));)B.token+=H(B),L(B);if(H(B)==="E"||H(B)==="e"){if(g.isDigit(O(B))||O(B)==="-"||O(B)==="+"){if(B.token+=H(B),L(B),(H(B)==="+"||H(B)==="-")&&(B.token+=H(B),L(B)),!g.isDigit(H(B)))throw Ze(B,'Digit expected, got "'+H(B)+'"');for(;g.isDigit(H(B));)B.token+=H(B),L(B);if(g.isDecimalMark(H(B),O(B)))throw Ze(B,'Digit expected, got "'+H(B)+'"')}else if(O(B)===".")throw L(B),Ze(B,'Digit expected, got "'+H(B)+'"')}return}if(g.isAlpha(H(B),z(B),O(B))){for(;g.isAlpha(H(B),z(B),O(B))||g.isDigit(H(B));)B.token+=H(B),L(B);St(A,B.token)?B.tokenType=E.DELIMITER:B.tokenType=E.SYMBOL;return}for(B.tokenType=E.UNKNOWN;H(B)!=="";)B.token+=H(B),L(B);throw Ze(B,'Syntax error in part "'+B.token+'"')}function U(B){do F(B);while(B.token===`
`)}function I(B){B.nestingLevel++}function j(B){B.nestingLevel--}g.isAlpha=function(se,Te,me){return g.isValidLatinOrGreek(se)||g.isValidMathSymbol(se,me)||g.isValidMathSymbol(Te,se)},g.isValidLatinOrGreek=function(se){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(se)},g.isValidMathSymbol=function(se,Te){return/^[\uD835]$/.test(se)&&/^[\uDC00-\uDFFF]$/.test(Te)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(Te)},g.isWhitespace=function(se,Te){return se===" "||se==="	"||se===`
`&&Te>0},g.isDecimalMark=function(se,Te){return se==="."&&Te!=="/"&&Te!=="*"&&Te!=="^"},g.isDigitDot=function(se){return se>="0"&&se<="9"||se==="."},g.isDigit=function(se){return se>="0"&&se<="9"},g.isHexDigit=function(se){return se>="0"&&se<="9"||se>="a"&&se<="f"||se>="A"&&se<="F"};function ee(B,se){var Te=N();hn(Te,{expression:B,extraNodes:se}),F(Te);var me=J(Te);if(Te.token!=="")throw Te.tokenType===E.DELIMITER?we(Te,"Unexpected operator "+Te.token):Ze(Te,'Unexpected part "'+Te.token+'"');return me}function J(B){var se,Te=[],me;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(se=q(B),B.comment&&(se.comment=B.comment));B.token===`
`||B.token===";";)Te.length===0&&se&&(me=B.token!==";",Te.push({node:se,visible:me})),F(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(se=q(B),B.comment&&(se.comment=B.comment),me=B.token!==";",Te.push({node:se,visible:me}));return Te.length>0?new o(Te):(se||(se=new l(void 0),B.comment&&(se.comment=B.comment)),se)}function q(B){var se,Te,me,ve,Ke=ae(B);if(B.token==="="){if(bi(Ke))return se=Ke.name,U(B),me=q(B),new s(new x(se),me);if(Hf(Ke))return U(B),me=q(B),new s(Ke.object,Ke.index,me);if(hc(Ke)&&bi(Ke.fn)&&(ve=!0,Te=[],se=Ke.name,Ke.args.forEach(function(lt,Dt){bi(lt)?Te[Dt]=lt.name:ve=!1}),ve))return U(B),me=q(B),new c(se,Te,me);throw Ze(B,"Invalid left hand side of assignment operator =")}return Ke}function ae(B){for(var se=be(B);B.token==="?";){var Te=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,U(B);var me=se,ve=q(B);if(B.token!==":")throw Ze(B,"False part of conditional expression expected");B.conditionalLevel=null,U(B);var Ke=q(B);se=new u(me,ve,Ke),B.conditionalLevel=Te}return se}function be(B){for(var se=ue(B);B.token==="or";)U(B),se=new m("or","or",[se,ue(B)]);return se}function ue(B){for(var se=pe(B);B.token==="xor";)U(B),se=new m("xor","xor",[se,pe(B)]);return se}function pe(B){for(var se=Pe(B);B.token==="and";)U(B),se=new m("and","and",[se,Pe(B)]);return se}function Pe(B){for(var se=Ce(B);B.token==="|";)U(B),se=new m("|","bitOr",[se,Ce(B)]);return se}function Ce(B){for(var se=Ee(B);B.token==="^|";)U(B),se=new m("^|","bitXor",[se,Ee(B)]);return se}function Ee(B){for(var se=Oe(B);B.token==="&";)U(B),se=new m("&","bitAnd",[se,Oe(B)]);return se}function Oe(B){for(var se=[ne(B)],Te=[],me={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};St(me,B.token);){var ve={name:B.token,fn:me[B.token]};Te.push(ve),U(B),se.push(ne(B))}return se.length===1?se[0]:se.length===2?new m(Te[0].name,Te[0].fn,se):new p(Te.map(Ke=>Ke.fn),se)}function ne(B){var se,Te,me,ve;se=Le(B);for(var Ke={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};St(Ke,B.token);)Te=B.token,me=Ke[Te],U(B),ve=[se,Le(B)],se=new m(Te,me,ve);return se}function Le(B){var se,Te,me,ve;se=Fe(B);for(var Ke={to:"to",in:"to"};St(Ke,B.token);)Te=B.token,me=Ke[Te],U(B),Te==="in"&&B.token===""?se=new m("*","multiply",[se,new x("in")],!0):(ve=[se,Fe(B)],se=new m(Te,me,ve));return se}function Fe(B){var se,Te=[];if(B.token===":"?se=new l(1):se=Q(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(Te.push(se);B.token===":"&&Te.length<3;)U(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?Te.push(new x("end")):Te.push(Q(B));Te.length===3?se=new y(Te[0],Te[2],Te[1]):se=new y(Te[0],Te[1])}return se}function Q(B){var se,Te,me,ve;se=te(B);for(var Ke={"+":"add","-":"subtract"};St(Ke,B.token);){Te=B.token,me=Ke[Te],U(B);var lt=te(B);lt.isPercentage?ve=[se,new m("*","multiply",[se,lt])]:ve=[se,lt],se=new m(Te,me,ve)}return se}function te(B){var se,Te,me,ve;se=Me(B),Te=se;for(var Ke={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};St(Ke,B.token);)me=B.token,ve=Ke[me],U(B),Te=Me(B),se=new m(me,ve,[se,Te]);return se}function Me(B){var se,Te;for(se=re(B),Te=se;B.tokenType===E.SYMBOL||B.token==="in"&&Tn(se)||B.tokenType===E.NUMBER&&!Tn(Te)&&(!Qr(Te)||Te.op==="!")||B.token==="(";)Te=re(B),se=new m("*","multiply",[se,Te],!0);return se}function re(B){for(var se=V(B),Te=se,me=[];B.token==="/"&&T2(Te);)if(me.push(hn({},B)),U(B),B.tokenType===E.NUMBER)if(me.push(hn({},B)),U(B),B.tokenType===E.SYMBOL||B.token==="(")hn(B,me.pop()),me.pop(),Te=V(B),se=new m("/","divide",[se,Te]);else{me.pop(),hn(B,me.pop());break}else{hn(B,me.pop());break}return se}function V(B){var se,Te,me,ve;se=G(B);for(var Ke={"%":"mod",mod:"mod"};St(Ke,B.token);)Te=B.token,me=Ke[Te],U(B),Te==="%"&&B.tokenType===E.DELIMITER&&B.token!=="("?se=new m("/","divide",[se,new l(100)],!1,!0):(ve=[se,G(B)],se=new m(Te,me,ve));return se}function G(B){var se,Te,me,ve={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return St(ve,B.token)?(me=ve[B.token],se=B.token,U(B),Te=[G(B)],new m(se,me,Te)):le(B)}function le(B){var se,Te,me,ve;return se=_e(B),(B.token==="^"||B.token===".^")&&(Te=B.token,me=Te==="^"?"pow":"dotPow",U(B),ve=[se,G(B)],se=new m(Te,me,ve)),se}function _e(B){var se,Te,me,ve;se=W(B);for(var Ke={"!":"factorial","'":"ctranspose"};St(Ke,B.token);)Te=B.token,me=Ke[Te],F(B),ve=[se],se=new m(Te,me,ve),se=de(B,se);return se}function W(B){var se=[];if(B.tokenType===E.SYMBOL&&St(B.extraNodes,B.token)){var Te=B.extraNodes[B.token];if(F(B),B.token==="("){if(se=[],I(B),F(B),B.token!==")")for(se.push(q(B));B.token===",";)F(B),se.push(q(B));if(B.token!==")")throw Ze(B,"Parenthesis ) expected");j(B),F(B)}return new Te(se)}return Y(B)}function Y(B){var se,Te;return B.tokenType===E.SYMBOL||B.tokenType===E.DELIMITER&&B.token in A?(Te=B.token,F(B),St(T,Te)?se=new l(T[Te]):M.indexOf(Te)!==-1?se=new l(n(Te,"number")):se=new x(Te),se=de(B,se),se):xe(B)}function de(B,se,Te){for(var me;(B.token==="("||B.token==="["||B.token===".")&&(!Te||Te.indexOf(B.token)!==-1);)if(me=[],B.token==="(")if(bi(se)||Hf(se)){if(I(B),F(B),B.token!==")")for(me.push(q(B));B.token===",";)F(B),me.push(q(B));if(B.token!==")")throw Ze(B,"Parenthesis ) expected");j(B),F(B),se=new f(se,me)}else return se;else if(B.token==="["){if(I(B),F(B),B.token!=="]")for(me.push(q(B));B.token===",";)F(B),me.push(q(B));if(B.token!=="]")throw Ze(B,"Parenthesis ] expected");j(B),F(B),se=new i(se,new d(me))}else{F(B);var ve=B.tokenType===E.SYMBOL||B.tokenType===E.DELIMITER&&B.token in A;if(!ve)throw Ze(B,"Property name expected after dot");me.push(new l(B.token)),F(B);var Ke=!0;se=new i(se,new d(me,Ke))}return se}function xe(B){var se,Te;return B.token==='"'||B.token==="'"?(Te=Ne(B,B.token),se=new l(Te),se=de(B,se),se):Be(B)}function Ne(B,se){for(var Te="";H(B)!==""&&H(B)!==se;)if(H(B)==="\\"){L(B);var me=H(B),ve=C[me];if(ve!==void 0)Te+=ve,B.index+=1;else if(me==="u"){var Ke=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(Ke))Te+=String.fromCharCode(parseInt(Ke,16)),B.index+=5;else throw Ze(B,"Invalid unicode character \\u".concat(Ke))}else throw Ze(B,"Bad escape character \\".concat(me))}else Te+=H(B),L(B);if(F(B),B.token!==se)throw Ze(B,"End of string ".concat(se," expected"));return F(B),Te}function Be(B){var se,Te,me,ve;if(B.token==="["){if(I(B),F(B),B.token!=="]"){var Ke=$e(B);if(B.token===";"){for(me=1,Te=[Ke];B.token===";";)F(B),Te[me]=$e(B),me++;if(B.token!=="]")throw Ze(B,"End of matrix ] expected");j(B),F(B),ve=Te[0].items.length;for(var lt=1;lt<me;lt++)if(Te[lt].items.length!==ve)throw we(B,"Column dimensions mismatch ("+Te[lt].items.length+" !== "+ve+")");se=new a(Te)}else{if(B.token!=="]")throw Ze(B,"End of matrix ] expected");j(B),F(B),se=Ke}}else j(B),F(B),se=new a([]);return de(B,se)}return Ie(B)}function $e(B){for(var se=[q(B)],Te=1;B.token===",";)F(B),se[Te]=q(B),Te++;return new a(se)}function Ie(B){if(B.token==="{"){I(B);var se,Te={};do if(F(B),B.token!=="}"){if(B.token==='"'||B.token==="'")se=Ne(B,B.token);else if(B.tokenType===E.SYMBOL||B.tokenType===E.DELIMITER&&B.token in A)se=B.token,F(B);else throw Ze(B,"Symbol or string expected as object key");if(B.token!==":")throw Ze(B,"Colon : expected after object key");F(B),Te[se]=q(B)}while(B.token===",");if(B.token!=="}")throw Ze(B,"Comma , or bracket } expected after object value");j(B),F(B);var me=new h(Te);return me=de(B,me),me}return Ye(B)}function Ye(B){var se;return B.tokenType===E.NUMBER?(se=B.token,F(B),new l(n(se,r.number))):Ve(B)}function Ve(B){var se;if(B.token==="("){if(I(B),F(B),se=q(B),B.token!==")")throw Ze(B,"Parenthesis ) expected");return j(B),F(B),se=new v(se),se=de(B,se),se}return at(B)}function at(B){throw B.token===""?Ze(B,"Unexpected end of expression"):Ze(B,"Value expected")}function tt(B){return B.index-B.token.length+1}function Ze(B,se){var Te=tt(B),me=new SyntaxError(se+" (char "+Te+")");return me.char=Te,me}function we(B,se){var Te=tt(B),me=new SyntaxError(se+" (char "+Te+")");return me.char=Te,me}return e.addConversion({from:"string",to:"Node",convert:g}),g}),yB="compile",S0e=["typed","parse"],_0e=ie(yB,S0e,t=>{var{typed:e,parse:n}=t;return e(yB,{string:function(i){return n(i).compile()},"Array | Matrix":function(i){return ln(i,function(a){return n(a).compile()})}})}),xB="evaluate",E0e=["typed","parse"],M0e=ie(xB,E0e,t=>{var{typed:e,parse:n}=t;return e(xB,{string:function(i){var a=lp();return n(i).compile().evaluate(a)},"string, Map | Object":function(i,a){return n(i).compile().evaluate(a)},"Array | Matrix":function(i){var a=lp();return ln(i,function(s){return n(s).compile().evaluate(a)})},"Array | Matrix, Map | Object":function(i,a){return ln(i,function(s){return n(s).compile().evaluate(a)})}})}),A0e="Parser",C0e=["evaluate"],T0e=ie(A0e,C0e,t=>{var{evaluate:e}=t;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:lp(),writable:!1})}return n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(r){return e(r,this.scope)},n.prototype.get=function(r){if(this.scope.has(r))return this.scope.get(r)},n.prototype.getAll=function(){return Xoe(this.scope)},n.prototype.getAllAsMap=function(){return this.scope},n.prototype.set=function(r,i){return this.scope.set(r,i),i},n.prototype.remove=function(r){this.scope.delete(r)},n.prototype.clear=function(){this.scope.clear()},n},{isClass:!0}),bB="parser",D0e=["typed","Parser"],N0e=ie(bB,D0e,t=>{var{typed:e,Parser:n}=t;return e(bB,{"":function(){return new n}})}),wB="lup",R0e=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],P0e=ie(wB,R0e,t=>{var{typed:e,matrix:n,abs:r,addScalar:i,divideScalar:a,multiplyScalar:s,subtractScalar:o,larger:u,equalScalar:l,unaryMinus:c,DenseMatrix:f,SparseMatrix:d,Spa:h}=t;return e(wB,{DenseMatrix:function(p){return m(p)},SparseMatrix:function(p){return v(p)},Array:function(p){var x=n(p),g=m(x);return{L:g.L.valueOf(),U:g.U.valueOf(),p:g.p}}});function m(y){var p=y._size[0],x=y._size[1],g=Math.min(p,x),S=Wt(y._data),E=[],_=[p,g],A=[],T=[g,x],M,C,N,P=[];for(M=0;M<p;M++)P[M]=M;for(C=0;C<x;C++){if(C>0)for(M=0;M<p;M++){var H=Math.min(M,C),L=0;for(N=0;N<H;N++)L=i(L,s(S[M][N],S[N][C]));S[M][C]=o(S[M][C],L)}var z=C,O=0,F=0;for(M=C;M<p;M++){var U=S[M][C],I=r(U);u(I,O)&&(z=M,O=I,F=U)}if(C!==z&&(P[C]=[P[z],P[z]=P[C]][0],f._swapRows(C,z,S)),C<p)for(M=C+1;M<p;M++){var j=S[M][C];l(j,0)||(S[M][C]=a(S[M][C],F))}}for(C=0;C<x;C++)for(M=0;M<p;M++){if(C===0&&(M<x&&(A[M]=[]),E[M]=[]),M<C){M<x&&(A[M][C]=S[M][C]),C<p&&(E[M][C]=0);continue}if(M===C){M<x&&(A[M][C]=S[M][C]),C<p&&(E[M][C]=1);continue}M<x&&(A[M][C]=0),C<p&&(E[M][C]=S[M][C])}var ee=new f({data:E,size:_}),J=new f({data:A,size:T}),q=[];for(M=0,g=P.length;M<g;M++)q[P[M]]=M;return{L:ee,U:J,p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function v(y){var p=y._size[0],x=y._size[1],g=Math.min(p,x),S=y._values,E=y._index,_=y._ptr,A=[],T=[],M=[],C=[p,g],N=[],P=[],H=[],L=[g,x],z,O,F,U=[],I=[];for(z=0;z<p;z++)U[z]=z,I[z]=z;var j=function(q,ae){var be=I[q],ue=I[ae];U[be]=ae,U[ue]=q,I[q]=ue,I[ae]=be},ee=function(){var q=new h;O<p&&(M.push(A.length),A.push(1),T.push(O)),H.push(N.length);var ae=_[O],be=_[O+1];for(F=ae;F<be;F++)z=E[F],q.set(U[z],S[F]);O>0&&q.forEach(0,O-1,function(Ce,Ee){d._forEachRow(Ce,A,T,M,function(Oe,ne){Oe>Ce&&q.accumulate(Oe,c(s(ne,Ee)))})});var ue=O,pe=q.get(O),Pe=r(pe);q.forEach(O+1,p-1,function(Ce,Ee){var Oe=r(Ee);u(Oe,Pe)&&(ue=Ce,Pe=Oe,pe=Ee)}),O!==ue&&(d._swapRows(O,ue,C[1],A,T,M),d._swapRows(O,ue,L[1],N,P,H),q.swap(O,ue),j(O,ue)),q.forEach(0,p-1,function(Ce,Ee){Ce<=O?(N.push(Ee),P.push(Ce)):(Ee=a(Ee,pe),l(Ee,0)||(A.push(Ee),T.push(Ce)))})};for(O=0;O<x;O++)ee();return H.push(N.length),M.push(A.length),{L:new d({values:A,index:T,ptr:M,size:C}),U:new d({values:N,index:P,ptr:H,size:L}),p:U,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),SB="qr",I0e=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],O0e=ie(SB,I0e,t=>{var{typed:e,matrix:n,zeros:r,identity:i,isZero:a,equal:s,sign:o,sqrt:u,conj:l,unaryMinus:c,addScalar:f,divideScalar:d,multiplyScalar:h,subtractScalar:m,complex:v}=t;return hn(e(SB,{DenseMatrix:function(S){return p(S)},SparseMatrix:function(S){return x()},Array:function(S){var E=n(S),_=p(E);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:y});function y(g){var S=g._size[0],E=g._size[1],_=i([S],"dense"),A=_._data,T=g.clone(),M=T._data,C,N,P,H=r([S],"");for(P=0;P<Math.min(E,S);++P){var L=M[P][P],z=c(s(L,0)?1:o(L)),O=l(z),F=0;for(C=P;C<S;C++)F=f(F,h(M[C][P],l(M[C][P])));var U=h(z,u(F));if(!a(U)){var I=m(L,U);for(H[P]=1,C=P+1;C<S;C++)H[C]=d(M[C][P],I);var j=c(l(d(I,U))),ee=void 0;for(N=P;N<E;N++){for(ee=0,C=P;C<S;C++)ee=f(ee,h(l(H[C]),M[C][N]));for(ee=h(ee,j),C=P;C<S;C++)M[C][N]=h(m(M[C][N],h(H[C],ee)),O)}for(C=0;C<S;C++){for(ee=0,N=P;N<S;N++)ee=f(ee,h(A[C][N],H[N]));for(ee=h(ee,j),N=P;N<S;++N)A[C][N]=d(m(A[C][N],h(ee,l(H[N]))),O)}}}return{Q:_,R:T,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function p(g){var S=y(g),E=S.R._data;if(g._data.length>0)for(var _=E[0][0].type==="Complex"?v(0):0,A=0;A<E.length;++A)for(var T=0;T<A&&T<(E[0]||[]).length;++T)E[A][T]=_;return S}function x(g){throw new Error("qr not implemented for sparse matrices yet")}});function F0e(t,e,n,r){for(var i=t._values,a=t._index,s=t._ptr,o=t._size,u=t._datatype,l=o[0],c=o[1],f=r&&t._values?[]:null,d=[],h=[],m=0,v=0;v<c;v++){h[v]=m;for(var y=n?n[v]:v,p=s[y],x=s[y+1],g=p;g<x;g++){var S=e?e[a[g]]:a[g];d[m]=S,f&&(f[m]=i[g]),m++}}return h[c]=m,t.createSparseMatrix({values:f,index:d,ptr:h,size:[l,c],datatype:u})}function VH(t,e,n,r,i,a,s){var o=0;for(n[s]=t;o>=0;){var u=n[s+o],l=n[r+u];l===-1?(o--,a[e++]=u):(n[r+u]=n[i+l],++o,n[s+o]=l)}return e}function L0e(t,e){if(!t)return null;var n=0,r,i=[],a=[],s=0,o=e,u=2*e;for(r=0;r<e;r++)a[s+r]=-1;for(r=e-1;r>=0;r--)t[r]!==-1&&(a[o+r]=a[s+t[r]],a[s+t[r]]=r);for(r=0;r<e;r++)t[r]===-1&&(n=VH(r,n,a,s,o,i,u));return i}function B0e(t,e){if(!t)return null;var n=t._index,r=t._ptr,i=t._size,a=i[0],s=i[1],o=[],u=[],l=0,c=s,f,d;if(e)for(f=0;f<a;f++)u[c+f]=-1;for(var h=0;h<s;h++){o[h]=-1,u[l+h]=-1;for(var m=r[h],v=r[h+1],y=m;y<v;y++){var p=n[y];for(f=e?u[c+p]:p;f!==-1&&f<h;f=d)d=u[l+f],u[l+f]=h,d===-1&&(o[f]=h);e&&(u[c+p]=h)}}return o}function U0e(t,e,n){for(var r=t._values,i=t._index,a=t._ptr,s=t._size,o=s[1],u=0,l=0;l<o;l++){var c=a[l];for(a[l]=u;c<a[l+1];c++)e(i[c],l,r?r[c]:1,n)&&(i[u]=i[c],r&&(r[u]=r[c]),u++)}return a[o]=u,i.splice(u,i.length-u),r&&r.splice(u,r.length-u),u}function zl(t){return-t-2}var z0e="csAmd",k0e=["add","multiply","transpose"],$0e=ie(z0e,k0e,t=>{var{add:e,multiply:n,transpose:r}=t;return function(c,f){if(!f||c<=0||c>3)return null;var d=f._size,h=d[0],m=d[1],v=0,y=Math.max(16,10*Math.sqrt(m));y=Math.min(m-2,y);var p=i(c,f,h,m,y);U0e(p,u,null);for(var x=p._index,g=p._ptr,S=g[m],E=[],_=[],A=0,T=m+1,M=2*(m+1),C=3*(m+1),N=4*(m+1),P=5*(m+1),H=6*(m+1),L=7*(m+1),z=E,O=a(m,g,_,A,C,z,M,L,T,H,N,P),F=s(m,g,_,P,N,H,y,T,C,z,M),U=0,I,j,ee,J,q,ae,be,ue,pe,Pe,Ce,Ee,Oe,ne,Le,Fe;F<m;){for(ee=-1;U<m&&(ee=_[C+U])===-1;U++);_[M+ee]!==-1&&(z[_[M+ee]]=-1),_[C+U]=_[M+ee];var Q=_[N+ee],te=_[T+ee];F+=te;var Me=0;_[T+ee]=-te;var re=g[ee],V=Q===0?re:S,G=V;for(J=1;J<=Q+1;J++){for(J>Q?(ae=ee,be=re,ue=_[A+ee]-Q):(ae=x[re++],be=g[ae],ue=_[A+ae]),q=1;q<=ue;q++)I=x[be++],!((pe=_[T+I])<=0)&&(Me+=pe,_[T+I]=-pe,x[G++]=I,_[M+I]!==-1&&(z[_[M+I]]=z[I]),z[I]!==-1?_[M+z[I]]=_[M+I]:_[C+_[P+I]]=_[M+I]);ae!==ee&&(g[ae]=zl(ee),_[H+ae]=0)}for(Q!==0&&(S=G),_[P+ee]=Me,g[ee]=V,_[A+ee]=G-V,_[N+ee]=-2,O=o(O,v,_,H,m),Pe=V;Pe<G;Pe++)if(I=x[Pe],!((Ce=_[N+I])<=0)){pe=-_[T+I];var le=O-pe;for(re=g[I],Ee=g[I]+Ce-1;re<=Ee;re++)ae=x[re],_[H+ae]>=O?_[H+ae]-=pe:_[H+ae]!==0&&(_[H+ae]=_[P+ae]+le)}for(Pe=V;Pe<G;Pe++){for(I=x[Pe],Ee=g[I],Oe=Ee+_[N+I]-1,ne=Ee,Le=0,Fe=0,re=Ee;re<=Oe;re++)if(ae=x[re],_[H+ae]!==0){var _e=_[H+ae]-O;_e>0?(Fe+=_e,x[ne++]=ae,Le+=ae):(g[ae]=zl(ee),_[H+ae]=0)}_[N+I]=ne-Ee+1;var W=ne,Y=Ee+_[A+I];for(re=Oe+1;re<Y;re++){j=x[re];var de=_[T+j];de<=0||(Fe+=de,x[ne++]=j,Le+=j)}Fe===0?(g[I]=zl(ee),pe=-_[T+I],Me-=pe,te+=pe,F+=pe,_[T+I]=0,_[N+I]=-1):(_[P+I]=Math.min(_[P+I],Fe),x[ne]=x[W],x[W]=x[Ee],x[Ee]=ee,_[A+I]=ne-Ee+1,Le=(Le<0?-Le:Le)%m,_[M+I]=_[L+Le],_[L+Le]=I,z[I]=Le)}for(_[P+ee]=Me,v=Math.max(v,Me),O=o(O+v,v,_,H,m),Pe=V;Pe<G;Pe++)if(I=x[Pe],!(_[T+I]>=0))for(Le=z[I],I=_[L+Le],_[L+Le]=-1;I!==-1&&_[M+I]!==-1;I=_[M+I],O++){for(ue=_[A+I],Ce=_[N+I],re=g[I]+1;re<=g[I]+ue-1;re++)_[H+x[re]]=O;var xe=I;for(j=_[M+I];j!==-1;){var Ne=_[A+j]===ue&&_[N+j]===Ce;for(re=g[j]+1;Ne&&re<=g[j]+ue-1;re++)_[H+x[re]]!==O&&(Ne=0);Ne?(g[j]=zl(I),_[T+I]+=_[T+j],_[T+j]=0,_[N+j]=-1,j=_[M+j],_[M+xe]=j):(xe=j,j=_[M+j])}}for(re=V,Pe=V;Pe<G;Pe++)I=x[Pe],!((pe=-_[T+I])<=0)&&(_[T+I]=pe,Fe=_[P+I]+Me-pe,Fe=Math.min(Fe,m-F-pe),_[C+Fe]!==-1&&(z[_[C+Fe]]=I),_[M+I]=_[C+Fe],z[I]=-1,_[C+Fe]=I,U=Math.min(U,Fe),_[P+I]=Fe,x[re++]=I);_[T+ee]=te,(_[A+ee]=re-V)===0&&(g[ee]=-1,_[H+ee]=0),Q!==0&&(S=re)}for(I=0;I<m;I++)g[I]=zl(g[I]);for(j=0;j<=m;j++)_[C+j]=-1;for(j=m;j>=0;j--)_[T+j]>0||(_[M+j]=_[C+g[j]],_[C+g[j]]=j);for(ae=m;ae>=0;ae--)_[T+ae]<=0||g[ae]!==-1&&(_[M+ae]=_[C+g[ae]],_[C+g[ae]]=ae);for(ee=0,I=0;I<=m;I++)g[I]===-1&&(ee=VH(I,ee,_,C,M,E,H));return E.splice(E.length-1,1),E};function i(l,c,f,d,h){var m=r(c);if(l===1&&d===f)return e(c,m);if(l===2){for(var v=m._index,y=m._ptr,p=0,x=0;x<f;x++){var g=y[x];if(y[x]=p,!(y[x+1]-g>h))for(var S=y[x+1];g<S;g++)v[p++]=v[g]}return y[f]=p,c=r(m),n(m,c)}return n(m,c)}function a(l,c,f,d,h,m,v,y,p,x,g,S){for(var E=0;E<l;E++)f[d+E]=c[E+1]-c[E];f[d+l]=0;for(var _=0;_<=l;_++)f[h+_]=-1,m[_]=-1,f[v+_]=-1,f[y+_]=-1,f[p+_]=1,f[x+_]=1,f[g+_]=0,f[S+_]=f[d+_];var A=o(0,0,f,x,l);return f[g+l]=-2,c[l]=-1,f[x+l]=0,A}function s(l,c,f,d,h,m,v,y,p,x,g){for(var S=0,E=0;E<l;E++){var _=f[d+E];if(_===0)f[h+E]=-2,S++,c[E]=-1,f[m+E]=0;else if(_>v)f[y+E]=0,f[h+E]=-1,S++,c[E]=zl(l),f[y+l]++;else{var A=f[p+_];A!==-1&&(x[A]=E),f[g+E]=f[p+_],f[p+_]=E}}return S}function o(l,c,f,d,h){if(l<2||l+c<0){for(var m=0;m<h;m++)f[d+m]!==0&&(f[d+m]=1);l=2}return l}function u(l,c){return l!==c}});function H0e(t,e,n,r,i,a,s){var o,u,l=0,c;if(t<=e||n[r+e]<=n[i+t])return-1;n[i+t]=n[r+e];var f=n[a+t];if(n[a+t]=e,f===-1)l=1,c=t;else{for(l=2,c=f;c!==n[s+c];c=n[s+c]);for(o=f;o!==c;o=u)u=n[s+o],n[s+o]=c}return{jleaf:l,q:c}}var G0e="csCounts",V0e=["transpose"],W0e=ie(G0e,V0e,t=>{var{transpose:e}=t;return function(n,r,i,a){if(!n||!r||!i)return null;var s=n._size,o=s[0],u=s[1],l,c,f,d,h,m,v,y=4*u+(a?u+o+1:0),p=[],x=0,g=u,S=2*u,E=3*u,_=4*u,A=5*u+1;for(f=0;f<y;f++)p[f]=-1;var T=[],M=e(n),C=M._index,N=M._ptr;for(f=0;f<u;f++)for(c=i[f],T[c]=p[E+c]===-1?1:0;c!==-1&&p[E+c]===-1;c=r[c])p[E+c]=f;if(a){for(f=0;f<u;f++)p[i[f]]=f;for(l=0;l<o;l++){for(f=u,m=N[l],v=N[l+1],h=m;h<v;h++)f=Math.min(f,p[C[h]]);p[A+l]=p[_+f],p[_+f]=l}}for(l=0;l<u;l++)p[x+l]=l;for(f=0;f<u;f++){for(c=i[f],r[c]!==-1&&T[r[c]]--,d=a?p[_+f]:c;d!==-1;d=a?p[A+d]:-1)for(h=N[d];h<N[d+1];h++){l=C[h];var P=H0e(l,c,p,E,g,S,x);P.jleaf>=1&&T[c]++,P.jleaf===2&&T[P.q]--}r[c]!==-1&&(p[x+c]=r[c])}for(c=0;c<u;c++)r[c]!==-1&&(T[r[c]]+=T[c]);return T}}),q0e="csSqr",j0e=["add","multiply","transpose"],X0e=ie(q0e,j0e,t=>{var{add:e,multiply:n,transpose:r}=t,i=$0e({add:e,multiply:n,transpose:r}),a=W0e({transpose:r});return function(u,l,c){var f=l._ptr,d=l._size,h=d[1],m,v={};if(v.q=i(u,l),u&&!v.q)return null;if(c){var y=u?F0e(l,null,v.q,0):l;v.parent=B0e(y,1);var p=L0e(v.parent,h);if(v.cp=a(y,v.parent,p,1),y&&v.parent&&v.cp&&s(y,v))for(v.unz=0,m=0;m<h;m++)v.unz+=v.cp[m]}else v.unz=4*f[h]+h,v.lnz=v.unz;return v};function s(o,u){var l=o._ptr,c=o._index,f=o._size,d=f[0],h=f[1];u.pinv=[],u.leftmost=[];var m=u.parent,v=u.pinv,y=u.leftmost,p=[],x=0,g=d,S=d+h,E=d+2*h,_,A,T,M,C;for(A=0;A<h;A++)p[g+A]=-1,p[S+A]=-1,p[E+A]=0;for(_=0;_<d;_++)y[_]=-1;for(A=h-1;A>=0;A--)for(M=l[A],C=l[A+1],T=M;T<C;T++)y[c[T]]=A;for(_=d-1;_>=0;_--)v[_]=-1,A=y[_],A!==-1&&(p[E+A]++===0&&(p[S+A]=_),p[x+_]=p[g+A],p[g+A]=_);for(u.lnz=0,u.m2=d,A=0;A<h;A++)if(_=p[g+A],u.lnz++,_<0&&(_=u.m2++),v[_]=A,!(--E[A]<=0)){u.lnz+=p[E+A];var N=m[A];N!==-1&&(p[E+N]===0&&(p[S+N]=p[S+A]),p[x+p[S+A]]=p[g+N],p[g+N]=p[x+_],p[E+N]+=p[E+A])}for(_=0;_<d;_++)v[_]<0&&(v[_]=A++);return!0}});function G2(t,e){return t[e]<0}function WH(t,e){t[e]=zl(t[e])}function _B(t){return t<0?zl(t):t}function Y0e(t,e,n,r,i){var a=e._index,s=e._ptr,o=e._size,u=o[1],l,c,f,d=0;for(r[0]=t;d>=0;){t=r[d];var h=i?i[t]:t;G2(s,t)||(WH(s,t),r[u+d]=h<0?0:_B(s[h]));var m=1;for(c=r[u+d],f=h<0?0:_B(s[h+1]);c<f;c++)if(l=a[c],!G2(s,l)){r[u+d]=c,r[++d]=l,m=0;break}m&&(d--,r[--n]=t)}return n}function Z0e(t,e,n,r,i){var a=t._ptr,s=t._size,o=e._index,u=e._ptr,l=s[1],c,f,d,h=l;for(f=u[n],d=u[n+1],c=f;c<d;c++){var m=o[c];G2(a,m)||(h=Y0e(m,t,h,r,i))}for(c=h;c<l;c++)WH(a,r[c]);return h}var K0e="csSpsolve",Q0e=["divideScalar","multiply","subtract"],J0e=ie(K0e,Q0e,t=>{var{divideScalar:e,multiply:n,subtract:r}=t;return function(a,s,o,u,l,c,f){var d=a._values,h=a._index,m=a._ptr,v=a._size,y=v[1],p=s._values,x=s._index,g=s._ptr,S,E,_,A,T=Z0e(a,s,o,u,c);for(S=T;S<y;S++)l[u[S]]=0;for(E=g[o],_=g[o+1],S=E;S<_;S++)l[x[S]]=p[S];for(var M=T;M<y;M++){var C=u[M],N=c?c[C]:C;if(!(N<0))for(E=m[N],_=m[N+1],l[C]=e(l[C],d[f?E:_-1]),S=f?E+1:E,A=f?_:_-1;S<A;S++){var P=h[S];l[P]=r(l[P],n(d[S],l[C]))}}return T}}),eye="csLu",tye=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],nye=ie(eye,tye,t=>{var{abs:e,divideScalar:n,multiply:r,subtract:i,larger:a,largerEq:s,SparseMatrix:o}=t,u=J0e({divideScalar:n,multiply:r,subtract:i});return function(c,f,d){if(!c)return null;var h=c._size,m=h[1],v,y=100,p=100;f&&(v=f.q,y=f.lnz||y,p=f.unz||p);var x=[],g=[],S=[],E=new o({values:x,index:g,ptr:S,size:[m,m]}),_=[],A=[],T=[],M=new o({values:_,index:A,ptr:T,size:[m,m]}),C=[],N,P,H=[],L=[];for(N=0;N<m;N++)H[N]=0,C[N]=-1,S[N+1]=0;y=0,p=0;for(var z=0;z<m;z++){S[z]=y,T[z]=p;var O=v?v[z]:z,F=u(E,c,O,L,H,C,1),U=-1,I=-1;for(P=F;P<m;P++)if(N=L[P],C[N]<0){var j=e(H[N]);a(j,I)&&(I=j,U=N)}else A[p]=C[N],_[p++]=H[N];if(U===-1||I<=0)return null;C[O]<0&&s(e(H[O]),r(I,d))&&(U=O);var ee=H[U];for(A[p]=z,_[p++]=ee,C[U]=z,g[y]=U,x[y++]=1,P=F;P<m;P++)N=L[P],C[N]<0&&(g[y]=N,x[y++]=n(H[N],ee)),H[N]=0}for(S[m]=y,T[m]=p,P=0;P<y;P++)g[P]=C[g[P]];return x.splice(y,x.length-y),g.splice(y,g.length-y),_.splice(p,_.length-p),A.splice(p,A.length-p),{L:E,U:M,pinv:C}}}),EB="slu",rye=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],iye=ie(EB,rye,t=>{var{typed:e,abs:n,add:r,multiply:i,transpose:a,divideScalar:s,subtract:o,larger:u,largerEq:l,SparseMatrix:c}=t,f=X0e({add:r,multiply:i,transpose:a}),d=nye({abs:n,divideScalar:s,multiply:i,subtract:o,larger:u,largerEq:l,SparseMatrix:c});return e(EB,{"SparseMatrix, number, number":function(m,v,y){if(!Ct(v)||v<0||v>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(y<0||y>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var p=f(v,m,!1),x=d(m,p,y);return{L:x.L,U:x.U,p:x.pinv,q:p.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function MB(t,e){var n,r=e.length,i=[];if(t)for(n=0;n<r;n++)i[t[n]]=e[n];else for(n=0;n<r;n++)i[n]=e[n];return i}var AB="lusolve",aye=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],sye=ie(AB,aye,t=>{var{typed:e,matrix:n,lup:r,slu:i,usolve:a,lsolve:s,DenseMatrix:o}=t,u=l0({DenseMatrix:o});return e(AB,{"Array, Array | Matrix":function(d,h){d=n(d);var m=r(d),v=c(m.L,m.U,m.p,null,h);return v.valueOf()},"DenseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix":function(d,h){var m=r(d);return c(m.L,m.U,m.p,null,h)},"SparseMatrix, Array | Matrix, number, number":function(d,h,m,v){var y=i(d,m,v);return c(y.L,y.U,y.p,y.q,h)},"Object, Array | Matrix":function(d,h){return c(d.L,d.U,d.p,d.q,h)}});function l(f){if(Ft(f))return f;if(Bn(f))return n(f);throw new TypeError("Invalid Matrix LU decomposition")}function c(f,d,h,m,v){f=l(f),d=l(d),h&&(v=u(f,v,!0),v._data=MB(h,v._data));var y=s(f,v),p=a(d,y);return m&&(p._data=MB(m,p._data)),p}}),CB="polynomialRoot",oye=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],uye=ie(CB,oye,t=>{var{typed:e,isZero:n,equalScalar:r,add:i,subtract:a,multiply:s,divide:o,sqrt:u,unaryMinus:l,cbrt:c,typeOf:f,im:d,re:h}=t;return e(CB,{"number|Complex, ...number|Complex":(m,v)=>{for(var y=[m,...v];y.length>0&&n(y[y.length-1]);)y.pop();if(y.length<2)throw new RangeError("Polynomial [".concat(m,", ").concat(v,"] must have a non-zero non-constant coefficient"));switch(y.length){case 2:return[l(o(y[0],y[1]))];case 3:{var[p,x,g]=y,S=s(2,g),E=s(x,x),_=s(4,g,p);if(r(E,_))return[o(l(x),S)];var A=u(a(E,_));return[o(a(A,x),S),o(a(l(A),x),S)]}case 4:{var[T,M,C,N]=y,P=l(s(3,N)),H=s(C,C),L=s(3,N,M),z=i(s(2,C,C,C),s(27,N,N,T)),O=s(9,N,C,M);if(r(H,L)&&r(z,O))return[o(C,P)];var F=a(H,L),U=a(z,O),I=i(s(18,N,C,M,T),s(C,C,M,M)),j=i(s(4,C,C,C,T),s(4,N,M,M,M),s(27,N,N,T,T));if(r(I,j))return[o(a(s(4,N,C,M),i(s(9,N,N,T),s(C,C,C))),s(N,F)),o(a(s(9,N,T),s(C,M)),s(2,F))];var ee;r(H,L)?ee=U:ee=o(i(U,u(a(s(U,U),s(4,F,F,F)))),2);var J=!0,q=c(ee,J).toArray().map(ae=>o(i(C,ae,o(F,ae)),P));return q.map(ae=>f(ae)==="Complex"&&r(h(ae),h(ae)+d(ae))?h(ae):ae)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(y))}}})}),lye="Help",cye=["evaluate"],fye=ie(lye,cye,t=>{var{evaluate:e}=t;function n(r){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!r)throw new Error('Argument "doc" missing');this.doc=r}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var r=this.doc||{},i=`
`;if(r.name&&(i+="Name: "+r.name+`

`),r.category&&(i+="Category: "+r.category+`

`),r.description&&(i+=`Description:
    `+r.description+`

`),r.syntax&&(i+=`Syntax:
    `+r.syntax.join(`
    `)+`

`),r.examples){i+=`Examples:
`;for(var a=!1,s=e("config()"),o={config:f=>(a=!0,e("config(newConfig)",{newConfig:f}))},u=0;u<r.examples.length;u++){var l=r.examples[u];i+="    "+l+`
`;var c=void 0;try{c=e(l,o)}catch(f){c=f}c!==void 0&&!j9(c)&&(i+="        "+on(c,{precision:14})+`
`)}i+=`
`,a&&e("config(originalConfig)",{originalConfig:s})}return r.mayThrow&&r.mayThrow.length&&(i+="Throws: "+r.mayThrow.join(", ")+`

`),r.seealso&&r.seealso.length&&(i+="See also: "+r.seealso.join(", ")+`
`),i},n.prototype.toJSON=function(){var r=Wt(this.doc);return r.mathjs="Help",r},n.fromJSON=function(r){var i={};return Object.keys(r).filter(a=>a!=="mathjs").forEach(a=>{i[a]=r[a]}),new n(i)},n.prototype.valueOf=n.prototype.toString,n},{isClass:!0}),dye="Chain",hye=["?on","math","typed"],pye=ie(dye,hye,t=>{var{on:e,math:n,typed:r}=t;function i(l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");X9(l)?this.value=l.value:this.value=l}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return on(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(l){return new i(l.value)};function a(l,c){typeof c=="function"&&(i.prototype[l]=o(c))}function s(l,c){foe(i.prototype,l,function(){var d=c();if(typeof d=="function")return o(d)})}function o(l){return function(){if(arguments.length===0)return new i(l(this.value));for(var c=[this.value],f=0;f<arguments.length;f++)c[f+1]=arguments[f];if(r.isTypedFunction(l)){var d=r.resolve(l,c);if(d.params.length===1)throw new Error("chain function "+l.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(l,c))}return new i(l.apply(l,c))}}i.createProxy=function(l,c){if(typeof l=="string")a(l,c);else{var f=function(m){St(l,m)&&u[m]===void 0&&s(m,()=>l[m])};for(var d in l)f(d)}};var u={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),e&&e("import",function(l,c,f){f||s(l,c)}),i},{isClass:!0}),TB={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},mye={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},vye={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},gye={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},yye={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},xye={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},bye={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},wye={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},Sye={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},_ye={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},Eye={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},DB={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},Mye={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},Aye={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},Cye={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},Tye={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},Dye={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},Nye={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","complex","fraction","index","matrix","string","unit"]},Rye={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},Pye={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},Iye={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},Oye={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},Fye={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},Lye={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},Bye={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","boolean","complex","fraction","index","matrix","string","unit"]},Uye={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},zye={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},kye={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},$ye={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},Hye={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},Gye={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},Vye={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},Wye={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},qye={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},jye={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},Xye={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},Yye={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},Zye={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},Kye={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},Qye={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},Jye={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},e1e={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},t1e={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},n1e={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},r1e={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},i1e={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},a1e={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},s1e={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},o1e={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},u1e={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},l1e={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},c1e={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},f1e={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},d1e={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},h1e={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},p1e={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},m1e={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},v1e={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},g1e={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},y1e={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},x1e={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},b1e={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},w1e={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},S1e={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},_1e={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenusa of a list with values. ",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},E1e={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},M1e={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},A1e={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},C1e={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},T1e={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},D1e={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},N1e={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},R1e={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},P1e={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},I1e={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},O1e={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},F1e={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},L1e={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},B1e={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},U1e={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},z1e={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},k1e={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},$1e={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},H1e={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},G1e={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},V1e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},W1e={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},q1e={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},j1e={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},X1e={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Y1e={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},Z1e={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},K1e={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},Q1e={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},J1e={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},exe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},txe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},nxe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},rxe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},ixe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},axe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},sxe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},oxe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},uxe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},lxe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},cxe={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},fxe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},dxe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},hxe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},pxe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},mxe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},vxe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},gxe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},yxe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},xxe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},bxe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},wxe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Sxe={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},_xe={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Exe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicant the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},Mxe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},Axe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},Cxe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},Txe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},Dxe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Nxe={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Rxe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Pxe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Ixe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},Oxe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},Fxe={name:"map",category:"Matrix",syntax:["map(x, callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array.",examples:["map([1, 2, 3], square)"],seealso:["filter","forEach"]},Lxe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},Bxe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},Uxe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},zxe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},kxe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},$xe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},Hxe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},Gxe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},Vxe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},Wxe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},qxe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},jxe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},Xxe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},Yxe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},Zxe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},Kxe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},Qxe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},Jxe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},ebe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},tbe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},nbe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},rbe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},ibe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},abe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},sbe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},obe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},ube={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},lbe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},cbe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},fbe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},dbe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},hbe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},pbe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},mbe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},vbe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},gbe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},ybe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},xbe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},bbe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},wbe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},Sbe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},_be={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},Ebe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},Mbe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},Abe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},Cbe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},Tbe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},Dbe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},Nbe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},Rbe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},Pbe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},Ibe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},Obe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},Fbe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},Lbe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},Bbe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemanns Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},Ube={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},zbe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},kbe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},$be={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},Hbe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},Gbe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},Vbe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},Wbe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probablity are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},qbe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},jbe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Xbe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},Ybe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},Zbe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},Kbe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},Qbe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},Jbe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},ewe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the hyperbolic arccotangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},twe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},nwe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the hyperbolic arccosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},rwe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},iwe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},awe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},swe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},owe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},uwe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},lwe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},cwe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},fwe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},dwe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},hwe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},pwe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},mwe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},vwe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},gwe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},ywe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},xwe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},bwe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},wwe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},Swe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},_we={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},Ewe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},Mwe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},Awe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},Cwe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},Twe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Dwe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},Nwe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},Rwe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},Pwe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Iwe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},Owe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},Fwe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","fraction","bignumber","string","format"]},Lwe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},Bwe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},Uwe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},zwe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},kwe={bignumber:Nye,boolean:Rye,complex:Pye,createUnit:Iye,fraction:Oye,index:Fye,matrix:Lye,number:Bye,sparse:Uye,splitUnit:zye,string:kye,unit:$ye,e:TB,E:TB,false:mye,i:vye,Infinity:gye,LN2:xye,LN10:yye,LOG2E:wye,LOG10E:bye,NaN:Sye,null:_ye,pi:DB,PI:DB,phi:Eye,SQRT1_2:Mye,SQRT2:Aye,tau:Cye,true:Tye,version:Dye,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Borh magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Borh radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:Wye,lsolve:jye,lsolveAll:Xye,lup:Yye,lusolve:Zye,leafCount:qye,polynomialRoot:Kye,resolve:e1e,simplify:t1e,simplifyConstant:n1e,simplifyCore:r1e,symbolicEqual:a1e,rationalize:Jye,slu:i1e,usolve:s1e,usolveAll:o1e,qr:Qye,abs:u1e,add:l1e,cbrt:c1e,ceil:f1e,cube:d1e,divide:h1e,dotDivide:p1e,dotMultiply:m1e,dotPow:v1e,exp:g1e,expm:y1e,expm1:x1e,fix:b1e,floor:w1e,gcd:S1e,hypot:_1e,lcm:M1e,log:A1e,log2:D1e,log1p:T1e,log10:C1e,mod:N1e,multiply:R1e,norm:P1e,nthRoot:I1e,nthRoots:O1e,pow:F1e,round:L1e,sign:B1e,sqrt:U1e,sqrtm:z1e,square:G1e,subtract:V1e,unaryMinus:W1e,unaryPlus:q1e,xgcd:j1e,invmod:E1e,bitAnd:X1e,bitNot:Y1e,bitOr:Z1e,bitXor:K1e,leftShift:Q1e,rightArithShift:J1e,rightLogShift:exe,bellNumbers:txe,catalan:nxe,composition:rxe,stirlingS2:ixe,config:Hye,import:Gye,typed:Vye,arg:axe,conj:sxe,re:uxe,im:oxe,evaluate:lxe,help:cxe,distance:fxe,intersect:dxe,and:hxe,not:pxe,or:mxe,xor:vxe,concat:yxe,count:xxe,cross:bxe,column:gxe,ctranspose:wxe,det:Sxe,diag:_xe,diff:Exe,dot:Mxe,getMatrixDataType:Nxe,identity:Rxe,filter:Cxe,flatten:Txe,forEach:Dxe,inv:Pxe,pinv:Ixe,eigs:Axe,kron:Oxe,matrixFromFunction:Bxe,matrixFromRows:Uxe,matrixFromColumns:Lxe,map:Fxe,ones:zxe,partitionSelect:kxe,range:$xe,resize:Gxe,reshape:Hxe,rotate:Vxe,rotationMatrix:Wxe,row:qxe,size:jxe,sort:Xxe,squeeze:Yxe,subset:Zxe,trace:Kxe,transpose:Qxe,zeros:Jxe,fft:ebe,ifft:tbe,sylvester:k1e,schur:$1e,lyap:H1e,solveODE:zwe,combinations:nbe,combinationsWithRep:rbe,factorial:ibe,gamma:abe,kldivergence:obe,lgamma:sbe,multinomial:ube,permutations:lbe,pickRandom:cbe,random:fbe,randomInt:dbe,compare:hbe,compareNatural:pbe,compareText:mbe,deepEqual:vbe,equal:gbe,equalText:ybe,larger:xbe,largerEq:bbe,smaller:wbe,smallerEq:Sbe,unequal:_be,setCartesian:Ebe,setDifference:Mbe,setDistinct:Abe,setIntersect:Cbe,setIsSubset:Tbe,setMultiplicity:Dbe,setPowerset:Nbe,setSize:Rbe,setSymDifference:Pbe,setUnion:Ibe,zpk2tf:Obe,freqz:Fbe,erf:Lbe,zeta:Bbe,cumsum:jbe,mad:Ube,max:zbe,mean:kbe,median:$be,min:Hbe,mode:Gbe,prod:Vbe,quantileSeq:Wbe,std:qbe,sum:Xbe,variance:Ybe,corr:Zbe,acos:Kbe,acosh:Qbe,acot:Jbe,acoth:ewe,acsc:twe,acsch:nwe,asec:rwe,asech:iwe,asin:awe,asinh:swe,atan:owe,atanh:lwe,atan2:uwe,cos:cwe,cosh:fwe,cot:dwe,coth:hwe,csc:pwe,csch:mwe,sec:vwe,sech:gwe,sin:ywe,sinh:xwe,tan:bwe,tanh:wwe,to:Swe,clone:Ewe,format:Mwe,bin:_we,oct:Lwe,hex:Cwe,isNaN:Dwe,isInteger:Twe,isNegative:Nwe,isNumeric:Rwe,hasNumericValue:Awe,isPositive:Pwe,isPrime:Iwe,isZero:Owe,print:Bwe,typeOf:Uwe,numeric:Fwe},NB="help",$we=["typed","mathWithTransform","Help"],Hwe=ie(NB,$we,t=>{var{typed:e,mathWithTransform:n,Help:r}=t;return e(NB,{any:function(a){var s,o=a;if(typeof a!="string"){for(s in n)if(St(n,s)&&a===n[s]){o=s;break}}var u=xa(kwe,o);if(!u){var l=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+l+'"')}return new r(u)}})}),RB="chain",Gwe=["typed","Chain"],Vwe=ie(RB,Gwe,t=>{var{typed:e,Chain:n}=t;return e(RB,{"":function(){return new n},any:function(i){return new n(i)}})}),PB="det",Wwe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],qwe=ie(PB,Wwe,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:i,divideScalar:a,isZero:s,unaryMinus:o}=t;return e(PB,{any:function(c){return Wt(c)},"Array | Matrix":function(c){var f;switch(Ft(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Wt(c);case 1:if(f[0]===1)return Wt(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+on(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+on(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+on(f)+")")}}});function u(l,c,f){if(c===1)return Wt(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((A,T)=>T),m=0;m<c;m++){var v=h[m];if(s(l[v][m])){var y=void 0;for(y=m+1;y<c;y++)if(!s(l[h[y]][m])){v=h[y],h[y]=h[m],h[m]=v,d=!d;break}if(y===c)return l[v][m]}for(var p=l[v][m],x=m===0?1:l[h[m-1]][m-1],g=m+1;g<c;g++)for(var S=h[g],E=m+1;E<c;E++)l[S][E]=a(r(i(l[S][E],p),i(l[S][m],l[v][E])),x)}var _=l[h[c-1]][c-1];return d?o(_):_}}),IB="inv",jwe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Xwe=ie(IB,jwe,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:s,det:o,identity:u,abs:l}=t;return e(IB,{"Array | Matrix":function(d){var h=Ft(d)?d.size():Yt(d);switch(h.length){case 1:if(h[0]===1)return Ft(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+on(h)+")");case 2:{var m=h[0],v=h[1];if(m===v)return Ft(d)?n(c(d.valueOf(),m,v),d.storage()):c(d,m,v);throw new RangeError("Matrix must be square (size: "+on(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+on(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,v,y,p,x;if(d===1){if(p=f[0][0],p===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,p)]]}else if(d===2){var g=o(f);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],g),r(s(f[0][1]),g)],[r(s(f[1][0]),g),r(f[0][0],g)]]}else{var S=f.concat();for(m=0;m<d;m++)S[m]=S[m].concat();for(var E=u(d).valueOf(),_=0;_<h;_++){var A=l(S[_][_]),T=_;for(m=_+1;m<d;)l(S[m][_])>A&&(A=l(S[m][_]),T=m),m++;if(A===0)throw Error("Cannot calculate inverse, determinant is zero");m=T,m!==_&&(x=S[_],S[_]=S[m],S[m]=x,x=E[_],E[_]=E[m],E[m]=x);var M=S[_],C=E[_];for(m=0;m<d;m++){var N=S[m],P=E[m];if(m!==_){if(N[_]!==0){for(y=r(s(N[_]),M[_]),v=_;v<h;v++)N[v]=i(N[v],a(y,M[v]));for(v=0;v<h;v++)P[v]=i(P[v],a(y,C[v]))}}else{for(y=M[_],v=_;v<h;v++)N[v]=r(N[v],y);for(v=0;v<h;v++)P[v]=r(P[v],y)}}}return E}}}),OB="pinv",Ywe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],Zwe=ie(OB,Ywe,t=>{var{typed:e,matrix:n,inv:r,deepEqual:i,equal:a,dotDivide:s,dot:o,ctranspose:u,divideScalar:l,multiply:c,add:f,Complex:d}=t;return e(OB,{"Array | Matrix":function(g){var S=Ft(g)?g.size():Yt(g);switch(S.length){case 1:return p(g)?u(g):S[0]===1?r(g):s(u(g),o(g,g));case 2:{if(p(g))return u(g);var E=S[0],_=S[1];if(E===_)try{return r(g)}catch(A){if(!(A instanceof Error&&A.message.match(/Cannot calculate inverse, determinant is zero/)))throw A}return Ft(g)?n(h(g.valueOf(),E,_),g.storage()):h(g,E,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+on(S)+")")}},any:function(g){return a(g,0)?Wt(g):l(1,g)}});function h(x,g,S){var{C:E,F:_}=v(x,g,S),A=c(r(c(u(E),E)),u(E)),T=c(u(_),r(c(_,u(_))));return c(T,A)}function m(x,g,S){for(var E=Wt(x),_=0,A=0;A<g;A++){if(S<=_)return E;for(var T=A;y(E[T][_]);)if(T++,g===T&&(T=A,_++,S===_))return E;[E[T],E[A]]=[E[A],E[T]];for(var M=E[A][_],C=0;C<S;C++)E[A][C]=s(E[A][C],M);for(var N=0;N<g;N++)if(N!==A){M=E[N][_];for(var P=0;P<S;P++)E[N][P]=f(E[N][P],c(-1,c(M,E[A][P])))}_++}return E}function v(x,g,S){var E=m(x,g,S),_=x.map((T,M)=>T.filter((C,N)=>N<g&&!y(o(E[N],E[N])))),A=E.filter((T,M)=>!y(o(E[M],E[M])));return{C:_,F:A}}function y(x){return a(f(x,d(1,1)),f(0,d(1,1)))}function p(x){return i(f(x,d(1,1)),f(c(x,0),d(1,1)))}});function Kwe(t){var{addScalar:e,subtract:n,flatten:r,multiply:i,multiplyScalar:a,divideScalar:s,sqrt:o,abs:u,bignumber:l,diag:c,size:f,reshape:d,inv:h,qr:m,usolve:v,usolveAll:y,equal:p,complex:x,larger:g,smaller:S,matrixFromColumns:E,dot:_}=t;function A(J,q,ae,be){var ue=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,pe=T(J,q,ae,be,ue);M(J,q,ae,be,ue,pe);var{values:Pe,C:Ce}=C(J,q,ae,be,ue);if(ue){var Ee=N(J,q,Ce,pe,Pe,ae,be);return{values:Pe,eigenvectors:Ee}}return{values:Pe}}function T(J,q,ae,be,ue){var pe=be==="BigNumber",Pe=be==="Complex",Ce=pe?l(0):0,Ee=pe?l(1):Pe?x(1):1,Oe=pe?l(1):1,ne=pe?l(10):2,Le=a(ne,ne),Fe;ue&&(Fe=Array(q).fill(Ee));for(var Q=!1;!Q;){Q=!0;for(var te=0;te<q;te++){for(var Me=Ce,re=Ce,V=0;V<q;V++)te!==V&&(Me=e(Me,u(J[V][te])),re=e(re,u(J[te][V])));if(!p(Me,0)&&!p(re,0)){for(var G=Oe,le=Me,_e=s(re,ne),W=a(re,ne);S(le,_e);)le=a(le,Le),G=a(G,ne);for(;g(le,W);)le=s(le,Le),G=s(G,ne);var Y=S(s(e(le,re),G),a(e(Me,re),.95));if(Y){Q=!1;for(var de=s(1,G),xe=0;xe<q;xe++)te!==xe&&(J[te][xe]=a(J[te][xe],de),J[xe][te]=a(J[xe][te],G));ue&&(Fe[te]=a(Fe[te],de))}}}}return ue?c(Fe):null}function M(J,q,ae,be,ue,pe){var Pe=be==="BigNumber",Ce=be==="Complex",Ee=Pe?l(0):Ce?x(0):0;Pe&&(ae=l(ae));for(var Oe=0;Oe<q-2;Oe++){for(var ne=0,Le=Ee,Fe=Oe+1;Fe<q;Fe++){var Q=J[Fe][Oe];S(u(Le),u(Q))&&(Le=Q,ne=Fe)}if(!S(u(Le),ae)){if(ne!==Oe+1){var te=J[ne];J[ne]=J[Oe+1],J[Oe+1]=te;for(var Me=0;Me<q;Me++){var re=J[Me][ne];J[Me][ne]=J[Me][Oe+1],J[Me][Oe+1]=re}if(ue){var V=pe[ne];pe[ne]=pe[Oe+1],pe[Oe+1]=V}}for(var G=Oe+2;G<q;G++){var le=s(J[G][Oe],Le);if(le!==0){for(var _e=0;_e<q;_e++)J[G][_e]=n(J[G][_e],a(le,J[Oe+1][_e]));for(var W=0;W<q;W++)J[W][Oe+1]=e(J[W][Oe+1],a(le,J[W][G]));if(ue)for(var Y=0;Y<q;Y++)pe[G][Y]=n(pe[G][Y],a(le,pe[Oe+1][Y]))}}}}return pe}function C(J,q,ae,be,ue){var pe=be==="BigNumber",Pe=be==="Complex",Ce=pe?l(1):Pe?x(1):1;pe&&(ae=l(ae));for(var Ee=Wt(J),Oe=[],ne=q,Le=[],Fe=ue?c(Array(q).fill(Ce)):void 0,Q=ue?c(Array(ne).fill(Ce)):void 0,te=0;te<=100;){te+=1;for(var Me=Ee[ne-1][ne-1],re=0;re<ne;re++)Ee[re][re]=n(Ee[re][re],Me);var{Q:V,R:G}=m(Ee);Ee=i(G,V);for(var le=0;le<ne;le++)Ee[le][le]=e(Ee[le][le],Me);if(ue&&(Q=i(Q,V)),ne===1||S(u(Ee[ne-1][ne-2]),ae)){te=0,Oe.push(Ee[ne-1][ne-1]),ue&&(Le.unshift([[1]]),L(Q,q),Fe=i(Fe,Q),ne>1&&(Q=c(Array(ne-1).fill(Ce)))),ne-=1,Ee.pop();for(var _e=0;_e<ne;_e++)Ee[_e].pop()}else if(ne===2||S(u(Ee[ne-2][ne-3]),ae)){te=0;var W=P(Ee[ne-2][ne-2],Ee[ne-2][ne-1],Ee[ne-1][ne-2],Ee[ne-1][ne-1]);Oe.push(...W),ue&&(Le.unshift(H(Ee[ne-2][ne-2],Ee[ne-2][ne-1],Ee[ne-1][ne-2],Ee[ne-1][ne-1],W[0],W[1],ae,be)),L(Q,q),Fe=i(Fe,Q),ne>2&&(Q=c(Array(ne-2).fill(Ce)))),ne-=2,Ee.pop(),Ee.pop();for(var Y=0;Y<ne;Y++)Ee[Y].pop(),Ee[Y].pop()}if(ne===0)break}if(Oe.sort((Ne,Be)=>+n(u(Ne),u(Be))),te>100){var de=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+Oe.join(", "));throw de.values=Oe,de.vectors=[],de}var xe=ue?i(Fe,z(Le,q)):void 0;return{values:Oe,C:xe}}function N(J,q,ae,be,ue,pe,Pe){var Ce=h(ae),Ee=i(Ce,J,ae),Oe=Pe==="BigNumber",ne=Pe==="Complex",Le=Oe?l(0):ne?x(0):0,Fe=Oe?l(1):ne?x(1):1,Q=[],te=[];for(var Me of ue){var re=O(Q,Me,p);re===-1?(Q.push(Me),te.push(1)):te[re]+=1}for(var V=[],G=Q.length,le=Array(q).fill(Le),_e=c(Array(q).fill(Fe)),W=function(){var xe=Q[Y],Ne=n(Ee,i(xe,_e)),Be=y(Ne,le);for(Be.shift();Be.length<te[Y];){var $e=F(Ne,q,Be,pe,Pe);if($e===null)break;Be.push($e)}var Ie=i(h(be),ae);Be=Be.map(Ye=>i(Ie,Ye)),V.push(...Be.map(Ye=>({value:xe,vector:r(Ye)})))},Y=0;Y<G;Y++)W();return V}function P(J,q,ae,be){var ue=e(J,be),pe=n(a(J,be),a(q,ae)),Pe=a(ue,.5),Ce=a(o(n(a(ue,ue),a(4,pe))),.5);return[e(Pe,Ce),n(Pe,Ce)]}function H(J,q,ae,be,ue,pe,Pe,Ce){var Ee=Ce==="BigNumber",Oe=Ce==="Complex",ne=Ee?l(0):Oe?x(0):0,Le=Ee?l(1):Oe?x(1):1;if(S(u(ae),Pe))return[[Le,ne],[ne,Le]];if(g(u(n(ue,pe)),Pe))return[[n(ue,be),n(pe,be)],[ae,ae]];var Fe=n(J,ue),Q=n(be,ue);return S(u(q),Pe)&&S(u(Q),Pe)?[[Fe,Le],[ae,ne]]:[[q,ne],[Q,Le]]}function L(J,q){for(var ae=0;ae<J.length;ae++)J[ae].push(...Array(q-J[ae].length).fill(0));for(var be=J.length;be<q;be++)J.push(Array(q).fill(0)),J[be][be]=1;return J}function z(J,q){for(var ae=[],be=0;be<q;be++)ae[be]=Array(q).fill(0);var ue=0;for(var pe of J){for(var Pe=pe.length,Ce=0;Ce<Pe;Ce++)for(var Ee=0;Ee<Pe;Ee++)ae[ue+Ce][ue+Ee]=pe[Ce][Ee];ue+=Pe}return ae}function O(J,q,ae){for(var be=0;be<J.length;be++)if(ae(J[be],q))return be;return-1}function F(J,q,ae,be,ue){for(var pe=ue==="BigNumber"?l(1e3):1e3,Pe,Ce=0;Ce<5;++Ce){Pe=U(q,ae,ue);try{Pe=v(J,Pe)}catch{continue}if(g(j(Pe),pe))break}if(Ce>=5)return null;for(Ce=0;;){var Ee=v(J,Pe);if(S(j(I(Pe,[Ee])),be))break;if(++Ce>=10)return null;Pe=ee(Ee)}return Pe}function U(J,q,ae){var be=ae==="BigNumber",ue=ae==="Complex",pe=Array(J).fill(0).map(Pe=>2*Math.random()-1);return be&&(pe=pe.map(Pe=>l(Pe))),ue&&(pe=pe.map(Pe=>x(Pe))),pe=I(pe,q),ee(pe,ae)}function I(J,q){var ae=f(J);for(var be of q)be=d(be,ae),J=n(J,i(s(_(be,J),_(be,be)),be));return J}function j(J){return u(o(_(J,J)))}function ee(J,q){var ae=q==="BigNumber",be=q==="Complex",ue=ae?l(1):be?x(1):1;return i(s(ue,j(J)),J)}return A}function Qwe(t){var{config:e,addScalar:n,subtract:r,abs:i,atan:a,cos:s,sin:o,multiplyScalar:u,inv:l,bignumber:c,multiply:f,add:d}=t;function h(M,C){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.epsilon,P=arguments.length>3?arguments[3]:void 0,H=arguments.length>4?arguments[4]:void 0;if(P==="number")return m(M,N,H);if(P==="BigNumber")return v(M,N,H);throw TypeError("Unsupported data type: "+P)}function m(M,C,N){var P=M.length,H=Math.abs(C/P),L,z;if(N){z=new Array(P);for(var O=0;O<P;O++)z[O]=Array(P).fill(0),z[O][O]=1}for(var F=_(M);Math.abs(F[1])>=Math.abs(H);){var U=F[0][0],I=F[0][1];L=y(M[U][U],M[I][I],M[U][I]),M=E(M,L,U,I),N&&(z=x(z,L,U,I)),F=_(M)}for(var j=Array(P).fill(0),ee=0;ee<P;ee++)j[ee]=M[ee][ee];return T(Wt(j),z,N)}function v(M,C,N){var P=M.length,H=i(C/P),L,z;if(N){z=new Array(P);for(var O=0;O<P;O++)z[O]=Array(P).fill(0),z[O][O]=1}for(var F=A(M);i(F[1])>=i(H);){var U=F[0][0],I=F[0][1];L=p(M[U][U],M[I][I],M[U][I]),M=S(M,L,U,I),N&&(z=g(z,L,U,I)),F=A(M)}for(var j=Array(P).fill(0),ee=0;ee<P;ee++)j[ee]=M[ee][ee];return T(Wt(j),z,N)}function y(M,C,N){var P=C-M;return Math.abs(P)<=e.epsilon?Math.PI/4:.5*Math.atan(2*N/(C-M))}function p(M,C,N){var P=r(C,M);return i(P)<=e.epsilon?c(-1).acos().div(4):u(.5,a(f(2,N,l(P))))}function x(M,C,N,P){for(var H=M.length,L=Math.cos(C),z=Math.sin(C),O=Array(H).fill(0),F=Array(H).fill(0),U=0;U<H;U++)O[U]=L*M[U][N]-z*M[U][P],F[U]=z*M[U][N]+L*M[U][P];for(var I=0;I<H;I++)M[I][N]=O[I],M[I][P]=F[I];return M}function g(M,C,N,P){for(var H=M.length,L=s(C),z=o(C),O=Array(H).fill(c(0)),F=Array(H).fill(c(0)),U=0;U<H;U++)O[U]=r(u(L,M[U][N]),u(z,M[U][P])),F[U]=n(u(z,M[U][N]),u(L,M[U][P]));for(var I=0;I<H;I++)M[I][N]=O[I],M[I][P]=F[I];return M}function S(M,C,N,P){for(var H=M.length,L=c(s(C)),z=c(o(C)),O=u(L,L),F=u(z,z),U=Array(H).fill(c(0)),I=Array(H).fill(c(0)),j=f(c(2),L,z,M[N][P]),ee=n(r(u(O,M[N][N]),j),u(F,M[P][P])),J=d(u(F,M[N][N]),j,u(O,M[P][P])),q=0;q<H;q++)U[q]=r(u(L,M[N][q]),u(z,M[P][q])),I[q]=n(u(z,M[N][q]),u(L,M[P][q]));M[N][N]=ee,M[P][P]=J,M[N][P]=c(0),M[P][N]=c(0);for(var ae=0;ae<H;ae++)ae!==N&&ae!==P&&(M[N][ae]=U[ae],M[ae][N]=U[ae],M[P][ae]=I[ae],M[ae][P]=I[ae]);return M}function E(M,C,N,P){for(var H=M.length,L=Math.cos(C),z=Math.sin(C),O=L*L,F=z*z,U=Array(H).fill(0),I=Array(H).fill(0),j=O*M[N][N]-2*L*z*M[N][P]+F*M[P][P],ee=F*M[N][N]+2*L*z*M[N][P]+O*M[P][P],J=0;J<H;J++)U[J]=L*M[N][J]-z*M[P][J],I[J]=z*M[N][J]+L*M[P][J];M[N][N]=j,M[P][P]=ee,M[N][P]=0,M[P][N]=0;for(var q=0;q<H;q++)q!==N&&q!==P&&(M[N][q]=U[q],M[q][N]=U[q],M[P][q]=I[q],M[q][P]=I[q]);return M}function _(M){for(var C=M.length,N=0,P=[0,1],H=0;H<C;H++)for(var L=H+1;L<C;L++)Math.abs(N)<Math.abs(M[H][L])&&(N=Math.abs(M[H][L]),P=[H,L]);return[P,N]}function A(M){for(var C=M.length,N=0,P=[0,1],H=0;H<C;H++)for(var L=H+1;L<C;L++)i(N)<i(M[H][L])&&(N=i(M[H][L]),P=[H,L]);return[P,N]}function T(M,C,N){var P=M.length,H=Array(P),L;if(N){L=Array(P);for(var z=0;z<P;z++)L[z]=Array(P)}for(var O=0;O<P;O++){for(var F=0,U=M[0],I=0;I<M.length;I++)i(M[I])<i(U)&&(F=I,U=M[F]);if(H[O]=M.splice(F,1)[0],N)for(var j=0;j<P;j++)L[O][j]=C[j][F],C[j].splice(F,1)}if(!N)return{values:H};var ee=L.map((J,q)=>({value:H[q],vector:J}));return{values:H,eigenvectors:ee}}return h}var Jwe="eigs",eSe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],tSe=ie(Jwe,eSe,t=>{var{config:e,typed:n,matrix:r,addScalar:i,subtract:a,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,divideScalar:d,inv:h,bignumber:m,multiply:v,add:y,larger:p,column:x,flatten:g,number:S,complex:E,sqrt:_,diag:A,size:T,reshape:M,qr:C,usolve:N,usolveAll:P,im:H,re:L,smaller:z,matrixFromColumns:O,dot:F}=t,U=Qwe({config:e,addScalar:i,subtract:a,column:x,flatten:g,equal:s,abs:o,atan:u,cos:l,sin:c,multiplyScalar:f,inv:h,bignumber:m,complex:E,multiply:v,add:y}),I=Kwe({config:e,addScalar:i,subtract:a,multiply:v,multiplyScalar:f,flatten:g,divideScalar:d,sqrt:_,abs:o,bignumber:m,diag:A,size:T,reshape:M,qr:C,inv:h,usolve:N,usolveAll:P,equal:s,complex:E,larger:p,smaller:z,matrixFromColumns:O,dot:F});return n("eigs",{Array:function(pe){return j(r(pe))},"Array, number|BigNumber":function(pe,Pe){return j(r(pe),{precision:Pe})},"Array, Object"(ue,pe){return j(r(ue),pe)},Matrix:function(pe){return j(pe,{matricize:!0})},"Matrix, number|BigNumber":function(pe,Pe){return j(pe,{precision:Pe,matricize:!0})},"Matrix, Object":function(pe,Pe){var Ce={matricize:!0};return hn(Ce,Pe),j(pe,Ce)}});function j(ue){var pe,Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce="eigenvectors"in Pe?Pe.eigenvectors:!0,Ee=(pe=Pe.precision)!==null&&pe!==void 0?pe:e.epsilon,Oe=ee(ue,Ee,Ce);return Pe.matricize&&(Oe.values=r(Oe.values),Ce&&(Oe.eigenvectors=Oe.eigenvectors.map(ne=>{var{value:Le,vector:Fe}=ne;return{value:Le,vector:r(Fe)}}))),Ce&&Object.defineProperty(Oe,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),Oe}function ee(ue,pe,Pe){var Ce=ue.toArray(),Ee=ue.size();if(Ee.length!==2||Ee[0]!==Ee[1])throw new RangeError("Matrix must be square (size: ".concat(on(Ee),")"));var Oe=Ee[0];if(q(Ce,Oe,pe)&&(ae(Ce,Oe),J(Ce,Oe,pe))){var ne=be(ue,Ce,Oe);return U(Ce,Oe,pe,ne,Pe)}var Le=be(ue,Ce,Oe);return I(Ce,Oe,pe,Le,Pe)}function J(ue,pe,Pe){for(var Ce=0;Ce<pe;Ce++)for(var Ee=Ce;Ee<pe;Ee++)if(p(m(o(a(ue[Ce][Ee],ue[Ee][Ce]))),Pe))return!1;return!0}function q(ue,pe,Pe){for(var Ce=0;Ce<pe;Ce++)for(var Ee=0;Ee<pe;Ee++)if(p(m(o(H(ue[Ce][Ee]))),Pe))return!1;return!0}function ae(ue,pe){for(var Pe=0;Pe<pe;Pe++)for(var Ce=0;Ce<pe;Ce++)ue[Pe][Ce]=L(ue[Pe][Ce])}function be(ue,pe,Pe){var Ce=ue.datatype();if(Ce==="number"||Ce==="BigNumber"||Ce==="Complex")return Ce;for(var Ee=!1,Oe=!1,ne=!1,Le=0;Le<Pe;Le++)for(var Fe=0;Fe<Pe;Fe++){var Q=pe[Le][Fe];if(Kt(Q)||a0(Q))Ee=!0;else if(Qt(Q))Oe=!0;else if(qu(Q))ne=!0;else throw TypeError("Unsupported type in Matrix: "+Jn(Q))}if(Oe&&ne&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ne){for(var te=0;te<Pe;te++)for(var Me=0;Me<Pe;Me++)pe[te][Me]=E(pe[te][Me]);return"Complex"}if(Oe){for(var re=0;re<Pe;re++)for(var V=0;V<Pe;V++)pe[re][V]=m(pe[re][V]);return"BigNumber"}if(Ee){for(var G=0;G<Pe;G++)for(var le=0;le<Pe;le++)pe[G][le]=S(pe[G][le]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),FB="expm",nSe=["typed","abs","add","identity","inv","multiply"],rSe=ie(FB,nSe,t=>{var{typed:e,abs:n,add:r,identity:i,inv:a,multiply:s}=t;return e(FB,{Matrix:function(f){var d=f.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+on(d)+")");for(var h=d[0],m=1e-15,v=o(f),y=u(v,m),p=y.q,x=y.j,g=s(f,Math.pow(2,-x)),S=i(h),E=i(h),_=1,A=g,T=-1,M=1;M<=p;M++)M>1&&(A=s(A,g),T=-T),_=_*(p-M+1)/((2*p-M+1)*M),S=r(S,s(_,A)),E=r(E,s(_*T,A));for(var C=s(a(E),S),N=0;N<x;N++)C=s(C,C);return Sf(f)?f.createSparseMatrix(C):C}});function o(c){for(var f=c.size()[0],d=0,h=0;h<f;h++){for(var m=0,v=0;v<f;v++)m+=n(c.get([h,v]));d=Math.max(m,d)}return d}function u(c,f){for(var d=30,h=0;h<d;h++)for(var m=0;m<=h;m++){var v=h-m;if(l(c,m,v)<f)return{q:m,j:v}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function l(c,f,d){for(var h=1,m=2;m<=f;m++)h*=m;for(var v=h,y=f+1;y<=2*f;y++)v*=y;var p=v*(2*f+1);return 8*Math.pow(c/Math.pow(2,d),2*f)*h*h/(v*p)}}),LB="sqrtm",iSe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],aSe=ie(LB,iSe,t=>{var{typed:e,abs:n,add:r,multiply:i,map:a,sqrt:s,subtract:o,inv:u,size:l,max:c,identity:f}=t,d=1e3,h=1e-6;function m(v){var y,p=0,x=v,g=f(l(v));do{var S=x;if(x=i(.5,r(S,u(g))),g=i(.5,r(g,u(S))),y=c(n(o(x,S))),y>h&&++p>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(y>h);return x}return e(LB,{"Array | Matrix":function(y){var p=Ft(y)?y.size():Yt(y);switch(p.length){case 1:if(p[0]===1)return a(y,s);throw new RangeError("Matrix must be square (size: "+on(p)+")");case 2:{var x=p[0],g=p[1];if(x===g)return m(y);throw new RangeError("Matrix must be square (size: "+on(p)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+on(p)+")")}}})}),BB="sylvester",sSe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],oSe=ie(BB,sSe,t=>{var{typed:e,schur:n,matrixFromColumns:r,matrix:i,multiply:a,range:s,concat:o,transpose:u,index:l,subset:c,add:f,subtract:d,identity:h,lusolve:m,abs:v}=t;return e(BB,{"Matrix, Matrix, Matrix":y,"Array, Matrix, Matrix":function(x,g,S){return y(i(x),g,S)},"Array, Array, Matrix":function(x,g,S){return y(i(x),i(g),S)},"Array, Matrix, Array":function(x,g,S){return y(i(x),g,i(S))},"Matrix, Array, Matrix":function(x,g,S){return y(x,i(g),S)},"Matrix, Array, Array":function(x,g,S){return y(x,i(g),i(S))},"Matrix, Matrix, Array":function(x,g,S){return y(x,g,i(S))},"Array, Array, Array":function(x,g,S){return y(i(x),i(g),i(S)).toArray()}});function y(p,x,g){for(var S=x.size()[0],E=p.size()[0],_=n(p),A=_.T,T=_.U,M=n(a(-1,x)),C=M.T,N=M.U,P=a(a(u(T),g),N),H=s(0,E),L=[],z=(ne,Le)=>o(ne,Le,1),O=(ne,Le)=>o(ne,Le,0),F=0;F<S;F++)if(F<S-1&&v(c(C,l(F+1,F)))>1e-5){for(var U=O(c(P,l(H,F)),c(P,l(H,F+1))),I=0;I<F;I++)U=f(U,O(a(L[I],c(C,l(I,F))),a(L[I],c(C,l(I,F+1)))));var j=a(h(E),a(-1,c(C,l(F,F)))),ee=a(h(E),a(-1,c(C,l(F+1,F)))),J=a(h(E),a(-1,c(C,l(F,F+1)))),q=a(h(E),a(-1,c(C,l(F+1,F+1)))),ae=O(z(f(A,j),ee),z(J,f(A,q))),be=m(ae,U);L[F]=be.subset(l(s(0,E),0)),L[F+1]=be.subset(l(s(E,2*E),0)),F++}else{for(var ue=c(P,l(H,F)),pe=0;pe<F;pe++)ue=f(ue,a(L[pe],c(C,l(pe,F))));var Pe=c(C,l(F,F)),Ce=d(A,a(Pe,h(E)));L[F]=m(Ce,ue)}var Ee=i(r(...L)),Oe=a(T,a(Ee,u(N)));return Oe}}),UB="schur",uSe=["typed","matrix","identity","multiply","qr","norm","subtract"],lSe=ie(UB,uSe,t=>{var{typed:e,matrix:n,identity:r,multiply:i,qr:a,norm:s,subtract:o}=t;return e(UB,{Array:function(c){var f=u(n(c));return{U:f.U.valueOf(),T:f.T.valueOf()}},Matrix:function(c){return u(c)}});function u(l){var c=l.size()[0],f=l,d=r(c),h=0,m;do{m=f;var v=a(f),y=v.Q,p=v.R;if(f=i(p,y),d=i(d,y),h++>100)break}while(s(o(f,m))>1e-4);return{U:d,T:f}}}),zB="lyap",cSe=["typed","matrix","sylvester","multiply","transpose"],fSe=ie(zB,cSe,t=>{var{typed:e,matrix:n,sylvester:r,multiply:i,transpose:a}=t;return e(zB,{"Matrix, Matrix":function(o,u){return r(o,a(o),i(-1,u))},"Array, Matrix":function(o,u){return r(n(o),a(n(o)),i(-1,u))},"Matrix, Array":function(o,u){return r(o,a(n(o)),n(i(-1,u)))},"Array, Array":function(o,u){return r(n(o),a(n(o)),n(i(-1,u))).toArray()}})}),dSe="divide",hSe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],pSe=ie(dSe,hSe,t=>{var{typed:e,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:s}=t,o=Pi({typed:e,equalScalar:i}),u=Oo({typed:e});return e("divide",Y9({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,a,!1)},"SparseMatrix, any":function(c,f){return o(c,f,a,!1)},"Array, any":function(c,f){return u(n(c),f,a,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},a.signatures))}),kB="distance",mSe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],vSe=ie(kB,mSe,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:s,sqrt:o,abs:u}=t;return e(kB,{"Array, Array, Array":function(E,_,A){if(E.length===2&&_.length===2&&A.length===2){if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(s(_,A))throw new TypeError("LinePoint1 should not be same with LinePoint2");var T=r(A[1],_[1]),M=r(_[0],A[0]),C=r(i(A[0],_[1]),i(_[0],A[1]));return y(E[0],E[1],T,M,C)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(E,_,A){if(Object.keys(E).length===2&&Object.keys(_).length===2&&Object.keys(A).length===2){if(!c(E))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(s(m(_),m(A)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in E&&"pointY"in E&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in A&&"lineTwoPtY"in A){var T=r(A.lineTwoPtY,_.lineOnePtY),M=r(_.lineOnePtX,A.lineTwoPtX),C=r(i(A.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,A.lineTwoPtY));return y(E.pointX,E.pointY,T,M,C)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(E,_){if(E.length===2&&_.length===3){if(!c(E))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return y(E[0],E[1],_[0],_[1],_[2])}else if(E.length===3&&_.length===6){if(!f(E))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!h(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return p(E[0],E[1],E[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(E.length===_.length&&E.length>0){if(!d(E))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(E,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(E,_){if(Object.keys(E).length===2&&Object.keys(_).length===3){if(!c(E))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in E&&"pointY"in E&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return y(E.pointX,E.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===3&&Object.keys(_).length===6){if(!f(E))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in E&&"pointY"in E&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return p(E.pointX,E.pointY,E.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===2&&Object.keys(_).length===2){if(!c(E))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in E&&"pointOneY"in E&&"pointTwoX"in _&&"pointTwoY"in _)return x([E.pointOneX,E.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(E).length===3&&Object.keys(_).length===3){if(!f(E))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in E&&"pointOneY"in E&&"pointOneZ"in E&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return x([E.pointOneX,E.pointOneY,E.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(E){if(!v(E))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return g(E)}});function l(S){return typeof S=="number"||Qt(S)}function c(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])}function f(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])}function d(S){return Array.isArray(S)||(S=m(S)),S.every(l)}function h(S){return S.constructor!==Array&&(S=m(S)),l(S[0])&&l(S[1])&&l(S[2])&&l(S[3])&&l(S[4])&&l(S[5])}function m(S){for(var E=Object.keys(S),_=[],A=0;A<E.length;A++)_.push(S[E[A]]);return _}function v(S){if(S[0].length===2&&l(S[0][0])&&l(S[0][1])){if(S.some(E=>E.length!==2||!l(E[0])||!l(E[1])))return!1}else if(S[0].length===3&&l(S[0][0])&&l(S[0][1])&&l(S[0][2])){if(S.some(E=>E.length!==3||!l(E[0])||!l(E[1])||!l(E[2])))return!1}else return!1;return!0}function y(S,E,_,A,T){var M=u(n(n(i(_,S),i(A,E)),T)),C=o(n(i(_,_),i(A,A)));return a(M,C)}function p(S,E,_,A,T,M,C,N,P){var H=[r(i(r(T,E),P),i(r(M,_),N)),r(i(r(M,_),C),i(r(A,S),P)),r(i(r(A,S),N),i(r(T,E),C))];H=o(n(n(i(H[0],H[0]),i(H[1],H[1])),i(H[2],H[2])));var L=o(n(n(i(C,C),i(N,N)),i(P,P)));return a(H,L)}function x(S,E){for(var _=S.length,A=0,T=0,M=0;M<_;M++)T=r(S[M],E[M]),A=n(i(T,T),A);return o(A)}function g(S){for(var E=[],_=[],A=[],T=0;T<S.length-1;T++)for(var M=T+1;M<S.length;M++)S[0].length===2?(_=[S[T][0],S[T][1]],A=[S[M][0],S[M][1]]):S[0].length===3&&(_=[S[T][0],S[T][1],S[T][2]],A=[S[M][0],S[M][1],S[M][2]]),E.push(x(_,A));return E}}),gSe="intersect",ySe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],xSe=ie(gSe,ySe,t=>{var{typed:e,config:n,abs:r,add:i,addScalar:a,matrix:s,multiply:o,multiplyScalar:u,divideScalar:l,subtract:c,smaller:f,equalScalar:d,flatten:h,isZero:m,isNumeric:v}=t;return e("intersect",{"Array, Array, Array":y,"Array, Array, Array, Array":p,"Matrix, Matrix, Matrix":function(N,P,H){var L=y(N.valueOf(),P.valueOf(),H.valueOf());return L===null?null:s(L)},"Matrix, Matrix, Matrix, Matrix":function(N,P,H,L){var z=p(N.valueOf(),P.valueOf(),H.valueOf(),L.valueOf());return z===null?null:s(z)}});function y(C,N,P){if(C=x(C),N=x(N),P=x(P),!S(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!E(P))throw new TypeError("Array with 4 numbers expected as third argument");return M(C[0],C[1],C[2],N[0],N[1],N[2],P[0],P[1],P[2],P[3])}function p(C,N,P,H){if(C=x(C),N=x(N),P=x(P),H=x(H),C.length===2){if(!g(C))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!g(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!g(P))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!g(H))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(C,N,P,H)}else if(C.length===3){if(!S(C))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!S(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!S(P))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!S(H))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return T(C[0],C[1],C[2],N[0],N[1],N[2],P[0],P[1],P[2],H[0],H[1],H[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(C){return C.length===1?C[0]:C.length>1&&Array.isArray(C[0])&&C.every(N=>Array.isArray(N)&&N.length===1)?h(C):C}function g(C){return C.length===2&&v(C[0])&&v(C[1])}function S(C){return C.length===3&&v(C[0])&&v(C[1])&&v(C[2])}function E(C){return C.length===4&&v(C[0])&&v(C[1])&&v(C[2])&&v(C[3])}function _(C,N,P,H){var L=C,z=P,O=c(L,N),F=c(z,H),U=c(u(O[0],F[1]),u(F[0],O[1]));if(m(U)||f(r(U),n.epsilon))return null;var I=u(F[0],L[1]),j=u(F[1],L[0]),ee=u(F[0],z[1]),J=u(F[1],z[0]),q=l(a(c(c(I,j),ee),J),U);return i(o(O,q),L)}function A(C,N,P,H,L,z,O,F,U,I,j,ee){var J=u(c(C,N),c(P,H)),q=u(c(L,z),c(O,F)),ae=u(c(U,I),c(j,ee));return a(a(J,q),ae)}function T(C,N,P,H,L,z,O,F,U,I,j,ee){var J=A(C,O,I,O,N,F,j,F,P,U,ee,U),q=A(I,O,H,C,j,F,L,N,ee,U,z,P),ae=A(C,O,H,C,N,F,L,N,P,U,z,P),be=A(I,O,I,O,j,F,j,F,ee,U,ee,U),ue=A(H,C,H,C,L,N,L,N,z,P,z,P),pe=c(u(J,q),u(ae,be)),Pe=c(u(ue,be),u(q,q));if(m(Pe))return null;var Ce=l(pe,Pe),Ee=l(a(J,u(Ce,q)),be),Oe=a(C,u(Ce,c(H,C))),ne=a(N,u(Ce,c(L,N))),Le=a(P,u(Ce,c(z,P))),Fe=a(O,u(Ee,c(I,O))),Q=a(F,u(Ee,c(j,F))),te=a(U,u(Ee,c(ee,U)));return d(Oe,Fe)&&d(ne,Q)&&d(Le,te)?[Oe,ne,Le]:null}function M(C,N,P,H,L,z,O,F,U,I){var j=u(C,O),ee=u(H,O),J=u(N,F),q=u(L,F),ae=u(P,U),be=u(z,U),ue=c(c(c(I,j),J),ae),pe=c(c(c(a(a(ee,q),be),j),J),ae),Pe=l(ue,pe),Ce=a(C,u(Pe,c(H,C))),Ee=a(N,u(Pe,c(L,N))),Oe=a(P,u(Pe,c(z,P)));return[Ce,Ee,Oe]}}),$B="sum",bSe=["typed","config","add","numeric"],qH=ie($B,bSe,t=>{var{typed:e,config:n,add:r,numeric:i}=t;return e($B,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":s,"...":function(u){if(Rp(u))throw new TypeError("Scalar values expected in function sum");return a(u)}});function a(o){var u;return tl(o,function(l){try{u=u===void 0?l:r(u,l)}catch(c){throw Sa(c,"sum",l)}}),u===void 0&&(u=i(0,n.number)),typeof u=="string"&&(u=i(u,n.number)),u}function s(o,u){try{var l=Jw(o,u,r);return l}catch(c){throw Sa(c,"sum")}}}),X1="cumsum",wSe=["typed","add","unaryPlus"],jH=ie(X1,wSe,t=>{var{typed:e,add:n,unaryPlus:r}=t;return e(X1,{Array:i,Matrix:function(l){return l.create(i(l.valueOf()))},"Array, number | BigNumber":s,"Matrix, number | BigNumber":function(l,c){return l.create(s(l.valueOf(),c))},"...":function(l){if(Rp(l))throw new TypeError("All values expected to be scalar in function cumsum");return i(l)}});function i(u){try{return a(u)}catch(l){throw Sa(l,X1)}}function a(u){if(u.length===0)return[];for(var l=[r(u[0])],c=1;c<u.length;++c)l.push(n(l[c-1],u[c]));return l}function s(u,l){var c=Yt(u);if(l<0||l>=c.length)throw new Po(l,c.length);try{return o(u,l)}catch(f){throw Sa(f,X1)}}function o(u,l){var c,f,d;if(l<=0){var h=u[0][0];if(Array.isArray(h)){for(d=A7(u),f=[],c=0;c<d.length;c++)f[c]=o(d[c],l-1);return f}else return a(u)}else{for(f=[],c=0;c<u.length;c++)f[c]=o(u[c],l-1);return f}}}),HB="mean",SSe=["typed","add","divide"],XH=ie(HB,SSe,t=>{var{typed:e,add:n,divide:r}=t;return e(HB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Rp(o))throw new TypeError("Scalar values expected in function mean");return a(o)}});function i(s,o){try{var u=Jw(s,o,n),l=Array.isArray(s)?Yt(s):s.size();return r(u,l[o])}catch(c){throw Sa(c,"mean")}}function a(s){var o,u=0;if(tl(s,function(l){try{o=o===void 0?l:n(o,l),u++}catch(c){throw Sa(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(o,u)}}),GB="median",_Se=["typed","add","divide","compare","partitionSelect"],ESe=ie(GB,_Se,t=>{var{typed:e,add:n,divide:r,compare:i,partitionSelect:a}=t;function s(l){try{l=Pn(l.valueOf());var c=l.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var f=c/2-1,d=a(l,f+1),h=l[f],m=0;m<f;++m)i(l[m],h)>0&&(h=l[m]);return u(h,d)}else{var v=a(l,(c-1)/2);return o(v)}}catch(y){throw Sa(y,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),u=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,f){return r(n(c,f),2)}});return e(GB,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(c,f){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Rp(c))throw new TypeError("Scalar values expected in function median");return s(c)}})}),VB="mad",MSe=["typed","abs","map","median","subtract"],ASe=ie(VB,MSe,t=>{var{typed:e,abs:n,map:r,median:i,subtract:a}=t;return e(VB,{"Array | Matrix":s,"...":function(u){return s(u)}});function s(o){if(o=Pn(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var u=i(o);return i(r(o,function(l){return n(a(l,u))}))}catch(l){throw l instanceof TypeError&&l.message.indexOf("median")!==-1?new TypeError(l.message.replace("median","mad")):Sa(l,"mad")}}}),vM="unbiased",WB="variance",CSe=["typed","add","subtract","multiply","divide","apply","isNaN"],YH=ie(WB,CSe,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,apply:s,isNaN:o}=t;return e(WB,{"Array | Matrix":function(f){return u(f,vM)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,vM)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,vM)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(tl(c,function(y){try{d=d===void 0?y:n(d,y),h++}catch(p){throw Sa(p,"variance",y)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=a(d,h);if(d=void 0,tl(c,function(y){var p=r(y,m);d=d===void 0?i(p,p):n(d,i(p,p))}),o(d))return d;switch(f){case"uncorrected":return a(d,h);case"biased":return a(d,h+1);case"unbiased":{var v=Qt(d)?d.mul(0):0;return h===1?v:a(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>u(h,d))}catch(h){throw Sa(h,"variance")}}}),qB="quantileSeq",TSe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],ZH=ie(qB,TSe,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=LD({typed:e,isInteger:l});return e(qB,{"Array | Matrix, number | BigNumber":(x,g)=>v(x,g,!1),"Array | Matrix, number | BigNumber, number":(x,g,S)=>m(x,g,!1,S,v),"Array | Matrix, number | BigNumber, boolean":v,"Array | Matrix, number | BigNumber, boolean, number":(x,g,S,E)=>m(x,g,S,E,v),"Array | Matrix, Array | Matrix":(x,g)=>y(x,g,!1),"Array | Matrix, Array | Matrix, number":(x,g,S)=>m(x,g,!1,S,y),"Array | Matrix, Array | Matrix, boolean":y,"Array | Matrix, Array | Matrix, boolean, number":(x,g,S,E)=>m(x,g,S,E,y)});function m(x,g,S,E,_){return h(x,E,A=>_(A,g,S))}function v(x,g,S){var E,_=x.valueOf();if(c(g,0))throw new Error("N/prob must be non-negative");if(f(g,1))return Kt(g)?p(_,g,S):n(p(_,g,S));if(d(g,1)){if(!l(g))throw new Error("N must be a positive integer");if(d(g,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var A=r(g,1);E=[];for(var T=0;c(T,g);T++){var M=a(T+1,A);E.push(p(_,M,S))}return Kt(g)?E:n(E)}}function y(x,g,S){for(var E=x.valueOf(),_=g.valueOf(),A=[],T=0;T<_.length;++T)A.push(p(E,_[T],S));return A}function p(x,g,S){var E=Pn(x),_=E.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var A=Kt(g)?g*(_-1):g.times(_-1),T=Kt(g)?Math.floor(A):A.floor().toNumber(),M=Kt(g)?A%1:A.minus(T);if(l(A))return S?E[A]:o(E,Kt(g)?A:A.valueOf());var C,N;if(S)C=E[T],N=E[T+1];else{N=o(E,T+1),C=E[T];for(var P=0;P<T;++P)u(E[P],C)>0&&(C=E[P])}return r(s(C,i(1,M)),s(N,M))}}),jB="std",DSe=["typed","map","sqrt","variance"],KH=ie(jB,DSe,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t;return e(jB,{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(o){return a(o)}});function a(s,o){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return Zs(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.indexOf(" variance")!==-1?new TypeError(l.message.replace(" variance"," std")):l}}}),XB="corr",NSe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],RSe=ie(XB,NSe,t=>{var{typed:e,matrix:n,sqrt:r,sum:i,add:a,subtract:s,multiply:o,pow:u,divide:l}=t;return e(XB,{"Array, Array":function(h,m){return c(h,m)},"Matrix, Matrix":function(h,m){var v=c(h.toArray(),m.toArray());return Array.isArray(v)?n(v):v}});function c(d,h){var m=[];if(Array.isArray(d[0])&&Array.isArray(h[0])){if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var v=0;v<d.length;v++){if(d[v].length!==h[v].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");m.push(f(d[v],h[v]))}return m}else{if(d.length!==h.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return f(d,h)}}function f(d,h){var m=d.length,v=i(d),y=i(h),p=d.reduce((_,A,T)=>a(_,o(A,h[T])),0),x=i(d.map(_=>u(_,2))),g=i(h.map(_=>u(_,2))),S=s(o(m,p),o(v,y)),E=r(o(s(o(m,x),u(v,2)),s(o(m,g),u(y,2))));return l(S,E)}}),YB="combinations",PSe=["typed"],ISe=ie(YB,PSe,t=>{var{typed:e}=t;return e(YB,{"number, number":Y7,"BigNumber, BigNumber":function(r,i){var a=r.constructor,s,o,u=r.minus(i),l=new a(1);if(!ZB(r)||!ZB(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(r))throw new TypeError("k must be less than n in function combinations");if(s=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))s=s.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))s=s.times(u.plus(o)).dividedBy(o);return s}})});function ZB(t){return t.isInteger()&&t.gte(0)}var KB="combinationsWithRep",OSe=["typed"],FSe=ie(KB,OSe,t=>{var{typed:e}=t;return e(KB,{"number, number":function(r,i){if(!Ct(r)||r<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!Ct(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<r-1){var a=Gu(r,r+i-1);return a/Gu(1,i)}var s=Gu(i+1,r+i-1);return s/Gu(1,r-1)},"BigNumber, BigNumber":function(r,i){var a=r.constructor,s,o,u=new a(1),l=r.minus(u);if(!QB(r)||!QB(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(r.lt(u))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(s=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))s=s.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))s=s.times(l.plus(o)).dividedBy(o);return s}})});function QB(t){return t.isInteger()&&t.gte(0)}var JB="gamma",LSe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],BSe=ie(JB,LSe,t=>{var{typed:e,config:n,multiplyScalar:r,pow:i,BigNumber:a,Complex:s}=t;function o(l){if(l.im===0)return xb(l.re);if(l.re<.5){var c=new s(1-l.re,-l.im),f=new s(Math.PI*l.re,Math.PI*l.im);return new s(Math.PI).div(f.sin()).div(o(c))}l=new s(l.re-1,l.im);for(var d=new s(kh[0],0),h=1;h<kh.length;++h){var m=new s(kh[h],0);d=d.add(m.div(l.add(h)))}var v=new s(l.re+eH+.5,l.im),y=Math.sqrt(2*Math.PI),p=v.pow(l.add(.5)),x=v.neg().exp();return d.mul(y).mul(p).mul(x)}return e(JB,{number:xb,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new a(1/0):u(c.minus(1));if(!c.isFinite())return new a(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function u(l){if(l<8)return new a([1,1,2,6,24,120,720,5040][l]);var c=n.precision+(Math.log(l.toNumber())|0),f=a.clone({precision:c});if(l%2===1)return l.times(u(new a(l-1)));for(var d=l,h=new f(l),m=l.toNumber();d>2;)d-=2,m+=d,h=h.times(m);return new a(h.toPrecision(a.precision))}}),eU="lgamma",USe=["Complex","typed"],zSe=ie(eU,USe,t=>{var{Complex:e,typed:n}=t,r=7,i=7,a=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(eU,{number:bb,Complex:s,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function s(l){var c=6.283185307179586,f=1.1447298858494002,d=.1;if(l.isNaN())return new e(NaN,NaN);if(l.im===0)return new e(bb(l.re),0);if(l.re>=r||Math.abs(l.im)>=i)return o(l);if(l.re<=d){var h=Noe(c,l.im)*Math.floor(.5*l.re+.25),m=l.mul(Math.PI).sin().log(),v=s(new e(1-l.re,-l.im));return new e(f,h).sub(m).sub(v)}else return l.im>=0?u(l):u(l.conjugate()).conjugate()}function o(l){for(var c=l.sub(.5).mul(l.log()).sub(l).add(tH),f=new e(1,0).div(l),d=f.div(l),h=a[0],m=a[1],v=2*d.re,y=d.re*d.re+d.im*d.im,p=2;p<8;p++){var x=m;m=-y*h+a[p],h=v*h+x}var g=f.mul(d.mul(h).add(m));return c.add(g)}function u(l){var c=0,f=0,d=l;for(l=l.add(1);l.re<=r;){d=d.mul(l);var h=d.im<0?1:0;h!==0&&f===0&&c++,f=h,l=l.add(1)}return o(l).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),tU="factorial",kSe=["typed","gamma"],$Se=ie(tU,kSe,t=>{var{typed:e,gamma:n}=t;return e(tU,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return n(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return n(i.plus(1))},"Array | Matrix":e.referToSelf(r=>i=>ln(i,r))})}),nU="kldivergence",HSe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],GSe=ie(nU,HSe,t=>{var{typed:e,matrix:n,divide:r,sum:i,multiply:a,map:s,dotDivide:o,log:u,isNumeric:l}=t;return e(nU,{"Array, Array":function(d,h){return c(n(d),n(h))},"Matrix, Array":function(d,h){return c(d,n(h))},"Array, Matrix":function(d,h){return c(n(d),h)},"Matrix, Matrix":function(d,h){return c(d,h)}});function c(f,d){var h=d.size().length,m=f.size().length;if(h>1)throw new Error("first object must be one dimensional");if(m>1)throw new Error("second object must be one dimensional");if(h!==m)throw new Error("Length of two vectors must be equal");var v=i(f);if(v===0)throw new Error("Sum of elements in first object must be non zero");var y=i(d);if(y===0)throw new Error("Sum of elements in second object must be non zero");var p=r(f,i(f)),x=r(d,i(d)),g=i(a(p,s(o(p,x),S=>u(S))));return l(g)?g:Number.NaN}}),rU="multinomial",VSe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],WSe=ie(rU,VSe,t=>{var{typed:e,add:n,divide:r,multiply:i,factorial:a,isInteger:s,isPositive:o}=t;return e(rU,{"Array | Matrix":function(l){var c=0,f=1;return tl(l,function(d){if(!s(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=n(c,d),f=i(f,a(d))}),r(a(c),f)}})}),iU="permutations",qSe=["typed","factorial"],jSe=ie(iU,qSe,t=>{var{typed:e,factorial:n}=t;return e(iU,{"number | BigNumber":n,"number, number":function(i,a){if(!Ct(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!Ct(a)||a<0)throw new TypeError("Positive integer value expected in function permutations");if(a>i)throw new TypeError("second argument k must be less than or equal to first argument n");return Gu(i-a+1,i)},"BigNumber, BigNumber":function(i,a){var s,o;if(!aU(i)||!aU(a))throw new TypeError("Positive integer value expected in function permutations");if(a.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var u=i.mul(0).add(1);for(s=u,o=i.minus(a).plus(1);o.lte(i);o=o.plus(1))s=s.times(o);return s}})});function aU(t){return t.isInteger()&&t.gte(0)}var GD={exports:{}};GD.exports;(function(t){(function(e,n,r){function i(u){var l=this,c=o();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function a(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&a(f,c),d.state=function(){return a(c,{})}),d}function o(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.alea=s})(Xf,t,!1)})(GD);var XSe=GD.exports,VD={exports:{}};VD.exports;(function(t){(function(e,n,r){function i(o){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function a(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xor128=s})(Xf,t,!1)})(VD);var YSe=VD.exports,WD={exports:{}};WD.exports;(function(t){(function(e,n,r){function i(o){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,o===(o|0)?u.x=o:l+=o;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(o,u){return u.x=o.x,u.y=o.y,u.z=o.z,u.w=o.w,u.v=o.v,u.d=o.d,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xorwow=s})(Xf,t,!1)})(WD);var ZSe=WD.exports,qD={exports:{}};qD.exports;(function(t){(function(e,n,r){function i(o){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,o)}function a(o,u){return u.x=o.x.slice(),u.i=o.i,u}function s(o,u){o==null&&(o=+new Date);var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xorshift7=s})(Xf,t,!1)})(qD);var KSe=qD.exports,jD={exports:{}};jD.exports;(function(t){(function(e,n,r){function i(o){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,v,y,p=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),m=0,v=-32;v<x;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,d=p[v&127]^=h+y,m=d==0?m+1:0);for(m>=128&&(p[(f&&f.length||0)&127]=-1),m=127,v=4*128;v>0;--v)h=p[m+34&127],d=p[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,p[m]=h^d;c.w=y,c.X=p,c.i=m}l(u,o)}function a(o,u){return u.i=o.i,u.w=o.w,u.X=o.X.slice(),u}function s(o,u){o==null&&(o=+new Date);var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xor4096=s})(Xf,t,!1)})(jD);var QSe=jD.exports,XD={exports:{}};XD.exports;(function(t){(function(e,n,r){function i(o){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,o===Math.floor(o)?(u.a=o/4294967296|0,u.b=o|0):l+=o;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function a(o,u){return u.a=o.a,u.b=o.b,u.c=o.c,u.d=o.d,u}function s(o,u){var l=new i(o),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.tychei=s})(Xf,t,!1)})(XD);var JSe=XD.exports,QH={exports:{}};const e_e={},t_e=Object.freeze(Object.defineProperty({__proto__:null,default:e_e},Symbol.toStringTag,{value:"Module"})),n_e=pj(t_e);(function(t){(function(e,n,r){var i=256,a=6,s=52,o="random",u=r.pow(i,a),l=r.pow(2,s),c=l*2,f=i-1,d;function h(S,E,_){var A=[];E=E==!0?{entropy:!0}:E||{};var T=p(y(E.entropy?[S,g(n)]:S??x(),3),A),M=new m(A),C=function(){for(var N=M.g(a),P=u,H=0;N<l;)N=(N+H)*i,P*=i,H=M.g(1);for(;N>=c;)N/=2,P/=2,H>>>=1;return(N+H)/P};return C.int32=function(){return M.g(4)|0},C.quick=function(){return M.g(4)/4294967296},C.double=C,p(g(M.S),n),(E.pass||_||function(N,P,H,L){return L&&(L.S&&v(L,M),N.state=function(){return v(M,{})}),H?(r[o]=N,P):N})(C,T,"global"in E?E.global:this==r,E.state)}function m(S){var E,_=S.length,A=this,T=0,M=A.i=A.j=0,C=A.S=[];for(_||(S=[_++]);T<i;)C[T]=T++;for(T=0;T<i;T++)C[T]=C[M=f&M+S[T%_]+(E=C[T])],C[M]=E;(A.g=function(N){for(var P,H=0,L=A.i,z=A.j,O=A.S;N--;)P=O[L=f&L+1],H=H*i+O[f&(O[L]=O[z=f&z+P])+(O[z]=P)];return A.i=L,A.j=z,H})(i)}function v(S,E){return E.i=S.i,E.j=S.j,E.S=S.S.slice(),E}function y(S,E){var _=[],A=typeof S,T;if(E&&A=="object")for(T in S)try{_.push(y(S[T],E-1))}catch{}return _.length?_:A=="string"?S:S+"\0"}function p(S,E){for(var _=S+"",A,T=0;T<_.length;)E[f&T]=f&(A^=E[f&T]*19)+_.charCodeAt(T++);return g(E)}function x(){try{var S;return d&&(S=d.randomBytes)?S=S(i):(S=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(S)),g(S)}catch{var E=e.navigator,_=E&&E.plugins;return[+new Date,e,_,e.screen,g(n)]}}function g(S){return String.fromCharCode.apply(0,S)}if(p(r.random(),n),t.exports){t.exports=h;try{d=n_e}catch{}}else r["seed"+o]=h})(typeof self<"u"?self:Xf,[],Math)})(QH);var r_e=QH.exports,i_e=XSe,a_e=YSe,s_e=ZSe,o_e=KSe,u_e=QSe,l_e=JSe,id=r_e;id.alea=i_e;id.xor128=a_e;id.xorwow=s_e;id.xorshift7=o_e;id.xor4096=u_e;id.tychei=l_e;var c_e=id;const JH=Qs(c_e);var f_e=JH(Date.now());function fp(t){var e;function n(i){e=i===null?f_e:JH(String(i))}n(t);function r(){return e()}return r}var sU="pickRandom",d_e=["typed","config","?on"],h_e=ie(sU,d_e,t=>{var{typed:e,config:n,on:r}=t,i=fp(n.randomSeed);return r&&r("config",function(s,o){s.randomSeed!==o.randomSeed&&(i=fp(s.randomSeed))}),e(sU,{"Array | Matrix":function(o){return a(o,{})},"Array | Matrix, Object":function(o,u){return a(o,u)},"Array | Matrix, number":function(o,u){return a(o,{number:u})},"Array | Matrix, Array | Matrix":function(o,u){return a(o,{weights:u})},"Array | Matrix, Array | Matrix, number":function(o,u,l){return a(o,{number:l,weights:u})},"Array | Matrix, number, Array | Matrix":function(o,u,l){return a(o,{number:u,weights:l})}});function a(s,o){var{number:u,weights:l,elementWise:c=!0}=o,f=typeof u>"u";f&&(u=1);var d=Ft(s)?s.create:Ft(l)?l.create:null;s=s.valueOf(),l&&(l=l.valueOf()),c===!0&&(s=Pn(s),l=Pn(l));var h=0;if(typeof l<"u"){if(l.length!==s.length)throw new Error("Weights must have the same length as possibles");for(var m=0,v=l.length;m<v;m++){if(!Kt(l[m])||l[m]<0)throw new Error("Weights must be an array of positive numbers");h+=l[m]}}for(var y=s.length,p=[],x;p.length<u;){if(typeof l>"u")x=s[Math.floor(i()*y)];else for(var g=i()*h,S=0,E=s.length;S<E;S++)if(g-=l[S],g<0){x=s[S];break}p.push(x)}return f?p[0]:d?d(p):p}});function YD(t,e){var n=[];if(t=t.slice(0),t.length>1)for(var r=0,i=t.shift();r<i;r++)n.push(YD(t,e));else for(var a=0,s=t.shift();a<s;a++)n.push(e());return n}var oU="random",p_e=["typed","config","?on"],m_e=ie(oU,p_e,t=>{var{typed:e,config:n,on:r}=t,i=fp(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(i=fp(o.randomSeed))}),e(oU,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,u)=>a(o,0,u),"Array | Matrix, number, number":(o,u,l)=>a(o,u,l)});function a(o,u,l){var c=YD(o.valueOf(),()=>s(u,l));return Ft(o)?o.create(c):c}function s(o,u){return o+i()*(u-o)}}),uU="randomInt",v_e=["typed","config","?on"],g_e=ie(uU,v_e,t=>{var{typed:e,config:n,on:r}=t,i=fp(n.randomSeed);return r&&r("config",function(o,u){o.randomSeed!==u.randomSeed&&(i=fp(o.randomSeed))}),e(uU,{"":()=>s(0,1),number:o=>s(0,o),"number, number":(o,u)=>s(o,u),"Array | Matrix":o=>a(o,0,1),"Array | Matrix, number":(o,u)=>a(o,0,u),"Array | Matrix, number, number":(o,u,l)=>a(o,u,l)});function a(o,u,l){var c=YD(o.valueOf(),()=>s(u,l));return Ft(o)?o.create(c):c}function s(o,u){return Math.floor(o+i()*(u-o))}}),lU="stirlingS2",y_e=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],x_e=ie(lU,y_e,t=>{var{typed:e,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:s,factorial:o,combinations:u,isNegative:l,isInteger:c,number:f,bignumber:d,larger:h}=t,m=[],v=[];return e(lU,{"number | BigNumber, number | BigNumber":function(p,x){if(!c(p)||l(p)||!c(x)||l(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(h(x,p))throw new TypeError("k must be less than or equal to n in function stirlingS2");var g=!(Kt(p)&&Kt(x)),S=g?v:m,E=g?d:f,_=f(p),A=f(x);if(S[_]&&S[_].length>A)return S[_][A];for(var T=0;T<=_;++T)if(S[T]||(S[T]=[E(T===0?1:0)]),T!==0)for(var M=S[T],C=S[T-1],N=M.length;N<=T&&N<=A;++N)N===T?M[N]=1:M[N]=n(i(E(N),C[N]),C[N-1]);return S[_][A]}})}),cU="bellNumbers",b_e=["typed","addScalar","isNegative","isInteger","stirlingS2"],w_e=ie(cU,b_e,t=>{var{typed:e,addScalar:n,isNegative:r,isInteger:i,stirlingS2:a}=t;return e(cU,{"number | BigNumber":function(o){if(!i(o)||r(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var u=0,l=0;l<=o;l++)u=n(u,a(o,l));return u}})}),fU="catalan",S_e=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],__e=ie(fU,S_e,t=>{var{typed:e,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:s,isInteger:o}=t;return e(fU,{"number | BigNumber":function(l){if(!o(l)||s(l))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(l,2),l),n(l,1))}})}),dU="composition",E_e=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],M_e=ie(dU,E_e,t=>{var{typed:e,addScalar:n,combinations:r,isPositive:i,isNegative:a,isInteger:s,larger:o}=t;return e(dU,{"number | BigNumber, number | BigNumber":function(l,c){if(!s(l)||!i(l)||!s(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,l))throw new TypeError("k must be less than or equal to n in function composition");return r(n(l,-1),n(c,-1))}})}),hU="leafCount",A_e=["parse","typed"],C_e=ie(hU,A_e,t=>{var{parse:e,typed:n}=t;function r(i){var a=0;return i.forEach(s=>{a+=r(s)}),a||1}return n(hU,{Node:function(a){return r(a)}})});function pU(t){return Tn(t)||Qr(t)&&t.isUnary()&&Tn(t.args[0])}function Nb(t){return!!(Tn(t)||(hc(t)||Qr(t))&&t.args.every(Nb)||el(t)&&Nb(t.content))}function mU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(n),!0).forEach(function(r){si(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var T_e="simplifyUtil",D_e=["FunctionNode","OperatorNode","SymbolNode"],ZD=ie(T_e,D_e,t=>{var{FunctionNode:e,OperatorNode:n,SymbolNode:r}=t,i=!0,a=!1,s="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}},u={divide:{total:a},log:{total:a}},l={subtract:{total:a},abs:{trivial:i},log:{total:i}};function c(g,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,_=s;if(typeof g=="string"?_=g:Qr(g)?_=g.fn.toString():hc(g)?_=g.name:el(g)&&(_="paren"),St(E,_)){var A=E[_];if(St(A,S))return A[S];if(St(o,_))return o[_][S]}if(St(E,s)){var T=E[s];return St(T,S)?T[S]:o[s][S]}if(St(o,_)){var M=o[_];if(St(M,S))return M[S]}return o[s][S]}function f(g){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(g,"commutative",S)}function d(g){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(g,"associative",S)}function h(g,S){var E=gM({},g);for(var _ in S)St(g,_)?E[_]=gM(gM({},S[_]),g[_]):E[_]=S[_];return E}function m(g,S){if(!g.args||g.args.length===0)return g;g.args=v(g,S);for(var E=0;E<g.args.length;E++)m(g.args[E],S)}function v(g,S){var E,_=[],A=function T(M){for(var C=0;C<M.args.length;C++){var N=M.args[C];Qr(N)&&E===N.op?T(N):_.push(N)}};return d(g,S)?(E=g.op,A(g),_):g.args}function y(g,S){if(!(!g.args||g.args.length===0)){for(var E=x(g),_=g.args.length,A=0;A<_;A++)y(g.args[A],S);if(_>2&&d(g,S)){for(var T=g.args.pop();g.args.length>0;)T=E([g.args.pop(),T]);g.args=T.args}}}function p(g,S){if(!(!g.args||g.args.length===0)){for(var E=x(g),_=g.args.length,A=0;A<_;A++)p(g.args[A],S);if(_>2&&d(g,S)){for(var T=g.args.shift();g.args.length>0;)T=E([T,g.args.shift()]);g.args=T.args}}}function x(g){return Qr(g)?function(S){try{return new n(g.op,g.fn,S,g.implicit)}catch(E){return console.error(E),[]}}:function(S){return new e(new r(g.name),S)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:f,isAssociative:d,mergeContext:h,flatten:m,allChildren:v,unflattenr:y,unflattenl:p,defaultContext:o,realContext:u,positiveContext:l}}),N_e="simplify",R_e=["config","typed","parse","add","subtract","multiply","divide","pow","isZero","equal","resolve","simplifyConstant","simplifyCore","?fraction","?bignumber","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],P_e=ie(N_e,R_e,t=>{var{config:e,typed:n,parse:r,add:i,subtract:a,multiply:s,divide:o,pow:u,isZero:l,equal:c,resolve:f,simplifyConstant:d,simplifyCore:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:p,AccessorNode:x,ArrayNode:g,ConstantNode:S,FunctionNode:E,IndexNode:_,ObjectNode:A,OperatorNode:T,ParenthesisNode:M,SymbolNode:C}=t,{hasProperty:N,isCommutative:P,isAssociative:H,mergeContext:L,flatten:z,unflattenr:O,unflattenl:F,createMakeNodeFunction:U,defaultContext:I,realContext:j,positiveContext:ee}=ZD({FunctionNode:E,OperatorNode:T,SymbolNode:C});n.addConversion({from:"Object",to:"Map",convert:zh});var J=n("simplify",{Node:Ce,"Node, Map":(re,V)=>Ce(re,!1,V),"Node, Map, Object":(re,V,G)=>Ce(re,!1,V,G),"Node, Array":Ce,"Node, Array, Map":Ce,"Node, Array, Map, Object":Ce});n.removeConversion({from:"Object",to:"Map",convert:zh}),J.defaultContext=I,J.realContext=j,J.positiveContext=ee;function q(re){return re.transform(function(V,G,le){return el(V)?q(V.content):V})}var ae={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};J.rules=[h,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},d,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},d,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function be(re,V){var G={};if(re.s){var le=re.s.split("->");if(le.length===2)G.l=le[0],G.r=le[1];else throw SyntaxError("Could not parse rule: "+re.s)}else G.l=re.l,G.r=re.r;G.l=q(r(G.l)),G.r=q(r(G.r));for(var _e of["imposeContext","repeat","assuming"])_e in re&&(G[_e]=re[_e]);if(re.evaluate&&(G.evaluate=r(re.evaluate)),H(G.l,V)){var W=!P(G.l,V),Y;W&&(Y=Pe());var de=U(G.l),xe=Pe();G.expanded={},G.expanded.l=de([G.l,xe]),z(G.expanded.l,V),O(G.expanded.l,V),G.expanded.r=de([G.r,xe]),W&&(G.expandedNC1={},G.expandedNC1.l=de([Y,G.l]),G.expandedNC1.r=de([Y,G.r]),G.expandedNC2={},G.expandedNC2.l=de([Y,G.expanded.l]),G.expandedNC2.r=de([Y,G.expanded.r]))}return G}function ue(re,V){for(var G=[],le=0;le<re.length;le++){var _e=re[le],W=void 0,Y=typeof _e;switch(Y){case"string":_e={s:_e};case"object":W=be(_e,V);break;case"function":W=_e;break;default:throw TypeError("Unsupported type of rule: "+Y)}G.push(W)}return G}var pe=0;function Pe(){return new C("_p"+pe++)}function Ce(re,V){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lp(),le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},_e=le.consoleDebug;V=ue(V||J.rules,le.context);var W=f(re,G);W=q(W);for(var Y={},de=W.toString({parenthesis:"all"});!Y[de];){Y[de]=!0,pe=0;var xe=de;_e&&console.log("Working on: ",de);for(var Ne=0;Ne<V.length;Ne++){var Be="";if(typeof V[Ne]=="function"?(W=V[Ne](W,le),_e&&(Be=V[Ne].name)):(z(W,le.context),W=Oe(W,V[Ne],le.context),_e&&(Be="".concat(V[Ne].l.toString()," -> ").concat(V[Ne].r.toString()))),_e){var $e=W.toString({parenthesis:"all"});$e!==xe&&(console.log("Applying",Be,"produced",$e),xe=$e)}F(W,le.context)}de=W.toString({parenthesis:"all"})}return W}function Ee(re,V,G){var le=re;if(re)for(var _e=0;_e<re.length;++_e){var W=Oe(re[_e],V,G);W!==re[_e]&&(le===re&&(le=re.slice()),le[_e]=W)}return le}function Oe(re,V,G){if(V.assuming){for(var le in V.assuming)for(var _e in V.assuming[le])if(N(le,_e,G)!==V.assuming[le][_e])return re}var W=L(V.imposeContext,G),Y=re;if(Y instanceof T||Y instanceof E){var de=Ee(Y.args,V,G);de!==Y.args&&(Y=Y.clone(),Y.args=de)}else if(Y instanceof M){if(Y.content){var xe=Oe(Y.content,V,G);xe!==Y.content&&(Y=new M(xe))}}else if(Y instanceof g){var Ne=Ee(Y.items,V,G);Ne!==Y.items&&(Y=new g(Ne))}else if(Y instanceof x){var Be=Y.object;Y.object&&(Be=Oe(Y.object,V,G));var $e=Y.index;Y.index&&($e=Oe(Y.index,V,G)),(Be!==Y.object||$e!==Y.index)&&(Y=new x(Be,$e))}else if(Y instanceof _){var Ie=Ee(Y.dimensions,V,G);Ie!==Y.dimensions&&(Y=new _(Ie))}else if(Y instanceof A){var Ye=!1,Ve={};for(var at in Y.properties)Ve[at]=Oe(Y.properties[at],V,G),Ve[at]!==Y.properties[at]&&(Ye=!0);Ye&&(Y=new A(Ve))}var tt=V.r,Ze=te(V.l,Y,W)[0];if(!Ze&&V.expanded&&(tt=V.expanded.r,Ze=te(V.expanded.l,Y,W)[0]),!Ze&&V.expandedNC1&&(tt=V.expandedNC1.r,Ze=te(V.expandedNC1.l,Y,W)[0],Ze||(tt=V.expandedNC2.r,Ze=te(V.expandedNC2.l,Y,W)[0])),Ze){var we=Y.implicit;Y=tt.clone(),we&&"implicit"in tt&&(Y.implicit=!0),Y=Y.transform(function(B){return B.isSymbolNode&&St(Ze.placeholders,B.name)?Ze.placeholders[B.name].clone():B})}return V.repeat&&Y!==re&&(Y=Oe(Y,V,G)),Y}function ne(re,V){var G=[],le,_e,W=U(re);if(P(re,V))for(var Y=0;Y<re.args.length;Y++)_e=re.args.slice(0),_e.splice(Y,1),le=_e.length===1?_e[0]:W(_e),G.push(W([re.args[Y],le]));else for(var de=1;de<re.args.length;de++){var xe=re.args[0];de>1&&(xe=W(re.args.slice(0,de))),_e=re.args.slice(de),le=_e.length===1?_e[0]:W(_e),G.push(W([xe,le]))}return G}function Le(re,V){var G={placeholders:{}};if(!re.placeholders&&!V.placeholders)return G;if(re.placeholders){if(!V.placeholders)return re}else return V;for(var le in re.placeholders)if(St(re.placeholders,le)&&(G.placeholders[le]=re.placeholders[le],St(V.placeholders,le)&&!Me(re.placeholders[le],V.placeholders[le])))return null;for(var _e in V.placeholders)St(V.placeholders,_e)&&(G.placeholders[_e]=V.placeholders[_e]);return G}function Fe(re,V){var G=[];if(re.length===0||V.length===0)return G;for(var le,_e=0;_e<re.length;_e++)for(var W=0;W<V.length;W++)le=Le(re[_e],V[W]),le&&G.push(le);return G}function Q(re){if(re.length===0)return re;for(var V=re.reduce(Fe),G=[],le={},_e=0;_e<V.length;_e++){var W=JSON.stringify(V[_e]);le[W]||(le[W]=!0,G.push(V[_e]))}return G}function te(re,V,G,le){var _e=[{placeholders:{}}];if(re instanceof T&&V instanceof T||re instanceof E&&V instanceof E){if(re instanceof T){if(re.op!==V.op||re.fn!==V.fn)return[]}else if(re instanceof E&&re.name!==V.name)return[];if(V.args.length===1&&re.args.length===1||!H(V,G)&&V.args.length===re.args.length||le){for(var W=[],Y=0;Y<re.args.length;Y++){var de=te(re.args[Y],V.args[Y],G);if(de.length===0)break;W.push(de)}if(W.length!==re.args.length){if(!P(V,G)||re.args.length===1)return[];if(re.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var xe=te(re.args[0],V.args[1],G);if(xe.length===0)return[];var Ne=te(re.args[1],V.args[0],G);if(Ne.length===0)return[];W=[xe,Ne]}_e=Q(W)}else if(V.args.length>=2&&re.args.length===2){for(var Be=ne(V,G),$e=[],Ie=0;Ie<Be.length;Ie++){var Ye=te(re,Be[Ie],G,!0);$e=$e.concat(Ye)}return $e}else{if(re.args.length>2)throw Error("Unexpected non-binary associative function: "+re.toString());return[]}}else if(re instanceof C){if(re.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(ae[re.name]){if(re.name!==V.name)return[]}else switch(re.name[1]>="a"&&re.name[1]<="z"?re.name.substring(0,2):re.name[0]){case"n":case"_p":_e[0].placeholders[re.name]=V;break;case"c":case"cl":if(Tn(V))_e[0].placeholders[re.name]=V;else return[];break;case"v":if(!Tn(V))_e[0].placeholders[re.name]=V;else return[];break;case"vl":if(bi(V))_e[0].placeholders[re.name]=V;else return[];break;case"cd":if(pU(V))_e[0].placeholders[re.name]=V;else return[];break;case"vd":if(!pU(V))_e[0].placeholders[re.name]=V;else return[];break;case"ce":if(Nb(V))_e[0].placeholders[re.name]=V;else return[];break;case"ve":if(!Nb(V))_e[0].placeholders[re.name]=V;else return[];break;default:throw new Error("Invalid symbol in rule: "+re.name)}}else if(re instanceof S){if(!c(re.value,V.value))return[]}else return[];return _e}function Me(re,V){if(re instanceof S&&V instanceof S){if(!c(re.value,V.value))return!1}else if(re instanceof C&&V instanceof C){if(re.name!==V.name)return!1}else if(re instanceof T&&V instanceof T||re instanceof E&&V instanceof E){if(re instanceof T){if(re.op!==V.op||re.fn!==V.fn)return!1}else if(re instanceof E&&re.name!==V.name)return!1;if(re.args.length!==V.args.length)return!1;for(var G=0;G<re.args.length;G++)if(!Me(re.args[G],V.args[G]))return!1}else return!1;return!0}return J}),I_e="simplifyConstant",O_e=["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],F_e=ie(I_e,O_e,t=>{var{typed:e,config:n,mathWithTransform:r,matrix:i,fraction:a,bignumber:s,AccessorNode:o,ArrayNode:u,ConstantNode:l,FunctionNode:c,IndexNode:f,ObjectNode:d,OperatorNode:h,SymbolNode:m}=t,{isCommutative:v,isAssociative:y,allChildren:p,createMakeNodeFunction:x}=ZD({FunctionNode:c,OperatorNode:h,SymbolNode:m}),g=e("simplifyConstant",{Node:z=>A(L(z,{})),"Node, Object":function(O,F){return A(L(O,F))}});function S(z){return a0(z)?z.valueOf():z instanceof Array?z.map(S):Ft(z)?i(S(z.valueOf())):z}function E(z,O,F){try{return r[z].apply(null,O)}catch{return O=O.map(S),M(r[z].apply(null,O),F)}}var _=e({Fraction:N,number:function(O){return O<0?C(new l(-O)):new l(O)},BigNumber:function(O){return O<0?C(new l(-O)):new l(O)},Complex:function(O){throw new Error("Cannot convert Complex number to Node")},string:function(O){return new l(O)},Matrix:function(O){return new u(O.valueOf().map(F=>_(F)))}});function A(z){return qn(z)?z:_(z)}function T(z,O){var F=O&&O.exactFractions!==!1;if(F&&isFinite(z)&&a){var U=a(z),I=O&&typeof O.fractionsLimit=="number"?O.fractionsLimit:1/0;if(U.valueOf()===z&&U.n<I&&U.d<I)return U}return z}var M=e({"string, Object":function(O,F){if(n.number==="BigNumber")return s===void 0&&zD(),s(O);if(n.number==="Fraction")return a===void 0&&RH(),a(O);var U=parseFloat(O);return T(U,F)},"Fraction, Object":function(O,F){return O},"BigNumber, Object":function(O,F){return O},"number, Object":function(O,F){return T(O,F)},"Complex, Object":function(O,F){return O.im!==0?O:T(O.re,F)},"Matrix, Object":function(O,F){return i(T(O.valueOf()))},"Array, Object":function(O,F){return O.map(T)}});function C(z){return new h("-","unaryMinus",[z])}function N(z){var O,F=z.s*z.n;return F<0?O=new h("-","unaryMinus",[new l(-F)]):O=new l(F),z.d===1?O:new h("/","divide",[O,new l(z.d)])}function P(z,O,F){if(!Np(O))return new o(A(z),A(O));if(Os(z)||Ft(z)){for(var U=Array.from(O.dimensions);U.length>0;)if(Tn(U[0])&&typeof U[0].value!="string"){var I=M(U.shift().value,F);Os(z)?z=z.items[I-1]:(z=z.valueOf()[I-1],z instanceof Array&&(z=i(z)))}else if(U.length>1&&Tn(U[1])&&typeof U[1].value!="string"){var j=M(U[1].value,F),ee=[],J=Os(z)?z.items:z.valueOf();for(var q of J)if(Os(q))ee.push(q.items[j-1]);else if(Ft(z))ee.push(q[j-1]);else break;if(ee.length===J.length)Os(z)?z=new u(ee):z=i(ee),U.splice(1,1);else break}else break;return U.length===O.dimensions.length?new o(A(z),O):U.length>0?(O=new f(U),new o(A(z),O)):z}if(qw(z)&&O.dimensions.length===1&&Tn(O.dimensions[0])){var ae=O.dimensions[0].value;return ae in z.properties?z.properties[ae]:new l}return new o(A(z),O)}function H(z,O,F,U){var I=O.shift(),j=O.reduce((ee,J)=>{if(!qn(J)){var q=ee.pop();if(qn(q))return[q,J];try{return ee.push(E(z,[q,J],U)),ee}catch{ee.push(q)}}ee.push(A(ee.pop()));var ae=ee.length===1?ee[0]:F(ee);return[F([ae,A(J)])]},[I]);return j.length===1?j[0]:F([j[0],_(j[1])])}function L(z,O){switch(z.type){case"SymbolNode":return z;case"ConstantNode":switch(typeof z.value){case"number":return M(z.value,O);case"string":return z.value;default:if(!isNaN(z.value))return M(z.value,O)}return z;case"FunctionNode":if(r[z.name]&&r[z.name].rawArgs)return z;{var F=["add","multiply"];if(F.indexOf(z.name)===-1){var U=z.args.map(Oe=>L(Oe,O));if(!U.some(qn))try{return E(z.name,U,O)}catch{}if(z.name==="size"&&U.length===1&&Os(U[0])){for(var I=[],j=U[0];Os(j);)I.push(j.items.length),j=j.items[0];return i(I)}return new c(z.name,U.map(A))}}case"OperatorNode":{var ee=z.fn.toString(),J,q,ae=x(z);if(Qr(z)&&z.isUnary())J=[L(z.args[0],O)],qn(J[0])?q=ae(J):q=E(ee,J,O);else if(y(z,O.context))if(J=p(z,O.context),J=J.map(Oe=>L(Oe,O)),v(ee,O.context)){for(var be=[],ue=[],pe=0;pe<J.length;pe++)qn(J[pe])?ue.push(J[pe]):be.push(J[pe]);be.length>1?(q=H(ee,be,ae,O),ue.unshift(q),q=H(ee,ue,ae,O)):q=H(ee,J,ae,O)}else q=H(ee,J,ae,O);else J=z.args.map(Oe=>L(Oe,O)),q=H(ee,J,ae,O);return q}case"ParenthesisNode":return L(z.content,O);case"AccessorNode":return P(L(z.object,O),L(z.index,O),O);case"ArrayNode":{var Pe=z.items.map(Oe=>L(Oe,O));return Pe.some(qn)?new u(Pe.map(A)):i(Pe)}case"IndexNode":return new f(z.dimensions.map(Oe=>g(Oe,O)));case"ObjectNode":{var Ce={};for(var Ee in z.properties)Ce[Ee]=g(z.properties[Ee],O);return new d(Ce)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(z.type))}}return g}),vU="simplifyCore",L_e=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],B_e=ie(vU,L_e,t=>{var{typed:e,parse:n,equal:r,isZero:i,add:a,subtract:s,multiply:o,divide:u,pow:l,AccessorNode:c,ArrayNode:f,ConstantNode:d,FunctionNode:h,IndexNode:m,ObjectNode:v,OperatorNode:y,ParenthesisNode:p,SymbolNode:x}=t,g=new d(0),S=new d(1),E=new d(!0),_=new d(!1);function A(N){return Qr(N)&&["and","not","or"].includes(N.op)}var{hasProperty:T,isCommutative:M}=ZD({FunctionNode:h,OperatorNode:y,SymbolNode:x});function C(N){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=P?P.context:void 0;if(T(N,"trivial",H)){if(hc(N)&&N.args.length===1)return C(N.args[0],P);var L=!1,z=0;if(N.forEach(ue=>{++z,z===1&&(L=C(ue,P))}),z===1)return L}var O=N;if(hc(O)){var F=kge(O.name);if(F){if(O.args.length>2&&T(O,"associative",H))for(;O.args.length>2;){var U=O.args.pop(),I=O.args.pop();O.args.push(new y(F,O.name,[U,I]))}O=new y(F,O.name,O.args)}else return new h(C(O.fn),O.args.map(ue=>C(ue,P)))}if(Qr(O)&&O.isUnary()){var j=C(O.args[0],P);if(O.op==="~"&&Qr(j)&&j.isUnary()&&j.op==="~"||O.op==="not"&&Qr(j)&&j.isUnary()&&j.op==="not"&&A(j.args[0]))return j.args[0];var ee=!0;if(O.op==="-"&&Qr(j)&&(j.isBinary()&&j.fn==="subtract"&&(O=new y("-","subtract",[j.args[1],j.args[0]]),ee=!1),j.isUnary()&&j.op==="-"))return j.args[0];if(ee)return new y(O.op,O.fn,[j])}if(Qr(O)&&O.isBinary()){var J=C(O.args[0],P),q=C(O.args[1],P);if(O.op==="+"){if(Tn(J)&&i(J.value))return q;if(Tn(q)&&i(q.value))return J;Qr(q)&&q.isUnary()&&q.op==="-"&&(q=q.args[0],O=new y("-","subtract",[J,q]))}if(O.op==="-")return Qr(q)&&q.isUnary()&&q.op==="-"?C(new y("+","add",[J,q.args[0]]),P):Tn(J)&&i(J.value)?C(new y("-","unaryMinus",[q])):Tn(q)&&i(q.value)?J:new y(O.op,O.fn,[J,q]);if(O.op==="*"){if(Tn(J)){if(i(J.value))return g;if(r(J.value,1))return q}if(Tn(q)){if(i(q.value))return g;if(r(q.value,1))return J;if(M(O,H))return new y(O.op,O.fn,[q,J],O.implicit)}return new y(O.op,O.fn,[J,q],O.implicit)}if(O.op==="/")return Tn(J)&&i(J.value)?g:Tn(q)&&r(q.value,1)?J:new y(O.op,O.fn,[J,q]);if(O.op==="^"&&Tn(q)){if(i(q.value))return S;if(r(q.value,1))return J}if(O.op==="and"){if(Tn(J))if(J.value){if(A(q))return q}else return _;if(Tn(q))if(q.value){if(A(J))return J}else return _}if(O.op==="or"){if(Tn(J)){if(J.value)return E;if(A(q))return q}if(Tn(q)){if(q.value)return E;if(A(J))return J}}return new y(O.op,O.fn,[J,q])}if(Qr(O))return new y(O.op,O.fn,O.args.map(ue=>C(ue,P)));if(Os(O))return new f(O.items.map(ue=>C(ue,P)));if(Hf(O))return new c(C(O.object,P),C(O.index,P));if(Np(O))return new m(O.dimensions.map(ue=>C(ue,P)));if(qw(O)){var ae={};for(var be in O.properties)ae[be]=C(O.properties[be],P);return new v(ae)}return O}return e(vU,{Node:C,"Node,Object":C})}),U_e="resolve",z_e=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],k_e=ie(U_e,z_e,t=>{var{typed:e,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:s}=t;function o(u,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!l)return u;if(bi(u)){if(c.has(u.name)){var f=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(f,"}"))}var d=l.get(u.name);if(qn(d)){var h=new Set(c);return h.add(u.name),o(d,l,h)}else return typeof d=="number"?n(String(d)):d!==void 0?new r(d):u}else if(Qr(u)){var m=u.args.map(function(y){return o(y,l,c)});return new a(u.op,u.fn,m,u.implicit)}else{if(el(u))return new s(o(u.content,l,c));if(hc(u)){var v=u.args.map(function(y){return o(y,l,c)});return new i(u.name,v)}}return u.map(y=>o(y,l,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(u,l)=>o(u,zh(l)),"Array | Matrix":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array | Matrix, null | undefined":e.referToSelf(u=>l=>l.map(c=>u(c))),"Array, Object":e.referTo("Array,Map",u=>(l,c)=>u(l,zh(c))),"Matrix, Object":e.referTo("Matrix,Map",u=>(l,c)=>u(l,zh(c))),"Array | Matrix, Map":e.referToSelf(u=>(l,c)=>l.map(f=>u(f,c)))})}),gU="symbolicEqual",$_e=["parse","simplify","typed","OperatorNode"],H_e=ie(gU,$_e,t=>{var{parse:e,simplify:n,typed:r,OperatorNode:i}=t;function a(s,o){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=new i("-","subtract",[s,o]),c=n(l,{},u);return Tn(c)&&!c.value}return r(gU,{"Node, Node":a,"Node, Node, Object":a})}),yU="derivative",G_e=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],V_e=ie(yU,G_e,t=>{var{typed:e,config:n,parse:r,simplify:i,equal:a,isZero:s,numeric:o,ConstantNode:u,FunctionNode:l,OperatorNode:c,ParenthesisNode:f,SymbolNode:d}=t;function h(g,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},_={};y(_,g,S.name);var A=p(g,_);return E.simplify?i(A):A}e.addConversion({from:"identifier",to:"SymbolNode",convert:r});var m=e(yU,{"Node, SymbolNode":h,"Node, SymbolNode, Object":h});e.removeConversion({from:"identifier",to:"SymbolNode",convert:r}),m._simplify=!0,m.toTex=function(g){return v.apply(null,g.args)};var v=e("_derivTex",{"Node, SymbolNode":function(S,E){return Tn(S)&&Jn(S.value)==="string"?v(r(S.value).toString(),E.toString(),1):v(S.toTex(),E.toString(),1)},"Node, ConstantNode":function(S,E){if(Jn(E.value)==="string")return v(S,r(E.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(S,E,_){return v(S.toString(),E.name,_.value)},"string, string, number":function(S,E,_){var A;return _===1?A="{d\\over d"+E+"}":A="{d^{"+_+"}\\over d"+E+"^{"+_+"}}",A+"\\left[".concat(S,"\\right]")}}),y=e("constTag",{"Object, ConstantNode, string":function(S,E){return S[E]=!0,!0},"Object, SymbolNode, string":function(S,E,_){return E.name!==_?(S[E]=!0,!0):!1},"Object, ParenthesisNode, string":function(S,E,_){return y(S,E.content,_)},"Object, FunctionAssignmentNode, string":function(S,E,_){return E.params.indexOf(_)===-1?(S[E]=!0,!0):y(S,E.expr,_)},"Object, FunctionNode | OperatorNode, string":function(S,E,_){if(E.args.length>0){for(var A=y(S,E.args[0],_),T=1;T<E.args.length;++T)A=y(S,E.args[T],_)&&A;if(A)return S[E]=!0,!0}return!1}}),p=e("_derivative",{"ConstantNode, Object":function(S){return x(0)},"SymbolNode, Object":function(S,E){return E[S]!==void 0?x(0):x(1)},"ParenthesisNode, Object":function(S,E){return new f(p(S.content,E))},"FunctionAssignmentNode, Object":function(S,E){return E[S]!==void 0?x(0):p(S.expr,E)},"FunctionNode, Object":function(S,E){if(E[S]!==void 0)return x(0);var _=S.args[0],A,T=!1,M=!1,C;switch(S.name){case"cbrt":T=!0,C=new c("*","multiply",[x(3),new c("^","pow",[_,new c("/","divide",[x(2),x(3)])])]);break;case"sqrt":case"nthRoot":if(S.args.length===1)T=!0,C=new c("*","multiply",[x(2),new l("sqrt",[_])]);else if(S.args.length===2)return A=new c("/","divide",[x(1),S.args[1]]),E[A]=E[S.args[1]],p(new c("^","pow",[_,A]),E);break;case"log10":A=x(10);case"log":if(!A&&S.args.length===1)C=_.clone(),T=!0;else if(S.args.length===1&&A||S.args.length===2&&E[S.args[1]]!==void 0)C=new c("*","multiply",[_.clone(),new l("log",[A||S.args[1]])]),T=!0;else if(S.args.length===2)return p(new c("/","divide",[new l("log",[_]),new l("log",[S.args[1]])]),E);break;case"pow":if(S.args.length===2)return E[A]=E[S.args[1]],p(new c("^","pow",[_,S.args[1]]),E);break;case"exp":C=new l("exp",[_.clone()]);break;case"sin":C=new l("cos",[_.clone()]);break;case"cos":C=new c("-","unaryMinus",[new l("sin",[_.clone()])]);break;case"tan":C=new c("^","pow",[new l("sec",[_.clone()]),x(2)]);break;case"sec":C=new c("*","multiply",[S,new l("tan",[_.clone()])]);break;case"csc":M=!0,C=new c("*","multiply",[S,new l("cot",[_.clone()])]);break;case"cot":M=!0,C=new c("^","pow",[new l("csc",[_.clone()]),x(2)]);break;case"asin":T=!0,C=new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[_.clone(),x(2)])])]);break;case"acos":T=!0,M=!0,C=new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[_.clone(),x(2)])])]);break;case"atan":T=!0,C=new c("+","add",[new c("^","pow",[_.clone(),x(2)]),x(1)]);break;case"asec":T=!0,C=new c("*","multiply",[new l("abs",[_.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),x(2)]),x(1)])])]);break;case"acsc":T=!0,M=!0,C=new c("*","multiply",[new l("abs",[_.clone()]),new l("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),x(2)]),x(1)])])]);break;case"acot":T=!0,M=!0,C=new c("+","add",[new c("^","pow",[_.clone(),x(2)]),x(1)]);break;case"sinh":C=new l("cosh",[_.clone()]);break;case"cosh":C=new l("sinh",[_.clone()]);break;case"tanh":C=new c("^","pow",[new l("sech",[_.clone()]),x(2)]);break;case"sech":M=!0,C=new c("*","multiply",[S,new l("tanh",[_.clone()])]);break;case"csch":M=!0,C=new c("*","multiply",[S,new l("coth",[_.clone()])]);break;case"coth":M=!0,C=new c("^","pow",[new l("csch",[_.clone()]),x(2)]);break;case"asinh":T=!0,C=new l("sqrt",[new c("+","add",[new c("^","pow",[_.clone(),x(2)]),x(1)])]);break;case"acosh":T=!0,C=new l("sqrt",[new c("-","subtract",[new c("^","pow",[_.clone(),x(2)]),x(1)])]);break;case"atanh":T=!0,C=new c("-","subtract",[x(1),new c("^","pow",[_.clone(),x(2)])]);break;case"asech":T=!0,M=!0,C=new c("*","multiply",[_.clone(),new l("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[_.clone(),x(2)])])])]);break;case"acsch":T=!0,M=!0,C=new c("*","multiply",[new l("abs",[_.clone()]),new l("sqrt",[new c("+","add",[new c("^","pow",[_.clone(),x(2)]),x(1)])])]);break;case"acoth":T=!0,M=!0,C=new c("-","subtract",[x(1),new c("^","pow",[_.clone(),x(2)])]);break;case"abs":C=new c("/","divide",[new l(new d("abs"),[_.clone()]),_.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+S.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var N,P;T?(N="/",P="divide"):(N="*",P="multiply");var H=p(_,E);return M&&(H=new c("-","unaryMinus",[H])),new c(N,P,[H,C])},"OperatorNode, Object":function(S,E){if(E[S]!==void 0)return x(0);if(S.op==="+")return new c(S.op,S.fn,S.args.map(function(z){return p(z,E)}));if(S.op==="-"){if(S.isUnary())return new c(S.op,S.fn,[p(S.args[0],E)]);if(S.isBinary())return new c(S.op,S.fn,[p(S.args[0],E),p(S.args[1],E)])}if(S.op==="*"){var _=S.args.filter(function(z){return E[z]!==void 0});if(_.length>0){var A=S.args.filter(function(z){return E[z]===void 0}),T=A.length===1?A[0]:new c("*","multiply",A),M=_.concat(p(T,E));return new c("*","multiply",M)}return new c("+","add",S.args.map(function(z){return new c("*","multiply",S.args.map(function(O){return O===z?p(O,E):O.clone()}))}))}if(S.op==="/"&&S.isBinary()){var C=S.args[0],N=S.args[1];return E[N]!==void 0?new c("/","divide",[p(C,E),N]):E[C]!==void 0?new c("*","multiply",[new c("-","unaryMinus",[C]),new c("/","divide",[p(N,E),new c("^","pow",[N.clone(),x(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[p(C,E),N.clone()]),new c("*","multiply",[C.clone(),p(N,E)])]),new c("^","pow",[N.clone(),x(2)])])}if(S.op==="^"&&S.isBinary()){var P=S.args[0],H=S.args[1];if(E[P]!==void 0)return Tn(P)&&(s(P.value)||a(P.value,1))?x(0):new c("*","multiply",[S,new c("*","multiply",[new l("log",[P.clone()]),p(H.clone(),E)])]);if(E[H]!==void 0){if(Tn(H)){if(s(H.value))return x(0);if(a(H.value,1))return p(P,E)}var L=new c("^","pow",[P.clone(),new c("-","subtract",[H,x(1)])]);return new c("*","multiply",[H.clone(),new c("*","multiply",[p(P,E),L])])}return new c("*","multiply",[new c("^","pow",[P.clone(),H.clone()]),new c("+","add",[new c("*","multiply",[p(P,E),new c("/","divide",[H.clone(),P.clone()])]),new c("*","multiply",[p(H,E),new l("log",[P.clone()])])])])}throw new Error('Cannot process operator "'+S.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function x(g,S){return new u(o(g,S||n.number))}return m}),xU="rationalize",W_e=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],q_e=ie(xU,W_e,t=>{var{config:e,typed:n,equal:r,isZero:i,add:a,subtract:s,multiply:o,divide:u,pow:l,parse:c,simplifyConstant:f,simplifyCore:d,simplify:h,fraction:m,bignumber:v,mathWithTransform:y,matrix:p,AccessorNode:x,ArrayNode:g,ConstantNode:S,FunctionNode:E,IndexNode:_,ObjectNode:A,OperatorNode:T,SymbolNode:M,ParenthesisNode:C}=t;function N(O){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,I=H(),j=P(O,F,!0,I.firstRules),ee=j.variables.length,J={exactFractions:!1},q={exactFractions:!0};if(O=j.expression,ee>=1){O=L(O);var ae,be,ue=!0,pe=!1;O=h(O,I.firstRules,{},J);for(var Pe;be=ue?I.distrDivRules:I.sucDivRules,O=h(O,be,{},q),ue=!ue,Pe=O.toString(),Pe!==ae;)pe=!0,ae=Pe;pe&&(O=h(O,I.firstRulesAgain,{},J)),O=h(O,I.finalRules,{},J)}var Ce=[],Ee={};return O.type==="OperatorNode"&&O.isBinary()&&O.op==="/"?(ee===1&&(O.args[0]=z(O.args[0],Ce),O.args[1]=z(O.args[1])),U&&(Ee.numerator=O.args[0],Ee.denominator=O.args[1])):(ee===1&&(O=z(O,Ce)),U&&(Ee.numerator=O,Ee.denominator=null)),U?(Ee.coefficients=Ce,Ee.variables=j.variables,Ee.expression=O,Ee):O}return n(xU,{Node:N,"Node, boolean":(O,F)=>N(O,{},F),"Node, Object":N,"Node, Object, boolean":N});function P(O,F,U,I){var j=[],ee=h(O,I,F,{exactFractions:!1});U=!!U;var J="+-*"+(U?"/":"");ae(ee);var q={};return q.expression=ee,q.variables=j,q;function ae(be){var ue=be.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode")if(be.op==="^"){if(be.args[1].type!=="ConstantNode"||!Ct(parseFloat(be.args[1].value)))throw new Error("There is a non-integer exponent");ae(be.args[0])}else{if(J.indexOf(be.op)===-1)throw new Error("Operator "+be.op+" invalid in polynomial expression");for(var pe=0;pe<be.args.length;pe++)ae(be.args[pe])}else if(ue==="SymbolNode"){var Pe=be.name,Ce=j.indexOf(Pe);Ce===-1&&j.push(Pe)}else if(ue==="ParenthesisNode")ae(be.content);else if(ue!=="ConstantNode")throw new Error("type "+ue+" is not allowed in polynomial expression")}}function H(){var O=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},f,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],F=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],U=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],I=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],j={};return j.firstRules=O.concat(F,I),j.distrDivRules=U,j.sucDivRules=I,j.firstRulesAgain=O.concat(F),j.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},f,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],j}function L(O,F,U){var I=O.type,j=arguments.length>1;if(I==="OperatorNode"&&O.isBinary()){var ee=!1,J;if(O.op==="^"&&(O.args[0].type==="ParenthesisNode"||O.args[0].type==="OperatorNode")&&O.args[1].type==="ConstantNode"&&(J=parseFloat(O.args[1].value),ee=J>=2&&Ct(J)),ee){if(J>2){var q=O.args[0],ae=new T("^","pow",[O.args[0].cloneDeep(),new S(J-1)]);O=new T("*","multiply",[q,ae])}else O=new T("*","multiply",[O.args[0],O.args[0].cloneDeep()]);j&&(U==="content"?F.content=O:F.args[U]=O)}}if(I==="ParenthesisNode")L(O.content,O,"content");else if(I!=="ConstantNode"&&I!=="SymbolNode")for(var be=0;be<O.args.length;be++)L(O.args[be],O,be);if(!j)return O}function z(O,F){F===void 0&&(F=[]),F[0]=0;var U={};U.cte=1,U.oper="+",U.fire="";var I=0,j="";Pe(O,null,U),I=F.length-1;for(var ee=!0,J,q=I;q>=0;q--)if(F[q]!==0){var ae=new S(ee?F[q]:Math.abs(F[q])),be=F[q]<0?"-":"+";if(q>0){var ue=new M(j);if(q>1){var pe=new S(q);ue=new T("^","pow",[ue,pe])}F[q]===-1&&ee?ae=new T("-","unaryMinus",[ue]):Math.abs(F[q])===1?ae=ue:ae=new T("*","multiply",[ae,ue])}ee?J=ae:be==="+"?J=new T("+","add",[J,ae]):J=new T("-","subtract",[J,ae]),ee=!1}if(ee)return new S(0);return J;function Pe(Ce,Ee,Oe){var ne=Ce.type;if(ne==="FunctionNode")throw new Error("There is an unsolved function call");if(ne==="OperatorNode"){if("+-*^".indexOf(Ce.op)===-1)throw new Error("Operator "+Ce.op+" invalid");if(Ee!==null){if((Ce.fn==="unaryMinus"||Ce.fn==="pow")&&Ee.fn!=="add"&&Ee.fn!=="subtract"&&Ee.fn!=="multiply")throw new Error("Invalid "+Ce.op+" placing");if((Ce.fn==="subtract"||Ce.fn==="add"||Ce.fn==="multiply")&&Ee.fn!=="add"&&Ee.fn!=="subtract")throw new Error("Invalid "+Ce.op+" placing");if((Ce.fn==="subtract"||Ce.fn==="add"||Ce.fn==="unaryMinus")&&Oe.noFil!==0)throw new Error("Invalid "+Ce.op+" placing")}(Ce.op==="^"||Ce.op==="*")&&(Oe.fire=Ce.op);for(var Le=0;Le<Ce.args.length;Le++)Ce.fn==="unaryMinus"&&(Oe.oper="-"),(Ce.op==="+"||Ce.fn==="subtract")&&(Oe.fire="",Oe.cte=1,Oe.oper=Le===0?"+":Ce.op),Oe.noFil=Le,Pe(Ce.args[Le],Ce,Oe)}else if(ne==="SymbolNode"){if(Ce.name!==j&&j!=="")throw new Error("There is more than one variable");if(j=Ce.name,Ee===null){F[1]=1;return}if(Ee.op==="^"&&Oe.noFil!==0)throw new Error("In power the variable should be the first parameter");if(Ee.op==="*"&&Oe.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(Oe.fire===""||Oe.fire==="*")&&(I<1&&(F[1]=0),F[1]+=Oe.cte*(Oe.oper==="+"?1:-1),I=Math.max(1,I))}else if(ne==="ConstantNode"){var Fe=parseFloat(Ce.value);if(Ee===null){F[0]=Fe;return}if(Ee.op==="^"){if(Oe.noFil!==1)throw new Error("Constant cannot be powered");if(!Ct(Fe)||Fe<=0)throw new Error("Non-integer exponent is not allowed");for(var Q=I+1;Q<Fe;Q++)F[Q]=0;Fe>I&&(F[Fe]=0),F[Fe]+=Oe.cte*(Oe.oper==="+"?1:-1),I=Math.max(Fe,I);return}Oe.cte=Fe,Oe.fire===""&&(F[0]+=Oe.cte*(Oe.oper==="+"?1:-1))}else throw new Error("Type "+ne+" is not allowed")}}}),bU="zpk2tf",j_e=["typed","add","multiply","Complex","number"],X_e=ie(bU,j_e,t=>{var{typed:e,add:n,multiply:r,Complex:i,number:a}=t;return e(bU,{"Array,Array,number":function(l,c,f){return s(l,c,f)},"Array,Array":function(l,c){return s(l,c,1)},"Matrix,Matrix,number":function(l,c,f){return s(l.valueOf(),c.valueOf(),f)},"Matrix,Matrix":function(l,c){return s(l.valueOf(),c.valueOf(),1)}});function s(u,l,c){u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>a(x))),l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>a(x)));for(var f=[i(1,0)],d=[i(1,0)],h=0;h<u.length;h++){var m=u[h];typeof m=="number"&&(m=i(m,0)),f=o(f,[i(1,0),i(-m.re,-m.im)])}for(var v=0;v<l.length;v++){var y=l[v];typeof y=="number"&&(y=i(y,0)),d=o(d,[i(1,0),i(-y.re,-y.im)])}for(var p=0;p<f.length;p++)f[p]=r(f[p],c);return[f,d]}function o(u,l){for(var c=[],f=0;f<u.length+l.length-1;f++){c[f]=i(0,0);for(var d=0;d<u.length;d++)f-d>=0&&f-d<l.length&&(c[f]=n(c[f],r(u[d],l[f-d])))}return c}}),wU="freqz",Y_e=["typed","add","multiply","Complex","divide","matrix"],Z_e=ie(wU,Y_e,t=>{var{typed:e,add:n,multiply:r,Complex:i,divide:a,matrix:s}=t;return e(wU,{"Array, Array":function(c,f){var d=u(512);return o(c,f,d)},"Array, Array, Array":function(c,f,d){return o(c,f,d)},"Array, Array, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d);return o(c,f,h)},"Matrix, Matrix":function(c,f){var d=u(512),{w:h,h:m}=o(c.valueOf(),f.valueOf(),d);return{w:s(h),h:s(m)}},"Matrix, Matrix, Matrix":function(c,f,d){var{h}=o(c.valueOf(),f.valueOf(),d.valueOf());return{h:s(h),w:s(d)}},"Matrix, Matrix, number":function(c,f,d){if(d<0)throw new Error("w must be a positive number");var h=u(d),{h:m}=o(c.valueOf(),f.valueOf(),h);return{h:s(m),w:s(h)}}});function o(l,c,f){for(var d=[],h=[],m=0;m<f.length;m++){for(var v=i(0,0),y=i(0,0),p=0;p<l.length;p++)v=n(v,r(l[p],i(Math.cos(-p*f[m]),Math.sin(-p*f[m]))));for(var x=0;x<c.length;x++)y=n(y,r(c[x],i(Math.cos(-x*f[m]),Math.sin(-x*f[m]))));d.push(v),h.push(y)}for(var g=[],S=0;S<d.length;S++)g.push(a(d[S],h[S]));return{h:g,w:f}}function u(l){for(var c=[],f=0;f<l;f++)c.push(f/l*Math.PI);return c}}),K_e="reviver",Q_e=["classes"],J_e=ie(K_e,Q_e,t=>{var{classes:e}=t;return function(r,i){var a=e[i&&i.mathjs];return a&&typeof a.fromJSON=="function"?a.fromJSON(i):i}}),eEe="replacer",tEe=[],nEe=ie(eEe,tEe,()=>function(e,n){return typeof n=="number"&&(!isFinite(n)||isNaN(n))?{mathjs:"number",value:String(n)}:n}),rEe="12.3.1",iEe=ie("true",[],()=>!0),aEe=ie("false",[],()=>!1),sEe=ie("null",[],()=>null),oEe=ys("Infinity",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1/0):1/0}),uEe=ys("NaN",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(NaN):NaN}),lEe=ys("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?HD(n):wle}),cEe=ys("tau",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?Vme(n):Sle}),fEe=ys("e",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?Hme(n):_le}),dEe=ys("phi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?Gme(n):Ele}),hEe=ys("LN2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).ln():Math.LN2}),pEe=ys("LN10",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(10).ln():Math.LN10}),mEe=ys("LOG2E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(2).ln()):Math.LOG2E}),vEe=ys("LOG10E",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(1).div(new n(10).ln()):Math.LOG10E}),gEe=ys("SQRT1_2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n("0.5").sqrt():Math.SQRT1_2}),yEe=ys("SQRT2",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?new n(2).sqrt():Math.SQRT2}),xEe=ys("i",["Complex"],t=>{var{Complex:e}=t;return e.I}),bEe=ie("version",[],()=>rEe);function ys(t,e,n){return ie(t,e,n,{recreateOnConfigChange:!0})}var wEe=jt("speedOfLight","299792458","m s^-1"),SEe=jt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),_Ee=jt("planckConstant","6.62607015e-34","J s"),EEe=jt("reducedPlanckConstant","1.0545718176461565e-34","J s"),MEe=jt("magneticConstant","1.25663706212e-6","N A^-2"),AEe=jt("electricConstant","8.8541878128e-12","F m^-1"),CEe=jt("vacuumImpedance","376.730313667","ohm"),TEe=jt("coulomb","8.987551792261171e9","N m^2 C^-2"),DEe=jt("elementaryCharge","1.602176634e-19","C"),NEe=jt("bohrMagneton","9.2740100783e-24","J T^-1"),REe=jt("conductanceQuantum","7.748091729863649e-5","S"),PEe=jt("inverseConductanceQuantum","12906.403729652257","ohm"),IEe=jt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),OEe=jt("nuclearMagneton","5.0507837461e-27","J T^-1"),FEe=jt("klitzing","25812.807459304513","ohm"),LEe=jt("bohrRadius","5.29177210903e-11","m"),BEe=jt("classicalElectronRadius","2.8179403262e-15","m"),UEe=jt("electronMass","9.1093837015e-31","kg"),zEe=jt("fermiCoupling","1.1663787e-5","GeV^-2"),kEe=iS("fineStructure",.0072973525693),$Ee=jt("hartreeEnergy","4.3597447222071e-18","J"),HEe=jt("protonMass","1.67262192369e-27","kg"),GEe=jt("deuteronMass","3.3435830926e-27","kg"),VEe=jt("neutronMass","1.6749271613e-27","kg"),WEe=jt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),qEe=jt("rydberg","10973731.568160","m^-1"),jEe=jt("thomsonCrossSection","6.6524587321e-29","m^2"),XEe=iS("weakMixingAngle",.2229),YEe=iS("efimovFactor",22.7),ZEe=jt("atomicMass","1.66053906660e-27","kg"),KEe=jt("avogadro","6.02214076e23","mol^-1"),QEe=jt("boltzmann","1.380649e-23","J K^-1"),JEe=jt("faraday","96485.33212331001","C mol^-1"),eMe=jt("firstRadiation","3.7417718521927573e-16","W m^2"),tMe=jt("loschmidt","2.686780111798444e25","m^-3"),nMe=jt("gasConstant","8.31446261815324","J K^-1 mol^-1"),rMe=jt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),iMe=jt("molarVolume","0.022413969545014137","m^3 mol^-1"),aMe=iS("sackurTetrode",-1.16487052358),sMe=jt("secondRadiation","0.014387768775039337","m K"),oMe=jt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),uMe=jt("wienDisplacement","2.897771955e-3","m K"),lMe=jt("molarMass","0.99999999965e-3","kg mol^-1"),cMe=jt("molarMassC12","11.9999999958e-3","kg mol^-1"),fMe=jt("gravity","9.80665","m s^-2"),dMe=jt("planckLength","1.616255e-35","m"),hMe=jt("planckMass","2.176435e-8","kg"),pMe=jt("planckTime","5.391245e-44","s"),mMe=jt("planckCharge","1.87554603778e-18","C"),vMe=jt("planckTemperature","1.416785e+32","K");function jt(t,e,n){var r=["config","Unit","BigNumber"];return ie(t,r,i=>{var{config:a,Unit:s,BigNumber:o}=i,u=a.number==="BigNumber"?new o(e):parseFloat(e),l=new s(u,n);return l.fixPrefix=!0,l})}function iS(t,e){var n=["config","BigNumber"];return ie(t,n,r=>{var{config:i,BigNumber:a}=r;return i.number==="BigNumber"?new a(e):e})}var gMe="apply",yMe=["typed","isInteger"],xMe=ie(gMe,yMe,t=>{var{typed:e,isInteger:n}=t,r=LD({typed:e,isInteger:n});return e("apply",{"...any":function(a){var s=a[1];Kt(s)?a[1]=s-1:Qt(s)&&(a[1]=s.minus(1));try{return r.apply(null,a)}catch(o){throw Ca(o)}}})},{isTransformFunction:!0}),bMe="column",wMe=["typed","Index","matrix","range"],SMe=ie(bMe,wMe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=DH({typed:e,Index:n,matrix:r,range:i});return e("column",{"...any":function(o){var u=o.length-1,l=o[u];Kt(l)&&(o[u]=l-1);try{return a.apply(null,o)}catch(c){throw Ca(c)}}})},{isTransformFunction:!0});function KD(t,e,n){var r=t.filter(function(o){return bi(o)&&!(o.name in e)&&!n.has(o.name)})[0];if(!r)throw new Error('No undefined variable found in inline expression "'+t+'"');var i=r.name,a=rv(n),s=t.compile();return function(u){return a.set(i,u),s.evaluate(a)}}var _Me="filter",EMe=["typed"],MMe=ie(_Me,EMe,t=>{var{typed:e}=t;function n(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(bi(i[1])||o0(i[1])?u=i[1].compile().evaluate(s):u=KD(i[1],a,s)),r(o,u)}n.rawArgs=!0;var r=e("filter",{"Array, function":SU,"Matrix, function":function(a,s){return a.create(SU(a.toArray(),s))},"Array, RegExp":db,"Matrix, RegExp":function(a,s){return a.create(db(a.toArray(),s))}});return n},{isTransformFunction:!0});function SU(t,e){return s7(t,function(n,r,i){return Fp(e,n,[r+1],i,"filter")})}var AMe="forEach",CMe=["typed"],TMe=ie(AMe,CMe,t=>{var{typed:e}=t;function n(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(bi(i[1])||o0(i[1])?u=i[1].compile().evaluate(s):u=KD(i[1],a,s)),r(o,u)}n.rawArgs=!0;var r=e("forEach",{"Array | Matrix, function":function(a,s){var o=function u(l,c){if(Array.isArray(l))Yw(l,function(f,d){u(f,c.concat(d+1))});else return Fp(s,l,c,a,"forEach")};o(a.valueOf(),[])}});return n},{isTransformFunction:!0}),DMe="index",NMe=["Index","getMatrixDataType"],RMe=ie(DMe,NMe,t=>{var{Index:e,getMatrixDataType:n}=t;return function(){for(var i=[],a=0,s=arguments.length;a<s;a++){var o=arguments[a];if(TD(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(l){return l-1});else if(Bn(o)||Ft(o))n(o)!=="boolean"&&(o=o.map(function(l){return l-1}));else if(Kt(o))o--;else if(Qt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");i[a]=o}var u=new e;return e.apply(u,i),u}},{isTransformFunction:!0}),PMe="map",IMe=["typed"],OMe=ie(PMe,IMe,t=>{var{typed:e}=t;function n(i,a,s){var o,u;return i[0]&&(o=i[0].compile().evaluate(s)),i[1]&&(bi(i[1])||o0(i[1])?u=i[1].compile().evaluate(s):u=KD(i[1],a,s)),r(o,u)}n.rawArgs=!0;var r=e("map",{"Array, function":function(a,s){return _U(a,s,a)},"Matrix, function":function(a,s){return a.create(_U(a.valueOf(),s,a))}});return n},{isTransformFunction:!0});function _U(t,e,n){function r(i,a){return Array.isArray(i)?ju(i,function(s,o){return r(s,a.concat(o+1))}):Fp(e,i,a,n,"map")}return r(t,[])}function Rc(t){if(t.length===2&&Zs(t[0])){t=t.slice();var e=t[1];Kt(e)?t[1]=e-1:Qt(e)&&(t[1]=e.minus(1))}return t}var FMe="max",LMe=["typed","config","numeric","larger"],BMe=ie(FMe,LMe,t=>{var{typed:e,config:n,numeric:r,larger:i}=t,a=zH({typed:e,config:n,numeric:r,larger:i});return e("max",{"...any":function(o){o=Rc(o);try{return a.apply(null,o)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),UMe="mean",zMe=["typed","add","divide"],kMe=ie(UMe,zMe,t=>{var{typed:e,add:n,divide:r}=t,i=XH({typed:e,add:n,divide:r});return e("mean",{"...any":function(s){s=Rc(s);try{return i.apply(null,s)}catch(o){throw Ca(o)}}})},{isTransformFunction:!0}),$Me="min",HMe=["typed","config","numeric","smaller"],GMe=ie($Me,HMe,t=>{var{typed:e,config:n,numeric:r,smaller:i}=t,a=kH({typed:e,config:n,numeric:r,smaller:i});return e("min",{"...any":function(o){o=Rc(o);try{return a.apply(null,o)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),VMe="range",WMe=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],qMe=ie(VMe,WMe,t=>{var{typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c}=t,f=IH({typed:e,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:s,larger:o,largerEq:u,add:l,isPositive:c});return e("range",{"...any":function(h){var m=h.length-1,v=h[m];return typeof v!="boolean"&&h.push(!0),f.apply(null,h)}})},{isTransformFunction:!0}),jMe="row",XMe=["typed","Index","matrix","range"],YMe=ie(jMe,XMe,t=>{var{typed:e,Index:n,matrix:r,range:i}=t,a=OH({typed:e,Index:n,matrix:r,range:i});return e("row",{"...any":function(o){var u=o.length-1,l=o[u];Kt(l)&&(o[u]=l-1);try{return a.apply(null,o)}catch(c){throw Ca(c)}}})},{isTransformFunction:!0}),ZMe="subset",KMe=["typed","matrix","zeros","add"],QMe=ie(ZMe,KMe,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=FH({typed:e,matrix:n,zeros:r,add:i});return e("subset",{"...any":function(o){try{return a.apply(null,o)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),JMe="concat",eAe=["typed","matrix","isInteger"],tAe=ie(JMe,eAe,t=>{var{typed:e,matrix:n,isInteger:r}=t,i=TH({typed:e,matrix:n,isInteger:r});return e("concat",{"...any":function(s){var o=s.length-1,u=s[o];Kt(u)?s[o]=u-1:Qt(u)&&(s[o]=u.minus(1));try{return i.apply(null,s)}catch(l){throw Ca(l)}}})},{isTransformFunction:!0}),EU="diff",nAe=["typed","matrix","subtract","number","bignumber"],rAe=ie(EU,nAe,t=>{var{typed:e,matrix:n,subtract:r,number:i,bignumber:a}=t,s=NH({typed:e,matrix:n,subtract:r,number:i,bignumber:a});return e(EU,{"...any":function(u){u=Rc(u);try{return s.apply(null,u)}catch(l){throw Ca(l)}}})},{isTransformFunction:!0}),iAe="std",aAe=["typed","map","sqrt","variance"],sAe=ie(iAe,aAe,t=>{var{typed:e,map:n,sqrt:r,variance:i}=t,a=KH({typed:e,map:n,sqrt:r,variance:i});return e("std",{"...any":function(o){o=Rc(o);try{return a.apply(null,o)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),MU="sum",oAe=["typed","config","add","numeric"],uAe=ie(MU,oAe,t=>{var{typed:e,config:n,add:r,numeric:i}=t,a=qH({typed:e,config:n,add:r,numeric:i});return e(MU,{"...any":function(o){o=Rc(o);try{return a.apply(null,o)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),lAe="quantileSeq",cAe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],fAe=ie(lAe,cAe,t=>{var{typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d}=t,h=ZH({typed:e,bignumber:n,add:r,subtract:i,divide:a,multiply:s,partitionSelect:o,compare:u,isInteger:l,smaller:c,smallerEq:f,larger:d});return e("quantileSeq",{"Array | Matrix, number | BigNumber":h,"Array | Matrix, number | BigNumber, number":(v,y,p)=>h(v,y,m(p)),"Array | Matrix, number | BigNumber, boolean":h,"Array | Matrix, number | BigNumber, boolean, number":(v,y,p,x)=>h(v,y,p,m(x)),"Array | Matrix, Array | Matrix":h,"Array | Matrix, Array | Matrix, number":(v,y,p)=>h(v,y,m(p)),"Array | Matrix, Array | Matrix, boolean":h,"Array | Matrix, Array | Matrix, boolean, number":(v,y,p,x)=>h(v,y,p,m(x))});function m(v){return Rc([[],v])[1]}},{isTransformFunction:!0}),AU="cumsum",dAe=["typed","add","unaryPlus"],hAe=ie(AU,dAe,t=>{var{typed:e,add:n,unaryPlus:r}=t,i=jH({typed:e,add:n,unaryPlus:r});return e(AU,{"...any":function(s){if(s.length===2&&Zs(s[0])){var o=s[1];Kt(o)?s[1]=o-1:Qt(o)&&(s[1]=o.minus(1))}try{return i.apply(null,s)}catch(u){throw Ca(u)}}})},{isTransformFunction:!0}),CU="variance",pAe=["typed","add","subtract","multiply","divide","apply","isNaN"],mAe=ie(CU,pAe,t=>{var{typed:e,add:n,subtract:r,multiply:i,divide:a,apply:s,isNaN:o}=t,u=YH({typed:e,add:n,subtract:r,multiply:i,divide:a,apply:s,isNaN:o});return e(CU,{"...any":function(c){c=Rc(c);try{return u.apply(null,c)}catch(f){throw Ca(f)}}})},{isTransformFunction:!0}),TU="print",vAe=["typed","matrix","zeros","add"],gAe=ie(TU,vAe,t=>{var{typed:e,matrix:n,zeros:r,add:i}=t,a=BH({typed:e,matrix:n,zeros:r,add:i});return e(TU,{"string, Object | Array":function(u,l){return a(s(u),l)},"string, Object | Array, number | Object":function(u,l,c){return a(s(u),l,c)}});function s(o){return o.replace(LH,u=>{var l=u.slice(1).split("."),c=l.map(function(f){return!isNaN(f)&&f.length>0?parseInt(f)-1:f});return"$"+c.join(".")})}},{isTransformFunction:!0}),yAe="and",xAe=["typed","matrix","zeros","add","equalScalar","not","concat"],bAe=ie(yAe,xAe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:s}=t,o=UH({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!Zs(d)&&!o(d,!0))return!1;var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),wAe="or",SAe=["typed","matrix","equalScalar","DenseMatrix","concat"],_Ae=ie(wAe,SAe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,s=CH({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!Zs(f)&&s(f,!1))return!0;var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),EAe="bitAnd",MAe=["typed","matrix","zeros","add","equalScalar","not","concat"],AAe=ie(EAe,MAe,t=>{var{typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:s}=t,o=MH({typed:e,matrix:n,equalScalar:r,zeros:i,not:a,concat:s});function u(l,c,f){var d=l[0].compile().evaluate(f);if(!Zs(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var h=l[1].compile().evaluate(f);return o(d,h)}return u.rawArgs=!0,u},{isTransformFunction:!0}),CAe="bitOr",TAe=["typed","matrix","equalScalar","DenseMatrix","concat"],DAe=ie(CAe,TAe,t=>{var{typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=t,s=AH({typed:e,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function o(u,l,c){var f=u[0].compile().evaluate(c);if(!Zs(f)){if(isNaN(f))return NaN;if(f===-1)return-1;if(f===!0)return 1}var d=u[1].compile().evaluate(c);return s(f,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),ot=Zue({config:et}),nr=ele({}),DU=fEe({BigNumber:ot,config:et}),NAe=aEe({}),RAe=kEe({BigNumber:ot,config:et}),ad=ile({}),eG=xEe({Complex:nr}),PAe=oEe({BigNumber:ot,config:et}),IAe=pEe({BigNumber:ot,config:et}),OAe=vEe({BigNumber:ot,config:et}),aS=cle({}),FAe=uEe({BigNumber:ot,config:et}),LAe=sEe({}),BAe=dEe({BigNumber:ot,config:et}),UAe=ole({}),tG=eue({}),zAe=gEe({BigNumber:ot,config:et}),kAe=aMe({BigNumber:ot,config:et}),nG=cEe({BigNumber:ot,config:et}),$Ae=iEe({}),HAe=bEe({}),en=ple({Matrix:aS}),GAe=YEe({BigNumber:ot,config:et}),VAe=hEe({BigNumber:ot,config:et}),V2=lEe({BigNumber:ot,config:et}),WAe=nEe({}),qAe=yEe({BigNumber:ot,config:et}),ye=Zoe({BigNumber:ot,Complex:nr,DenseMatrix:en,Fraction:ad}),QD=Mce({BigNumber:ot,config:et,typed:ye}),jAe=XEe({BigNumber:ot,config:et}),Ta=Cce({typed:ye}),XAe=tve({Complex:nr,config:et,typed:ye}),YAe=ave({BigNumber:ot,typed:ye}),ZAe=lve({BigNumber:ot,Complex:nr,config:et,typed:ye}),fi=Rce({typed:ye}),KAe=yde({typed:ye}),QAe=mve({BigNumber:ot,Complex:nr,config:et,typed:ye}),JAe=bve({typed:ye}),rG=_ve({typed:ye}),e2e=Cve({Complex:nr,config:et,typed:ye}),us=ace({BigNumber:ot,typed:ye}),t2e=fde({typed:ye}),n2e=nce({typed:ye}),r2e=vle({typed:ye}),sS=ISe({typed:ye}),oS=uce({Complex:nr,typed:ye}),sd=bde({typed:ye}),JD=Dve({typed:ye}),i2e=Ive({BigNumber:ot,typed:ye}),a2e=Bve({BigNumber:ot,typed:ye}),s2e=qce({typed:ye}),pn=Vle({config:et,typed:ye}),o2e=Hhe({typed:ye}),iG=Xce({typed:ye}),u2e=Zce({Complex:nr,typed:ye}),l2e=kde({typed:ye}),c2e=Vde({typed:ye}),c0=Jhe({typed:ye}),eN=jde({typed:ye}),f2e=ape({format:c0,typed:ye}),tN=Sde({typed:ye}),Wa=yle({typed:ye}),Pc=Dle({typed:ye}),od=Fle({typed:ye}),Lo=Ble({typed:ye}),d2e=mEe({BigNumber:ot,config:et}),h2e=zSe({Complex:nr,typed:ye}),p2e=Rfe({Complex:nr,config:et,typed:ye}),aG=Ife({Complex:nr,config:et,typed:ye}),ud=Jde({typed:ye}),kr=Lfe({typed:ye}),Rb=Ade({typed:ye}),ul=Qle({typed:ye}),m2e=rpe({format:c0,typed:ye}),v2e=h_e({config:et,typed:ye}),g2e=BH({typed:ye}),y2e=m_e({config:et,typed:ye}),nN=Ede({typed:ye}),x2e=$ve({BigNumber:ot,typed:ye}),sG=Hfe({BigNumber:ot,Fraction:ad,complex:oS,typed:ye}),uS=Wve({typed:ye}),ll=jle({Matrix:aS,equalScalar:pn,typed:ye}),b2e=wce({typed:ye}),w2e=jfe({typed:ye}),S2e=ece({typed:ye}),Js=Ice({typed:ye}),_2e=Yve({typed:ye}),oG=$le({typed:ye}),E2e=rve({Complex:nr,config:et,typed:ye}),M2e=fve({BigNumber:ot,typed:ye}),rN=LD({isInteger:Wa,typed:ye}),A2e=hve({BigNumber:ot,Complex:nr,config:et,typed:ye}),C2e=tpe({format:c0,typed:ye}),T2e=FSe({typed:ye}),D2e=Rve({typed:ye}),N2e=zve({BigNumber:ot,typed:ye}),f0=zle({typed:ye}),R2e=cpe({typed:ye}),P2e=g_e({config:et,typed:ye}),I2e=Gve({BigNumber:ot,typed:ye}),O2e=jve({typed:ye}),F2e=Kme({SparseMatrix:ll,typed:ye}),Bo=Wfe({Complex:nr,config:et,typed:ye}),L2e=Qve({typed:ye}),fu=_ce({typed:ye}),B2e=ove({BigNumber:ot,Complex:nr,config:et,typed:ye}),U2e=Fve({BigNumber:ot,typed:ye}),Bp=fce({Fraction:ad,typed:ye}),ld=Rle({typed:ye}),st=hce({DenseMatrix:en,Matrix:aS,SparseMatrix:ll,typed:ye}),z2e=mce({isZero:Lo,matrix:st,typed:ye}),k2e=Yhe({isNaN:f0,isNumeric:ld,typed:ye}),Ao=hpe({bignumber:us,fraction:Bp,number:ul}),uG=Khe({config:et,multiplyScalar:kr,numeric:Ao,typed:ye}),lG=ohe({isInteger:Wa,matrix:st,typed:ye}),Ii=ghe({matrix:st,config:et,typed:ye}),$2e=xhe({matrix:st,typed:ye}),d0=Mhe({matrix:st,typed:ye}),cG=Kfe({BigNumber:ot,config:et,matrix:st,typed:ye}),Ci=Dhe({BigNumber:ot,config:et,matrix:st,typed:ye}),H2e=gve({Complex:nr,config:et,typed:ye}),fG=Fce({BigNumber:ot,Complex:nr,Fraction:ad,config:et,isNegative:Pc,matrix:st,typed:ye,unaryMinus:fu}),Mn=TH({isInteger:Wa,matrix:st,typed:ye}),G2e=Ide({prod:uG,size:Ii,typed:ye}),iN=Che({conj:sd,transpose:d0,typed:ye}),dG=Bde({DenseMatrix:en,SparseMatrix:ll,matrix:st,typed:ye}),Sr=mpe({numeric:Ao,typed:ye}),h0=Dpe({DenseMatrix:en,concat:Mn,divideScalar:Sr,equalScalar:pn,matrix:st,typed:ye}),eo=rme({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),p0=Hde({matrix:st,typed:ye}),V2e=Ile({isNumeric:ld,typed:ye}),Ic=Yde({BigNumber:ot,DenseMatrix:en,SparseMatrix:ll,config:et,matrix:st,typed:ye}),W2e=Kde({matrix:st,multiplyScalar:kr,typed:ye}),lS=gme({DenseMatrix:en,concat:Mn,config:et,matrix:st,typed:ye}),q2e=$pe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye,zeros:Ci}),hG=Rpe({DenseMatrix:en,divideScalar:Sr,equalScalar:pn,matrix:st,multiplyScalar:kr,subtractScalar:Js,typed:ye}),aN=xce({flatten:p0,matrix:st,size:Ii,typed:ye}),j2e=kfe({BigNumber:ot,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),X2e=ihe({BigNumber:ot,config:et,matrix:st,typed:ye}),sN=O0e({addScalar:fi,complex:oS,conj:sd,divideScalar:Sr,equal:eo,identity:Ic,isZero:Lo,matrix:st,multiplyScalar:kr,sign:sG,sqrt:Bo,subtractScalar:Js,typed:ye,unaryMinus:fu,zeros:Ci}),Y2e=che({config:et,matrix:st}),Z2e=Gpe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye,zeros:Ci}),Up=xpe({BigNumber:ot,DenseMatrix:en,equalScalar:pn,matrix:st,typed:ye,zeros:Ci}),ba=ume({DenseMatrix:en,concat:Mn,config:et,matrix:st,typed:ye}),zr=Yfe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,subtractScalar:Js,typed:ye,unaryMinus:fu}),K2e=upe({concat:Mn,matrix:st,typed:ye}),Q2e=Sme({DenseMatrix:en,concat:Mn,config:et,equalScalar:pn,matrix:st,typed:ye}),oN=Ipe({DenseMatrix:en,divideScalar:Sr,equalScalar:pn,matrix:st,multiplyScalar:kr,subtractScalar:Js,typed:ye}),J2e=Dde({DenseMatrix:en,concat:Mn,matrix:st,typed:ye}),bn=bge({DenseMatrix:en,SparseMatrix:ll,addScalar:fi,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),eCe=Mve({BigNumber:ot,DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),tCe=MH({concat:Mn,equalScalar:pn,matrix:st,typed:ye}),nCe=AH({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),rCe=vde({DenseMatrix:en,concat:Mn,matrix:st,typed:ye}),iCe=__e({addScalar:fi,combinations:sS,divideScalar:Sr,isInteger:Wa,isNegative:Pc,multiplyScalar:kr,typed:ye}),cd=Xpe({BigNumber:ot,DenseMatrix:en,Fraction:ad,concat:Mn,config:et,equalScalar:pn,matrix:st,typed:ye}),pG=tme({concat:Mn,matrix:st,typed:ye}),aCe=jH({add:bn,typed:ye,unaryPlus:QD}),uN=bme({equal:eo,typed:ye}),sCe=NH({matrix:st,number:ul,subtract:zr,typed:ye}),oCe=vSe({abs:Ta,addScalar:fi,deepEqual:uN,divideScalar:Sr,multiplyScalar:kr,sqrt:Bo,subtractScalar:Js,typed:ye}),cS=Age({addScalar:fi,conj:sd,multiplyScalar:kr,size:Ii,typed:ye}),uCe=sme({compareText:pG,isZero:Lo,typed:ye}),mG=SH({DenseMatrix:en,config:et,equalScalar:pn,matrix:st,round:Up,typed:ye,zeros:Ci}),lCe=Mfe({BigNumber:ot,DenseMatrix:en,concat:Mn,config:et,equalScalar:pn,matrix:st,round:Up,typed:ye,zeros:Ci}),cCe=Sge({abs:Ta,addScalar:fi,divideScalar:Sr,isPositive:od,multiplyScalar:kr,smaller:ba,sqrt:Bo,typed:ye}),vG=Pme({DenseMatrix:en,smaller:ba}),na=Fme({ImmutableDenseMatrix:vG,getMatrixDataType:eN}),wa=pme({DenseMatrix:en,concat:Mn,config:et,matrix:st,typed:ye}),lN=wpe({Complex:nr,config:et,divideScalar:Sr,typed:ye}),fCe=Fpe({DenseMatrix:en,divideScalar:Sr,equalScalar:pn,matrix:st,multiplyScalar:kr,subtractScalar:Js,typed:ye}),dCe=gce({flatten:p0,matrix:st,size:Ii,typed:ye}),hCe=kH({config:et,numeric:Ao,smaller:ba,typed:ye}),gG=_H({DenseMatrix:en,concat:Mn,config:et,equalScalar:pn,matrix:st,round:Up,typed:ye,zeros:Ci}),Gn=Ufe({addScalar:fi,dot:cS,equalScalar:pn,matrix:st,multiplyScalar:kr,typed:ye}),pCe=Mpe({Complex:nr,config:et,divideScalar:Sr,typed:ye}),mCe=CH({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),fS=Mme({compare:cd,isNaN:f0,isNumeric:ld,typed:ye}),vCe=Wpe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye,zeros:Ci}),yG=iye({SparseMatrix:ll,abs:Ta,add:bn,divideScalar:Sr,larger:wa,largerEq:lS,multiply:Gn,subtract:zr,transpose:d0,typed:ye}),xs=FH({add:bn,matrix:st,typed:ye,zeros:Ci}),cN=qH({add:bn,config:et,numeric:Ao,typed:ye}),gCe=Dge({add:bn,matrix:st,typed:ye}),xG=Bpe({DenseMatrix:en,divideScalar:Sr,equalScalar:pn,matrix:st,multiplyScalar:kr,subtractScalar:Js,typed:ye}),yCe=X_e({Complex:nr,add:bn,multiply:Gn,number:ul,typed:ye}),fN=Vce({DenseMatrix:en,config:et,equalScalar:pn,matrix:st,round:Up,typed:ye,zeros:Ci}),du=Qpe({compare:cd,typed:ye}),xCe=M_e({addScalar:fi,combinations:sS,isInteger:Wa,isNegative:Pc,isPositive:od,larger:wa,typed:ye}),bCe=Fde({matrix:st,multiply:Gn,subtract:zr,typed:ye}),bG=qwe({divideScalar:Sr,isZero:Lo,matrix:st,multiply:Gn,subtractScalar:Js,typed:ye,unaryMinus:fu}),wCe=rde({concat:Mn,equalScalar:pn,matrix:st,multiplyScalar:kr,typed:ye}),wG=Ume({larger:wa,smaller:ba}),SG=Jce({Complex:nr,DenseMatrix:en,ceil:fN,equalScalar:pn,floor:mG,matrix:st,typed:ye,zeros:Ci}),_G=Rge({Index:na,typed:ye}),SCe=xSe({abs:Ta,add:bn,addScalar:fi,config:et,divideScalar:Sr,equalScalar:pn,flatten:p0,isNumeric:ld,isZero:Lo,matrix:st,multiply:Gn,multiplyScalar:kr,smaller:ba,subtract:zr,typed:ye}),_Ce=Jfe({BigNumber:ot,add:bn,config:et,equal:eo,isInteger:Wa,mod:gG,smaller:ba,typed:ye,xgcd:cG}),ECe=Dfe({concat:Mn,equalScalar:pn,matrix:st,typed:ye}),MCe=_pe({Complex:nr,config:et,divideScalar:Sr,log:lN,typed:ye}),dN=zH({config:et,larger:wa,numeric:Ao,typed:ye}),ACe=ege({DenseMatrix:en,Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),CCe=ige({DenseMatrix:en,Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),TCe=uge({Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),DCe=dge({Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),dp=fme({DenseMatrix:en,concat:Mn,config:et,matrix:st,typed:ye}),NCe=Cme({compare:cd,compareNatural:du,matrix:st,typed:ye}),RCe=UH({concat:Mn,equalScalar:pn,matrix:st,not:Rb,typed:ye,zeros:Ci}),hp=IH({bignumber:us,matrix:st,add:bn,config:et,isPositive:od,larger:wa,largerEq:lS,smaller:ba,smallerEq:dp,typed:ye}),PCe=OH({Index:na,matrix:st,range:hp,typed:ye}),EG=nge({DenseMatrix:en,Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),ICe=cge({Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),MG=vge({Index:na,concat:Mn,setDifference:EG,size:Ii,subset:xs,typed:ye}),AG=$me({FibonacciHeap:wG,addScalar:fi,equalScalar:pn}),CG=DH({Index:na,matrix:st,range:hp,typed:ye}),fd=Xwe({abs:Ta,addScalar:fi,det:bG,divideScalar:Sr,identity:Ic,matrix:st,multiply:Gn,typed:ye,unaryMinus:fu}),TG=P0e({DenseMatrix:en,Spa:AG,SparseMatrix:ll,abs:Ta,addScalar:fi,divideScalar:Sr,equalScalar:pn,larger:wa,matrix:st,multiplyScalar:kr,subtractScalar:Js,typed:ye,unaryMinus:fu}),OCe=Zwe({Complex:nr,add:bn,ctranspose:iN,deepEqual:uN,divideScalar:Sr,dot:cS,dotDivide:h0,equal:eo,inv:fd,matrix:st,multiply:Gn,typed:ye}),to=gpe({Complex:nr,config:et,fraction:Bp,identity:Ic,inv:fd,matrix:st,multiply:Gn,number:ul,typed:ye}),DG=sge({DenseMatrix:en,Index:na,compareNatural:du,size:Ii,subset:xs,typed:ye}),FCe=yge({Index:na,concat:Mn,setIntersect:DG,setSymDifference:MG,size:Ii,subset:xs,typed:ye}),LCe=aSe({abs:Ta,add:bn,identity:Ic,inv:fd,map:ud,max:dN,multiply:Gn,size:Ii,sqrt:Bo,subtract:zr,typed:ye}),$t=jme({BigNumber:ot,Complex:nr,Fraction:ad,abs:Ta,addScalar:fi,config:et,divideScalar:Sr,equal:eo,fix:SG,format:c0,isNumeric:ld,multiplyScalar:kr,number:ul,pow:to,round:Up,subtractScalar:Js}),BCe=CEe({BigNumber:ot,Unit:$t,config:et}),UCe=uMe({BigNumber:ot,Unit:$t,config:et}),zCe=ZEe({BigNumber:ot,Unit:$t,config:et}),kCe=NEe({BigNumber:ot,Unit:$t,config:et}),$Ce=QEe({BigNumber:ot,Unit:$t,config:et}),HCe=REe({BigNumber:ot,Unit:$t,config:et}),GCe=TEe({BigNumber:ot,Unit:$t,config:et}),VCe=GEe({BigNumber:ot,Unit:$t,config:et}),WCe=Cpe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,pow:to,typed:ye}),qCe=AEe({BigNumber:ot,Unit:$t,config:et}),jCe=DEe({BigNumber:ot,Unit:$t,config:et}),XCe=rSe({abs:Ta,add:bn,identity:Ic,inv:fd,multiply:Gn,typed:ye}),YCe=JEe({BigNumber:ot,Unit:$t,config:et}),NG=Rhe({addScalar:fi,ceil:fN,conj:sd,divideScalar:Sr,dotDivide:h0,exp:iG,i:eG,log2:aG,matrix:st,multiplyScalar:kr,pow:to,tau:nG,typed:ye}),hN=BSe({BigNumber:ot,Complex:nr,config:et,multiplyScalar:kr,pow:to,typed:ye}),ZCe=SEe({BigNumber:ot,Unit:$t,config:et}),KCe=$Ee({BigNumber:ot,Unit:$t,config:et}),QCe=Ihe({conj:sd,dotDivide:h0,fft:NG,typed:ye}),JCe=FEe({BigNumber:ot,Unit:$t,config:et}),eTe=tMe({BigNumber:ot,Unit:$t,config:et}),tTe=MEe({BigNumber:ot,Unit:$t,config:et}),nTe=lMe({BigNumber:ot,Unit:$t,config:et}),rTe=rMe({BigNumber:ot,Unit:$t,config:et}),iTe=VEe({BigNumber:ot,Unit:$t,config:et}),aTe=OEe({BigNumber:ot,Unit:$t,config:et}),sTe=mMe({BigNumber:ot,Unit:$t,config:et}),oTe=dMe({BigNumber:ot,Unit:$t,config:et}),uTe=vMe({BigNumber:ot,Unit:$t,config:et}),lTe=HEe({BigNumber:ot,Unit:$t,config:et}),cTe=WEe({BigNumber:ot,Unit:$t,config:et}),fTe=EEe({BigNumber:ot,Unit:$t,config:et}),dTe=qEe({BigNumber:ot,Unit:$t,config:et}),hTe=sMe({BigNumber:ot,Unit:$t,config:et}),pTe=wEe({BigNumber:ot,Unit:$t,config:et}),mTe=oMe({BigNumber:ot,Unit:$t,config:et}),vTe=jEe({BigNumber:ot,Unit:$t,config:et}),gTe=KEe({BigNumber:ot,Unit:$t,config:et}),yTe=LEe({BigNumber:ot,Unit:$t,config:et}),xTe=Jme({Unit:$t,typed:ye}),Si=pSe({divideScalar:Sr,equalScalar:pn,inv:fd,matrix:st,multiply:Gn,typed:ye}),bTe=UEe({BigNumber:ot,Unit:$t,config:et}),m0=$Se({gamma:hN,typed:ye}),wTe=eMe({BigNumber:ot,Unit:$t,config:et}),STe=fMe({BigNumber:ot,Unit:$t,config:et}),_Te=PEe({BigNumber:ot,Unit:$t,config:et}),RG=sye({DenseMatrix:en,lsolve:hG,lup:TG,matrix:st,slu:yG,typed:ye,usolve:oN}),ETe=IEe({BigNumber:ot,Unit:$t,config:et}),MTe=cMe({BigNumber:ot,Unit:$t,config:et}),ATe=WSe({add:bn,divide:Si,factorial:m0,isInteger:Wa,isPositive:od,multiply:Gn,typed:ye}),CTe=jSe({factorial:m0,typed:ye}),TTe=hMe({BigNumber:ot,Unit:$t,config:et}),DTe=uye({add:bn,cbrt:fG,divide:Si,equalScalar:pn,im:tN,isZero:Lo,multiply:Gn,re:nN,sqrt:Bo,subtract:zr,typeOf:oG,typed:ye,unaryMinus:fu}),NTe=pge({compareNatural:du,typed:ye}),RTe=zhe({abs:Ta,add:bn,bignumber:us,divide:Si,isNegative:Pc,isPositive:od,larger:wa,map:ud,matrix:st,max:dN,multiply:Gn,smaller:ba,subtract:zr,typed:ye,unaryMinus:fu}),PG=x_e({bignumber:us,addScalar:fi,combinations:sS,divideScalar:Sr,factorial:m0,isInteger:Wa,isNegative:Pc,larger:wa,multiplyScalar:kr,number:ul,pow:to,subtractScalar:Js,typed:ye}),PTe=Yme({Unit:$t,typed:ye}),ITe=w_e({addScalar:fi,isInteger:Wa,isNegative:Pc,stirlingS2:PG,typed:ye}),IG=tSe({abs:Ta,add:bn,addScalar:fi,atan:rG,bignumber:us,column:CG,complex:oS,config:et,cos:JD,diag:dG,divideScalar:Sr,dot:cS,equal:eo,flatten:p0,im:tN,inv:fd,larger:wa,matrix:st,matrixFromColumns:aN,multiply:Gn,multiplyScalar:kr,number:ul,qr:sN,re:nN,reshape:lG,sin:uS,size:Ii,smaller:ba,sqrt:Bo,subtract:zr,typed:ye,usolve:oN,usolveAll:xG}),OTe=zEe({BigNumber:ot,Unit:$t,config:et}),FTe=nMe({BigNumber:ot,Unit:$t,config:et}),LTe=GSe({divide:Si,dotDivide:h0,isNumeric:ld,log:lN,map:ud,matrix:st,multiply:Gn,sum:cN,typed:ye}),OG=XH({add:bn,divide:Si,typed:ye}),BTe=iMe({BigNumber:ot,Unit:$t,config:et}),UTe=_Ee({BigNumber:ot,Unit:$t,config:et}),zTe=ZH({bignumber:us,add:bn,compare:cd,divide:Si,isInteger:Wa,larger:wa,multiply:Gn,partitionSelect:fS,smaller:ba,smallerEq:dp,subtract:zr,typed:ye}),pN=YH({add:bn,apply:rN,divide:Si,isNaN:f0,multiply:Gn,subtract:zr,typed:ye}),kTe=BEe({BigNumber:ot,Unit:$t,config:et}),FG=ESe({add:bn,compare:cd,divide:Si,partitionSelect:fS,typed:ye}),$Te=RSe({add:bn,divide:Si,matrix:st,mean:OG,multiply:Gn,pow:to,sqrt:Bo,subtract:zr,sum:cN,typed:ye}),HTe=Z_e({Complex:nr,add:bn,divide:Si,matrix:st,multiply:Gn,typed:ye}),GTe=ASe({abs:Ta,map:ud,median:FG,subtract:zr,typed:ye}),VTe=KH({map:ud,sqrt:Bo,typed:ye,variance:pN}),WTe=jhe({BigNumber:ot,Complex:nr,add:bn,config:et,divide:Si,equal:eo,factorial:m0,gamma:hN,isNegative:Pc,multiply:Gn,pi:V2,pow:to,sin:uS,smallerEq:dp,subtract:zr,typed:ye}),mN=Ege({abs:Ta,add:bn,conj:sd,ctranspose:iN,eigs:IG,equalScalar:pn,larger:wa,matrix:st,multiply:Gn,pow:to,smaller:ba,sqrt:Bo,typed:ye}),LG=phe({BigNumber:ot,DenseMatrix:en,SparseMatrix:ll,addScalar:fi,config:et,cos:JD,matrix:st,multiplyScalar:kr,norm:mN,sin:uS,typed:ye,unaryMinus:fu}),qTe=pMe({BigNumber:ot,Unit:$t,config:et}),BG=lSe({identity:Ic,matrix:st,multiply:Gn,norm:mN,qr:sN,subtract:zr,typed:ye}),jTe=dhe({multiply:Gn,rotationMatrix:LG,typed:ye}),UG=oSe({abs:Ta,add:bn,concat:Mn,identity:Ic,index:_G,lusolve:RG,matrix:st,matrixFromColumns:aN,multiply:Gn,range:hp,schur:BG,subset:xs,subtract:zr,transpose:d0,typed:ye}),XTe=fSe({matrix:st,multiply:Gn,sylvester:UG,transpose:d0,typed:ye}),zp={},kp={},zG={},sa=Oge({mathWithTransform:kp}),$p=s0e({Node:sa}),cl=u0e({Node:sa}),dd=c0e({Node:sa}),kG=p0e({Node:sa}),Hp=Uge({Node:sa}),$G=Vge({Node:sa,ResultSet:tG}),HG=qge({Node:sa}),Oc=e0e({Node:sa}),GG=d0e({Node:sa}),YTe=J_e({classes:zG}),vN=pye({math:zp,typed:ye}),VG=n0e({Node:sa,typed:ye}),ZTe=Vwe({Chain:vN,typed:ye}),Gp=i0e({Node:sa,size:Ii}),Vp=Lge({Node:sa,subset:xs}),WG=Hge({matrix:st,Node:sa,subset:xs}),Fc=g0e({Unit:$t,Node:sa,math:zp}),Lc=x0e({Node:sa,SymbolNode:Fc,math:zp}),hu=w0e({AccessorNode:Vp,ArrayNode:Hp,AssignmentNode:WG,BlockNode:$G,ConditionalNode:HG,ConstantNode:Oc,FunctionAssignmentNode:VG,FunctionNode:Lc,IndexNode:Gp,ObjectNode:$p,OperatorNode:cl,ParenthesisNode:dd,RangeNode:GG,RelationalNode:kG,SymbolNode:Fc,config:et,numeric:Ao,typed:ye}),qG=k_e({ConstantNode:Oc,FunctionNode:Lc,OperatorNode:cl,ParenthesisNode:dd,parse:hu,typed:ye}),gN=F_e({bignumber:us,fraction:Bp,AccessorNode:Vp,ArrayNode:Hp,ConstantNode:Oc,FunctionNode:Lc,IndexNode:Gp,ObjectNode:$p,OperatorNode:cl,SymbolNode:Fc,config:et,mathWithTransform:kp,matrix:st,typed:ye}),KTe=_0e({parse:hu,typed:ye}),yN=B_e({AccessorNode:Vp,ArrayNode:Hp,ConstantNode:Oc,FunctionNode:Lc,IndexNode:Gp,ObjectNode:$p,OperatorNode:cl,ParenthesisNode:dd,SymbolNode:Fc,add:bn,divide:Si,equal:eo,isZero:Lo,multiply:Gn,parse:hu,pow:to,subtract:zr,typed:ye}),xN=M0e({parse:hu,typed:ye}),jG=fye({evaluate:xN}),XG=T0e({evaluate:xN}),dS=P_e({bignumber:us,fraction:Bp,AccessorNode:Vp,ArrayNode:Hp,ConstantNode:Oc,FunctionNode:Lc,IndexNode:Gp,ObjectNode:$p,OperatorNode:cl,ParenthesisNode:dd,SymbolNode:Fc,add:bn,config:et,divide:Si,equal:eo,isZero:Lo,mathWithTransform:kp,matrix:st,multiply:Gn,parse:hu,pow:to,resolve:qG,simplifyConstant:gN,simplifyCore:yN,subtract:zr,typed:ye}),QTe=H_e({OperatorNode:cl,parse:hu,simplify:dS,typed:ye}),JTe=C_e({parse:hu,typed:ye}),bN=N0e({Parser:XG,typed:ye}),eDe=q_e({bignumber:us,fraction:Bp,AccessorNode:Vp,ArrayNode:Hp,ConstantNode:Oc,FunctionNode:Lc,IndexNode:Gp,ObjectNode:$p,OperatorNode:cl,ParenthesisNode:dd,SymbolNode:Fc,add:bn,config:et,divide:Si,equal:eo,isZero:Lo,mathWithTransform:kp,matrix:st,multiply:Gn,parse:hu,pow:to,simplify:dS,simplifyConstant:gN,simplifyCore:yN,subtract:zr,typed:ye}),Cx=V_e({ConstantNode:Oc,FunctionNode:Lc,OperatorNode:cl,ParenthesisNode:dd,SymbolNode:Fc,config:et,equal:eo,isZero:Lo,numeric:Ao,parse:hu,simplify:dS,typed:ye}),tDe=Hwe({Help:jG,mathWithTransform:kp,typed:ye});hn(zp,{e:DU,false:NAe,fineStructure:RAe,i:eG,Infinity:PAe,LN10:IAe,LOG10E:OAe,NaN:FAe,null:LAe,phi:BAe,SQRT1_2:zAe,sackurTetrode:kAe,tau:nG,true:$Ae,E:DU,version:HAe,efimovFactor:GAe,LN2:VAe,pi:V2,replacer:WAe,reviver:YTe,SQRT2:qAe,typed:ye,unaryPlus:QD,PI:V2,weakMixingAngle:jAe,abs:Ta,acos:XAe,acot:YAe,acsc:ZAe,addScalar:fi,arg:KAe,asech:QAe,asinh:JAe,atan:rG,atanh:e2e,bignumber:us,bitNot:t2e,boolean:n2e,clone:r2e,combinations:sS,complex:oS,conj:sd,cos:JD,cot:i2e,csc:a2e,cube:s2e,equalScalar:pn,erf:o2e,exp:iG,expm1:u2e,filter:l2e,forEach:c2e,format:c0,getMatrixDataType:eN,hex:f2e,im:tN,isInteger:Wa,isNegative:Pc,isPositive:od,isZero:Lo,LOG2E:d2e,lgamma:h2e,log10:p2e,log2:aG,map:ud,multiplyScalar:kr,not:Rb,number:ul,oct:m2e,pickRandom:v2e,print:g2e,random:y2e,re:nN,sec:x2e,sign:sG,sin:uS,splitUnit:b2e,square:w2e,string:S2e,subtractScalar:Js,tan:_2e,typeOf:oG,acosh:E2e,acsch:M2e,apply:rN,asec:A2e,bin:C2e,chain:ZTe,combinationsWithRep:T2e,cosh:D2e,csch:N2e,isNaN:f0,isPrime:R2e,randomInt:P2e,sech:I2e,sinh:O2e,sparse:F2e,sqrt:Bo,tanh:L2e,unaryMinus:fu,acoth:B2e,coth:U2e,fraction:Bp,isNumeric:ld,matrix:st,matrixFromFunction:z2e,mode:k2e,numeric:Ao,prod:uG,reshape:lG,size:Ii,squeeze:$2e,transpose:d0,xgcd:cG,zeros:Ci,asin:H2e,cbrt:fG,concat:Mn,count:G2e,ctranspose:iN,diag:dG,divideScalar:Sr,dotDivide:h0,equal:eo,flatten:p0,hasNumericValue:V2e,identity:Ic,kron:W2e,largerEq:lS,leftShift:q2e,lsolve:hG,matrixFromColumns:aN,nthRoot:j2e,ones:X2e,qr:sN,resize:Y2e,rightArithShift:Z2e,round:Up,smaller:ba,subtract:zr,to:K2e,unequal:Q2e,usolve:oN,xor:J2e,add:bn,atan2:eCe,bitAnd:tCe,bitOr:nCe,bitXor:rCe,catalan:iCe,compare:cd,compareText:pG,cumsum:aCe,deepEqual:uN,diff:sCe,distance:oCe,dot:cS,equalText:uCe,floor:mG,gcd:lCe,hypot:cCe,larger:wa,log:lN,lsolveAll:fCe,matrixFromRows:dCe,min:hCe,mod:gG,multiply:Gn,nthRoots:pCe,or:mCe,partitionSelect:fS,rightLogShift:vCe,slu:yG,subset:xs,sum:cN,trace:gCe,usolveAll:xG,zpk2tf:yCe,ceil:fN,compareNatural:du,composition:xCe,cross:bCe,det:bG,dotMultiply:wCe,fix:SG,index:_G,intersect:SCe,invmod:_Ce,lcm:ECe,log1p:MCe,max:dN,setCartesian:ACe,setDistinct:CCe,setIsSubset:TCe,setPowerset:DCe,smallerEq:dp,sort:NCe,and:RCe,range:hp,row:PCe,setDifference:EG,setMultiplicity:ICe,setSymDifference:MG,column:CG,inv:fd,lup:TG,pinv:OCe,pow:to,setIntersect:DG,setUnion:FCe,sqrtm:LCe,vacuumImpedance:BCe,wienDisplacement:UCe,atomicMass:zCe,bohrMagneton:kCe,boltzmann:$Ce,conductanceQuantum:HCe,coulomb:GCe,deuteronMass:VCe,dotPow:WCe,electricConstant:qCe,elementaryCharge:jCe,expm:XCe,faraday:YCe,fft:NG,gamma:hN,gravitationConstant:ZCe,hartreeEnergy:KCe,ifft:QCe,klitzing:JCe,loschmidt:eTe,magneticConstant:tTe,molarMass:nTe,molarPlanckConstant:rTe,neutronMass:iTe,nuclearMagneton:aTe,planckCharge:sTe,planckLength:oTe,planckTemperature:uTe,protonMass:lTe,quantumOfCirculation:cTe,reducedPlanckConstant:fTe,rydberg:dTe,secondRadiation:hTe,speedOfLight:pTe,stefanBoltzmann:mTe,thomsonCrossSection:vTe,avogadro:gTe,bohrRadius:yTe,createUnit:xTe,divide:Si,electronMass:bTe,factorial:m0,firstRadiation:wTe,gravity:STe,inverseConductanceQuantum:_Te,lusolve:RG,magneticFluxQuantum:ETe,molarMassC12:MTe,multinomial:ATe,parse:hu,permutations:CTe,planckMass:TTe,polynomialRoot:DTe,resolve:qG,setSize:NTe,simplifyConstant:gN,solveODE:RTe,stirlingS2:PG,unit:PTe,bellNumbers:ITe,compile:KTe,eigs:IG,fermiCoupling:OTe,gasConstant:FTe,kldivergence:LTe,mean:OG,molarVolume:BTe,planckConstant:UTe,quantileSeq:zTe,simplifyCore:yN,variance:pN,classicalElectronRadius:kTe,evaluate:xN,median:FG,simplify:dS,symbolicEqual:QTe,corr:$Te,freqz:HTe,leafCount:JTe,mad:GTe,parser:bN,rationalize:eDe,std:VTe,zeta:WTe,derivative:Cx,norm:mN,rotationMatrix:LG,help:tDe,planckTime:qTe,schur:BG,rotate:jTe,sylvester:UG,lyap:XTe,config:et});hn(kp,zp,{filter:MMe({typed:ye}),forEach:TMe({typed:ye}),map:OMe({typed:ye}),apply:xMe({isInteger:Wa,typed:ye}),or:_Ae({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),and:bAe({add:bn,concat:Mn,equalScalar:pn,matrix:st,not:Rb,typed:ye,zeros:Ci}),concat:tAe({isInteger:Wa,matrix:st,typed:ye}),max:BMe({config:et,larger:wa,numeric:Ao,typed:ye}),print:gAe({add:bn,matrix:st,typed:ye,zeros:Ci}),bitAnd:AAe({add:bn,concat:Mn,equalScalar:pn,matrix:st,not:Rb,typed:ye,zeros:Ci}),diff:rAe({bignumber:us,matrix:st,number:ul,subtract:zr,typed:ye}),min:GMe({config:et,numeric:Ao,smaller:ba,typed:ye}),subset:QMe({add:bn,matrix:st,typed:ye,zeros:Ci}),bitOr:DAe({DenseMatrix:en,concat:Mn,equalScalar:pn,matrix:st,typed:ye}),cumsum:hAe({add:bn,typed:ye,unaryPlus:QD}),index:RMe({Index:na,getMatrixDataType:eN}),sum:uAe({add:bn,config:et,numeric:Ao,typed:ye}),range:qMe({bignumber:us,matrix:st,add:bn,config:et,isPositive:od,larger:wa,largerEq:lS,smaller:ba,smallerEq:dp,typed:ye}),row:YMe({Index:na,matrix:st,range:hp,typed:ye}),column:SMe({Index:na,matrix:st,range:hp,typed:ye}),mean:kMe({add:bn,divide:Si,typed:ye}),quantileSeq:fAe({add:bn,bignumber:us,compare:cd,divide:Si,isInteger:Wa,larger:wa,multiply:Gn,partitionSelect:fS,smaller:ba,smallerEq:dp,subtract:zr,typed:ye}),variance:mAe({add:bn,apply:rN,divide:Si,isNaN:f0,multiply:Gn,subtract:zr,typed:ye}),std:sAe({map:ud,sqrt:Bo,typed:ye,variance:pN})});hn(zG,{BigNumber:ot,Complex:nr,Fraction:ad,Matrix:aS,Node:sa,ObjectNode:$p,OperatorNode:cl,ParenthesisNode:dd,Range:UAe,RelationalNode:kG,ResultSet:tG,ArrayNode:Hp,BlockNode:$G,ConditionalNode:HG,ConstantNode:Oc,DenseMatrix:en,RangeNode:GG,Chain:vN,FunctionAssignmentNode:VG,SparseMatrix:ll,IndexNode:Gp,ImmutableDenseMatrix:vG,Index:na,AccessorNode:Vp,AssignmentNode:WG,FibonacciHeap:wG,Spa:AG,Unit:$t,SymbolNode:Fc,FunctionNode:Lc,Help:jG,Parser:XG});vN.createProxy(zp);var YG=Symbol.for("immer-nothing"),NU=Symbol.for("immer-draftable"),ds=Symbol.for("immer-state");function yo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var pp=Object.getPrototypeOf;function mp(t){return!!t&&!!t[ds]}function Vf(t){var e;return t?ZG(t)||Array.isArray(t)||!!t[NU]||!!((e=t.constructor)!=null&&e[NU])||pS(t)||mS(t):!1}var nDe=Object.prototype.constructor.toString();function ZG(t){if(!t||typeof t!="object")return!1;const e=pp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===nDe}function Sg(t,e){hS(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function hS(t){const e=t[ds];return e?e.type_:Array.isArray(t)?1:pS(t)?2:mS(t)?3:0}function W2(t,e){return hS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function KG(t,e,n){const r=hS(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function rDe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function pS(t){return t instanceof Map}function mS(t){return t instanceof Set}function cf(t){return t.copy_||t.base_}function q2(t,e){if(pS(t))return new Map(t);if(mS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&ZG(t))return pp(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[ds];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const a=r[i],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[a]})}return Object.create(pp(t),n)}function wN(t,e=!1){return vS(t)||mp(t)||!Vf(t)||(hS(t)>1&&(t.set=t.add=t.clear=t.delete=iDe),Object.freeze(t),e&&Sg(t,(n,r)=>wN(r,!0))),t}function iDe(){yo(2)}function vS(t){return Object.isFrozen(t)}var aDe={};function Wf(t){const e=aDe[t];return e||yo(0,t),e}var _g;function QG(){return _g}function sDe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RU(t,e){e&&(Wf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function j2(t){X2(t),t.drafts_.forEach(oDe),t.drafts_=null}function X2(t){t===_g&&(_g=t.parent_)}function PU(t){return _g=sDe(_g,t)}function oDe(t){const e=t[ds];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function IU(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ds].modified_&&(j2(e),yo(4)),Vf(t)&&(t=Pb(e,t),e.parent_||Ib(e,t)),e.patches_&&Wf("Patches").generateReplacementPatches_(n[ds].base_,t,e.patches_,e.inversePatches_)):t=Pb(e,n,[]),j2(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==YG?t:void 0}function Pb(t,e,n){if(vS(e))return e;const r=e[ds];if(!r)return Sg(e,(i,a)=>OU(t,r,e,i,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Ib(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,s=!1;r.type_===3&&(a=new Set(i),i.clear(),s=!0),Sg(a,(o,u)=>OU(t,r,i,o,u,n,s)),Ib(t,i,!1),n&&t.patches_&&Wf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function OU(t,e,n,r,i,a,s){if(mp(i)){const o=a&&e&&e.type_!==3&&!W2(e.assigned_,r)?a.concat(r):void 0,u=Pb(t,i,o);if(KG(n,r,u),mp(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Vf(i)&&!vS(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Pb(t,i),(!e||!e.scope_.parent_)&&Ib(t,i)}}function Ib(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&wN(e,n)}function uDe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:QG(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=SN;n&&(i=[r],a=Eg);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var SN={get(t,e){if(e===ds)return t;const n=cf(t);if(!W2(n,e))return lDe(t,n,e);const r=n[e];return t.finalized_||!Vf(r)?r:r===yM(t.base_,e)?(xM(t),t.copy_[e]=Z2(r,t)):r},has(t,e){return e in cf(t)},ownKeys(t){return Reflect.ownKeys(cf(t))},set(t,e,n){const r=JG(cf(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=yM(cf(t),e),a=i==null?void 0:i[ds];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(rDe(n,i)&&(n!==void 0||W2(t.base_,e)))return!0;xM(t),Y2(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return yM(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,xM(t),Y2(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){yo(11)},getPrototypeOf(t){return pp(t.base_)},setPrototypeOf(){yo(12)}},Eg={};Sg(SN,(t,e)=>{Eg[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Eg.deleteProperty=function(t,e){return Eg.set.call(this,t,e,void 0)};Eg.set=function(t,e,n){return SN.set.call(this,t[0],e,n,t[0])};function yM(t,e){const n=t[ds];return(n?cf(n):t)[e]}function lDe(t,e,n){var i;const r=JG(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function JG(t,e){if(!(e in t))return;let n=pp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=pp(n)}}function Y2(t){t.modified_||(t.modified_=!0,t.parent_&&Y2(t.parent_))}function xM(t){t.copy_||(t.copy_=q2(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var cDe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(u=a,...l){return s.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&yo(6),r!==void 0&&typeof r!="function"&&yo(7);let i;if(Vf(e)){const a=PU(this),s=Z2(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?j2(a):X2(a)}return RU(a,r),IU(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===YG&&(i=void 0),this.autoFreeze_&&wN(i,!0),r){const a=[],s=[];Wf("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else yo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,u=>e(u,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Vf(t)||yo(8),mp(t)&&(t=fDe(t));const e=PU(this),n=Z2(t,void 0);return n[ds].isManual_=!0,X2(e),n}finishDraft(t,e){const n=t&&t[ds];(!n||!n.isManual_)&&yo(9);const{scope_:r}=n;return RU(r,e),IU(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Wf("Patches").applyPatches_;return mp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Z2(t,e){const n=pS(t)?Wf("MapSet").proxyMap_(t,e):mS(t)?Wf("MapSet").proxySet_(t,e):uDe(t,e);return(e?e.scope_:QG()).drafts_.push(n),n}function fDe(t){return mp(t)||yo(10,t),eV(t)}function eV(t){if(!Vf(t)||vS(t))return t;const e=t[ds];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=q2(t,e.scope_.immer_.useStrictShallowCopy_)}else n=q2(t,!0);return Sg(n,(r,i)=>{KG(n,r,eV(i))}),e&&(e.finalized_=!1),n}var hs=new cDe,dDe=hs.produce;hs.produceWithPatches.bind(hs);hs.setAutoFreeze.bind(hs);hs.setUseStrictShallowCopy.bind(hs);hs.applyPatches.bind(hs);hs.createDraft.bind(hs);hs.finishDraft.bind(hs);const hDe=t=>(e,n,r)=>(r.setState=(i,a,...s)=>{const o=typeof i=="function"?dDe(i):i;return e(o,a,...s)},t(r.setState,n,r)),pDe=hDe,bM=new Float32Array([1,0,0,1,0,0]),vt=V9()(W9(pDe(t=>({levaStores:{lights:void 0,camera:void 0,animation:void 0,parameterHistory:void 0,randomization:void 0,input:void 0,style:void 0},calculationState:"ready",fixedIntervalCurvePoints:bM,uselessVariable:Math.random(),uselessFunction:()=>t(e=>e.uselessVariable=Math.random()),t:-10,ind:0,lValues:bM,transformMatrixValues:bM,parser:bN(),scrubbing:!1,autoRotate:!0,autoRotateSpeed:1,autoZoomToFit:!0,repositionCamera:!1,randomizeIn:30})))),mDe=()=>{const t=vt(l=>l.autoZoomToFit),e=vt(l=>l.repositionCamera),n=Kn(l=>l.currentPlot),r=n.innerGeometryShape,i=n.innerGeometryRadius1,a=r==="Torus"?n.innerGeometryRadius2:0,s=n.outerGeometryRadius,o=n.dLineRadius,u=(i+a+s+Math.max(0,Math.abs(o-s)))*3;return $.useEffect(()=>{if(e){const l=setTimeout(()=>{vt.setState({repositionCamera:!1})},2e3);return()=>clearTimeout(l)}},[t,e]),Ro(l=>{e&&t&&l.camera.position.lerpVectors(l.camera.position,l.camera.position.clone().multiplyScalar(u/l.camera.position.length()),.015)}),Je.jsx(Je.Fragment,{})};/**
 * postprocessing v6.35.3 build Sat Mar 30 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rschen
 * @license Zlib
 */var wM=1/1e3,vDe=1e3,gDe=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*wM}get fixedDelta(){return this._fixedDelta*wM}set fixedDelta(t){this._fixedDelta=t*vDe}get elapsed(){return this._elapsed*wM}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},yDe=new Mp,Rl=null;function xDe(){if(Rl===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Rl=new Jt,Rl.setAttribute!==void 0?(Rl.setAttribute("position",new dn(t,3)),Rl.setAttribute("uv",new dn(e,2))):(Rl.addAttribute("position",new dn(t,3)),Rl.addAttribute("uv",new dn(e,2)))}return Rl}var bs=class tV{constructor(e="Pass",n=new zf,r=yDe){this.name=e,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new qr(xDe(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new zf),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=Ec){}render(e,n,r,i,a){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,r){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof jr||n instanceof li||n instanceof yr||n instanceof tV)&&this[e].dispose()}}},bDe=class extends bs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const a=t.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},wDe=Number(ol.replace(/\D+/g,""));function v0(t){return wDe<154?t.replace("colorspace_fragment","encodings_fragment"):t}var SDe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,nV="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",rV=class extends Xr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Dn(null),opacity:new Dn(1)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:SDe,vertexShader:nV}),this.fragmentShader=v0(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},_De=class extends bs{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new rV,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new jr(1,1,{minFilter:Qn,magFilter:Qn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Di?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===Nn&&(this.renderTarget.texture.colorSpace=Nn))}},FU=new ft,iV=class extends bs{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=t.getClearAlpha(),u=a!==null,l=s>=0;u?(t.getClearColor(FU),t.setClearColor(a,l?s:o)):l&&t.setClearAlpha(s),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),u?t.setClearColor(FU,o):l&&t.setClearAlpha(o)}},EDe=class extends bs{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new iV(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const a=t.getContext(),s=t.state.buffers,o=this.scene,u=this.camera,l=this.clearPass,c=this.inverted?0:1,f=1-c;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,c,4294967295),s.stencil.setClear(f),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?l.render(t,null):(l.render(t,e),l.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(o,u)):(t.setRenderTarget(e),t.render(o,u),t.setRenderTarget(n),t.render(o,u)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},MDe=class{constructor(e=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:a}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,a,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new _De,this.depthTexture=null,this.passes=[],this.timer=new gDe,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const n=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const n=e.getSize(new qe),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Di&&e.outputColorSpace===Nn&&(this.inputBuffer.texture.colorSpace=Nn,this.outputBuffer.texture.colorSpace=Nn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height);for(const a of this.passes)a.initialize(e,r,i)}}replaceRenderer(e,n=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),n&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new Sw;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=fc,e.type=Wu):e.type=Qo,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,n,r,i){const a=this.renderer,s=a===null?new qe:a.getDrawingBufferSize(new qe),o={minFilter:Qn,magFilter:Qn,stencilBuffer:n,depthBuffer:e,type:r},u=new jr(s.width,s.height,o);return i>0&&(u.ignoreDepthForMultisampleCopy=!1,u.samples=i),r===Di&&a!==null&&a.outputColorSpace===Nn&&(u.texture.colorSpace=Nn),u.texture.name="EffectComposer.Buffer",u.texture.generateMipmaps=!1,u}setMainScene(e){for(const n of this.passes)n.mainScene=e}setMainCamera(e){for(const n of this.passes)n.mainCamera=e}addPass(e,n){const r=this.passes,i=this.renderer,a=i.getDrawingBufferSize(new qe),s=i.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(a.width,a.height),e.initialize(i,s,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const u=this.createDepthTexture();for(e of r)e.setDepthTexture(u)}else e.setDepthTexture(this.depthTexture)}removePass(e){const n=this.passes,r=n.indexOf(e);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const s=(u,l)=>u||l.needsDepthTexture;n.reduce(s,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(e.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const n=this.renderer,r=this.copyPass;let i=this.inputBuffer,a=this.outputBuffer,s=!1,o,u,l;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const c of this.passes)c.enabled&&(c.render(n,i,a,e,s),c.needsSwap&&(s&&(r.renderToScreen=c.renderToScreen,o=n.getContext(),u=n.state.buffers.stencil,u.setFunc(o.NOTEQUAL,1,4294967295),r.render(n,i,a,e,s),u.setFunc(o.EQUAL,1,4294967295)),l=i,i=a,a=l),c instanceof EDe?s=!0:c instanceof bDe&&(s=!1))}setSize(e,n,r){const i=this.renderer,a=i.getSize(new qe);(e===void 0||n===void 0)&&(e=a.width,n=a.height),(a.width!==e||a.height!==n)&&i.setSize(e,n,r);const s=i.getDrawingBufferSize(new qe);this.inputBuffer.setSize(s.width,s.height),this.outputBuffer.setSize(s.width,s.height);for(const o of this.passes)o.setSize(s.width,s.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},nu={NONE:0,DEPTH:1,CONVOLUTION:2},Hn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},ADe=class{constructor(){this.shaderParts=new Map([[Hn.FRAGMENT_HEAD,null],[Hn.FRAGMENT_MAIN_UV,null],[Hn.FRAGMENT_MAIN_IMAGE,null],[Hn.VERTEX_HEAD,null],[Hn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=nu.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ys}},SM=!1,LU=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case ri:n=this.materialsFlatShadedDoubleSide;break;case ai:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case ri:n=this.materialsDoubleSide;break;case ai:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Xr))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const a=e[i].value;a.isRenderTargetTexture&&(e[i].value=null,n.set(i,a))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=ss;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=ai,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=ri,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=ai,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=ri,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,SM){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const a of i)a[0].material=a[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return SM}static set workaroundEnabled(t){SM=t}},Pl=-1,Ji=class extends gs{constructor(t,e=Pl,n=Pl,r=1){super(),this.resizable=t,this.baseSize=new qe(1,1),this.preferredSize=new qe(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new qe,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==Pl?n.width=e.width:e.height!==Pl?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==Pl?n.height=e.height:e.width!==Pl?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(Pl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Pl}},_n={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},CDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",TDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",DDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",NDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",RDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",PDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",IDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",ODe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",FDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",LDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",BDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",UDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",zDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",kDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",$De="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",HDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",GDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",VDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",WDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",qDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",jDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",XDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",YDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",ZDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",KDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",QDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",JDe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",eNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",tNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",nNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",rNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",iNe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",aNe=new Map([[_n.ADD,CDe],[_n.ALPHA,TDe],[_n.AVERAGE,DDe],[_n.COLOR,NDe],[_n.COLOR_BURN,RDe],[_n.COLOR_DODGE,PDe],[_n.DARKEN,IDe],[_n.DIFFERENCE,ODe],[_n.DIVIDE,FDe],[_n.DST,null],[_n.EXCLUSION,LDe],[_n.HARD_LIGHT,BDe],[_n.HARD_MIX,UDe],[_n.HUE,zDe],[_n.INVERT,kDe],[_n.INVERT_RGB,$De],[_n.LIGHTEN,HDe],[_n.LINEAR_BURN,GDe],[_n.LINEAR_DODGE,VDe],[_n.LINEAR_LIGHT,WDe],[_n.LUMINOSITY,qDe],[_n.MULTIPLY,jDe],[_n.NEGATION,XDe],[_n.NORMAL,YDe],[_n.OVERLAY,ZDe],[_n.PIN_LIGHT,KDe],[_n.REFLECT,QDe],[_n.SATURATION,JDe],[_n.SCREEN,eNe],[_n.SOFT_LIGHT,tNe],[_n.SRC,nNe],[_n.SUBTRACT,rNe],[_n.VIVID_LIGHT,iNe]]),sNe=class extends gs{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Dn(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return aNe.get(this.blendFunction)}},_N={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},oNe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,uNe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",lNe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],cNe=class extends Xr{constructor(t=new Wn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Dn(null),texelSize:new Dn(new Wn),scale:new Dn(1),kernel:new Dn(0)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:oNe,vertexShader:uNe}),this.fragmentShader=v0(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=_N.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return lNe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},fNe=class extends bs{constructor({kernelSize:t=_N.MEDIUM,resolutionScale:e=.5,width:n=Ji.AUTO_SIZE,height:r=Ji.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}={}){super("KawaseBlurPass"),this.renderTargetA=new jr(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new Ji(this,i,a,e);s.addEventListener("change",o=>this.setSize(s.baseWidth,s.baseHeight)),this._blurMaterial=new cNe,this._blurMaterial.kernelSize=t,this.copyMaterial=new rV}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const a=this.scene,s=this.camera,o=this.renderTargetA,u=this.renderTargetB,l=this.blurMaterial,c=l.kernelSequence;let f=e;this.fullscreenMaterial=l;for(let d=0,h=c.length;d<h;++d){const m=d&1?u:o;l.kernel=c[d],l.inputBuffer=f.texture,t.setRenderTarget(m),t.render(a,s),f=m}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=f.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(a,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Di?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===Nn&&(this.renderTargetA.texture.colorSpace=Nn,this.renderTargetB.texture.colorSpace=Nn))}static get AUTO_SIZE(){return Ji.AUTO_SIZE}},dNe=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,hNe=class extends Xr{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:ol.replace(/\D+/g,"")},uniforms:{inputBuffer:new Dn(null),threshold:new Dn(0),smoothing:new Dn(1),range:new Dn(null)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:dNe,vertexShader:nV}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},pNe=class extends bs{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=Ji.AUTO_SIZE,height:a=Ji.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new hNe(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new jr(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const u=this.resolution=new Ji(this,s,o,r);u.addEventListener("change",l=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Di&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},mNe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,vNe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",gNe=class extends Xr{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Dn(null),texelSize:new Dn(new qe)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:mNe,vertexShader:vNe}),this.fragmentShader=v0(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},yNe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,xNe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",bNe=class extends Xr{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Dn(null),supportBuffer:new Dn(null),texelSize:new Dn(new qe),radius:new Dn(.85)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:yNe,vertexShader:xNe}),this.fragmentShader=v0(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},wNe=class extends bs{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new jr(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new gNe,this.upsamplingMaterial=new bNe,this.resolution=new qe}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const r=e.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const i=e.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:u}=this,{downsamplingMipmaps:l,upsamplingMipmaps:c}=this;let f=e;this.fullscreenMaterial=o;for(let d=0,h=l.length;d<h;++d){const m=l[d];o.setSize(f.width,f.height),o.inputBuffer=f.texture,t.setRenderTarget(m),t.render(a,s),f=m}this.fullscreenMaterial=u;for(let d=c.length-1;d>=0;--d){const h=c[d];u.setSize(f.width,f.height),u.inputBuffer=f.texture,u.supportBuffer=l[d].texture,t.setRenderTarget(h),t.render(a,s),f=h}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let a=0,s=this.downsamplingMipmaps.length;a<s;++a)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[a].setSize(r,i),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(r,i)}initialize(t,e,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==Di)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t!==null&&t.outputColorSpace===Nn)for(const i of r)i.texture.colorSpace=Nn}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},Ob=class extends gs{constructor(t,e,{attributes:n=nu.NONE,blendFunction:r=_n.NORMAL,defines:i=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=o,this.defines=i,this.uniforms=a,this.extensions=s,this.blendMode=new sNe(r),this.blendMode.addEventListener("change",u=>this.setChanged()),this._inputColorSpace=Ys,this._outputColorSpace=ma}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=Ec){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof jr||e instanceof li||e instanceof yr||e instanceof bs)&&this[t].dispose()}}},SNe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,_Ne=class extends Ob{constructor({blendFunction:t=_n.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:a=.85,levels:s=8,kernelSize:o=_N.LARGE,resolutionScale:u=.5,width:l=Ji.AUTO_SIZE,height:c=Ji.AUTO_SIZE,resolutionX:f=l,resolutionY:d=c}={}){super("BloomEffect",SNe,{blendFunction:t,uniforms:new Map([["map",new Dn(null)],["intensity",new Dn(i)]])}),this.renderTarget=new jr(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new fNe({kernelSize:o}),this.luminancePass=new pNe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new wNe,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const h=this.resolution=new Ji(this,f,d,u);h.addEventListener("change",m=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===Nn&&(this.renderTarget.texture.colorSpace=Nn))}},ENe=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,MNe="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",ANe=class extends Ob{constructor({offset:t=new qe(.001,5e-4),radialModulation:e=!1,modulationOffset:n=.15}={}){super("ChromaticAberrationEffect",ENe,{vertexShader:MNe,attributes:nu.CONVOLUTION,uniforms:new Map([["offset",new Dn(t)],["modulationOffset",new Dn(n)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(t){t?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(t){this.uniforms.get("modulationOffset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},aV=class extends bs{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new iV,this.overrideMaterialManager=n===null?null:new LU(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new LU(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const a=this.scene,s=this.camera,o=this.selection,u=s.layers.mask,l=a.background,c=t.shadowMap.autoUpdate,f=this.renderToScreen?null:e;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(f),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,a,s):t.render(a,s),s.layers.mask=u,a.background=l,t.shadowMap.autoUpdate=c}},CNe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,TNe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",DNe=class extends Xr{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Dn(null),normalBuffer:new Dn(null),texelSize:new Dn(new qe)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:CNe,vertexShader:TNe})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Ec){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},NNe=class extends bs{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Ji.AUTO_SIZE,height:r=Ji.AUTO_SIZE,resolutionX:i=n,resolutionY:a=r}={}){super("DepthDownsamplingPass");const s=new DNe;s.normalBuffer=t,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new jr(1,1,{minFilter:mr,magFilter:mr,depthBuffer:!1,type:xi}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Ji(this,i,a,e);o.addEventListener("change",u=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=Ec){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const r=t.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},RNe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,PNe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",INe=class extends Xr{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ol.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Dn(null),depthBuffer:new Dn(null),resolution:new Dn(new qe),texelSize:new Dn(new qe),cameraNear:new Dn(.3),cameraFar:new Dn(1e3),aspect:new Dn(1),time:new Dn(0)},blending:ea,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Ec){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=RNe.replace(Hn.FRAGMENT_HEAD,t.get(Hn.FRAGMENT_HEAD)||"").replace(Hn.FRAGMENT_MAIN_UV,t.get(Hn.FRAGMENT_MAIN_UV)||"").replace(Hn.FRAGMENT_MAIN_IMAGE,t.get(Hn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=PNe.replace(Hn.VERTEX_HEAD,t.get(Hn.VERTEX_HEAD)||"").replace(Hn.VERTEX_MAIN_SUPPORT,t.get(Hn.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=v0(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Hn}};function BU(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),a=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const s of n.entries())s[1]!==null&&n.set(s[0],s[1].replace(a,i))}}function ONe(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const a=r!==void 0&&/mainImage/.test(r),s=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(s&&n.attributes&nu.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,u=n.shaderParts;let l=u.get(Hn.FRAGMENT_HEAD)||"",c=u.get(Hn.FRAGMENT_MAIN_UV)||"",f=u.get(Hn.FRAGMENT_MAIN_IMAGE)||"",d=u.get(Hn.VERTEX_HEAD)||"",h=u.get(Hn.VERTEX_MAIN_SUPPORT)||"";const m=new Set,v=new Set;if(s&&(c+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);h+=`	${t}MainSupport(`,h+=x?`vUv);
`:`);
`;for(const g of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const S of g[1].split(/\s*,\s*/))n.varyings.add(S),m.add(S),v.add(S);for(const g of i.matchAll(o))v.add(g[1])}for(const x of r.matchAll(o))v.add(x[1]);for(const x of e.defines.keys())v.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of e.uniforms.keys())v.add(x);v.delete("while"),v.delete("for"),v.delete("if"),e.uniforms.forEach((x,g)=>n.uniforms.set(t+g.charAt(0).toUpperCase()+g.slice(1),x)),e.defines.forEach((x,g)=>n.defines.set(t+g.charAt(0).toUpperCase()+g.slice(1),x));const y=new Map([["fragment",r],["vertex",i]]);BU(t,v,n.defines),BU(t,v,y),r=y.get("fragment"),i=y.get("vertex");const p=e.blendMode;if(n.blendModes.set(p.blendFunction,p),a){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(f+=e.inputColorSpace===Nn?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==ma?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;f+=`${t}MainImage(color0, UV, `,n.attributes&nu.DEPTH&&x.test(r)&&(f+="depth, ",n.readDepth=!0),f+=`color1);
	`;const g=t+"BlendOpacity";n.uniforms.set(g,p.opacity),f+=`color0 = blend${p.blendFunction}(color0, color1, ${g});

	`,l+=`uniform float ${g};

`}if(l+=r+`
`,i!==null&&(d+=i+`
`),u.set(Hn.FRAGMENT_HEAD,l),u.set(Hn.FRAGMENT_MAIN_UV,c),u.set(Hn.FRAGMENT_MAIN_IMAGE,f),u.set(Hn.VERTEX_HEAD,d),u.set(Hn.VERTEX_MAIN_SUPPORT,h),e.extensions!==null)for(const x of e.extensions)n.extensions.add(x)}}var FNe=class extends bs{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new INe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new ADe;let e=0;for(const s of this.effects)if(s.blendMode.blendFunction===_n.DST)t.attributes|=s.getAttributes()&nu.DEPTH;else{if(t.attributes&s.getAttributes()&nu.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${s.name})`);ONe("e"+e++,s,t)}let n=t.shaderParts.get(Hn.FRAGMENT_HEAD),r=t.shaderParts.get(Hn.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Hn.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const s of t.blendModes.values())n+=s.getShaderCode().replace(a,`blend${s.blendFunction}`)+`
`;t.attributes&nu.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Nn&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Hn.FRAGMENT_HEAD,n),t.shaderParts.set(Hn.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Hn.FRAGMENT_MAIN_UV,i);for(const[s,o]of t.shaderParts)o!==null&&t.shaderParts.set(s,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=Ec){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const a of this.effects)a.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,a.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==Di&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},LNe=class extends bs{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=Ji.AUTO_SIZE,height:a=Ji.AUTO_SIZE,resolutionX:s=i,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new aV(t,e,new lD);const u=this.renderPass;u.ignoreBackground=!0,u.skipShadowMapUpdate=!0;const l=u.getClearPass();l.overrideClearColor=new ft(7829503),l.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new jr(1,1,{minFilter:mr,magFilter:mr}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new Ji(this,s,o,r);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,a,a)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}};const BNe=$.createContext(null),UU=t=>(t.getAttributes()&nu.CONVOLUTION)===nu.CONVOLUTION,UNe=Ae.memo($.forwardRef(({children:t,camera:e,scene:n,resolutionScale:r,enabled:i=!0,renderPriority:a=1,autoClear:s=!0,depthBuffer:o,enableNormalPass:u,stencilBuffer:l,multisampling:c=8,frameBufferType:f=Ki},d)=>{const{gl:h,scene:m,camera:v,size:y}=qi(),p=n||m,x=e||v,[g,S,E]=$.useMemo(()=>{const M=Cae(),C=new MDe(h,{depthBuffer:o,stencilBuffer:l,multisampling:c>0&&M?c:0,frameBufferType:f});C.addPass(new aV(p,x));let N=null,P=null;return u&&(P=new LNe(p,x),P.enabled=!1,C.addPass(P),r!==void 0&&M&&(N=new NNe({normalBuffer:P.texture,resolutionScale:r}),N.enabled=!1,C.addPass(N))),[C,P,N]},[x,h,o,l,c,f,p,u,r]);$.useEffect(()=>g==null?void 0:g.setSize(y.width,y.height),[g,y]),Ro((M,C)=>{if(i){const N=h.autoClear;h.autoClear=s,l&&!s&&h.clearStencil(),g.render(C),h.autoClear=N}},i?a:0);const _=$.useRef(null),A=tie(_);$.useLayoutEffect(()=>{const M=[];if(_.current&&A.current&&g){const C=A.current.objects;for(let N=0;N<C.length;N++){const P=C[N];if(P instanceof Ob){const H=[P];if(!UU(P)){let z=null;for(;(z=C[N+1])instanceof Ob&&!UU(z);)H.push(z),N++}const L=new FNe(x,...H);M.push(L)}else P instanceof bs&&M.push(P)}for(const N of M)g==null||g.addPass(N);S&&(S.enabled=!0),E&&(E.enabled=!0)}return()=>{for(const C of M)g==null||g.removePass(C);S&&(S.enabled=!1),E&&(E.enabled=!1)}},[g,t,x,S,E,A]),$.useEffect(()=>{const M=h.toneMapping;return h.toneMapping=Eo,()=>{h.toneMapping=M}},[]);const T=$.useMemo(()=>({composer:g,normalPass:S,downSamplingPass:E,resolutionScale:r,camera:x,scene:p}),[g,S,E,r,x,p]);return $.useImperativeHandle(d,()=>g,[g]),Je.jsx(BNe.Provider,{value:T,children:Je.jsx("group",{ref:_,children:t})})}));let zNe=0;const zU=new WeakMap,sV=(t,e)=>Ae.forwardRef(function({blendFunction:r=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...a},s){let o=zU.get(t);if(!o){const c=`@react-three/postprocessing/${t.name}-${zNe++}`;t0({[c]:t}),zU.set(t,o=c)}const u=qi(c=>c.camera),l=Ae.useMemo(()=>{var c,f;return[...(c=e==null?void 0:e.args)!=null?c:[],...(f=a.args)!=null?f:[{...e,...a}]]},[JSON.stringify(a)]);return Je.jsx(o,{camera:u,"blendMode-blendFunction":r,"blendMode-opacity-value":i,...a,ref:s,args:l})}),kNe=sV(_Ne,{blendFunction:_n.ADD}),$Ne=sV(ANe),HNe=()=>{const t=vt(u=>u.levaStores.style),e=t==null?void 0:t.useStore(u=>u.data["Effects.Bloom.effectsBloomEnabled"].value),n=t==null?void 0:t.useStore(u=>u.data["Effects.Bloom.effectsBloomIntensity"].value),r=t==null?void 0:t.useStore(u=>u.data["Effects.Bloom.effectsBloomLuminanceThreshold"].value),i=t==null?void 0:t.useStore(u=>u.data["Effects.Bloom.effectsBloomLuminanceSmoothing"].value),a=t==null?void 0:t.useStore(u=>u.data["Effects.Bloom.effectsBloomMipmapBlur"].value),s=t==null?void 0:t.useStore(u=>u.data["Effects.Chromatic Abberation.effectsChromaticAbberationEnabled"].value),o=t==null?void 0:t.useStore(u=>u.data["Effects.Chromatic Abberation.effectsChromaticAbberationOffset"].value);return Je.jsxs(UNe,{children:[Je.jsx(Je.Fragment,{children:e&&Je.jsx(kNe,{intensity:n,luminanceThreshold:r,luminanceSmoothing:i,mipmapBlur:a})}),Je.jsx(Je.Fragment,{children:s&&Je.jsx($Ne,{offset:o==null?void 0:o.map(u=>u/100)})})]})},GNe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=",VNe="/spherical-trochoids/assets/KofiLogo-wQd-Yfpz.png",WNe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACK0lEQVR42u3cQUgUcRTH8TdLhIVbVEh2TAg8CF3ykgSx4lWQjuFBghD24C3Bk3sPOnSzg9itS2AQXqRrHpTx5EWITcFLEIbiipLfDoKKOP//7io7723vd97HzGeZ+c+bGeaJiIgIRSqk7GAhO6RUKMppKFHFWqqUTnf/CIs5onR88FSxmipFoYLlVIRV04BUjKw8mSuSYDwOcIAD/gPAGpP0080D+plkzRZgn3EKcrbxKzDOvhVAjQG5IAxQswEYk4wwZgGwQpIJSFjRDyhLIJT1A3qDgF79gM4goNMBfgi1/Ulsfhk1fyGDPZ7abiWgdmEzp2b3G2unuy22035H5gAHOCCYQ35dblHOB7DJDK/o4/bJC65HvGSWzSsGBJu5un977h//yPOsHouEYZY0A+bokWgYYkMj4AeDUme4x1dtgEXuSAMh4a0mwBeuSYMh4ZMWQEqHNBE6+K4D0CdNhoccKABcJry3DrjPrmmACO+sA0qqANyizDw/qbHNMtN0RSuuh1/FtxBAwhu2z5X9YTRaN68CwE0WmnkCKMKEAgAFPmdu5oAnwdoXGgCvg2fit2Dts9wB3GArcj163Oxz8NYARqItzVSg+m7+gA9RwEJw9codkEYB641sq/WArSjgt27AYRTwVzegnjsrBzjAAQ5wgAMc4AAHOMABDnCAAxzgAAeoAViIAxzgAAfkDTD/SXpqGpC2wVgG64MxzI8maYPhMCfjeVYtjuf5B7Ot4ZTn79hNAAAAAElFTkSuQmCC";var qNe=Object.defineProperty,jNe=(t,e)=>{for(var n in e)qNe(t,n,{get:e[n],enumerable:!0})},To={};jNe(To,{assign:()=>ZNe,colors:()=>sc,createStringInterpolator:()=>NN,skipAnimation:()=>hV,to:()=>dV,willAdvance:()=>RN});var EN=y0(),rn=t=>g0(t,EN),MN=y0();rn.write=t=>g0(t,MN);var gS=y0();rn.onStart=t=>g0(t,gS);var AN=y0();rn.onFrame=t=>g0(t,AN);var CN=y0();rn.onFinish=t=>g0(t,CN);var $h=[];rn.setTimeout=(t,e)=>{const n=rn.now()+e,r=()=>{const a=$h.findIndex(s=>s.cancel==r);~a&&$h.splice(a,1),Yl-=~a?1:0},i={time:n,handler:t,cancel:r};return $h.splice(oV(n),0,i),Yl+=1,uV(),i};var oV=t=>~(~$h.findIndex(e=>e.time>t)||~$h.length);rn.cancel=t=>{gS.delete(t),AN.delete(t),CN.delete(t),EN.delete(t),MN.delete(t)};rn.sync=t=>{K2=!0,rn.batchedUpdates(t),K2=!1};rn.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,rn.onStart(n)}return r.handler=t,r.cancel=()=>{gS.delete(n),e=null},r};var TN=typeof window<"u"?window.requestAnimationFrame:()=>{};rn.use=t=>TN=t;rn.now=typeof performance<"u"?()=>performance.now():Date.now;rn.batchedUpdates=t=>t();rn.catch=console.error;rn.frameLoop="always";rn.advance=()=>{rn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):cV()};var Xl=-1,Yl=0,K2=!1;function g0(t,e){K2?(e.delete(t),t(0)):(e.add(t),uV())}function uV(){Xl<0&&(Xl=0,rn.frameLoop!=="demand"&&TN(lV))}function XNe(){Xl=-1}function lV(){~Xl&&(TN(lV),rn.batchedUpdates(cV))}function cV(){const t=Xl;Xl=rn.now();const e=oV(Xl);if(e&&(fV($h.splice(0,e),n=>n.handler()),Yl-=e),!Yl){XNe();return}gS.flush(),EN.flush(t?Math.min(64,Xl-t):16.667),AN.flush(),MN.flush(),CN.flush()}function y0(){let t=new Set,e=t;return{add(n){Yl+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Yl-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Yl-=e.size,fV(e,r=>r(n)&&t.add(r)),Yl+=t.size,e=t)}}}function fV(t,e){t.forEach(n=>{try{e(n)}catch(r){rn.catch(r)}})}function Q2(){}var YNe=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),dt={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Pu(t,e){if(dt.arr(t)){if(!dt.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Rn=(t,e)=>t.forEach(e);function su(t,e,n){if(dt.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var is=t=>dt.und(t)?[]:dt.arr(t)?t:[t];function Mv(t,e){if(t.size){const n=Array.from(t);t.clear(),Rn(n,e)}}var iv=(t,...e)=>Mv(t,n=>n(...e)),DN=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),NN,dV,sc=null,hV=!1,RN=Q2,ZNe=t=>{t.to&&(dV=t.to),t.now&&(rn.now=t.now),t.colors!==void 0&&(sc=t.colors),t.skipAnimation!=null&&(hV=t.skipAnimation),t.createStringInterpolator&&(NN=t.createStringInterpolator),t.requestAnimationFrame&&rn.use(t.requestAnimationFrame),t.batchedUpdates&&(rn.batchedUpdates=t.batchedUpdates),t.willAdvance&&(RN=t.willAdvance),t.frameLoop&&(rn.frameLoop=t.frameLoop)},Av=new Set,Hs=[],_M=[],Fb=0,yS={get idle(){return!Av.size&&!Hs.length},start(t){Fb>t.priority?(Av.add(t),rn.onStart(KNe)):(pV(t),rn(J2))},advance:J2,sort(t){if(Fb)rn.onFrame(()=>yS.sort(t));else{const e=Hs.indexOf(t);~e&&(Hs.splice(e,1),mV(t))}},clear(){Hs=[],Av.clear()}};function KNe(){Av.forEach(pV),Av.clear(),rn(J2)}function pV(t){Hs.includes(t)||mV(t)}function mV(t){Hs.splice(QNe(Hs,e=>e.priority>t.priority),0,t)}function J2(t){const e=_M;for(let n=0;n<Hs.length;n++){const r=Hs[n];Fb=r.priority,r.idle||(RN(r),r.advance(t),r.idle||e.push(r))}return Fb=0,_M=Hs,_M.length=0,Hs=e,Hs.length>0}function QNe(t,e){const n=t.findIndex(e);return n<0?t.length:n}var JNe=(t,e,n)=>Math.min(Math.max(n,t),e),e3e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},wo="[-+]?\\d*\\.?\\d+",Lb=wo+"%";function xS(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var t3e=new RegExp("rgb"+xS(wo,wo,wo)),n3e=new RegExp("rgba"+xS(wo,wo,wo,wo)),r3e=new RegExp("hsl"+xS(wo,Lb,Lb)),i3e=new RegExp("hsla"+xS(wo,Lb,Lb,wo)),a3e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,s3e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,o3e=/^#([0-9a-fA-F]{6})$/,u3e=/^#([0-9a-fA-F]{8})$/;function l3e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=o3e.exec(t))?parseInt(e[1]+"ff",16)>>>0:sc&&sc[t]!==void 0?sc[t]:(e=t3e.exec(t))?(rh(e[1])<<24|rh(e[2])<<16|rh(e[3])<<8|255)>>>0:(e=n3e.exec(t))?(rh(e[1])<<24|rh(e[2])<<16|rh(e[3])<<8|HU(e[4]))>>>0:(e=a3e.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=u3e.exec(t))?parseInt(e[1],16)>>>0:(e=s3e.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=r3e.exec(t))?(kU($U(e[1]),Y1(e[2]),Y1(e[3]))|255)>>>0:(e=i3e.exec(t))?(kU($U(e[1]),Y1(e[2]),Y1(e[3]))|HU(e[4]))>>>0:null}function EM(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function kU(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,a=EM(i,r,t+1/3),s=EM(i,r,t),o=EM(i,r,t-1/3);return Math.round(a*255)<<24|Math.round(s*255)<<16|Math.round(o*255)<<8}function rh(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function $U(t){return(parseFloat(t)%360+360)%360/360}function HU(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Y1(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function GU(t){let e=l3e(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,a=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${a})`}var Mg=(t,e,n)=>{if(dt.fun(t))return t;if(dt.arr(t))return Mg({range:t,output:e,extrapolate:n});if(dt.str(t.output[0]))return NN(t);const r=t,i=r.output,a=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",u=r.easing||(l=>l);return l=>{const c=f3e(l,a);return c3e(l,a[c],a[c+1],i[c],i[c+1],u,s,o,r.map)}};function c3e(t,e,n,r,i,a,s,o,u){let l=u?u(t):t;if(l<e){if(s==="identity")return l;s==="clamp"&&(l=e)}if(l>n){if(o==="identity")return l;o==="clamp"&&(l=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?l=-l:n===1/0?l=l-e:l=(l-e)/(n-e),l=a(l),r===-1/0?l=-l:i===1/0?l=l+r:l=l*(i-r)+r,l)}function f3e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var d3e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return JNe(0,1,i/t)},Bb=1.70158,Z1=Bb*1.525,VU=Bb+1,WU=2*Math.PI/3,qU=2*Math.PI/4.5,K1=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,h3e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>VU*t*t*t-Bb*t*t,easeOutBack:t=>1+VU*Math.pow(t-1,3)+Bb*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((Z1+1)*2*t-Z1)/2:(Math.pow(2*t-2,2)*((Z1+1)*(t*2-2)+Z1)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*WU),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*WU)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*qU))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*qU)/2+1,easeInBounce:t=>1-K1(1-t),easeOutBounce:K1,easeInOutBounce:t=>t<.5?(1-K1(1-2*t))/2:(1+K1(2*t-1))/2,steps:d3e},Ag=Symbol.for("FluidValue.get"),vp=Symbol.for("FluidValue.observers"),zs=t=>!!(t&&t[Ag]),La=t=>t&&t[Ag]?t[Ag]():t,jU=t=>t[vp]||null;function p3e(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Cg(t,e){const n=t[vp];n&&n.forEach(r=>{p3e(r,e)})}var vV=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");m3e(this,t)}},m3e=(t,e)=>gV(t,Ag,e);function Wp(t,e){if(t[Ag]){let n=t[vp];n||gV(t,vp,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Tg(t,e){const n=t[vp];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[vp]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var gV=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Tx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v3e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,XU=new RegExp(`(${Tx.source})(%|[a-z]+)`,"i"),g3e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,bS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,yV=t=>{const[e,n]=y3e(t);if(!e||DN())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&bS.test(n))return yV(n);if(n)return n}return t},y3e=t=>{const e=bS.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},MM,x3e=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,xV=t=>{MM||(MM=sc?new RegExp(`(${Object.keys(sc).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(a=>La(a).replace(bS,yV).replace(v3e,GU).replace(MM,GU)),n=e.map(a=>a.match(Tx).map(Number)),i=n[0].map((a,s)=>n.map(o=>{if(!(s in o))throw Error('The arity of each "output" value must be equal');return o[s]})).map(a=>Mg({...t,output:a}));return a=>{var u;const s=!XU.test(e[0])&&((u=e.find(l=>XU.test(l)))==null?void 0:u.replace(Tx,""));let o=0;return e[0].replace(Tx,()=>`${i[o++](a)}${s||""}`).replace(g3e,x3e)}},PN="react-spring: ",bV=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${PN}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},b3e=bV(console.warn);function w3e(){b3e(`${PN}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var S3e=bV(console.warn);function _3e(){S3e(`${PN}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function wS(t){return dt.str(t)&&(t[0]=="#"||/\d/.test(t)||!DN()&&bS.test(t)||t in(sc||{}))}var IN=DN()?$.useEffect:$.useLayoutEffect,E3e=()=>{const t=$.useRef(!1);return IN(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function wV(){const t=$.useState()[1],e=E3e();return()=>{e.current&&t(Math.random())}}function M3e(t,e){const[n]=$.useState(()=>({inputs:e,result:t()})),r=$.useRef(),i=r.current;let a=i;return a?e&&a.inputs&&A3e(e,a.inputs)||(a={inputs:e,result:t()}):a=n,$.useEffect(()=>{r.current=a,i==n&&(n.inputs=n.result=void 0)},[a]),a.result}function A3e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var SV=t=>$.useEffect(t,C3e),C3e=[];function YU(t){const e=$.useRef();return $.useEffect(()=>{e.current=t}),e.current}var Dg=Symbol.for("Animated:node"),T3e=t=>!!t&&t[Dg]===t,Yo=t=>t&&t[Dg],ON=(t,e)=>YNe(t,Dg,e),SS=t=>t&&t[Dg]&&t[Dg].getPayload(),_V=class{constructor(){ON(this,this)}getPayload(){return this.payload||[]}},x0=class extends _V{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,dt.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new x0(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return dt.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,dt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Ng=class extends x0{constructor(t){super(0),this._string=null,this._toString=Mg({output:[t,t]})}static create(t){return new Ng(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(dt.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Mg({output:[this.getValue(),t]})),this._value=0,super.reset()}},Ub={dependencies:null},_S=class extends _V{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return su(this.source,(n,r)=>{T3e(n)?e[r]=n.getValue(t):zs(n)?e[r]=La(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Rn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return su(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Ub.dependencies&&zs(t)&&Ub.dependencies.add(t);const e=SS(t);e&&Rn(e,n=>this.add(n))}},EV=class extends _S{constructor(t){super(t)}static create(t){return new EV(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(D3e)),!0)}};function D3e(t){return(wS(t)?Ng:x0).create(t)}function eC(t){const e=Yo(t);return e?e.constructor:dt.arr(t)?EV:wS(t)?Ng:x0}var ZU=(t,e)=>{const n=!dt.fun(t)||t.prototype&&t.prototype.isReactComponent;return $.forwardRef((r,i)=>{const a=$.useRef(null),s=n&&$.useCallback(m=>{a.current=P3e(i,m)},[i]),[o,u]=R3e(r,e),l=wV(),c=()=>{const m=a.current;if(n&&!m)return;(m?e.applyAnimatedValues(m,o.getValue(!0)):!1)===!1&&l()},f=new N3e(c,u),d=$.useRef();IN(()=>(d.current=f,Rn(u,m=>Wp(m,f)),()=>{d.current&&(Rn(d.current.deps,m=>Tg(m,d.current)),rn.cancel(d.current.update))})),$.useEffect(c,[]),SV(()=>()=>{const m=d.current;Rn(m.deps,v=>Tg(v,m))});const h=e.getComponentProps(o.getValue());return $.createElement(t,{...h,ref:s})})},N3e=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&rn.write(this.update)}};function R3e(t,e){const n=new Set;return Ub.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new _S(t),Ub.dependencies=null,[t,n]}function P3e(t,e){return t&&(dt.fun(t)?t(e):t.current=e),e}var KU=Symbol.for("AnimatedComponent"),I3e=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new _S(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},a=s=>{const o=QU(s)||"Anonymous";return dt.str(s)?s=a[s]||(a[s]=ZU(s,i)):s=s[KU]||(s[KU]=ZU(s,i)),s.displayName=`Animated(${o})`,s};return su(t,(s,o)=>{dt.arr(t)&&(o=QU(s)),a[o]=a(s)}),{animated:a}},QU=t=>dt.str(t)?t:t&&dt.str(t.displayName)?t.displayName:dt.fun(t)&&t.name||null;function df(t,...e){return dt.fun(t)?t(...e):t}var Cv=(t,e)=>t===!0||!!(e&&t&&(dt.fun(t)?t(e):is(t).includes(e))),MV=(t,e)=>dt.obj(t)?e&&t[e]:t,AV=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,O3e=t=>t,FN=(t,e=O3e)=>{let n=F3e;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const a=e(t[i],i);dt.und(a)||(r[i]=a)}return r},F3e=["config","onProps","onStart","onChange","onPause","onResume","onRest"],L3e={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function B3e(t){const e={};let n=0;if(su(t,(r,i)=>{L3e[i]||(e[i]=r,n++)}),n)return e}function CV(t){const e=B3e(t);if(e){const n={to:e};return su(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function Rg(t){return t=La(t),dt.arr(t)?t.map(Rg):wS(t)?To.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function U3e(t){for(const e in t)return!0;return!1}function tC(t){return dt.fun(t)||dt.arr(t)&&dt.obj(t[0])}function z3e(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function k3e(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var $3e={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},nC={...$3e.default,mass:1,damping:1,easing:h3e.linear,clamp:!1},H3e=class{constructor(){this.velocity=0,Object.assign(this,nC)}};function G3e(t,e,n){n&&(n={...n},JU(n,e),e={...n,...e}),JU(t,e),Object.assign(t,e);for(const s in nC)t[s]==null&&(t[s]=nC[s]);let{frequency:r,damping:i}=t;const{mass:a}=t;return dt.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*a,t.friction=4*Math.PI*i*a/r),t}function JU(t,e){if(!dt.und(e.decay))t.duration=void 0;else{const n=!dt.und(e.tension)||!dt.und(e.friction);(n||!dt.und(e.frequency)||!dt.und(e.damping)||!dt.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var ez=[],V3e=class{constructor(){this.changed=!1,this.values=ez,this.toValues=null,this.fromValues=ez,this.config=new H3e,this.immediate=!1}};function TV(t,{key:e,props:n,defaultProps:r,state:i,actions:a}){return new Promise((s,o)=>{let u,l,c=Cv(n.cancel??(r==null?void 0:r.cancel),e);if(c)h();else{dt.und(n.pause)||(i.paused=Cv(n.pause,e));let m=r==null?void 0:r.pause;m!==!0&&(m=i.paused||Cv(m,e)),u=df(n.delay||0,e),m?(i.resumeQueue.add(d),a.pause()):(a.resume(),d())}function f(){i.resumeQueue.add(d),i.timeouts.delete(l),l.cancel(),u=l.time-rn.now()}function d(){u>0&&!To.skipAnimation?(i.delayed=!0,l=rn.setTimeout(h,u),i.pauseQueue.add(f),i.timeouts.add(l)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(f),i.timeouts.delete(l),t<=(i.cancelId||0)&&(c=!0);try{a.start({...n,callId:t,cancel:c},s)}catch(m){o(m)}}})}var LN=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Hh(t.get()):e.every(n=>n.noop)?DV(t.get()):go(t.get(),e.every(n=>n.finished)),DV=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),go=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Hh=t=>({value:t,cancelled:!0,finished:!1});function NV(t,e,n,r){const{callId:i,parentId:a,onRest:s}=e,{asyncTo:o,promise:u}=n;return!a&&t===o&&!e.reset?u:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const l=FN(e,(y,p)=>p==="onRest"?void 0:y);let c,f;const d=new Promise((y,p)=>(c=y,f=p)),h=y=>{const p=i<=(n.cancelId||0)&&Hh(r)||i!==n.asyncId&&go(r,!1);if(p)throw y.result=p,f(y),y},m=(y,p)=>{const x=new tz,g=new nz;return(async()=>{if(To.skipAnimation)throw Pg(n),g.result=go(r,!1),f(g),g;h(x);const S=dt.obj(y)?{...y}:{...p,to:y};S.parentId=i,su(l,(_,A)=>{dt.und(S[A])&&(S[A]=_)});const E=await r.start(S);return h(x),n.paused&&await new Promise(_=>{n.resumeQueue.add(_)}),E})()};let v;if(To.skipAnimation)return Pg(n),go(r,!1);try{let y;dt.arr(t)?y=(async p=>{for(const x of p)await m(x)})(t):y=Promise.resolve(t(m,r.stop.bind(r))),await Promise.all([y.then(c),d]),v=go(r.get(),!0,!1)}catch(y){if(y instanceof tz)v=y.result;else if(y instanceof nz)v=y.result;else throw y}finally{i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?o:void 0,n.promise=a?u:void 0)}return dt.fun(s)&&rn.batchedUpdates(()=>{s(v,r,r.item)}),v})()}function Pg(t,e){Mv(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var tz=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},nz=class extends Error{constructor(){super("SkipAnimationSignal")}},rC=t=>t instanceof BN,W3e=1,BN=class extends vV{constructor(){super(...arguments),this.id=W3e++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Yo(this);return t&&t.getValue()}to(...t){return To.to(this,t)}interpolate(...t){return w3e(),To.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Cg(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||yS.sort(this),Cg(this,{type:"priority",parent:this,priority:t})}},qf=Symbol.for("SpringPhase"),RV=1,iC=2,aC=4,AM=t=>(t[qf]&RV)>0,Il=t=>(t[qf]&iC)>0,Wm=t=>(t[qf]&aC)>0,rz=(t,e)=>e?t[qf]|=iC|RV:t[qf]&=~iC,iz=(t,e)=>e?t[qf]|=aC:t[qf]&=~aC,q3e=class extends BN{constructor(t,e){if(super(),this.animation=new V3e,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!dt.und(t)||!dt.und(e)){const n=dt.obj(t)?{...t}:{...e,from:t};dt.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Il(this)||this._state.asyncTo)||Wm(this)}get goal(){return La(this.animation.to)}get velocity(){const t=Yo(this);return t instanceof x0?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return AM(this)}get isAnimating(){return Il(this)}get isPaused(){return Wm(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:a}=r,s=SS(r.to);!s&&zs(r.to)&&(i=is(La(r.to))),r.values.forEach((l,c)=>{if(l.done)return;const f=l.constructor==Ng?1:s?s[c].lastPosition:i[c];let d=r.immediate,h=f;if(!d){if(h=l.lastPosition,a.tension<=0){l.done=!0;return}let m=l.elapsedTime+=t;const v=r.fromValues[c],y=l.v0!=null?l.v0:l.v0=dt.arr(a.velocity)?a.velocity[c]:a.velocity;let p;const x=a.precision||(v==f?.005:Math.min(1,Math.abs(f-v)*.001));if(dt.und(a.duration))if(a.decay){const g=a.decay===!0?.998:a.decay,S=Math.exp(-(1-g)*m);h=v+y/(1-g)*(1-S),d=Math.abs(l.lastPosition-h)<=x,p=y*S}else{p=l.lastVelocity==null?y:l.lastVelocity;const g=a.restVelocity||x/10,S=a.clamp?0:a.bounce,E=!dt.und(S),_=v==f?l.v0>0:v<f;let A,T=!1;const M=1,C=Math.ceil(t/M);for(let N=0;N<C&&(A=Math.abs(p)>g,!(!A&&(d=Math.abs(f-h)<=x,d)));++N){E&&(T=h==f||h>f==_,T&&(p=-p*S,h=f));const P=-a.tension*1e-6*(h-f),H=-a.friction*.001*p,L=(P+H)/a.mass;p=p+L*M,h=h+p*M}}else{let g=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,l.durationProgress>0&&(l.elapsedTime=a.duration*l.durationProgress,m=l.elapsedTime+=t)),g=(a.progress||0)+m/this._memoizedDuration,g=g>1?1:g<0?0:g,l.durationProgress=g),h=v+a.easing(g)*(f-v),p=(h-l.lastPosition)/t,d=g==1}l.lastVelocity=p,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}s&&!s[c].done&&(d=!1),d?l.done=!0:e=!1,l.setValue(h,a.round)&&(n=!0)});const o=Yo(this),u=o.getValue();if(e){const l=La(r.to);(u!==l||n)&&!a.decay?(o.setValue(l),this._onChange(l)):n&&a.decay&&this._onChange(u),this._stop()}else n&&this._onChange(u)}set(t){return rn.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Il(this)){const{to:t,config:e}=this.animation;rn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return dt.und(t)?(n=this.queue||[],this.queue=[]):n=[dt.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>LN(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),Pg(this._state,t&&this._lastCallId),rn.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=dt.obj(n)?n[e]:n,(n==null||tC(n))&&(n=void 0),r=dt.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return AM(this)||(t.reverse&&([n,r]=[r,n]),r=La(r),dt.und(r)?Yo(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,FN(t,(s,o)=>/^on/.test(o)?MV(s,n):s)),sz(this,t,"onProps"),jm(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return TV(++this._lastCallId,{key:n,props:t,defaultProps:r,state:a,actions:{pause:()=>{Wm(this)||(iz(this,!0),iv(a.pauseQueue),jm(this,"onPause",go(this,qm(this,this.animation.to)),this))},resume:()=>{Wm(this)&&(iz(this,!1),Il(this)&&this._resume(),iv(a.resumeQueue),jm(this,"onResume",go(this,qm(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(s=>{if(t.loop&&s.finished&&!(e&&s.noop)){const o=PV(t);if(o)return this._update(o,!0)}return s})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Hh(this));const r=!dt.und(t.to),i=!dt.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Hh(this));const{key:a,defaultProps:s,animation:o}=this,{to:u,from:l}=o;let{to:c=u,from:f=l}=t;i&&!r&&(!e.default||dt.und(c))&&(c=f),e.reverse&&([c,f]=[f,c]);const d=!Pu(f,l);d&&(o.from=f),f=La(f);const h=!Pu(c,u);h&&this._focus(c);const m=tC(e.to),{config:v}=o,{decay:y,velocity:p}=v;(r||i)&&(v.velocity=0),e.config&&!m&&G3e(v,df(e.config,a),e.config!==s.config?df(s.config,a):void 0);let x=Yo(this);if(!x||dt.und(c))return n(go(this,!0));const g=dt.und(e.reset)?i&&!e.default:!dt.und(f)&&Cv(e.reset,a),S=g?f:this.get(),E=Rg(c),_=dt.num(E)||dt.arr(E)||wS(E),A=!m&&(!_||Cv(s.immediate||e.immediate,a));if(h){const N=eC(c);if(N!==x.constructor)if(A)x=this._set(E);else throw Error(`Cannot animate between ${x.constructor.name} and ${N.name}, as the "to" prop suggests`)}const T=x.constructor;let M=zs(c),C=!1;if(!M){const N=g||!AM(this)&&d;(h||N)&&(C=Pu(Rg(S),E),M=!C),(!Pu(o.immediate,A)&&!A||!Pu(v.decay,y)||!Pu(v.velocity,p))&&(M=!0)}if(C&&Il(this)&&(o.changed&&!g?M=!0:M||this._stop(u)),!m&&((M||zs(u))&&(o.values=x.getPayload(),o.toValues=zs(c)?null:T==Ng?[1]:is(E)),o.immediate!=A&&(o.immediate=A,!A&&!g&&this._set(u)),M)){const{onRest:N}=o;Rn(X3e,H=>sz(this,e,H));const P=go(this,qm(this,u));iv(this._pendingCalls,P),this._pendingCalls.add(n),o.changed&&rn.batchedUpdates(()=>{var H;o.changed=!g,N==null||N(P,this),g?df(s.onRest,P):(H=o.onStart)==null||H.call(o,P,this)})}g&&this._set(S),m?n(NV(e.to,e,this._state,this)):M?this._start():Il(this)&&!h?this._pendingCalls.add(n):n(DV(S))}_focus(t){const e=this.animation;t!==e.to&&(jU(this)&&this._detach(),e.to=t,jU(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;zs(e)&&(Wp(e,this),rC(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;zs(t)&&Tg(t,this)}_set(t,e=!0){const n=La(t);if(!dt.und(n)){const r=Yo(this);if(!r||!Pu(n,r.getValue())){const i=eC(n);!r||r.constructor!=i?ON(this,i.create(n)):r.setValue(n),r&&rn.batchedUpdates(()=>{this._onChange(n,e)})}}return Yo(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,jm(this,"onStart",go(this,qm(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),df(this.animation.onChange,t,this)),df(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Yo(this).reset(La(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Il(this)||(rz(this,!0),Wm(this)||this._resume())}_resume(){To.skipAnimation?this.finish():yS.start(this)}_stop(t,e){if(Il(this)){rz(this,!1);const n=this.animation;Rn(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Cg(this,{type:"idle",parent:this});const r=e?Hh(this.get()):go(this.get(),qm(this,t??n.to));iv(this._pendingCalls,r),n.changed&&(n.changed=!1,jm(this,"onRest",r,this))}}};function qm(t,e){const n=Rg(e),r=Rg(t.get());return Pu(r,n)}function PV(t,e=t.loop,n=t.to){const r=df(e);if(r){const i=r!==!0&&CV(r),a=(i||t).reverse,s=!i||i.reset;return Ig({...t,loop:e,default:!1,pause:void 0,to:!a||tC(n)?n:void 0,from:s?t.from:void 0,reset:s,...i})}}function Ig(t){const{to:e,from:n}=t=CV(t),r=new Set;return dt.obj(e)&&az(e,r),dt.obj(n)&&az(n,r),t.keys=r.size?Array.from(r):null,t}function j3e(t){const e=Ig(t);return dt.und(e.default)&&(e.default=FN(e)),e}function az(t,e){su(t,(n,r)=>n!=null&&e.add(r))}var X3e=["onStart","onRest","onChange","onPause","onResume"];function sz(t,e,n){t.animation[n]=e[n]!==AV(e,n)?MV(e[n],t.key):void 0}function jm(t,e,...n){var r,i,a,s;(i=(r=t.animation)[e])==null||i.call(r,...n),(s=(a=t.defaultProps)[e])==null||s.call(a,...n)}var Y3e=["onStart","onChange","onRest"],Z3e=1,K3e=class{constructor(t,e){this.id=Z3e++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];dt.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(Ig(t)),this}start(t){let{queue:e}=this;return t?e=is(t).map(Ig):this.queue=[],this._flush?this._flush(this,e):(BV(this,e),sC(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Rn(is(e),r=>n[r].stop(!!t))}else Pg(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(dt.und(t))this.start({pause:!0});else{const e=this.springs;Rn(is(t),n=>e[n].pause())}return this}resume(t){if(dt.und(t))this.start({pause:!1});else{const e=this.springs;Rn(is(t),n=>e[n].resume())}return this}each(t){su(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Mv(t,([o,u])=>{u.value=this.get(),o(u,this,this._item)}));const a=!r&&this._started,s=i||a&&n.size?this.get():null;i&&e.size&&Mv(e,([o,u])=>{u.value=s,o(u,this,this._item)}),a&&(this._started=!1,Mv(n,([o,u])=>{u.value=s,o(u,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;rn.onFrame(this._onFrame)}};function sC(t,e){return Promise.all(e.map(n=>IV(t,n))).then(n=>LN(t,n))}async function IV(t,e,n){const{keys:r,to:i,from:a,loop:s,onRest:o,onResolve:u}=e,l=dt.obj(e.default)&&e.default;s&&(e.loop=!1),i===!1&&(e.to=null),a===!1&&(e.from=null);const c=dt.arr(i)||dt.fun(i)?i:void 0;c?(e.to=void 0,e.onRest=void 0,l&&(l.onRest=void 0)):Rn(Y3e,v=>{const y=e[v];if(dt.fun(y)){const p=t._events[v];e[v]=({finished:x,cancelled:g})=>{const S=p.get(y);S?(x||(S.finished=!1),g&&(S.cancelled=!0)):p.set(y,{value:null,finished:x||!1,cancelled:g||!1})},l&&(l[v]=e[v])}});const f=t._state;e.pause===!f.paused?(f.paused=e.pause,iv(e.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(e.pause=!0);const d=(r||Object.keys(t.springs)).map(v=>t.springs[v].start(e)),h=e.cancel===!0||AV(e,"cancel")===!0;(c||h&&f.asyncId)&&d.push(TV(++t._lastAsyncId,{props:e,state:f,actions:{pause:Q2,resume:Q2,start(v,y){h?(Pg(f,t._lastAsyncId),y(Hh(t))):(v.onRest=o,y(NV(c,v,f,t)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});const m=LN(t,await Promise.all(d));if(s&&m.finished&&!(n&&m.noop)){const v=PV(e,s,i);if(v)return BV(t,[v]),IV(t,v,!0)}return u&&rn.batchedUpdates(()=>u(m,t,t.item)),m}function oz(t,e){const n={...t.springs};return e&&Rn(is(e),r=>{dt.und(r.keys)&&(r=Ig(r)),dt.obj(r.to)||(r={...r,to:void 0}),LV(n,r,i=>FV(i))}),OV(t,n),n}function OV(t,e){su(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,Wp(n,t))})}function FV(t,e){const n=new q3e;return n.key=t,e&&Wp(n,e),n}function LV(t,e,n){e.keys&&Rn(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function BV(t,e){Rn(e,n=>{LV(t.springs,n,r=>FV(r,t))})}var ES=({children:t,...e})=>{const n=$.useContext(zb),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=M3e(()=>({pause:r,immediate:i}),[r,i]);const{Provider:a}=zb;return $.createElement(a,{value:e},t)},zb=Q3e(ES,{});ES.Provider=zb.Provider;ES.Consumer=zb.Consumer;function Q3e(t,e){return Object.assign(t,$.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var J3e=()=>{const t=[],e=function(r){_3e();const i=[];return Rn(t,(a,s)=>{if(dt.und(r))i.push(a.start());else{const o=n(r,a,s);o&&i.push(a.start(o))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Rn(t,r=>r.pause(...arguments)),this},e.resume=function(){return Rn(t,r=>r.resume(...arguments)),this},e.set=function(r){Rn(t,(i,a)=>{const s=dt.fun(r)?r(a,i):r;s&&i.set(s)})},e.start=function(r){const i=[];return Rn(t,(a,s)=>{if(dt.und(r))i.push(a.start());else{const o=this._getProps(r,a,s);o&&i.push(a.start(o))}}),i},e.stop=function(){return Rn(t,r=>r.stop(...arguments)),this},e.update=function(r){return Rn(t,(i,a)=>i.update(this._getProps(r,i,a))),this};const n=function(r,i,a){return dt.fun(r)?r(a,i):r};return e._getProps=n,e};function eRe(t,e,n){const r=dt.fun(e)&&e;r&&!n&&(n=[]);const i=$.useMemo(()=>r||arguments.length==3?J3e():void 0,[]),a=$.useRef(0),s=wV(),o=$.useMemo(()=>({ctrls:[],queue:[],flush(p,x){const g=oz(p,x);return a.current>0&&!o.queue.length&&!Object.keys(g).some(E=>!p.springs[E])?sC(p,x):new Promise(E=>{OV(p,g),o.queue.push(()=>{E(sC(p,x))}),s()})}}),[]),u=$.useRef([...o.ctrls]),l=[],c=YU(t)||0;$.useMemo(()=>{Rn(u.current.slice(t,c),p=>{z3e(p,i),p.stop(!0)}),u.current.length=t,f(c,t)},[t]),$.useMemo(()=>{f(0,Math.min(c,t))},n);function f(p,x){for(let g=p;g<x;g++){const S=u.current[g]||(u.current[g]=new K3e(null,o.flush)),E=r?r(g,S):e[g];E&&(l[g]=j3e(E))}}const d=u.current.map((p,x)=>oz(p,l[x])),h=$.useContext(ES),m=YU(h),v=h!==m&&U3e(h);IN(()=>{a.current++,o.ctrls=u.current;const{queue:p}=o;p.length&&(o.queue=[],Rn(p,x=>x())),Rn(u.current,(x,g)=>{i==null||i.add(x),v&&x.start({default:h});const S=l[g];S&&(k3e(x,S.ref),x.ref?x.queue.push(S):x.start(S))})}),SV(()=>()=>{Rn(o.ctrls,p=>p.stop(!0))});const y=d.map(p=>({...p}));return i?[y,i]:y}function UV(t,e){const n=dt.fun(t),[[r],i]=eRe(1,n?t:[t],n?e||[]:e);return n||arguments.length==2?[r,i]:r}var tRe=class extends BN{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Mg(...e);const n=this._get(),r=eC(n);ON(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Pu(e,n)||(Yo(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&uz(this._active)&&CM(this)}_get(){const t=dt.arr(this.source)?this.source.map(La):is(La(this.source));return this.calc(...t)}_start(){this.idle&&!uz(this._active)&&(this.idle=!1,Rn(SS(this),t=>{t.done=!1}),To.skipAnimation?(rn.batchedUpdates(()=>this.advance()),CM(this)):yS.start(this))}_attach(){let t=1;Rn(is(this.source),e=>{zs(e)&&Wp(e,this),rC(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Rn(is(this.source),t=>{zs(t)&&Tg(t,this)}),this._active.clear(),CM(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=is(this.source).reduce((e,n)=>Math.max(e,(rC(n)?n.priority:0)+1),0))}};function nRe(t){return t.idle!==!1}function uz(t){return!t.size||Array.from(t).every(nRe)}function CM(t){t.idle||(t.idle=!0,Rn(SS(t),e=>{e.done=!0}),Cg(t,{type:"idle",parent:t}))}To.assign({createStringInterpolator:xV,to:(t,e)=>new tRe(t,e)});var zV=/^--/;function rRe(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!zV.test(t)&&!(Tv.hasOwnProperty(t)&&Tv[t])?e+"px":(""+e).trim()}var lz={};function iRe(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:r,children:i,scrollTop:a,scrollLeft:s,viewBox:o,...u}=e,l=Object.values(u),c=Object.keys(u).map(f=>n||t.hasAttribute(f)?f:lz[f]||(lz[f]=f.replace(/([A-Z])/g,d=>"-"+d.toLowerCase())));i!==void 0&&(t.textContent=i);for(const f in r)if(r.hasOwnProperty(f)){const d=rRe(f,r[f]);zV.test(f)?t.style.setProperty(f,d):t.style[f]=d}c.forEach((f,d)=>{t.setAttribute(f,l[d])}),a!==void 0&&(t.scrollTop=a),s!==void 0&&(t.scrollLeft=s),o!==void 0&&t.setAttribute("viewBox",o)}var Tv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aRe=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),sRe=["Webkit","Ms","Moz","O"];Tv=Object.keys(Tv).reduce((t,e)=>(sRe.forEach(n=>t[aRe(n,e)]=t[e]),t),Tv);var oRe=/^(matrix|translate|scale|rotate|skew)/,uRe=/^(translate)/,lRe=/^(rotate|skew)/,TM=(t,e)=>dt.num(t)&&t!==0?t+e:t,Dx=(t,e)=>dt.arr(t)?t.every(n=>Dx(n,e)):dt.num(t)?t===e:parseFloat(t)===e,cRe=class extends _S{constructor({x:t,y:e,z:n,...r}){const i=[],a=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),a.push(s=>[`translate3d(${s.map(o=>TM(o,"px")).join(",")})`,Dx(s,0)])),su(r,(s,o)=>{if(o==="transform")i.push([s||""]),a.push(u=>[u,u===""]);else if(oRe.test(o)){if(delete r[o],dt.und(s))return;const u=uRe.test(o)?"px":lRe.test(o)?"deg":"";i.push(is(s)),a.push(o==="rotate3d"?([l,c,f,d])=>[`rotate3d(${l},${c},${f},${TM(d,u)})`,Dx(d,0)]:l=>[`${o}(${l.map(c=>TM(c,u)).join(",")})`,Dx(l,o.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new fRe(i,a)),super(r)}},fRe=class extends vV{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Rn(this.inputs,(n,r)=>{const i=La(n[0]),[a,s]=this.transforms[r](dt.arr(i)?i:n.map(La));t+=" "+a,e=e&&s}),e?"none":t}observerAdded(t){t==1&&Rn(this.inputs,e=>Rn(e,n=>zs(n)&&Wp(n,this)))}observerRemoved(t){t==0&&Rn(this.inputs,e=>Rn(e,n=>zs(n)&&Tg(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Cg(this,t)}},dRe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];To.assign({batchedUpdates:_p.unstable_batchedUpdates,createStringInterpolator:xV,colors:e3e});var hRe=I3e(dRe,{applyAnimatedValues:iRe,createAnimatedStyle:t=>new cRe(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Dv=hRe.animated;const kV=Math.sqrt(1.05*.05)-.05,pRe=/^(?:[0-9a-f]{3}){1,2}$/i,cz={black:"#000000",white:"#ffffff",threshold:kV};function mRe(t,e=2){return(new Array(e).join("0")+t).slice(-e)}function oC(t){if(t.slice(0,1)==="#"&&(t=t.slice(1)),!pRe.test(t))throw new Error(`Invalid HEX color: "${t}"`);return t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function vRe(t){return{r:t[0],g:t[1],b:t[2]}}function uC(t){if(!t)throw new Error("Invalid color value");return Array.isArray(t)?t:typeof t=="string"?oC(t):[t.r,t.g,t.b]}function gRe(t){let e,n;const r=[];for(e=0;e<t.length;e++)n=t[e]/255,r[e]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return .2126*r[0]+.7152*r[1]+.0722*r[2]}function lC(t,e,n){const r=e===!0?cz:Object.assign({},cz,e);return gRe(t)>r.threshold?n?oC(r.black):r.black:n?oC(r.white):r.white}function cC(t,e=!1){return t=uC(t),e?lC(t,e):"#"+t.map(n=>mRe((255-n).toString(16))).join("")}(function(t){function e(r,i){r=uC(r);const a=i?lC(r,i,!0):r.map(s=>255-s);return vRe(a)}t.asRGB=e;function n(r,i){return r=uC(r),i?lC(r,i,!0):r.map(a=>255-a)}t.asRgbArray=n,t.defaultThreshold=kV,t.asRgbObject=e})(cC||(cC={}));const yRe=cC,xRe=()=>{const[t,e]=$.useState(!0),[n,r]=$.useState("#ffffff"),i=$.useRef(null),a=vt(o=>{var u;return(u=o.levaStores.style)==null?void 0:u.get("backgroundColor")});$.useEffect(()=>{a&&r(yRe(a,!0))},[a]);const s=UV({from:{color:n},to:{color:n,opacity:t?1:0}});return $.useEffect(()=>{const o=vt.subscribe(u=>u.calculationState,u=>{u==="calculating"?e(!0):u==="ready"&&e(!1)});return()=>{o()}}),Je.jsxs(Dv.div,{style:s,className:"calculating-message-container",children:[Je.jsx(Dv.div,{ref:i,style:s,className:"calculating-message-spinner"}),Je.jsx(Dv.div,{ref:i,style:s,className:"calculating-message",children:"Calculating..."})]})};function bRe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function $V(...t){return e=>t.forEach(n=>bRe(n,e))}function qp(...t){return $.useCallback($V(...t),t)}const HV=$.forwardRef((t,e)=>{const{children:n,...r}=t,i=$.Children.toArray(n),a=i.find(wRe);if(a){const s=a.props.children,o=i.map(u=>u===a?$.Children.count(s)>1?$.Children.only(null):$.isValidElement(s)?s.props.children:null:u);return $.createElement(fC,hn({},r,{ref:e}),$.isValidElement(s)?$.cloneElement(s,void 0,o):null)}return $.createElement(fC,hn({},r,{ref:e}),n)});HV.displayName="Slot";const fC=$.forwardRef((t,e)=>{const{children:n,...r}=t;return $.isValidElement(n)?$.cloneElement(n,{...SRe(r,n.props),ref:e?$V(e,n.ref):n.ref}):$.Children.count(n)>1?$.Children.only(null):null});fC.displayName="SlotClone";const GV=({children:t})=>$.createElement($.Fragment,null,t);function wRe(t){return $.isValidElement(t)&&t.type===GV}function SRe(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...o)=>{a(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}const _Re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],hd=_Re.reduce((t,e)=>{const n=$.forwardRef((r,i)=>{const{asChild:a,...s}=r,o=a?HV:e;return $.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),$.createElement(o,hn({},s,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function ERe(t,e){t&&_p.flushSync(()=>t.dispatchEvent(e))}const MRe=$.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?z8.createPortal($.createElement(hd.div,hn({},i,{ref:e})),r):null}),ARe=MRe;var fz=Object.prototype.hasOwnProperty;function Og(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Og(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(fz.call(t,n)&&++r&&!fz.call(e,n)||!(n in e)||!Og(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function b0(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var MS=function(e,n,r,i){this.name=e,this.fn=n,this.args=r,this.modifiers=i};MS.prototype._test=function(e){var n=this.fn;try{Gh(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return Gh(this.modifiers.slice(),n,this)(e)}catch{return!1}};MS.prototype._check=function(e){try{Gh(this.modifiers.slice(),this.fn,this)(e)}catch{if(Gh(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!Gh(this.modifiers.slice(),this.fn,this)(e))throw null};MS.prototype._testAsync=function(e){var n=this;return new Promise(function(r,i){WV(n.modifiers.slice(),n.fn,n)(e).then(function(a){a?r(e):i(null)}).catch(function(a){return i(a)})})};function VV(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function Gh(t,e,n){if(t.length){var r=t.shift(),i=Gh(t,e,n);return r.perform(i,n)}else return VV(e)}function WV(t,e,n){if(t.length){var r=t.shift(),i=WV(t,e,n);return r.performAsync(i,n)}else return function(a){return Promise.resolve(VV(e,"async")(a))}}var CRe=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},UN=function(t){function e(n,r,i,a){for(var s=[],o=arguments.length-4;o-- >0;)s[o]=arguments[o+4];t.call(this,s),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ou=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};ou.prototype._applyRule=function(e,n){var r=this;return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];return r.chain.push(new MS(n,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};ou.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new CRe(n,e.simple,e.async)),this};ou.prototype._clone=function(){return new ou(this.chain.slice(),this.nextRuleModifiers.slice())};ou.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};ou.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){n.push(new UN(r,e,i))}}),n};ou.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new UN(n,e,r)}})};ou.prototype.testAsync=function(e){var n=this;return new Promise(function(r,i){qV(e,n.chain.slice(),r,i)})};function qV(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then(function(){qV(t,e,n,r)},function(a){r(new UN(i,t,a))})}else n(t)}var dz=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function TRe(t,e){return e===void 0&&(e=!1),{simple:function(n){return dz(n,e)||t.check(n)===void 0},async:function(n){return dz(n,e)||t.testAsync(n)}}}function $a(){return typeof Proxy<"u"?jV(new ou):dC(new ou)}var Fg={};$a.extend=function(t){Object.assign(Fg,t)};$a.clearCustomRules=function(){Fg={}};function jV(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=jV(t._clone());if(r in kb)return i._applyModifier(kb[r],r);if(r in Fg)return i._applyRule(Fg[r],r);if(r in hC)return i._applyRule(hC[r],r)}})}function dC(t){var e=function(i,a){return Object.keys(i).forEach(function(s){a[s]=function(){for(var o=[],u=arguments.length;u--;)o[u]=arguments[u];var l=dC(a._clone()),c=l._applyRule(i[s],s).apply(void 0,o);return c}}),a},n=e(hC,t),r=e(Fg,n);return Object.keys(kb).forEach(function(i){Object.defineProperty(r,i,{get:function(){var a=dC(r._clone());return a._applyModifier(kb[i],i)}})}),r}var kb={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return Q1(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(Q1(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&Q1(e).every(t)}},async:function(t){return function(e){return Promise.all(Q1(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return hz(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return hz(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function hz(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function Q1(t){return typeof t=="string"?t.split(""):t}var hC={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||DRe;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return ih("string")},boolean:function(){return ih("boolean")},undefined:function(){return ih("undefined")},null:function(){return ih("null")},array:function(){return ih("array")},object:function(){return ih("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return NRe(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:TRe};function ih(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function DRe(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function NRe(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var i=t[r];try{i.check((e||{})[r])}catch(a){a.target=r,n.push(a)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(i){var a=t[i];return a.testAsync((e||{})[i]).catch(function(s){s.target=i,n.push(s)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var ir="colors",fa="sizes",At="space",RRe={gap:At,gridGap:At,columnGap:At,gridColumnGap:At,rowGap:At,gridRowGap:At,inset:At,insetBlock:At,insetBlockEnd:At,insetBlockStart:At,insetInline:At,insetInlineEnd:At,insetInlineStart:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,marginBlock:At,marginBlockEnd:At,marginBlockStart:At,marginInline:At,marginInlineEnd:At,marginInlineStart:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,paddingBlock:At,paddingBlockEnd:At,paddingBlockStart:At,paddingInline:At,paddingInlineEnd:At,paddingInlineStart:At,top:At,right:At,bottom:At,left:At,scrollMargin:At,scrollMarginTop:At,scrollMarginRight:At,scrollMarginBottom:At,scrollMarginLeft:At,scrollMarginX:At,scrollMarginY:At,scrollMarginBlock:At,scrollMarginBlockEnd:At,scrollMarginBlockStart:At,scrollMarginInline:At,scrollMarginInlineEnd:At,scrollMarginInlineStart:At,scrollPadding:At,scrollPaddingTop:At,scrollPaddingRight:At,scrollPaddingBottom:At,scrollPaddingLeft:At,scrollPaddingX:At,scrollPaddingY:At,scrollPaddingBlock:At,scrollPaddingBlockEnd:At,scrollPaddingBlockStart:At,scrollPaddingInline:At,scrollPaddingInlineEnd:At,scrollPaddingInlineStart:At,fontSize:"fontSizes",background:ir,backgroundColor:ir,backgroundImage:ir,borderImage:ir,border:ir,borderBlock:ir,borderBlockEnd:ir,borderBlockStart:ir,borderBottom:ir,borderBottomColor:ir,borderColor:ir,borderInline:ir,borderInlineEnd:ir,borderInlineStart:ir,borderLeft:ir,borderLeftColor:ir,borderRight:ir,borderRightColor:ir,borderTop:ir,borderTopColor:ir,caretColor:ir,color:ir,columnRuleColor:ir,fill:ir,outline:ir,outlineColor:ir,stroke:ir,textDecorationColor:ir,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:fa,minBlockSize:fa,maxBlockSize:fa,inlineSize:fa,minInlineSize:fa,maxInlineSize:fa,width:fa,minWidth:fa,maxWidth:fa,height:fa,minHeight:fa,maxHeight:fa,flexBasis:fa,gridTemplateColumns:fa,gridTemplateRows:fa,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},PRe=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,jp=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(a=>JSON.stringify(a,PRe))(e);return i in t?t[i]:t[i]=n(e,...r)}},Pf=Symbol.for("sxs.internal"),zN=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),pz=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:IRe}=Object.prototype,pC=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),ORe=/\s+(?![^()]*\))/,ah=t=>e=>t(...typeof e=="string"?String(e).split(ORe):[e]),mz={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:ah((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:ah((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:ah((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:ah((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:ah((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:ah((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},DM=/([\d.]+)([^]*)/,FRe=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,LRe=(t,e)=>t in BRe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,a)=>r+(i==="stretch"?`-moz-available${a};${pC(t)}:${r}-webkit-fill-available`:`-moz-fit-content${a};${pC(t)}:${r}fit-content`)+a):String(e),BRe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},nl=t=>t?t+"-":"",XV=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,a,s,o)=>s=="$"==!!a?r:(i||s=="--"?"calc(":"")+"var(--"+(s==="$"?nl(e)+(o.includes("$")?"":nl(n))+o.replace(/\$/g,"-"):o)+")"+(i||s=="--"?"*"+(i||"")+(a||"1")+")":"")),URe=/\s*,\s*(?![^()]*\))/,zRe=Object.prototype.toString,Nh=(t,e,n,r,i)=>{let a,s,o;const u=(l,c,f)=>{let d,h;const m=v=>{for(d in v){const x=d.charCodeAt(0)===64,g=x&&Array.isArray(v[d])?v[d]:[v[d]];for(h of g){const S=/[A-Z]/.test(p=d)?p:p.replace(/-[^]/g,_=>_[1].toUpperCase()),E=typeof h=="object"&&h&&h.toString===zRe&&(!r.utils[S]||!c.length);if(S in r.utils&&!E){const _=r.utils[S];if(_!==s){s=_,m(_(h)),s=null;continue}}else if(S in mz){const _=mz[S];if(_!==o){o=_,m(_(h)),o=null;continue}}if(x&&(y=d.slice(1)in r.media?"@media "+r.media[d.slice(1)]:d,d=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(_,A,T,M,C,N)=>{const P=DM.test(A),H=.0625*(P?-1:1),[L,z]=P?[M,A]:[A,M];return"("+(T[0]==="="?"":T[0]===">"===P?"max-":"min-")+L+":"+(T[0]!=="="&&T.length===1?z.replace(DM,(O,F,U)=>Number(F)+H*(T===">"?1:-1)+U):z)+(C?") and ("+(C[0]===">"?"min-":"max-")+L+":"+(C.length===1?N.replace(DM,(O,F,U)=>Number(F)+H*(C===">"?-1:1)+U):N):"")+")"})),E){const _=x?f.concat(d):[...f],A=x?[...c]:FRe(c,d.split(URe));a!==void 0&&i(vz(...a)),a=void 0,u(h,A,_)}else a===void 0&&(a=[[],c,f]),d=x||d.charCodeAt(0)!==36?d:`--${nl(r.prefix)}${d.slice(1).replace(/\$/g,"-")}`,h=E?h:typeof h=="number"?h&&S in kRe?String(h)+"px":String(h):XV(LRe(S,h??""),r.prefix,r.themeMap[S]),a[0].push(`${x?`${d} `:`${pC(d)}:`}${h}`)}}var y,p};m(l),a!==void 0&&i(vz(...a)),a=void 0};u(t,e,n)},vz=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,kRe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},gz=t=>String.fromCharCode(t+(t>25?39:97)),If=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=gz(n%52)+r;return gz(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),av=["themed","global","styled","onevar","resonevar","allvar","inline"],$Re=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},HRe=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(a,s)=>{const{cssText:o}=a;let u="";if(o.startsWith("--sxs"))return"";if(i[s-1]&&(u=i[s-1].cssText).startsWith("--sxs")){if(!a.cssRules.length)return"";for(const l in e.rules)if(e.rules[l].group===a)return`--sxs{--sxs:${[...e.rules[l].cache].join(" ")}}${o}`;return a.cssRules.length?`${u}${o}`:""}return o}).join("")},r=()=>{if(e){const{rules:o,sheet:u}=e;if(!u.deleteRule){for(;Object(Object(u.cssRules)[0]).type===3;)u.cssRules.splice(0,1);u.cssRules=[]}for(const l in o)delete o[l]}const i=Object(t).styleSheets||[];for(const o of i)if($Re(o)){for(let u=0,l=o.cssRules;l[u];++u){const c=Object(l[u]);if(c.type!==1)continue;const f=Object(l[u+1]);if(f.type!==4)continue;++u;const{cssText:d}=c;if(!d.startsWith("--sxs"))continue;const h=d.slice(14,-3).trim().split(/\s+/),m=av[h[0]];m&&(e||(e={sheet:o,reset:r,rules:{},toString:n}),e.rules[m]={group:f,index:u,cache:new Set(h)})}if(e)break}if(!e){const o=(u,l)=>({type:l,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,o(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return u==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:u}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:r,toString:n}}const{sheet:a,rules:s}=e;for(let o=av.length-1;o>=0;--o){const u=av[o];if(!s[u]){const l=av[o+1],c=s[l]?s[l].index:a.cssRules.length;a.insertRule("@media{}",c),a.insertRule(`--sxs{--sxs:${o}}`,c),s[u]={group:a.cssRules[c+1],index:c,cache:new Set([o])}}GRe(s[u])}};return r(),e},GRe=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},Xm=Symbol(),VRe=jp(),yz=(t,e)=>VRe(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[Pf]){r.type==null&&(r.type=i[Pf].type);for(const a of i[Pf].composers)r.composers.add(a)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(WRe(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),qRe(t,r,e)}),WRe=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const a=`${nl(i.prefix)}c-${If(r)}`,s=[],o=[],u=Object.create(null),l=[];for(const d in n)u[d]=String(n[d]);if(typeof t=="object"&&t)for(const d in t){c=u,f=d,IRe.call(c,f)||(u[d]="undefined");const h=t[d];for(const m in h){const v={[d]:String(m)};String(m)==="undefined"&&l.push(d);const y=h[m],p=[v,y,!pz(y)];s.push(p)}}var c,f;if(typeof e=="object"&&e)for(const d of e){let{css:h,...m}=d;h=typeof h=="object"&&h||{};for(const y in m)m[y]=String(m[y]);const v=[m,h,!pz(h)];o.push(v)}return[a,r,s,o,u,l]},qRe=(t,e,n)=>{const[r,i,a,s]=jRe(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(f=>{function d(){for(let h=0;h<d[Xm].length;h++){const[m,v]=d[Xm][h];f.rules[m].apply(v)}return d[Xm]=[],null}return d[Xm]=[],d.rules={},av.forEach(h=>d.rules[h]={apply:m=>d[Xm].push([h,m])}),d})(n):null,u=(o||n).rules,l=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||XRe;const{css:d,...h}=f,m={};for(const p in a)if(delete h[p],p in f){let x=f[p];typeof x=="object"&&x?m[p]={"@initial":a[p],...x}:(x=String(x),m[p]=x!=="undefined"||s.has(p)?x:a[p])}else m[p]=a[p];const v=new Set([...i]);for(const[p,x,g,S]of e.composers){n.rules.styled.cache.has(p)||(n.rules.styled.cache.add(p),Nh(x,[`.${p}`],[],t,A=>{u.styled.apply(A)}));const E=xz(g,m,t.media),_=xz(S,m,t.media,!0);for(const A of E)if(A!==void 0)for(const[T,M,C]of A){const N=`${p}-${If(M)}-${T}`;v.add(N);const P=(C?n.rules.resonevar:n.rules.onevar).cache,H=C?u.resonevar:u.onevar;P.has(N)||(P.add(N),Nh(M,[`.${N}`],[],t,L=>{H.apply(L)}))}for(const A of _)if(A!==void 0)for(const[T,M]of A){const C=`${p}-${If(M)}-${T}`;v.add(C),n.rules.allvar.cache.has(C)||(n.rules.allvar.cache.add(C),Nh(M,[`.${C}`],[],t,N=>{u.allvar.apply(N)}))}}if(typeof d=="object"&&d){const p=`${r}-i${If(d)}-css`;v.add(p),n.rules.inline.cache.has(p)||(n.rules.inline.cache.add(p),Nh(d,[`.${p}`],[],t,x=>{u.inline.apply(x)}))}for(const p of String(f.className||"").trim().split(/\s+/))p&&v.add(p);const y=h.className=[...v].join(" ");return{type:e.type,className:y,selector:l,props:h,toString:()=>y,deferredInjector:o}};return zN(c,{className:r,selector:l,[Pf]:e,toString:()=>(n.rules.styled.cache.has(r)||c(),r)})},jRe=t=>{let e="";const n=[],r={},i=[];for(const[a,,,,s,o]of t){e===""&&(e=a),n.push(a),i.push(...o);for(const u in s){const l=s[u];(r[u]===void 0||l!=="undefined"||o.includes(l))&&(r[u]=l)}}return[e,n,r,new Set(i)]},xz=(t,e,n,r)=>{const i=[];e:for(let[a,s,o]of t){if(o)continue;let u,l=0,c=!1;for(u in a){const f=a[u];let d=e[u];if(d!==f){if(typeof d!="object"||!d)continue e;{let h,m,v=0;for(const y in d){if(f===String(d[y])){if(y!=="@initial"){const p=y.slice(1);(m=m||[]).push(p in n?n[p]:y.replace(/^@media ?/,"")),c=!0}l+=v,h=!0}++v}if(m&&m.length&&(s={["@media "+m.join(", ")]:s}),!h)continue e}}}(i[l]=i[l]||[]).push([r?"cv":`${u}-${a[u]}`,s,c])}return i},XRe={},YRe=jp(),ZRe=(t,e)=>YRe(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let a=If(i);if(!e.rules.global.cache.has(a)){if(e.rules.global.cache.add(a),"@import"in i){let s=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(i["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,s++);delete i["@import"]}Nh(i,[],[],t,s=>{e.rules.global.apply(s)})}}return""};return zN(r,{toString:r})}),KRe=jp(),QRe=(t,e)=>KRe(t,()=>n=>{const r=`${nl(t.prefix)}k-${If(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const a=[];Nh(n,[],[],t,o=>a.push(o));const s=`@keyframes ${r}{${a.join("")}}`;e.rules.global.apply(s)}return r};return zN(i,{get name(){return i()},toString:i})}),JRe=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+nl(this.prefix)+nl(this.scale)+this.token}toString(){return this.computedValue}},ePe=jp(),tPe=(t,e)=>ePe(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${nl(t.prefix)}t-${If(r)}`}`,a={},s=[];for(const u in r){a[u]={};for(const l in r[u]){const c=`--${nl(t.prefix)}${u}-${l}`,f=XV(String(r[u][l]),t.prefix,u);a[u][l]=new JRe(l,f,u,t.prefix),s.push(`${c}:${f}`)}}const o=()=>{if(s.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const u=`${r===t.theme?":root,":""}.${n}{${s.join(";")}}`;e.rules.themed.apply(u)}return n};return{...a,get className(){return o()},selector:i,toString:o}}),nPe=jp(),rPe=jp(),iPe=t=>{const e=(n=>{let r=!1;const i=nPe(n,a=>{r=!0;const s="prefix"in(a=typeof a=="object"&&a||{})?String(a.prefix):"",o=typeof a.media=="object"&&a.media||{},u=typeof a.root=="object"?a.root||null:globalThis.document||null,l=typeof a.theme=="object"&&a.theme||{},c={prefix:s,media:o,theme:l,themeMap:typeof a.themeMap=="object"&&a.themeMap||{...RRe},utils:typeof a.utils=="object"&&a.utils||{}},f=HRe(u),d={css:yz(c,f),globalCss:ZRe(c,f),keyframes:QRe(c,f),createTheme:tPe(c,f),reset(){f.reset(),d.theme.toString()},theme:{},sheet:f,config:c,prefix:s,getCssText:f.toString,toString:f.toString};return String(d.theme=d.createTheme(l)),d});return r||i.reset(),i})(t);return e.styled=(({config:n,sheet:r})=>rPe(n,()=>{const i=yz(n,r);return(...a)=>{const s=i(...a),o=s[Pf].type,u=Ae.forwardRef((l,c)=>{const f=l&&l.as||o,{props:d,deferredInjector:h}=s(l);return delete d.as,d.ref=c,h?Ae.createElement(Ae.Fragment,null,Ae.createElement(f,d),Ae.createElement(h,null)):Ae.createElement(f,d)});return u.className=s.className,u.displayName=`Styled.${o.displayName||o.name||o}`,u.selector=s.selector,u.toString=()=>s.selector,u[Pf]=s[Pf],u}}))(e),e};function Fu(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function YV(t,e=[]){let n=[];function r(a,s){const o=$.createContext(s),u=n.length;n=[...n,s];function l(f){const{scope:d,children:h,...m}=f,v=(d==null?void 0:d[t][u])||o,y=$.useMemo(()=>m,Object.values(m));return $.createElement(v.Provider,{value:y},h)}function c(f,d){const h=(d==null?void 0:d[t][u])||o,m=$.useContext(h);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,c]}const i=()=>{const a=n.map(s=>$.createContext(s));return function(o){const u=(o==null?void 0:o[t])||a;return $.useMemo(()=>({[`__scope${t}`]:{...o,[t]:u}}),[o,u])}};return i.scopeName=t,[r,aPe(i,...e)]}function aPe(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:u,scopeName:l})=>{const f=u(a)[`__scope${l}`];return{...o,...f}},{});return $.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function Xp(t){const e=$.useRef(t);return $.useEffect(()=>{e.current=t}),$.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function sPe(t,e=globalThis==null?void 0:globalThis.document){const n=Xp(t);$.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const mC="dismissableLayer.update",oPe="dismissableLayer.pointerDownOutside",uPe="dismissableLayer.focusOutside";let bz;const lPe=$.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cPe=$.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:u,...l}=t,c=$.useContext(lPe),[f,d]=$.useState(null),h=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,m]=$.useState({}),v=qp(e,T=>d(T)),y=Array.from(c.layers),[p]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=y.indexOf(p),g=f?y.indexOf(f):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=g>=x,_=fPe(T=>{const M=T.target,C=[...c.branches].some(N=>N.contains(M));!E||C||(a==null||a(T),o==null||o(T),T.defaultPrevented||u==null||u())},h),A=dPe(T=>{const M=T.target;[...c.branches].some(N=>N.contains(M))||(s==null||s(T),o==null||o(T),T.defaultPrevented||u==null||u())},h);return sPe(T=>{g===c.layers.size-1&&(i==null||i(T),!T.defaultPrevented&&u&&(T.preventDefault(),u()))},h),$.useEffect(()=>{if(f)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(bz=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),wz(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=bz)}},[f,h,r,c]),$.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),wz())},[f,c]),$.useEffect(()=>{const T=()=>m({});return document.addEventListener(mC,T),()=>document.removeEventListener(mC,T)},[]),$.createElement(hd.div,hn({},l,{ref:v,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:Fu(t.onFocusCapture,A.onFocusCapture),onBlurCapture:Fu(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Fu(t.onPointerDownCapture,_.onPointerDownCapture)}))});function fPe(t,e=globalThis==null?void 0:globalThis.document){const n=Xp(t),r=$.useRef(!1),i=$.useRef(()=>{});return $.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let l=function(){ZV(oPe,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function dPe(t,e=globalThis==null?void 0:globalThis.document){const n=Xp(t),r=$.useRef(!1);return $.useEffect(()=>{const i=a=>{a.target&&!r.current&&ZV(uPe,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wz(){const t=new CustomEvent(mC);document.dispatchEvent(t)}function ZV(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ERe(i,a):i.dispatchEvent(a)}const gp=globalThis!=null&&globalThis.document?$.useLayoutEffect:()=>{},hPe=Nj.useId||(()=>{});let pPe=0;function mPe(t){const[e,n]=$.useState(hPe());return gp(()=>{t||n(r=>r??String(pPe++))},[t]),t||(e?`radix-${e}`:"")}const vPe=["top","right","bottom","left"],vc=Math.min,ts=Math.max,$b=Math.round,J1=Math.floor,gc=t=>({x:t,y:t}),gPe={left:"right",right:"left",bottom:"top",top:"bottom"},yPe={start:"end",end:"start"};function vC(t,e,n){return ts(t,vc(e,n))}function rl(t,e){return typeof t=="function"?t(e):t}function il(t){return t.split("-")[0]}function Yp(t){return t.split("-")[1]}function kN(t){return t==="x"?"y":"x"}function $N(t){return t==="y"?"height":"width"}function Zp(t){return["top","bottom"].includes(il(t))?"y":"x"}function HN(t){return kN(Zp(t))}function xPe(t,e,n){n===void 0&&(n=!1);const r=Yp(t),i=HN(t),a=$N(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=Hb(s)),[s,Hb(s)]}function bPe(t){const e=Hb(t);return[gC(t),e,gC(e)]}function gC(t){return t.replace(/start|end/g,e=>yPe[e])}function wPe(t,e,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?a:s;default:return[]}}function SPe(t,e,n,r){const i=Yp(t);let a=wPe(il(t),n==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(gC)))),a}function Hb(t){return t.replace(/left|right|bottom|top/g,e=>gPe[e])}function _Pe(t){return{top:0,right:0,bottom:0,left:0,...t}}function KV(t){return typeof t!="number"?_Pe(t):{top:t,right:t,bottom:t,left:t}}function Gb(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function Sz(t,e,n){let{reference:r,floating:i}=t;const a=Zp(e),s=HN(e),o=$N(s),u=il(e),l=a==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[o]/2-i[o]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Yp(e)){case"start":h[s]-=d*(n&&l?-1:1);break;case"end":h[s]+=d*(n&&l?-1:1);break}return h}const EPe=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=n,o=a.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=Sz(l,r,u),d=r,h={},m=0;for(let v=0;v<o.length;v++){const{name:y,fn:p}=o[v],{x,y:g,data:S,reset:E}=await p({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:t,floating:e}});c=x??c,f=g??f,h={...h,[y]:{...h[y],...S}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:c,y:f}=Sz(l,d,u)),v=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Lg(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=rl(e,t),m=KV(h),y=o[d?f==="floating"?"reference":"floating":f],p=Gb(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:u})),x=f==="floating"?{...s.floating,x:r,y:i}:s.reference,g=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),S=await(a.isElement==null?void 0:a.isElement(g))?await(a.getScale==null?void 0:a.getScale(g))||{x:1,y:1}:{x:1,y:1},E=Gb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:g,strategy:u}):x);return{top:(p.top-E.top+m.top)/S.y,bottom:(E.bottom-p.bottom+m.bottom)/S.y,left:(p.left-E.left+m.left)/S.x,right:(E.right-p.right+m.right)/S.x}}const MPe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:s,elements:o,middlewareData:u}=e,{element:l,padding:c=0}=rl(t,e)||{};if(l==null)return{};const f=KV(c),d={x:n,y:r},h=HN(i),m=$N(h),v=await s.getDimensions(l),y=h==="y",p=y?"top":"left",x=y?"bottom":"right",g=y?"clientHeight":"clientWidth",S=a.reference[m]+a.reference[h]-d[h]-a.floating[m],E=d[h]-a.reference[h],_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let A=_?_[g]:0;(!A||!await(s.isElement==null?void 0:s.isElement(_)))&&(A=o.floating[g]||a.floating[m]);const T=S/2-E/2,M=A/2-v[m]/2-1,C=vc(f[p],M),N=vc(f[x],M),P=C,H=A-v[m]-N,L=A/2-v[m]/2+T,z=vC(P,L,H),O=!u.arrow&&Yp(i)!=null&&L!==z&&a.reference[m]/2-(L<P?C:N)-v[m]/2<0,F=O?L<P?L-P:L-H:0;return{[h]:d[h]+F,data:{[h]:z,centerOffset:L-z-F,...O&&{alignmentOffset:F}},reset:O}}}),APe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:s,initialPlacement:o,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=rl(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const p=il(i),x=il(o)===o,g=await(u.isRTL==null?void 0:u.isRTL(l.floating)),S=d||(x||!v?[Hb(o)]:bPe(o));!d&&m!=="none"&&S.push(...SPe(o,v,m,g));const E=[o,...S],_=await Lg(e,y),A=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(c&&A.push(_[p]),f){const P=xPe(i,s,g);A.push(_[P[0]],_[P[1]])}if(T=[...T,{placement:i,overflows:A}],!A.every(P=>P<=0)){var M,C;const P=(((M=a.flip)==null?void 0:M.index)||0)+1,H=E[P];if(H)return{data:{index:P,overflows:T},reset:{placement:H}};let L=(C=T.filter(z=>z.overflows[0]<=0).sort((z,O)=>z.overflows[1]-O.overflows[1])[0])==null?void 0:C.placement;if(!L)switch(h){case"bestFit":{var N;const z=(N=T.map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,U)=>F+U,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:N[0];z&&(L=z);break}case"initialPlacement":L=o;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function _z(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ez(t){return vPe.some(e=>t[e]>=0)}const CPe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=rl(t,e);switch(r){case"referenceHidden":{const a=await Lg(e,{...i,elementContext:"reference"}),s=_z(a,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Ez(s)}}}case"escaped":{const a=await Lg(e,{...i,altBoundary:!0}),s=_z(a,n.floating);return{data:{escapedOffsets:s,escaped:Ez(s)}}}default:return{}}}}};async function TPe(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=il(n),o=Yp(n),u=Zp(n)==="y",l=["left","top"].includes(s)?-1:1,c=a&&u?-1:1,f=rl(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return o&&typeof m=="number"&&(h=o==="end"?m*-1:m),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const DPe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:s,middlewareData:o}=e,u=await TPe(e,t);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:s}}}}},NPe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:y=>{let{x:p,y:x}=y;return{x:p,y:x}}},...u}=rl(t,e),l={x:n,y:r},c=await Lg(e,u),f=Zp(il(i)),d=kN(f);let h=l[d],m=l[f];if(a){const y=d==="y"?"top":"left",p=d==="y"?"bottom":"right",x=h+c[y],g=h-c[p];h=vC(x,h,g)}if(s){const y=f==="y"?"top":"left",p=f==="y"?"bottom":"right",x=m+c[y],g=m-c[p];m=vC(x,m,g)}const v=o.fn({...e,[d]:h,[f]:m});return{...v,data:{x:v.x-n,y:v.y-r}}}}},RPe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:s}=e,{offset:o=0,mainAxis:u=!0,crossAxis:l=!0}=rl(t,e),c={x:n,y:r},f=Zp(i),d=kN(f);let h=c[d],m=c[f];const v=rl(o,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const g=d==="y"?"height":"width",S=a.reference[d]-a.floating[g]+y.mainAxis,E=a.reference[d]+a.reference[g]-y.mainAxis;h<S?h=S:h>E&&(h=E)}if(l){var p,x;const g=d==="y"?"width":"height",S=["top","left"].includes(il(i)),E=a.reference[f]-a.floating[g]+(S&&((p=s.offset)==null?void 0:p[f])||0)+(S?0:y.crossAxis),_=a.reference[f]+a.reference[g]+(S?0:((x=s.offset)==null?void 0:x[f])||0)-(S?y.crossAxis:0);m<E?m=E:m>_&&(m=_)}return{[d]:h,[f]:m}}}},PPe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:a}=e,{apply:s=()=>{},...o}=rl(t,e),u=await Lg(e,o),l=il(n),c=Yp(n),f=Zp(n)==="y",{width:d,height:h}=r.floating;let m,v;l==="top"||l==="bottom"?(m=l,v=c===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=l,m=c==="end"?"top":"bottom");const y=h-u[m],p=d-u[v],x=!e.middlewareData.shift;let g=y,S=p;if(f){const _=d-u.left-u.right;S=c||x?vc(p,_):_}else{const _=h-u.top-u.bottom;g=c||x?vc(y,_):_}if(x&&!c){const _=ts(u.left,0),A=ts(u.right,0),T=ts(u.top,0),M=ts(u.bottom,0);f?S=d-2*(_!==0||A!==0?_+A:ts(u.left,u.right)):g=h-2*(T!==0||M!==0?T+M:ts(u.top,u.bottom))}await s({...e,availableWidth:S,availableHeight:g});const E=await i.getDimensions(a.floating);return d!==E.width||h!==E.height?{reset:{rects:!0}}:{}}}};function yc(t){return QV(t)?(t.nodeName||"").toLowerCase():"#document"}function ls(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fl(t){var e;return(e=(QV(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function QV(t){return t instanceof Node||t instanceof ls(t).Node}function al(t){return t instanceof Element||t instanceof ls(t).Element}function uu(t){return t instanceof HTMLElement||t instanceof ls(t).HTMLElement}function Mz(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ls(t).ShadowRoot}function w0(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ks(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function IPe(t){return["table","td","th"].includes(yc(t))}function GN(t){const e=VN(),n=Ks(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function JV(t){let e=yp(t);for(;uu(e)&&!AS(e);){if(GN(e))return e;e=yp(e)}return null}function VN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function AS(t){return["html","body","#document"].includes(yc(t))}function Ks(t){return ls(t).getComputedStyle(t)}function CS(t){return al(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function yp(t){if(yc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Mz(t)&&t.host||fl(t);return Mz(e)?e.host:e}function eW(t){const e=yp(t);return AS(e)?t.ownerDocument?t.ownerDocument.body:t.body:uu(e)&&w0(e)?e:eW(e)}function Bg(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=eW(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),s=ls(i);return a?e.concat(s,s.visualViewport||[],w0(i)?i:[],s.frameElement&&n?Bg(s.frameElement):[]):e.concat(i,Bg(i,[],n))}function tW(t){const e=Ks(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=uu(t),a=i?t.offsetWidth:n,s=i?t.offsetHeight:r,o=$b(n)!==a||$b(r)!==s;return o&&(n=a,r=s),{width:n,height:r,$:o}}function WN(t){return al(t)?t:t.contextElement}function Vh(t){const e=WN(t);if(!uu(e))return gc(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=tW(e);let s=(a?$b(n.width):n.width)/r,o=(a?$b(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const OPe=gc(0);function nW(t){const e=ls(t);return!VN()||!e.visualViewport?OPe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function FPe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ls(t)?!1:e}function jf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=WN(t);let s=gc(1);e&&(r?al(r)&&(s=Vh(r)):s=Vh(t));const o=FPe(a,n,r)?nW(a):gc(0);let u=(i.left+o.x)/s.x,l=(i.top+o.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(a){const d=ls(a),h=r&&al(r)?ls(r):r;let m=d.frameElement;for(;m&&r&&h!==d;){const v=Vh(m),y=m.getBoundingClientRect(),p=Ks(m),x=y.left+(m.clientLeft+parseFloat(p.paddingLeft))*v.x,g=y.top+(m.clientTop+parseFloat(p.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,f*=v.y,u+=x,l+=g,m=ls(m).frameElement}}return Gb({width:c,height:f,x:u,y:l})}const LPe=[":popover-open",":modal"];function rW(t){let e=!1,n=0,r=0;function i(a){try{e=e||t.matches(a)}catch{}}if(LPe.forEach(a=>{i(a)}),e){const a=JV(t);if(a){const s=a.getBoundingClientRect();n=s.x,r=s.y}}return[e,n,r]}function BPe(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=fl(r),[s]=e?rW(e.floating):[!1];if(r===a||s)return n;let o={scrollLeft:0,scrollTop:0},u=gc(1);const l=gc(0),c=uu(r);if((c||!c&&i!=="fixed")&&((yc(r)!=="body"||w0(a))&&(o=CS(r)),uu(r))){const f=jf(r);u=Vh(r),l.x=f.x+r.clientLeft,l.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-o.scrollLeft*u.x+l.x,y:n.y*u.y-o.scrollTop*u.y+l.y}}function UPe(t){return Array.from(t.getClientRects())}function iW(t){return jf(fl(t)).left+CS(t).scrollLeft}function zPe(t){const e=fl(t),n=CS(t),r=t.ownerDocument.body,i=ts(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=ts(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+iW(t);const o=-n.scrollTop;return Ks(r).direction==="rtl"&&(s+=ts(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function kPe(t,e){const n=ls(t),r=fl(t),i=n.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,u=0;if(i){a=i.width,s=i.height;const l=VN();(!l||l&&e==="fixed")&&(o=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:o,y:u}}function $Pe(t,e){const n=jf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=uu(t)?Vh(t):gc(1),s=t.clientWidth*a.x,o=t.clientHeight*a.y,u=i*a.x,l=r*a.y;return{width:s,height:o,x:u,y:l}}function Az(t,e,n){let r;if(e==="viewport")r=kPe(t,n);else if(e==="document")r=zPe(fl(t));else if(al(e))r=$Pe(e,n);else{const i=nW(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Gb(r)}function aW(t,e){const n=yp(t);return n===e||!al(n)||AS(n)?!1:Ks(n).position==="fixed"||aW(n,e)}function HPe(t,e){const n=e.get(t);if(n)return n;let r=Bg(t,[],!1).filter(o=>al(o)&&yc(o)!=="body"),i=null;const a=Ks(t).position==="fixed";let s=a?yp(t):t;for(;al(s)&&!AS(s);){const o=Ks(s),u=GN(s);!u&&o.position==="fixed"&&(i=null),(a?!u&&!i:!u&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||w0(s)&&!u&&aW(t,s))?r=r.filter(c=>c!==s):i=o,s=yp(s)}return e.set(t,r),r}function GPe(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?HPe(e,this._c):[].concat(n),r],o=s[0],u=s.reduce((l,c)=>{const f=Az(e,c,i);return l.top=ts(f.top,l.top),l.right=vc(f.right,l.right),l.bottom=vc(f.bottom,l.bottom),l.left=ts(f.left,l.left),l},Az(e,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function VPe(t){const{width:e,height:n}=tW(t);return{width:e,height:n}}function WPe(t,e,n,r){const i=uu(e),a=fl(e),s=n==="fixed",o=jf(t,!0,s,e);let u={scrollLeft:0,scrollTop:0};const l=gc(0);if(i||!i&&!s)if((yc(e)!=="body"||w0(a))&&(u=CS(e)),i){const v=jf(e,!0,s,e);l.x=v.x+e.clientLeft,l.y=v.y+e.clientTop}else a&&(l.x=iW(a));let c=o.left+u.scrollLeft-l.x,f=o.top+u.scrollTop-l.y;const[d,h,m]=rW(r);return d&&(c+=h,f+=m,i&&(c+=e.clientLeft,f+=e.clientTop)),{x:c,y:f,width:o.width,height:o.height}}function Cz(t,e){return!uu(t)||Ks(t).position==="fixed"?null:e?e(t):t.offsetParent}function sW(t,e){const n=ls(t);if(!uu(t))return n;let r=Cz(t,e);for(;r&&IPe(r)&&Ks(r).position==="static";)r=Cz(r,e);return r&&(yc(r)==="html"||yc(r)==="body"&&Ks(r).position==="static"&&!GN(r))?n:r||JV(t)||n}const qPe=async function(t){const e=this.getOffsetParent||sW,n=this.getDimensions;return{reference:WPe(t.reference,await e(t.floating),t.strategy,t.floating),floating:{x:0,y:0,...await n(t.floating)}}};function jPe(t){return Ks(t).direction==="rtl"}const XPe={convertOffsetParentRelativeRectToViewportRelativeRect:BPe,getDocumentElement:fl,getClippingRect:GPe,getOffsetParent:sW,getElementRects:qPe,getClientRects:UPe,getDimensions:VPe,getScale:Vh,isElement:al,isRTL:jPe};function YPe(t,e){let n=null,r;const i=fl(t);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,u){o===void 0&&(o=!1),u===void 0&&(u=1),a();const{left:l,top:c,width:f,height:d}=t.getBoundingClientRect();if(o||e(),!f||!d)return;const h=J1(c),m=J1(i.clientWidth-(l+f)),v=J1(i.clientHeight-(c+d)),y=J1(l),x={rootMargin:-h+"px "+-m+"px "+-v+"px "+-y+"px",threshold:ts(0,vc(1,u))||1};let g=!0;function S(E){const _=E[0].intersectionRatio;if(_!==u){if(!g)return s();_?s(!1,_):r=setTimeout(()=>{s(!1,1e-7)},100)}g=!1}try{n=new IntersectionObserver(S,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,x)}n.observe(t)}return s(!0),a}function ZPe(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=WN(t),c=i||a?[...l?Bg(l):[],...Bg(e)]:[];c.forEach(p=>{i&&p.addEventListener("scroll",n,{passive:!0}),a&&p.addEventListener("resize",n)});const f=l&&o?YPe(l,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(p=>{let[x]=p;x&&x.target===l&&h&&(h.unobserve(e),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var g;(g=h)==null||g.observe(e)})),n()}),l&&!u&&h.observe(l),h.observe(e));let m,v=u?jf(t):null;u&&y();function y(){const p=jf(t);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&n(),v=p,m=requestAnimationFrame(y)}return n(),()=>{var p;c.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),f==null||f(),(p=h)==null||p.disconnect(),h=null,u&&cancelAnimationFrame(m)}}const KPe=NPe,QPe=APe,JPe=PPe,eIe=CPe,Tz=MPe,tIe=RPe,nIe=(t,e,n)=>{const r=new Map,i={platform:XPe,...n},a={...i.platform,_c:r};return EPe(t,e,{...i,platform:a})},rIe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Tz({element:r.current,padding:i}).fn(n):{}:r?Tz({element:r,padding:i}).fn(n):{}}}};var Nx=typeof document<"u"?$.useLayoutEffect:$.useEffect;function Vb(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vb(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Vb(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function oW(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Dz(t,e){const n=oW(t);return Math.round(e*n)/n}function Nz(t){const e=$.useRef(t);return Nx(()=>{e.current=t}),e}function iIe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:s}={},transform:o=!0,whileElementsMounted:u,open:l}=t,[c,f]=$.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[d,h]=$.useState(r);Vb(d,r)||h(r);const[m,v]=$.useState(null),[y,p]=$.useState(null),x=$.useCallback(F=>{F!==_.current&&(_.current=F,v(F))},[]),g=$.useCallback(F=>{F!==A.current&&(A.current=F,p(F))},[]),S=a||m,E=s||y,_=$.useRef(null),A=$.useRef(null),T=$.useRef(c),M=u!=null,C=Nz(u),N=Nz(i),P=$.useCallback(()=>{if(!_.current||!A.current)return;const F={placement:e,strategy:n,middleware:d};N.current&&(F.platform=N.current),nIe(_.current,A.current,F).then(U=>{const I={...U,isPositioned:!0};H.current&&!Vb(T.current,I)&&(T.current=I,_p.flushSync(()=>{f(I)}))})},[d,e,n,N]);Nx(()=>{l===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[l]);const H=$.useRef(!1);Nx(()=>(H.current=!0,()=>{H.current=!1}),[]),Nx(()=>{if(S&&(_.current=S),E&&(A.current=E),S&&E){if(C.current)return C.current(S,E,P);P()}},[S,E,P,C,M]);const L=$.useMemo(()=>({reference:_,floating:A,setReference:x,setFloating:g}),[x,g]),z=$.useMemo(()=>({reference:S,floating:E}),[S,E]),O=$.useMemo(()=>{const F={position:n,left:0,top:0};if(!z.floating)return F;const U=Dz(z.floating,c.x),I=Dz(z.floating,c.y);return o?{...F,transform:"translate("+U+"px, "+I+"px)",...oW(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:I}},[n,o,z.floating,c.x,c.y]);return $.useMemo(()=>({...c,update:P,refs:L,elements:z,floatingStyles:O}),[c,P,L,z,O])}const aIe=$.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return $.createElement(hd.svg,hn({},a,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:$.createElement("polygon",{points:"0,0 30,0 15,10"}))}),sIe=aIe;function oIe(t){const[e,n]=$.useState(void 0);return gp(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const u=a.borderBoxSize,l=Array.isArray(u)?u[0]:u;s=l.inlineSize,o=l.blockSize}else s=t.offsetWidth,o=t.offsetHeight;n({width:s,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const uW="Popper",[lW,cW]=YV(uW),[uIe,fW]=lW(uW),lIe=t=>{const{__scopePopper:e,children:n}=t,[r,i]=$.useState(null);return $.createElement(uIe,{scope:e,anchor:r,onAnchorChange:i},n)},cIe="PopperAnchor",fIe=$.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=fW(cIe,n),s=$.useRef(null),o=qp(e,s);return $.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:$.createElement(hd.div,hn({},i,{ref:o}))}),dW="PopperContent",[dIe,hIe]=lW(dW),pIe=$.forwardRef((t,e)=>{var n,r,i,a,s,o,u,l;const{__scopePopper:c,side:f="bottom",sideOffset:d=0,align:h="center",alignOffset:m=0,arrowPadding:v=0,avoidCollisions:y=!0,collisionBoundary:p=[],collisionPadding:x=0,sticky:g="partial",hideWhenDetached:S=!1,updatePositionStrategy:E="optimized",onPlaced:_,...A}=t,T=fW(dW,c),[M,C]=$.useState(null),N=qp(e,Q=>C(Q)),[P,H]=$.useState(null),L=oIe(P),z=(n=L==null?void 0:L.width)!==null&&n!==void 0?n:0,O=(r=L==null?void 0:L.height)!==null&&r!==void 0?r:0,F=f+(h!=="center"?"-"+h:""),U=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},I=Array.isArray(p)?p:[p],j=I.length>0,ee={padding:U,boundary:I.filter(yIe),altBoundary:j},{refs:J,floatingStyles:q,placement:ae,isPositioned:be,middlewareData:ue}=iIe({strategy:"fixed",placement:F,whileElementsMounted:(...Q)=>ZPe(...Q,{animationFrame:E==="always"}),elements:{reference:T.anchor},middleware:[DPe({mainAxis:d+O,alignmentAxis:m}),y&&KPe({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?tIe():void 0,...ee}),y&&QPe({...ee}),JPe({...ee,apply:({elements:Q,rects:te,availableWidth:Me,availableHeight:re})=>{const{width:V,height:G}=te.reference,le=Q.floating.style;le.setProperty("--radix-popper-available-width",`${Me}px`),le.setProperty("--radix-popper-available-height",`${re}px`),le.setProperty("--radix-popper-anchor-width",`${V}px`),le.setProperty("--radix-popper-anchor-height",`${G}px`)}}),P&&rIe({element:P,padding:v}),xIe({arrowWidth:z,arrowHeight:O}),S&&eIe({strategy:"referenceHidden",...ee})]}),[pe,Pe]=hW(ae),Ce=Xp(_);gp(()=>{be&&(Ce==null||Ce())},[be,Ce]);const Ee=(i=ue.arrow)===null||i===void 0?void 0:i.x,Oe=(a=ue.arrow)===null||a===void 0?void 0:a.y,ne=((s=ue.arrow)===null||s===void 0?void 0:s.centerOffset)!==0,[Le,Fe]=$.useState();return gp(()=>{M&&Fe(window.getComputedStyle(M).zIndex)},[M]),$.createElement("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:be?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Le,"--radix-popper-transform-origin":[(o=ue.transformOrigin)===null||o===void 0?void 0:o.x,(u=ue.transformOrigin)===null||u===void 0?void 0:u.y].join(" ")},dir:t.dir},$.createElement(dIe,{scope:c,placedSide:pe,onArrowChange:H,arrowX:Ee,arrowY:Oe,shouldHideArrow:ne},$.createElement(hd.div,hn({"data-side":pe,"data-align":Pe},A,{ref:N,style:{...A.style,animation:be?void 0:"none",opacity:(l=ue.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}}))))}),mIe="PopperArrow",vIe={top:"bottom",right:"left",bottom:"top",left:"right"},gIe=$.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=hIe(mIe,r),s=vIe[a.placedSide];return $.createElement("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0}},$.createElement(sIe,hn({},i,{ref:n,style:{...i.style,display:"block"}})))});function yIe(t){return t!==null}const xIe=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,a,s;const{placement:o,rects:u,middlewareData:l}=e,f=((n=l.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,d=f?0:t.arrowWidth,h=f?0:t.arrowHeight,[m,v]=hW(o),y={start:"0%",center:"50%",end:"100%"}[v],p=((r=(i=l.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+d/2,x=((a=(s=l.arrow)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0)+h/2;let g="",S="";return m==="bottom"?(g=f?y:`${p}px`,S=`${-h}px`):m==="top"?(g=f?y:`${p}px`,S=`${u.floating.height+h}px`):m==="right"?(g=`${-h}px`,S=f?y:`${x}px`):m==="left"&&(g=`${u.floating.width+h}px`,S=f?y:`${x}px`),{data:{x:g,y:S}}}});function hW(t){const[e,n="center"]=t.split("-");return[e,n]}const bIe=lIe,wIe=fIe,SIe=pIe,_Ie=gIe;function EIe(t,e){return $.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const pW=t=>{const{present:e,children:n}=t,r=MIe(e),i=typeof n=="function"?n({present:r.isPresent}):$.Children.only(n),a=qp(r.ref,i.ref);return typeof n=="function"||r.isPresent?$.cloneElement(i,{ref:a}):null};pW.displayName="Presence";function MIe(t){const[e,n]=$.useState(),r=$.useRef({}),i=$.useRef(t),a=$.useRef("none"),s=t?"mounted":"unmounted",[o,u]=EIe(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return $.useEffect(()=>{const l=ex(r.current);a.current=o==="mounted"?l:"none"},[o]),gp(()=>{const l=r.current,c=i.current;if(c!==t){const d=a.current,h=ex(l);t?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),gp(()=>{if(e){const l=f=>{const h=ex(r.current).includes(f.animationName);f.target===e&&h&&_p.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===e&&(a.current=ex(r.current))};return e.addEventListener("animationstart",c),e.addEventListener("animationcancel",l),e.addEventListener("animationend",l),()=>{e.removeEventListener("animationstart",c),e.removeEventListener("animationcancel",l),e.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:$.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function ex(t){return(t==null?void 0:t.animationName)||"none"}function AIe({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=CIe({defaultProp:e,onChange:n}),a=t!==void 0,s=a?t:r,o=Xp(n),u=$.useCallback(l=>{if(a){const f=typeof l=="function"?l(t):l;f!==t&&o(f)}else i(l)},[a,t,i,o]);return[s,u]}function CIe({defaultProp:t,onChange:e}){const n=$.useState(t),[r]=n,i=$.useRef(r),a=Xp(e);return $.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}const TIe=$.forwardRef((t,e)=>$.createElement(hd.span,hn({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),DIe=TIe,[TS,sze]=YV("Tooltip",[cW]),DS=cW(),NIe="TooltipProvider",yC="tooltip.open",[oze,qN]=TS(NIe),jN="Tooltip",[RIe,NS]=TS(jN),PIe=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:s,delayDuration:o}=t,u=qN(jN,t.__scopeTooltip),l=DS(e),[c,f]=$.useState(null),d=mPe(),h=$.useRef(0),m=s??u.disableHoverableContent,v=o??u.delayDuration,y=$.useRef(!1),[p=!1,x]=AIe({prop:r,defaultProp:i,onChange:A=>{A?(u.onOpen(),document.dispatchEvent(new CustomEvent(yC))):u.onClose(),a==null||a(A)}}),g=$.useMemo(()=>p?y.current?"delayed-open":"instant-open":"closed",[p]),S=$.useCallback(()=>{window.clearTimeout(h.current),y.current=!1,x(!0)},[x]),E=$.useCallback(()=>{window.clearTimeout(h.current),x(!1)},[x]),_=$.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{y.current=!0,x(!0)},v)},[v,x]);return $.useEffect(()=>()=>window.clearTimeout(h.current),[]),$.createElement(bIe,l,$.createElement(RIe,{scope:e,contentId:d,open:p,stateAttribute:g,trigger:c,onTriggerChange:f,onTriggerEnter:$.useCallback(()=>{u.isOpenDelayed?_():S()},[u.isOpenDelayed,_,S]),onTriggerLeave:$.useCallback(()=>{m?E():window.clearTimeout(h.current)},[E,m]),onOpen:S,onClose:E,disableHoverableContent:m},n))},Rz="TooltipTrigger",IIe=$.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=NS(Rz,n),a=qN(Rz,n),s=DS(n),o=$.useRef(null),u=qp(e,o,i.onTriggerChange),l=$.useRef(!1),c=$.useRef(!1),f=$.useCallback(()=>l.current=!1,[]);return $.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),$.createElement(wIe,hn({asChild:!0},s),$.createElement(hd.button,hn({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:u,onPointerMove:Fu(t.onPointerMove,d=>{d.pointerType!=="touch"&&!c.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Fu(t.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Fu(t.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Fu(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:Fu(t.onBlur,i.onClose),onClick:Fu(t.onClick,i.onClose)})))}),OIe="TooltipPortal",[uze,FIe]=TS(OIe,{forceMount:void 0}),Ug="TooltipContent",LIe=$.forwardRef((t,e)=>{const n=FIe(Ug,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=t,s=NS(Ug,t.__scopeTooltip);return $.createElement(pW,{present:r||s.open},s.disableHoverableContent?$.createElement(mW,hn({side:i},a,{ref:e})):$.createElement(BIe,hn({side:i},a,{ref:e})))}),BIe=$.forwardRef((t,e)=>{const n=NS(Ug,t.__scopeTooltip),r=qN(Ug,t.__scopeTooltip),i=$.useRef(null),a=qp(e,i),[s,o]=$.useState(null),{trigger:u,onClose:l}=n,c=i.current,{onPointerInTransitChange:f}=r,d=$.useCallback(()=>{o(null),f(!1)},[f]),h=$.useCallback((m,v)=>{const y=m.currentTarget,p={x:m.clientX,y:m.clientY},x=HIe(p,y.getBoundingClientRect()),g=GIe(p,x),S=VIe(v.getBoundingClientRect()),E=qIe([...g,...S]);o(E),f(!0)},[f]);return $.useEffect(()=>()=>d(),[d]),$.useEffect(()=>{if(u&&c){const m=y=>h(y,c),v=y=>h(y,u);return u.addEventListener("pointerleave",m),c.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",m),c.removeEventListener("pointerleave",v)}}},[u,c,h,d]),$.useEffect(()=>{if(s){const m=v=>{const y=v.target,p={x:v.clientX,y:v.clientY},x=(u==null?void 0:u.contains(y))||(c==null?void 0:c.contains(y)),g=!WIe(p,s);x?d():g&&(d(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[u,c,s,l,d]),$.createElement(mW,hn({},t,{ref:a}))}),[UIe,zIe]=TS(jN,{isInside:!1}),mW=$.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:s,...o}=t,u=NS(Ug,n),l=DS(n),{onClose:c}=u;return $.useEffect(()=>(document.addEventListener(yC,c),()=>document.removeEventListener(yC,c)),[c]),$.useEffect(()=>{if(u.trigger){const f=d=>{const h=d.target;h!=null&&h.contains(u.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,c]),$.createElement(cPe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:c},$.createElement(SIe,hn({"data-state":u.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),$.createElement(GV,null,r),$.createElement(UIe,{scope:n,isInside:!0},$.createElement(DIe,{id:u.contentId,role:"tooltip"},i||r))))}),kIe="TooltipArrow",$Ie=$.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=DS(n);return zIe(kIe,n).isInside?null:$.createElement(_Ie,hn({},i,r,{ref:e}))});function HIe(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function GIe(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function VIe(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function WIe(t,e){const{x:n,y:r}=t;let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a].x,u=e[a].y,l=e[s].x,c=e[s].y;u>r!=c>r&&n<(l-o)*(r-u)/(c-u)+o&&(i=!i)}return i}function qIe(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jIe(e)}function jIe(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const a=e[e.length-1],s=e[e.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const a=n[n.length-1],s=n[n.length-2];if((a.x-s.x)*(i.y-s.y)>=(a.y-s.y)*(i.x-s.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}const XIe=PIe,YIe=IIe,ZIe=LIe,KIe=$Ie;function QIe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tr(t,e){if(t==null)return{};var n=QIe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let Ar;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(Ar||(Ar={}));const JIe={[Ar.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[Ar.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Ar.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[Ar.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[Ar.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[Ar.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[Ar.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[Ar.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[Ar.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[Ar.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[Ar.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function vW(t,e,...n){const[r,...i]=JIe[e](...n);console[t]("LEVA: "+r,...i)}const Bu=vW.bind(null,"warn"),eOe=vW.bind(null,"log"),tOe=["value"],nOe=["schema"],rOe=["value"],gW=[],xc={};function Pz(t){let{value:e}=t,n=tr(t,tOe);for(let r of gW){const i=r(e,n);if(i)return i}}function dl(t,e){let{schema:n}=e,r=tr(e,nOe);if(t in xc){Bu(Ar.ALREADY_REGISTERED_TYPE,t);return}gW.push((i,a)=>n(i,a)&&t),xc[t]=r}const iOe=()=>"__CUSTOM__PLUGIN__"+Math.random().toString(36).substr(2,9);function aOe(t){const e=iOe();return xc[e]=t,n=>({type:e,__customInput:n})}function NM(t,e,n,r){const{normalize:i}=xc[t];if(i)return i(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:a}=e,s=tr(e,rOe);return{value:a,settings:s}}function sOe(t,e,n,r,i,a){const{sanitize:s}=xc[t];return s?s(e,n,r,i,a):e}function Iz(t,e,n){const{format:r}=xc[t];return r?r(e,n):e}function oOe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(n),!0).forEach(function(r){oOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const bc=(t,e,n)=>t>n?n:t<e?e:t,uOe=t=>{if(t===""||typeof t=="number")return t;try{const e=Fl(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},lOe=Math.log(10);function Fz(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/lOe)+1,r=Math.floor(Math.log10(Math.abs(t))),i=Math.pow(10,r-n);return Math.max(i,.001)}const Wb=(t,e,n)=>n===e?0:(bc(t,e,n)-e)/(n-e),qb=(t,e,n)=>t*(n-e)+e,cOe=()=>"_"+Math.random().toString(36).substr(2,9),Lz=/\(([0-9+\-*/^ .]+)\)/,Bz=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Uz=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,zz=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,kz=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,$z=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Fl(t){if(isNaN(Number(t)))if(Lz.test(t)){const e=t.replace(Lz,(n,r)=>String(Fl(r)));return Fl(e)}else if(Bz.test(t)){const e=t.replace(Bz,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return Fl(e)}else if(Uz.test(t)){const e=t.replace(Uz,(n,r,i)=>String(Number(r)*Number(i)));return Fl(e)}else if(zz.test(t)){const e=t.replace(zz,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Fl(e)}else if(kz.test(t)){const e=t.replace(kz,(n,r,i)=>String(Number(r)+Number(i)));return Fl(e)}else if($z.test(t)){const e=t.replace($z,(n,r,i)=>String(Number(r)-Number(i)));return Fl(e)}else return Number(t);return Number(t)}function fOe(t,e){return e.reduce((n,r)=>(t&&t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}function dOe(t,e){const n=Ut({},t);return e.forEach(r=>r in t&&delete n[r]),n}function hOe(t,e){return t.reduce((n,r,i)=>Object.assign(n,{[e[i]]:r}),{})}function yW(t){return Object.prototype.toString.call(t)==="[object Object]"}const pOe=t=>yW(t)&&Object.keys(t).length===0;let qs;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(qs||(qs={}));let ps;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(ps||(ps={}));const mOe=["type","__customInput"],vOe=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],gOe=["type"];function xW(t,e,n={},r){var i,a;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:Ut({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:E,__customInput:_}=t,A=tr(t,mOe);return xW(_,e,A,E)}const{render:s,label:o,optional:u,order:l=0,disabled:c,hint:f,onChange:d,onEditStart:h,onEditEnd:m,transient:v}=t,y=tr(t,vOe),p=Ut({render:s,key:e,label:o??e,hint:f,transient:v??!!d,onEditStart:h,onEditEnd:m,disabled:c,optional:u,order:l},n);let{type:x}=y,g=tr(y,gOe);if(x=r??x,x in qs)return{type:x,input:g,options:p};let S;return r&&yW(g)&&"value"in g?S=g.value:S=pOe(g)?void 0:g,{type:x,input:S,options:Ut(Ut({},p),{},{onChange:d,optional:(i=p.optional)!==null&&i!==void 0?i:!1,disabled:(a=p.disabled)!==null&&a!==void 0?a:!1})}}function yOe(t,e,n,r){const i=xW(t,e),{type:a,input:s,options:o}=i;if(a)return a in qs?i:{type:a,input:NM(a,s,n,r),options:o};let u=Pz(s);return u?{type:u,input:NM(u,s,n,r),options:o}:(u=Pz({value:s}),u?{type:u,input:NM(u,{value:s},n,r),options:o}:!1)}function Hz(t,e,n,r,i){const{value:a,type:s,settings:o}=t;t.value=bW({type:s,value:a,settings:o},e,n,r),t.fromPanel=i}const xOe=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function bW({type:t,value:e,settings:n},r,i,a){const s=t!=="SELECT"&&typeof r=="function"?r(e):r;let o;try{o=sOe(t,s,n,e,i,a)}catch(u){throw new xOe(`The value \`${r}\` did not result in a correct value.`,e,u)}return Og(o,e)?e:o}const wW=(t,e,n=!1)=>{let r=0;return function(){const i=arguments,a=n&&!r,s=()=>t.apply(this,i);window.clearTimeout(r),r=window.setTimeout(s,e),a&&s()}},SW=t=>t.shiftKey?5:t.altKey?1/5:1;function bOe(t,e){const n=console.error;console.error=()=>{},z8.render(t,e),console.error=n}const wOe=["value"],SOe=["min","max"],_Oe=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},_W=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(t);if(t===""||isNaN(i))throw Error("Invalid number");const a=bc(i,e,n);return r?a+r:a},EOe=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},EW=t=>{let{value:e}=t,n=tr(t,wOe);const{min:r=-1/0,max:i=1/0}=n,a=tr(n,SOe);let s=parseFloat(e);const o=typeof e=="string"?e.substring((""+s).length):void 0;s=bc(s,r,i);let u=n.step;u||(Number.isFinite(r)?Number.isFinite(i)?u=+(Math.abs(i-r)/100).toPrecision(1):u=+(Math.abs(s-r)/100).toPrecision(1):Number.isFinite(i)&&(u=+(Math.abs(i-s)/100).toPrecision(1)));const l=u?Fz(u)*10:Fz(s);u=u||l/10;const c=Math.round(bc(Math.log10(1/l),0,2));return{value:o?s+o:s,settings:Ut({initialValue:s,step:u,pad:c,min:r,max:i,suffix:o},a)}},MW=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var AW=Object.freeze({__proto__:null,schema:_Oe,sanitize:_W,format:EOe,normalize:EW,sanitizeStep:MW});function Ir(){return Ir=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ir.apply(this,arguments)}const CW=$.createContext({});function Oi(){return $.useContext(CW)}const XN=$.createContext(null),TW=$.createContext(null),DW=$.createContext(null);function Kp(){return $.useContext(TW)}function MOe(){return $.useContext(DW)}const NW=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function tx(t,e){const[n,r]=t.split(" "),i={};return n!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(i.backgroundColor=r),i}const Ym={$inputStyle:()=>t=>tx(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>tx(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>tx(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>tx(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:Bt,css:lze,createTheme:AOe,globalCss:COe,keyframes:cze}=iPe({prefix:"leva",theme:NW(),utils:Ut(Ut({},Ym),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":Ym.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":Ym.$focusStyle()(t)}),$hover:t=>({"&:hover":Ym.$hoverStyle()(t)}),$active:t=>({"&:active":Ym.$activeStyle()(t)})})}),TOe=COe({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function DOe(t){const e=NW();if(!t)return{theme:e,className:""};Object.keys(t).forEach(r=>{Object.assign(e[r],t[r])});const n=AOe(e);return{theme:e,className:n.className}}function Xu(t,e){const{theme:n}=$.useContext(XN);if(!(t in n)||!(e in n[t]))return Bu(Ar.THEME_ERROR,t,e),"";let r=e;for(;;){let i=n[t][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const RW=Bt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),YN=Bt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${RW}`]:{paddingLeft:0}}),NOe=Bt(YN,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),ROe=Bt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),POe=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],IOe=["onUpdate"];function ZN(t){let{innerLabel:e,value:n,onUpdate:r,onChange:i,onKeyDown:a,type:s,id:o,inputType:u="text",rows:l=0}=t,c=tr(t,POe);const{id:f,emitOnEditStart:d,emitOnEditEnd:h,disabled:m}=Oi(),v=o||f,y=$.useRef(null),p=l>0,x=p?"textarea":"input",g=$.useCallback(_=>A=>{const T=A.currentTarget.value;_(T)},[]);Ae.useEffect(()=>{const _=y.current,A=g(T=>{r(T),h()});return _==null||_.addEventListener("blur",A),()=>_==null?void 0:_.removeEventListener("blur",A)},[g,r,h]);const S=$.useCallback(_=>{_.key==="Enter"&&g(r)(_)},[g,r]),E=Object.assign({as:x},p?{rows:l}:{},c);return Ae.createElement(ROe,{textArea:p},e&&typeof e=="string"?Ae.createElement(YN,null,e):e,Ae.createElement(RW,Ir({levaType:s,ref:y,id:v,type:u,autoComplete:"off",spellCheck:"false",value:n,onChange:g(i),onFocus:()=>d(),onKeyPress:S,onKeyDown:a,disabled:m},E)))}function OOe(t){let{onUpdate:e}=t,n=tr(t,IOe);const r=$.useCallback(a=>e(uOe(a)),[e]),i=$.useCallback(a=>{const s=a.key==="ArrowUp"?1:a.key==="ArrowDown"?-1:0;if(s){a.preventDefault();const o=a.altKey?.1:a.shiftKey?10:1;e(u=>parseFloat(u)+s*o)}},[e]);return Ae.createElement(ZN,Ir({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const jb=Bt("div",{}),xC=Bt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),FOe=Bt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${xC}::after`]:{opacity:.6},[`${jb}:hover > & + ${xC}::after`]:{opacity:.6},[`${jb}:hover > & > svg`]:{opacity:1}}),PW=Bt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${jb}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),IW=Bt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${PW} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),OW=Bt(IW,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),LOe=Bt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),BOe=Bt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),bC=Bt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),UOe=Bt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${bC}`]:{pointerEvents:"auto"}}}}}),KN=Bt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),zOe=Bt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),kOe=Bt(KIe,{fill:"$toolTipBackground"});function RS({children:t}){const{className:e}=$.useContext(XN);return Ae.createElement(ARe,{className:e},t)}const $Oe=["align"];function HOe(){const{id:t,disable:e,disabled:n}=Oi();return Ae.createElement(Ae.Fragment,null,Ae.createElement(BOe,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),Ae.createElement("label",{htmlFor:t+"__disable"}))}function GOe(t){const{id:e,optional:n,hint:r}=Oi(),i=t.htmlFor||(e?{htmlFor:e}:null),a=!r&&typeof t.children=="string"?{title:t.children}:null;return Ae.createElement(Ae.Fragment,null,n&&Ae.createElement(HOe,null),r!==void 0?Ae.createElement(XIe,null,Ae.createElement(YIe,{asChild:!0},Ae.createElement(bC,Ir({},i,t))),Ae.createElement(ZIe,{side:"top",sideOffset:2},Ae.createElement(zOe,null,r,Ae.createElement(kOe,null)))):Ae.createElement(bC,Ir({},i,a,t)))}function no(t){let{align:e}=t,n=tr(t,$Oe);const{value:r,label:i,key:a,disabled:s}=Oi(),{hideCopyButton:o}=MOe(),u=!o&&a!==void 0,[l,c]=$.useState(!1),f=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[a]:r??""})),c(!0)}catch{Bu(Ar.CLIPBOARD_ERROR,{[a]:r})}};return Ae.createElement(LOe,{align:e,onPointerLeave:()=>c(!1)},Ae.createElement(GOe,n),u&&!s&&Ae.createElement("div",{title:`Click to copy ${typeof i=="string"?i:a} value`},l?Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Ae.createElement("svg",{onClick:f,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Ae.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const VOe=["toggled"],WOe=Bt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function QN(t){let{toggled:e}=t,n=tr(t,VOe);return Ae.createElement(WOe,Ir({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),Ae.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const qOe=["input"];function ws(t){let{input:e}=t,n=tr(t,qOe);return e?Ae.createElement(OW,n):Ae.createElement(IW,n)}function FW({value:t,type:e,settings:n,setValue:r}){const[i,a]=$.useState(Iz(e,t,n)),s=$.useRef(t),o=$.useRef(n);o.current=n;const u=$.useCallback(c=>a(Iz(e,c,o.current)),[e]),l=$.useCallback(c=>{try{r(c)}catch(f){const{type:d,previousValue:h}=f;if(d!=="LEVA_ERROR")throw f;u(h)}},[u,r]);return $.useEffect(()=>{Og(t,s.current)||u(t),s.current=t},[t,u]),{displayValue:i,onChange:a,onUpdate:l}}function S0(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=Oi();return _ae(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const a=t(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),a},e)}function jOe(t){const e=$.useRef(null),n=$.useRef(null),r=$.useRef(!1);return $.useEffect(()=>{const i=wW(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[t]),$.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function LW(){const t=$.useRef(null),e=$.useRef({x:0,y:0}),n=$.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const XOe=["__refCount"],RM=(t,e)=>{if(!t[e])return null;const n=t[e];return tr(n,XOe)};function YOe(t){const e=Kp(),[n,r]=$.useState(RM(e.getData(),t)),i=$.useCallback(l=>e.setValueAtPath(t,l,!0),[t,e]),a=$.useCallback(l=>e.setSettingsAtPath(t,l),[t,e]),s=$.useCallback(l=>e.disableInputAtPath(t,l),[t,e]),o=$.useCallback(()=>e.emitOnEditStart(t),[t,e]),u=$.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return $.useEffect(()=>{r(RM(e.getData(),t));const l=e.useStore.subscribe(c=>RM(c.data,t),r,{equalityFn:b0});return()=>l()},[e,t]),[n,{set:i,setSettings:a,disable:s,storeId:e.storeId,emitOnEditStart:o,emitOnEditEnd:u}]}const ZOe=Bt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),BW=Bt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),wC=Bt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),UW=Bt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),zW=Bt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function KOe({value:t,min:e,max:n,onDrag:r,step:i,initialValue:a}){const s=$.useRef(null),o=$.useRef(null),u=$.useRef(0),l=Xu("sizes","scrubberWidth"),c=S0(({event:d,first:h,xy:[m],movement:[v],memo:y})=>{if(h){const{width:x,left:g}=s.current.getBoundingClientRect();u.current=x-parseFloat(l),y=(d==null?void 0:d.target)===o.current?t:qb((m-g)/x,e,n)}const p=y+qb(v/u.current,0,n-e);return r(MW(p,{step:i,initialValue:a})),y}),f=Wb(t,e,n);return Ae.createElement(UW,Ir({ref:s},c()),Ae.createElement(BW,null,Ae.createElement(zW,{style:{left:0,right:`${(1-f)*100}%`}})),Ae.createElement(wC,{ref:o,style:{left:`calc(${f} * (100% - ${l}))`}}))}const QOe=Ae.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[i,a]=$.useState(!1),s=S0(({active:o,delta:[u],event:l,memo:c=0})=>(a(o),c+=u/2,Math.abs(c)>=1&&(e(f=>parseFloat(f)+Math.floor(c)*n*SW(l)),c=0),c));return Ae.createElement(NOe,Ir({dragging:i,title:t.length>1?t:""},s()),t.slice(0,r))});function JN({label:t,id:e,displayValue:n,onUpdate:r,onChange:i,settings:a,innerLabelTrim:s=1}){const o=s>0&&Ae.createElement(QOe,{label:t,step:a.step,onUpdate:r,innerLabelTrim:s});return Ae.createElement(OOe,{id:e,value:String(n),onUpdate:r,onChange:i,innerLabel:o})}function JOe(){const t=Oi(),{label:e,value:n,onUpdate:r,settings:i,id:a}=t,{min:s,max:o}=i,u=o!==1/0&&s!==-1/0;return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,e),Ae.createElement(ZOe,{hasRange:u},u&&Ae.createElement(KOe,Ir({value:parseFloat(n),onDrag:r},i)),Ae.createElement(JN,Ir({},t,{id:a,label:"value",innerLabelTrim:u?0:1}))))}const{sanitizeStep:eFe}=AW,tFe=tr(AW,["sanitizeStep"]);var nFe=Ut({component:JOe},tFe);const rFe=(t,e)=>$a().schema({options:$a().passesAnyOf($a().object(),$a().array())}).test(e),iFe=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},aFe=(t,{values:e})=>e.indexOf(t),sFe=t=>{let{value:e,options:n}=t,r,i;return Array.isArray(n)?(i=n,r=n.map(a=>String(a))):(i=Object.values(n),r=Object.keys(n)),"value"in t?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var oFe=Object.freeze({__proto__:null,schema:rFe,sanitize:iFe,format:aFe,normalize:sFe});const uFe=Bt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),SC=Bt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),lFe=Bt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${SC}:focus + &`]:{$focusStyle:""},[`${SC}:hover + &`]:{$hoverStyle:""}});function kW({displayValue:t,value:e,onUpdate:n,id:r,settings:i,disabled:a}){const{keys:s,values:o}=i,u=$.useRef();return e===o[t]&&(u.current=s[t]),Ae.createElement(uFe,null,Ae.createElement(SC,{id:r,value:t,onChange:l=>n(o[Number(l.currentTarget.value)]),disabled:a},s.map((l,c)=>Ae.createElement("option",{key:l,value:c},l))),Ae.createElement(lFe,null,u.current),Ae.createElement(QN,{toggled:!0}))}function cFe(){const{label:t,value:e,displayValue:n,onUpdate:r,id:i,disabled:a,settings:s}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(kW,{id:i,value:e,displayValue:n,onUpdate:r,settings:s,disabled:a}))}var fFe=Ut({component:cFe},oFe);const dFe=t=>$a().string().test(t),hFe=t=>{if(typeof t!="string")throw Error("Invalid string");return t},pFe=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var mFe=Object.freeze({__proto__:null,schema:dFe,sanitize:hFe,normalize:pFe});const vFe=["displayValue","onUpdate","onChange","editable"],gFe=Bt("div",{whiteSpace:"pre-wrap"});function $W(t){let{displayValue:e,onUpdate:n,onChange:r,editable:i=!0}=t,a=tr(t,vFe);return i?Ae.createElement(ZN,Ir({value:e,onUpdate:n,onChange:r},a)):Ae.createElement(gFe,null,e)}function yFe(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:i}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement($W,Ir({displayValue:n,onUpdate:r,onChange:i},e)))}var xFe=Ut({component:yFe},mFe);const bFe=t=>$a().boolean().test(t),wFe=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var SFe=Object.freeze({__proto__:null,schema:bFe,sanitize:wFe});const _Fe=Bt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function HW({value:t,onUpdate:e,id:n,disabled:r}){return Ae.createElement(_Fe,null,Ae.createElement("input",{id:n,type:"checkbox",checked:t,onChange:i=>e(i.currentTarget.checked),disabled:r}),Ae.createElement("label",{htmlFor:n},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ae.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function EFe(){const{label:t,value:e,onUpdate:n,disabled:r,id:i}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(HW,{value:e,onUpdate:n,id:i,disabled:r}))}var MFe=Ut({component:EFe},SFe);const AFe=["locked"];function CFe({value:t,id:e,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:a}){const s=$.useRef(t[n]);s.current=t[n];const o=$.useCallback(l=>i({[n]:bW({type:"NUMBER",value:s.current,settings:r},l)}),[i,r,n]),u=FW({type:"NUMBER",value:t[n],settings:r,setValue:o});return Ae.createElement(JN,{id:e,label:n,value:t[n],displayValue:u.displayValue,onUpdate:u.onUpdate,onChange:u.onChange,settings:r,innerLabelTrim:a})}const TFe=Bt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function DFe(t){let{locked:e}=t,n=tr(t,AFe);return Ae.createElement("svg",Ir({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?Ae.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Ae.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function PS({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:i,setSettings:a}=Oi(),{lock:s,locked:o}=n;return Ae.createElement(TFe,{withLock:s},s&&Ae.createElement(DFe,{locked:o,onClick:()=>a({locked:!o})}),Object.keys(t).map((u,l)=>Ae.createElement(CFe,{id:l===0?i:`${i}.${u}`,key:u,valueKey:u,value:t,settings:n[u],onUpdate:e,innerLabelTrim:r})))}const GW=(t,e)=>{const n={};let r=0,i=1/0;Object.entries(t).forEach(([a,s])=>{n[a]=EW(Ut({value:s},e[a])).settings,r=Math.max(r,n[a].step),i=Math.min(i,n[a].pad)});for(let a in n){const{step:s,min:o,max:u}=e[a]||{};!isFinite(s)&&(!isFinite(o)||!isFinite(u))&&(n[a].step=r,n[a].pad=i)}return n},NFe=["lock"],RFe=["value"];function PFe(t){const e=$a().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===t&&i.every(a=>isFinite(a))};return r=>e.test(r)||n(r)}function IFe(t){return Array.isArray(t)?"array":"object"}function Nv(t,e,n){return IFe(t)===e?t:e==="array"?Object.values(t):hOe(t,n)}const OFe=(t,e,n)=>{const r=Nv(t,"object",e.keys);for(let s in r)r[s]=_W(r[s],e[s]);const i=Object.keys(r);let a={};if(i.length===e.keys.length)a=r;else{const s=Nv(n,"object",e.keys);if(i.length===1&&e.locked){const o=i[0],u=r[o],l=s[o],c=l!==0?u/l:1;for(let f in s)f===o?a[o]=u:a[f]=s[f]*c}else a=Ut(Ut({},s),r)}return Nv(a,e.format,e.keys)},FFe=(t,e)=>Nv(t,"object",e.keys),LFe=t=>!!t&&("step"in t||"min"in t||"max"in t);function BFe(t,e,n=[]){const{lock:r=!1}=e,i=tr(e,NFe),a=Array.isArray(t)?"array":"object",s=a==="object"?Object.keys(t):n,o=Nv(t,"object",s),u=LFe(i)?s.reduce((c,f)=>Object.assign(c,{[f]:i}),{}):i,l=GW(o,u);return{value:a==="array"?t:o,settings:Ut(Ut({},l),{},{format:a,keys:s,lock:r,locked:!1})}}function VW(t){return{schema:PFe(t.length),normalize:e=>{let{value:n}=e,r=tr(e,RFe);return BFe(n,r,t)},format:(e,n)=>FFe(e,n),sanitize:(e,n,r)=>OFe(e,n,r)}}var UFe={grad:.9,turn:360,rad:360/(2*Math.PI)},Nu=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},yi=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Vs=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},WW=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Gz=function(t){return{r:Vs(t.r,0,255),g:Vs(t.g,0,255),b:Vs(t.b,0,255),a:Vs(t.a)}},PM=function(t){return{r:yi(t.r),g:yi(t.g),b:yi(t.b),a:yi(t.a,3)}},zFe=/^#([0-9a-f]{3,8})$/i,nx=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},qW=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,a=Math.max(e,n,r),s=a-Math.min(e,n,r),o=s?a===e?(n-r)/s:a===n?2+(r-e)/s:4+(e-n)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:i}},jW=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var a=Math.floor(e),s=r*(1-n),o=r*(1-(e-a)*n),u=r*(1-(1-e+a)*n),l=a%6;return{r:255*[r,o,s,s,u,r][l],g:255*[u,r,r,o,s,s][l],b:255*[s,s,u,r,r,o][l],a:i}},Vz=function(t){return{h:WW(t.h),s:Vs(t.s,0,100),l:Vs(t.l,0,100),a:Vs(t.a)}},Wz=function(t){return{h:yi(t.h),s:yi(t.s),l:yi(t.l),a:yi(t.a,3)}},qz=function(t){return jW((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Rv=function(t){return{h:(e=qW(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},kFe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$Fe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HFe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GFe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_C={string:[[function(t){var e=zFe.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?yi(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?yi(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=HFe.exec(t)||GFe.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Gz({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=kFe.exec(t)||$Fe.exec(t);if(!e)return null;var n,r,i=Vz({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(UFe[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return qz(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,a=i===void 0?1:i;return Nu(e)&&Nu(n)&&Nu(r)?Gz({r:Number(e),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,a=i===void 0?1:i;if(!Nu(e)||!Nu(n)||!Nu(r))return null;var s=Vz({h:Number(e),s:Number(n),l:Number(r),a:Number(a)});return qz(s)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,a=i===void 0?1:i;if(!Nu(e)||!Nu(n)||!Nu(r))return null;var s=function(o){return{h:WW(o.h),s:Vs(o.s,0,100),v:Vs(o.v,0,100),a:Vs(o.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(a)});return jW(s)},"hsv"]]},jz=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},XW=function(t){return typeof t=="string"?jz(t.trim(),_C.string):typeof t=="object"&&t!==null?jz(t,_C.object):[null,void 0]},VFe=function(t){return XW(t)[1]},IM=function(t,e){var n=Rv(t);return{h:n.h,s:Vs(n.s+100*e,0,100),l:n.l,a:n.a}},OM=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Xz=function(t,e){var n=Rv(t);return{h:n.h,s:n.s,l:Vs(n.l+100*e,0,100),a:n.a}},EC=function(){function t(e){this.parsed=XW(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return yi(OM(this.rgba),2)},t.prototype.isDark=function(){return OM(this.rgba)<.5},t.prototype.isLight=function(){return OM(this.rgba)>=.5},t.prototype.toHex=function(){return e=PM(this.rgba),n=e.r,r=e.g,i=e.b,s=(a=e.a)<1?nx(yi(255*a)):"","#"+nx(n)+nx(r)+nx(i)+s;var e,n,r,i,a,s},t.prototype.toRgb=function(){return PM(this.rgba)},t.prototype.toRgbString=function(){return e=PM(this.rgba),n=e.r,r=e.g,i=e.b,(a=e.a)<1?"rgba("+n+", "+r+", "+i+", "+a+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,a},t.prototype.toHsl=function(){return Wz(Rv(this.rgba))},t.prototype.toHslString=function(){return e=Wz(Rv(this.rgba)),n=e.h,r=e.s,i=e.l,(a=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+a+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,a},t.prototype.toHsv=function(){return e=qW(this.rgba),{h:yi(e.h),s:yi(e.s),v:yi(e.v),a:yi(e.a,3)};var e},t.prototype.invert=function(){return pa({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),pa(IM(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),pa(IM(this.rgba,-e))},t.prototype.grayscale=function(){return pa(IM(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),pa(Xz(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),pa(Xz(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?pa({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):yi(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Rv(this.rgba);return typeof e=="number"?pa({h:e,s:n.s,l:n.l,a:n.a}):yi(n.h)},t.prototype.isEqual=function(e){return this.toHex()===pa(e).toHex()},t}(),pa=function(t){return t instanceof EC?t:new EC(t)},Yz=[],WFe=function(t){t.forEach(function(e){Yz.indexOf(e)<0&&(e(EC,_C),Yz.push(e))})};function qFe(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var a={};t.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,u,l=r[this.toHex()];if(l)return l;if(s!=null&&s.closest){var c=this.toRgb(),f=1/0,d="black";if(!a.length)for(var h in n)a[h]=new t(n[h]).toRgb();for(var m in n){var v=(o=c,u=a[m],Math.pow(o.r-u.r,2)+Math.pow(o.g-u.g,2)+Math.pow(o.b-u.b,2));v<f&&(f=v,d=m)}return d}},e.string.push([function(s){var o=s.toLowerCase(),u=o==="transparent"?"#0000":n[o];return u?new t(u).toRgb():null},"name"])}function Qp(){return(Qp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function e3(t,e){if(t==null)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)e.indexOf(n=a[r])>=0||(i[n]=t[n]);return i}function MC(t){var e=$.useRef(t),n=$.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var xp=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Pv=function(t){return"touches"in t},AC=function(t){return t&&t.ownerDocument.defaultView||self},Zz=function(t,e,n){var r=t.getBoundingClientRect(),i=Pv(e)?function(a,s){for(var o=0;o<a.length;o++)if(a[o].identifier===s)return a[o];return a[0]}(e.touches,n):e;return{left:xp((i.pageX-(r.left+AC(t).pageXOffset))/r.width),top:xp((i.pageY-(r.top+AC(t).pageYOffset))/r.height)}},Kz=function(t){!Pv(t)&&t.preventDefault()},t3=Ae.memo(function(t){var e=t.onMove,n=t.onKey,r=e3(t,["onMove","onKey"]),i=$.useRef(null),a=MC(e),s=MC(n),o=$.useRef(null),u=$.useRef(!1),l=$.useMemo(function(){var h=function(y){Kz(y),(Pv(y)?y.touches.length>0:y.buttons>0)&&i.current?a(Zz(i.current,y,o.current)):v(!1)},m=function(){return v(!1)};function v(y){var p=u.current,x=AC(i.current),g=y?x.addEventListener:x.removeEventListener;g(p?"touchmove":"mousemove",h),g(p?"touchend":"mouseup",m)}return[function(y){var p=y.nativeEvent,x=i.current;if(x&&(Kz(p),!function(S,E){return E&&!Pv(S)}(p,u.current)&&x)){if(Pv(p)){u.current=!0;var g=p.changedTouches||[];g.length&&(o.current=g[0].identifier)}x.focus(),a(Zz(x,p,o.current)),v(!0)}},function(y){var p=y.which||y.keyCode;p<37||p>40||(y.preventDefault(),s({left:p===39?.05:p===37?-.05:0,top:p===40?.05:p===38?-.05:0}))},v]},[s,a]),c=l[0],f=l[1],d=l[2];return $.useEffect(function(){return d},[d]),Ae.createElement("div",Qp({},r,{onTouchStart:c,onMouseDown:c,className:"react-colorful__interactive",ref:i,onKeyDown:f,tabIndex:0,role:"slider"}))}),_0=function(t){return t.filter(Boolean).join(" ")},n3=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,a=_0(["react-colorful__pointer",t.className]);return Ae.createElement("div",{className:a,style:{top:100*i+"%",left:100*n+"%"}},Ae.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},va=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},YW=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:va(t.h),s:va(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:va(i/2),a:va(r,2)}},CC=function(t){var e=YW(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},FM=function(t){var e=YW(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},ZW=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var a=Math.floor(e),s=r*(1-n),o=r*(1-(e-a)*n),u=r*(1-(1-e+a)*n),l=a%6;return{r:va(255*[r,o,s,s,u,r][l]),g:va(255*[u,r,r,o,s,s][l]),b:va(255*[s,s,u,r,r,o][l]),a:va(i,2)}},KW=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,a=Math.max(e,n,r),s=a-Math.min(e,n,r),o=s?a===e?(n-r)/s:a===n?2+(r-e)/s:4+(e-n)/s:0;return{h:va(60*(o<0?o+6:o)),s:va(a?s/a*100:0),v:va(a/255*100),a:i}},QW=Ae.memo(function(t){var e=t.hue,n=t.onChange,r=_0(["react-colorful__hue",t.className]);return Ae.createElement("div",{className:r},Ae.createElement(t3,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:xp(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":va(e),"aria-valuemax":"360","aria-valuemin":"0"},Ae.createElement(n3,{className:"react-colorful__hue-pointer",left:e/360,color:CC({h:e,s:100,v:100,a:1})})))}),JW=Ae.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:CC({h:e.h,s:100,v:100,a:1})};return Ae.createElement("div",{className:"react-colorful__saturation",style:r},Ae.createElement(t3,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:xp(e.s+100*i.left,0,100),v:xp(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+va(e.s)+"%, Brightness "+va(e.v)+"%"},Ae.createElement(n3,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:CC(e)})))}),r3=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function eq(t,e,n){var r=MC(n),i=$.useState(function(){return t.toHsva(e)}),a=i[0],s=i[1],o=$.useRef({color:e,hsva:a});$.useEffect(function(){if(!t.equal(e,o.current.color)){var l=t.toHsva(e);o.current={hsva:l,color:e},s(l)}},[e,t]),$.useEffect(function(){var l;r3(a,o.current.hsva)||t.equal(l=t.fromHsva(a),o.current.color)||(o.current={hsva:a,color:l},r(l))},[a,t,r]);var u=$.useCallback(function(l){s(function(c){return Object.assign({},c,l)})},[]);return[a,u]}var jFe=typeof window<"u"?$.useLayoutEffect:$.useEffect,XFe=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},Qz=new Map,tq=function(t){jFe(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!Qz.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,Qz.set(e,n);var r=XFe();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},YFe=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,a=t.onChange,s=e3(t,["className","colorModel","color","onChange"]),o=$.useRef(null);tq(o);var u=eq(n,i,a),l=u[0],c=u[1],f=_0(["react-colorful",e]);return Ae.createElement("div",Qp({},s,{ref:o,className:f}),Ae.createElement(JW,{hsva:l,onChange:c}),Ae.createElement(QW,{hue:l.h,onChange:c,className:"react-colorful__last-control"}))},ZFe=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+FM(Object.assign({},n,{a:0}))+", "+FM(Object.assign({},n,{a:1}))+")"},a=_0(["react-colorful__alpha",e]),s=va(100*n.a);return Ae.createElement("div",{className:a},Ae.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Ae.createElement(t3,{onMove:function(o){r({a:o.left})},onKey:function(o){r({a:xp(n.a+o.left)})},"aria-label":"Alpha","aria-valuetext":s+"%","aria-valuenow":s,"aria-valuemin":"0","aria-valuemax":"100"},Ae.createElement(n3,{className:"react-colorful__alpha-pointer",left:n.a,color:FM(n)})))},KFe=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,a=t.onChange,s=e3(t,["className","colorModel","color","onChange"]),o=$.useRef(null);tq(o);var u=eq(n,i,a),l=u[0],c=u[1],f=_0(["react-colorful",e]);return Ae.createElement("div",Qp({},s,{ref:o,className:f}),Ae.createElement(JW,{hsva:l,onChange:c}),Ae.createElement(QW,{hue:l.h,onChange:c}),Ae.createElement(ZFe,{hsva:l,onChange:c,className:"react-colorful__last-control"}))},QFe={defaultColor:{r:0,g:0,b:0,a:1},toHsva:KW,fromHsva:ZW,equal:r3},JFe=function(t){return Ae.createElement(KFe,Qp({},t,{colorModel:QFe}))},eLe={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return KW({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=ZW(t)).r,g:e.g,b:e.b};var e},equal:r3},tLe=function(t){return Ae.createElement(YFe,Qp({},t,{colorModel:eLe}))};function Jp(t,e,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(c){try{l(r.next(c))}catch(f){s(f)}}function u(c){try{l(r.throw(c))}catch(f){s(f)}}function l(c){c.done?a(c.value):i(c.value).then(o,u)}l((r=r.apply(t,e||[])).next())})}function em(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){n.label=l[1];break}if(l[0]===6&&n.label<a[1]){n.label=a[1],a=l;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(l);break}a[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function nLe(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return a}function rLe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(nLe(arguments[e]));return t}var iLe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function E0(t,e){var n=aLe(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function aLe(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=iLe.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var sLe=[".DS_Store","Thumbs.db"];function oLe(t){return Jp(this,void 0,void 0,function(){return em(this,function(e){return Xb(t)&&uLe(t)?[2,dLe(t.dataTransfer,t.type)]:lLe(t)?[2,cLe(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,fLe(t)]:[2,[]]})})}function uLe(t){return Xb(t.dataTransfer)}function lLe(t){return Xb(t)&&Xb(t.target)}function Xb(t){return typeof t=="object"&&t!==null}function cLe(t){return TC(t.target.files).map(function(e){return E0(e)})}function fLe(t){return Jp(this,void 0,void 0,function(){var e;return em(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return E0(r)})]}})})}function dLe(t,e){return Jp(this,void 0,void 0,function(){var n,r;return em(this,function(i){switch(i.label){case 0:return t===null?[2,[]]:t.items?(n=TC(t.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(hLe))]):[3,2];case 1:return r=i.sent(),[2,Jz(nq(r))];case 2:return[2,Jz(TC(t.files).map(function(a){return E0(a)}))]}})})}function Jz(t){return t.filter(function(e){return sLe.indexOf(e.name)===-1})}function TC(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function hLe(t){if(typeof t.webkitGetAsEntry!="function")return e5(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?rq(e):e5(t)}function nq(t){return t.reduce(function(e,n){return rLe(e,Array.isArray(n)?nq(n):[n])},[])}function e5(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=E0(e);return Promise.resolve(n)}function pLe(t){return Jp(this,void 0,void 0,function(){return em(this,function(e){return[2,t.isDirectory?rq(t):mLe(t)]})})}function rq(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function a(){var s=this;e.readEntries(function(o){return Jp(s,void 0,void 0,function(){var u,l,c;return em(this,function(f){switch(f.label){case 0:if(o.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return u=f.sent(),n(u),[3,4];case 3:return l=f.sent(),r(l),[3,4];case 4:return[3,6];case 5:c=Promise.all(o.map(pLe)),i.push(c),a(),f.label=6;case 6:return[2]}})})},function(o){r(o)})}a()})}function mLe(t){return Jp(this,void 0,void 0,function(){return em(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var a=E0(i,t.fullPath);n(a)},function(i){r(i)})})]})})}var vLe=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),a=i.replace(/\/.*$/,"");return n.some(function(s){var o=s.trim().toLowerCase();return o.charAt(0)==="."?r.toLowerCase().endsWith(o):o.endsWith("/*")?a===o.replace(/\/.*$/,""):i===o})}return!0};function t5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t5(Object(n),!0).forEach(function(r){iq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r5(t,e){return bLe(t)||xLe(t,e)||yLe(t,e)||gLe()}function gLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yLe(t,e){if(t){if(typeof t=="string")return i5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i5(t,e)}}function i5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,o=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function bLe(t){if(Array.isArray(t))return t}var wLe="file-invalid-type",SLe="file-too-large",_Le="file-too-small",ELe="too-many-files",MLe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:wLe,message:"File type must be ".concat(n)}},a5=function(e){return{code:SLe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},s5=function(e){return{code:_Le,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},ALe={code:ELe,message:"Too many files"};function aq(t,e){var n=t.type==="application/x-moz-file"||vLe(t,e);return[n,n?null:MLe(e)]}function sq(t,e,n){if(Zm(t.size))if(Zm(e)&&Zm(n)){if(t.size>n)return[!1,a5(n)];if(t.size<e)return[!1,s5(e)]}else{if(Zm(e)&&t.size<e)return[!1,s5(e)];if(Zm(n)&&t.size>n)return[!1,a5(n)]}return[!0,null]}function Zm(t){return t!=null}function CLe(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,a=t.multiple,s=t.maxFiles;return!a&&e.length>1||a&&s>=1&&e.length>s?!1:e.every(function(o){var u=aq(o,n),l=r5(u,1),c=l[0],f=sq(o,r,i),d=r5(f,1),h=d[0];return c&&h})}function Yb(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function rx(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function o5(t){t.preventDefault()}function TLe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function DLe(t){return t.indexOf("Edge/")!==-1}function NLe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return TLe(t)||DLe(t)}function jo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return e.some(function(o){return!Yb(r)&&o&&o.apply(void 0,[r].concat(a)),Yb(r)})}}function RLe(){return"showOpenFilePicker"in window}function PLe(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return n5(n5({},e),{},iq({},n,[]))},{}):{}}]}function ILe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function OLe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var FLe=["children"],LLe=["open"],BLe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ULe=["refKey","onChange","onClick"];function zLe(t){return HLe(t)||$Le(t)||oq(t)||kLe()}function kLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Le(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HLe(t){if(Array.isArray(t))return DC(t)}function LM(t,e){return WLe(t)||VLe(t,e)||oq(t,e)||GLe()}function GLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oq(t,e){if(t){if(typeof t=="string")return DC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DC(t,e)}}function DC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(t);!(i=(s=n.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(u){a=!0,o=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function WLe(t){if(Array.isArray(t))return t}function u5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(n),!0).forEach(function(r){NC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NC(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zb(t,e){if(t==null)return{};var n=qLe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qLe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var i3=$.forwardRef(function(t,e){var n=t.children,r=Zb(t,FLe),i=lq(r),a=i.open,s=Zb(i,LLe);return $.useImperativeHandle(e,function(){return{open:a}},[a]),Ae.createElement($.Fragment,null,n(Mr(Mr({},s),{},{open:a})))});i3.displayName="Dropzone";var uq={disabled:!1,getFilesFromEvent:oLe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};i3.defaultProps=uq;i3.propTypes={children:lr.func,accept:lr.oneOfType([lr.string,lr.arrayOf(lr.string)]),multiple:lr.bool,preventDropOnDocument:lr.bool,noClick:lr.bool,noKeyboard:lr.bool,noDrag:lr.bool,noDragEventsBubbling:lr.bool,minSize:lr.number,maxSize:lr.number,maxFiles:lr.number,disabled:lr.bool,getFilesFromEvent:lr.func,onFileDialogCancel:lr.func,onFileDialogOpen:lr.func,useFsAccessApi:lr.bool,onDragEnter:lr.func,onDragLeave:lr.func,onDragOver:lr.func,onDrop:lr.func,onDropAccepted:lr.func,onDropRejected:lr.func,validator:lr.func};var RC={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function lq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Mr(Mr({},uq),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,a=e.maxSize,s=e.minSize,o=e.multiple,u=e.maxFiles,l=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,d=e.onDrop,h=e.onDropAccepted,m=e.onDropRejected,v=e.onFileDialogCancel,y=e.onFileDialogOpen,p=e.useFsAccessApi,x=e.preventDropOnDocument,g=e.noClick,S=e.noKeyboard,E=e.noDrag,_=e.noDragEventsBubbling,A=e.validator,T=$.useMemo(function(){return typeof y=="function"?y:l5},[y]),M=$.useMemo(function(){return typeof v=="function"?v:l5},[v]),C=$.useRef(null),N=$.useRef(null),P=$.useReducer(jLe,RC),H=LM(P,2),L=H[0],z=H[1],O=L.isFocused,F=L.isFileDialogActive,U=L.draggedFiles,I=$.useRef(typeof window<"u"&&window.isSecureContext&&p&&RLe()),j=function(){!I.current&&F&&setTimeout(function(){if(N.current){var Y=N.current.files;Y.length||(z({type:"closeDialog"}),M())}},300)};$.useEffect(function(){return window.addEventListener("focus",j,!1),function(){window.removeEventListener("focus",j,!1)}},[N,F,M,I]);var ee=$.useRef([]),J=function(Y){C.current&&C.current.contains(Y.target)||(Y.preventDefault(),ee.current=[])};$.useEffect(function(){return x&&(document.addEventListener("dragover",o5,!1),document.addEventListener("drop",J,!1)),function(){x&&(document.removeEventListener("dragover",o5),document.removeEventListener("drop",J))}},[C,x]);var q=$.useCallback(function(W){W.preventDefault(),W.persist(),te(W),ee.current=[].concat(zLe(ee.current),[W.target]),rx(W)&&Promise.resolve(i(W)).then(function(Y){Yb(W)&&!_||(z({draggedFiles:Y,isDragActive:!0,type:"setDraggedFiles"}),l&&l(W))})},[i,l,_]),ae=$.useCallback(function(W){W.preventDefault(),W.persist(),te(W);var Y=rx(W);if(Y&&W.dataTransfer)try{W.dataTransfer.dropEffect="copy"}catch{}return Y&&f&&f(W),!1},[f,_]),be=$.useCallback(function(W){W.preventDefault(),W.persist(),te(W);var Y=ee.current.filter(function(xe){return C.current&&C.current.contains(xe)}),de=Y.indexOf(W.target);de!==-1&&Y.splice(de,1),ee.current=Y,!(Y.length>0)&&(z({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),rx(W)&&c&&c(W))},[C,c,_]),ue=$.useCallback(function(W,Y){var de=[],xe=[];W.forEach(function(Ne){var Be=aq(Ne,n),$e=LM(Be,2),Ie=$e[0],Ye=$e[1],Ve=sq(Ne,s,a),at=LM(Ve,2),tt=at[0],Ze=at[1],we=A?A(Ne):null;if(Ie&&tt&&!we)de.push(Ne);else{var B=[Ye,Ze];we&&(B=B.concat(we)),xe.push({file:Ne,errors:B.filter(function(se){return se})})}}),(!o&&de.length>1||o&&u>=1&&de.length>u)&&(de.forEach(function(Ne){xe.push({file:Ne,errors:[ALe]})}),de.splice(0)),z({acceptedFiles:de,fileRejections:xe,type:"setFiles"}),d&&d(de,xe,Y),xe.length>0&&m&&m(xe,Y),de.length>0&&h&&h(de,Y)},[z,o,n,s,a,u,d,h,m,A]),pe=$.useCallback(function(W){W.preventDefault(),W.persist(),te(W),ee.current=[],rx(W)&&Promise.resolve(i(W)).then(function(Y){Yb(W)&&!_||ue(Y,W)}),z({type:"reset"})},[i,ue,_]),Pe=$.useCallback(function(){if(I.current){z({type:"openDialog"}),T();var W={multiple:o,types:PLe(n)};window.showOpenFilePicker(W).then(function(Y){return i(Y)}).then(function(Y){ue(Y,null),z({type:"closeDialog"})}).catch(function(Y){ILe(Y)?(M(Y),z({type:"closeDialog"})):OLe(Y)&&(I.current=!1,N.current&&(N.current.value=null,N.current.click()))});return}N.current&&(z({type:"openDialog"}),T(),N.current.value=null,N.current.click())},[z,T,M,p,ue,n,o]),Ce=$.useCallback(function(W){!C.current||!C.current.isEqualNode(W.target)||(W.key===" "||W.key==="Enter"||W.keyCode===32||W.keyCode===13)&&(W.preventDefault(),Pe())},[C,Pe]),Ee=$.useCallback(function(){z({type:"focus"})},[]),Oe=$.useCallback(function(){z({type:"blur"})},[]),ne=$.useCallback(function(){g||(NLe()?setTimeout(Pe,0):Pe())},[g,Pe]),Le=function(Y){return r?null:Y},Fe=function(Y){return S?null:Le(Y)},Q=function(Y){return E?null:Le(Y)},te=function(Y){_&&Y.stopPropagation()},Me=$.useMemo(function(){return function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=W.refKey,de=Y===void 0?"ref":Y,xe=W.role,Ne=W.onKeyDown,Be=W.onFocus,$e=W.onBlur,Ie=W.onClick,Ye=W.onDragEnter,Ve=W.onDragOver,at=W.onDragLeave,tt=W.onDrop,Ze=Zb(W,BLe);return Mr(Mr(NC({onKeyDown:Fe(jo(Ne,Ce)),onFocus:Fe(jo(Be,Ee)),onBlur:Fe(jo($e,Oe)),onClick:Le(jo(Ie,ne)),onDragEnter:Q(jo(Ye,q)),onDragOver:Q(jo(Ve,ae)),onDragLeave:Q(jo(at,be)),onDrop:Q(jo(tt,pe)),role:typeof xe=="string"&&xe!==""?xe:"button"},de,C),!r&&!S?{tabIndex:0}:{}),Ze)}},[C,Ce,Ee,Oe,ne,q,ae,be,pe,S,E,r]),re=$.useCallback(function(W){W.stopPropagation()},[]),V=$.useMemo(function(){return function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=W.refKey,de=Y===void 0?"ref":Y,xe=W.onChange,Ne=W.onClick,Be=Zb(W,ULe),$e=NC({accept:n,multiple:o,type:"file",style:{display:"none"},onChange:Le(jo(xe,pe)),onClick:Le(jo(Ne,re)),tabIndex:-1},de,N);return Mr(Mr({},$e),Be)}},[N,n,o,pe,r]),G=U.length,le=G>0&&CLe({files:U,accept:n,minSize:s,maxSize:a,multiple:o,maxFiles:u}),_e=G>0&&!le;return Mr(Mr({},L),{},{isDragAccept:le,isDragReject:_e,isFocused:O&&!r,getRootProps:Me,getInputProps:V,rootRef:C,inputRef:N,open:Le(Pe)})}function jLe(t,e){switch(e.type){case"focus":return Mr(Mr({},t),{},{isFocused:!0});case"blur":return Mr(Mr({},t),{},{isFocused:!1});case"openDialog":return Mr(Mr({},RC),{},{isFileDialogActive:!0});case"closeDialog":return Mr(Mr({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return Mr(Mr({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return Mr(Mr({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return Mr({},RC);default:return t}}function l5(){}function XLe(t){let e;const n=new Set,r=(l,c)=>{const f=typeof l=="function"?l(e):l;if(f!==e){const d=e;e=c?f:Object.assign({},e,f),n.forEach(h=>h(e,d))}},i=()=>e,a=(l,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function h(){const m=c(e);if(!f(d,m)){const v=d;l(d=m,v)}}return n.add(h),()=>n.delete(h)},u={setState:r,getState:i,subscribe:(l,c,f)=>c||f?a(l,c,f):(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return e=t(r,i,u),u}const YLe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),c5=YLe?$.useEffect:$.useLayoutEffect;function ZLe(t){const e=typeof t=="function"?XLe(t):t,n=(r=e.getState,i=Object.is)=>{const[,a]=$.useReducer(y=>y+1,0),s=e.getState(),o=$.useRef(s),u=$.useRef(r),l=$.useRef(i),c=$.useRef(!1),f=$.useRef();f.current===void 0&&(f.current=r(s));let d,h=!1;(o.current!==s||u.current!==r||l.current!==i||c.current)&&(d=r(s),h=!i(f.current,d)),c5(()=>{h&&(f.current=d),o.current=s,u.current=r,l.current=i,c.current=!1});const m=$.useRef(s);c5(()=>{const y=()=>{try{const x=e.getState(),g=u.current(x);l.current(f.current,g)||(o.current=x,f.current=g,a())}catch{c.current=!0,a()}},p=e.subscribe(y);return e.getState()!==m.current&&y(),p},[]);const v=h?d:f.current;return $.useDebugValue(v),v};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const KLe=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(s,o,u)=>{let l=s;if(o){const c=(u==null?void 0:u.equalityFn)||Object.is;let f=s(r.getState());l=d=>{const h=s(d);if(!c(f,h)){const m=f;o(f=h,m)}},u!=null&&u.fireImmediately&&o(f,f)}return i(l)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var QLe=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var JLe=QLe;function f5(t){return JLe(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var cq=function(e){var n,r;return!(f5(e)===!1||(n=e.constructor,typeof n!="function")||(r=n.prototype,f5(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var e4e=cq,a3=function(e){return e4e(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var t4e=function(e,n,r){for(var i in e)if(n.call(r,e[i],i,e)===!1)break},n4e=a3,r4e=t4e;function fq(t,e){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];PC(i)&&r4e(i,i4e,t)}return t}function i4e(t,e){if(a4e(e)){var n=this[e];PC(t)&&PC(n)?fq(n,t):this[e]=t}}function PC(t){return n4e(t)&&!Array.isArray(t)}function a4e(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var s4e=fq;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var o4e=function(t,e,n,r,i){if(!u4e(t)||!e)return t;if(e=ix(e),n&&(e+="."+ix(n)),r&&(e+="."+ix(r)),i&&(e+="."+ix(i)),e in t)return t[e];for(var a=e.split("."),s=a.length,o=-1;t&&++o<s;){for(var u=a[o];u[u.length-1]==="\\";)u=u.slice(0,-1)+"."+a[++o];t=t[u]}return t};function u4e(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function ix(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var l4e=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,a=0;++a<i;)for(var s=Object(arguments[a]),o=Object.getOwnPropertySymbols(s),u=0;u<o.length;u++){var l=o[u];n.call(s,l)&&(r[l]=s[l])}return r},c4e=a3,f4e=l4e,d4e=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");d5(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];p4e(n)&&(n=m4e(n)),d5(n)&&(h4e(t,n),f4e(t,n))}return t};function h4e(t,e){for(var n in e)v4e(e,n)&&(t[n]=e[n])}function p4e(t){return t&&typeof t=="string"}function m4e(t){var e={};for(var n in t)e[n]=t[n];return e}function d5(t){return t&&typeof t=="object"||c4e(t)}function v4e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var g4e=d4e,y4e=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var r=g4e({sep:"."},e),i=r.quotes||['"',"'","`"],a;r.brackets===!0?a={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(a=r.brackets);var s=[],o=[],u=[""],l=r.sep,c=t.length,f=-1,d;function h(){if(a&&o.length)return a[o[o.length-1]]}for(;++f<c;){var m=t[f],v=t[f+1],y={val:m,idx:f,arr:u,str:t};if(s.push(y),m==="\\"){y.val=b4e(r,t,f)===!0?m+v:v,y.escaped=!0,typeof n=="function"&&n(y),u[u.length-1]+=y.val,f++;continue}if(a&&a[m]){o.push(m);var p=h(),x=f+1;if(t.indexOf(p,x+1)!==-1)for(;o.length&&x<c;){var g=t[++x];if(g==="\\"){g++;continue}if(i.indexOf(g)!==-1){x=IC(t,g,x+1);continue}if(p=h(),o.length&&t.indexOf(p,x+1)===-1)break;if(a[g]){o.push(g);continue}p===g&&o.pop()}if(d=x,d===-1){u[u.length-1]+=m;continue}m=t.slice(f,d+1),y.val=m,y.idx=f=d}if(i.indexOf(m)!==-1){if(d=IC(t,m,f+1),d===-1){u[u.length-1]+=m;continue}x4e(m,r)===!0?m=t.slice(f,d+1):m=t.slice(f+1,d),y.val=m,y.idx=f=d}if(typeof n=="function"&&(n(y,s),m=y.val,f=y.idx),y.val===l&&y.split!==!1){u.push("");continue}u[u.length-1]+=y.val}return u};function IC(t,e,n,r){var i=t.indexOf(e,n);return t.charAt(i-1)==="\\"?IC(t,e,i+1):i}function x4e(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function b4e(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var w4e=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},h5=w4e,S4e=function(e){h5(e)||(e={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];h5(i)&&_4e(e,i)}return e};function _4e(t,e){for(var n in e)E4e(e,n)&&(t[n]=e[n])}function E4e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var M4e=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var A4e=y4e,C4e=S4e,p5=cq,m5=M4e,T4e=function(t,e,n){if(!m5(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var r=A4e(e,{sep:".",brackets:!0}).filter(D4e),i=r.length,a=-1,s=t;++a<i;){var o=r[a];if(a!==i-1){m5(s[o])||(s[o]={}),s=s[o];continue}p5(s[o])&&p5(n)?s[o]=C4e({},s[o],n):s[o]=n}return t};function D4e(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var BM=a3,v5=s4e,N4e=o4e,g5=T4e,R4e=function(e,n,r){if(!BM(e))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return v5.apply(null,arguments);if(typeof r=="string")return g5(e,n,r),e;var i=N4e(e,n);return BM(r)&&BM(i)&&(r=v5({},i,r)),g5(e,n,r),e};const P4e=Qs(R4e),s3=(...t)=>t.filter(Boolean).join(".");function I4e(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function O4e(t,e){return Object.entries(fOe(t,e)).reduce((n,[,{value:r,disabled:i,key:a}])=>(n[a]=i?void 0:r,n),{})}function F4e(t,e){const n=$.useRef();return(e?Og:b0)(t,n.current)||(n.current=t),n.current}function dq(t,e){return $.useMemo(t,F4e(e,!0))}function L4e(t){const e=$.useRef(null),n=$.useRef(null),r=$.useRef(!0);return $.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),$.useEffect(()=>{if(r.current){r.current=!1;return}let i;const a=e.current,s=()=>{t&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",s,{once:!0});const{height:o}=n.current.getBoundingClientRect();return a.style.height=o+"px",t||(a.style.overflow="hidden",i=window.setTimeout(()=>a.style.height="0px",50)),()=>{a.removeEventListener("transitionend",s),clearTimeout(i)}},[t]),{wrapperRef:e,contentRef:n}}const B4e=t=>{const[e,n]=$.useState(t.getVisiblePaths());return $.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:b0});return()=>r()},[t]),e};function U4e(t,e,n){return t.useStore(i=>{const a=Ut(Ut({},n),i.data);return O4e(a,e)},b0)}function hq(t=3){const e=$.useRef(null),n=$.useRef(null),[r,i]=$.useState(!1),a=$.useCallback(()=>i(!0),[]),s=$.useCallback(()=>i(!1),[]);return $.useLayoutEffect(()=>{if(r){const{bottom:o,top:u,left:l}=e.current.getBoundingClientRect(),{height:c}=n.current.getBoundingClientRect(),f=o+c>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=l+"px",f==="down"?n.current.style.top=o+t+"px":n.current.style.bottom=window.innerHeight-u+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:a,hide:s}}WFe([qFe]);const z4e={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};$a.extend({color:()=>t=>pa(t).isValid()});const k4e=t=>$a().color().test(t);function pq(t,{format:e,hasAlpha:n,isString:r}){const i=z4e[e]+(r&&e!=="hex"?"String":""),a=t[i]();return typeof a=="object"&&!n?dOe(a,["a"]):a}const mq=(t,e)=>{const n=pa(t);if(!n.isValid())throw Error("Invalid color");return pq(n,e)},$4e=(t,e)=>pq(pa(t),Ut(Ut({},e),{},{isString:!0,format:"hex"})),H4e=({value:t})=>{const e=VFe(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),i={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:mq(t,i),settings:i}};var G4e=Object.freeze({__proto__:null,schema:k4e,sanitize:mq,format:$4e,normalize:H4e});const V4e=Bt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),W4e=Bt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),q4e=Bt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function y5(t,e){return e!=="rgb"?pa(t).toRgb():t}function j4e({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:a}=Oi(),{format:s,hasAlpha:o}=n,{popinRef:u,wrapperRef:l,shown:c,show:f,hide:d}=hq(),h=$.useRef(0),[m,v]=$.useState(()=>y5(t,s)),y=o?JFe:tLe,p=()=>{v(y5(t,s)),f(),i()},x=()=>{d(),a(),window.clearTimeout(h.current)},g=()=>{h.current=window.setTimeout(x,500)};return $.useEffect(()=>()=>window.clearTimeout(h.current),[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(V4e,{ref:u,active:c,onClick:()=>p(),style:{color:e}}),c&&Ae.createElement(RS,null,Ae.createElement(KN,{onPointerUp:x}),Ae.createElement(q4e,{ref:l,onMouseEnter:()=>window.clearTimeout(h.current),onMouseLeave:S=>S.buttons===0&&g()},Ae.createElement(y,{color:m,onChange:r}))))}function X4e(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:i,settings:a}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,n),Ae.createElement(W4e,null,Ae.createElement(j4e,{value:t,displayValue:e,onChange:r,onUpdate:i,settings:a}),Ae.createElement(ZN,{value:e,onChange:r,onUpdate:i})))}var Y4e=Ut({component:X4e},G4e);function Z4e(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(PS,{value:e,settings:r,onUpdate:n}))}var K4e=Ut({component:Z4e},VW(["x","y","z"]));const Q4e=Bt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),J4e=Bt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function eBe({value:t,settings:e,onUpdate:n}){const r=$.useRef(),i=$.useRef(0),a=$.useRef(0),s=$.useRef(1),[o,u]=$.useState(!1),[l,c]=$.useState(!1),[f,d]=LW(),h=$.useRef(null),m=$.useRef(null);$.useLayoutEffect(()=>{if(o){const{top:P,left:H,width:L,height:z}=h.current.getBoundingClientRect();m.current.style.left=H+L/2+"px",m.current.style.top=P+z/2+"px"}},[o]);const{keys:[v,y],joystick:p}=e,x=p==="invertY"?1:-1,{[v]:{step:g},[y]:{step:S}}=e,E=Xu("sizes","joystickWidth"),_=Xu("sizes","joystickHeight"),A=parseFloat(E)*.8/2,T=parseFloat(_)*.8/2,M=$.useCallback(()=>{r.current||(c(!0),i.current&&d({x:i.current*A}),a.current&&d({y:a.current*-T}),r.current=window.setInterval(()=>{n(P=>{const H=g*i.current*s.current,L=x*S*a.current*s.current;return Array.isArray(P)?{[v]:P[0]+H,[y]:P[1]+L}:{[v]:P[v]+H,[y]:P[y]+L}})},16))},[A,T,n,d,g,S,v,y,x]),C=$.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,c(!1)},[]);$.useEffect(()=>{function P(H){s.current=SW(H)}return window.addEventListener("keydown",P),window.addEventListener("keyup",P),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",P),window.removeEventListener("keyup",P)}},[]);const N=S0(({first:P,active:H,delta:[L,z],movement:[O,F]})=>{P&&u(!0);const U=bc(O,-A,A),I=bc(F,-T,T);i.current=Math.abs(O)>Math.abs(U)?Math.sign(O-U):0,a.current=Math.abs(F)>Math.abs(I)?Math.sign(I-F):0;let j=t[v],ee=t[y];H?(i.current||(j+=L*g*s.current,d({x:U})),a.current||(ee-=x*z*S*s.current,d({y:I})),i.current||a.current?M():C(),n({[v]:j,[y]:ee})):(u(!1),i.current=0,a.current=0,d({x:0,y:0}),C())});return Ae.createElement(Q4e,Ir({ref:h},N()),o&&Ae.createElement(RS,null,Ae.createElement(J4e,{ref:m,isOutOfBounds:l},Ae.createElement("div",null),Ae.createElement("span",{ref:f}))))}const tBe=Bt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function nBe(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Oi();return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(tBe,{withJoystick:!!r.joystick},r.joystick&&Ae.createElement(eBe,{value:e,settings:r,onUpdate:n}),Ae.createElement(PS,{value:e,settings:r,onUpdate:n})))}const rBe=["joystick"],vq=VW(["x","y"]),iBe=t=>{let{joystick:e=!0}=t,n=tr(t,rBe);const{value:r,settings:i}=vq.normalize(n);return{value:r,settings:Ut(Ut({},i),{},{joystick:e})}};var aBe=Ut(Ut({component:nBe},vq),{},{normalize:iBe});const sBe=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob |File].")}},oBe=(t,e)=>typeof e=="object"&&"image"in e,uBe=({image:t})=>({value:t});var lBe=Object.freeze({__proto__:null,sanitize:sBe,schema:oBe,normalize:uBe});const cBe=Bt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),fBe=Bt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),dBe=Bt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),hBe=Bt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),pBe=Bt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),mBe=Bt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function vBe(){const{label:t,value:e,onUpdate:n,disabled:r}=Oi(),{popinRef:i,wrapperRef:a,shown:s,show:o,hide:u}=hq(),l=$.useCallback(m=>{m.length&&n(m[0])},[n]),c=$.useCallback(m=>{m.stopPropagation(),n(void 0)},[n]),{getRootProps:f,getInputProps:d,isDragAccept:h}=lq({maxFiles:1,accept:"image/*",onDrop:l,disabled:r});return Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(cBe,null,Ae.createElement(dBe,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&o(),onPointerUp:u,style:{backgroundImage:e?`url(${e})`:"none"}}),s&&!!e&&Ae.createElement(RS,null,Ae.createElement(KN,{onPointerUp:u,style:{cursor:"pointer"}}),Ae.createElement(hBe,{ref:a,style:{backgroundImage:`url(${e})`}})),Ae.createElement(fBe,f({isDragAccept:h}),Ae.createElement("input",d()),Ae.createElement(pBe,null,h?"drop image":"click or drop")),Ae.createElement(mBe,{onClick:c,disabled:!e})))}var gBe=Ut({component:vBe},lBe);const x5=$a().number(),yBe=(t,e)=>$a().array().length(2).every.number().test(t)&&$a().schema({min:x5,max:x5}).test(e),Kb=t=>({min:t[0],max:t[1]}),gq=(t,{bounds:[e,n]},r)=>{const i=Array.isArray(t)?Kb(t):t,a={min:r[0],max:r[1]},{min:s,max:o}=Ut(Ut({},a),i);return[bc(Number(s),e,Math.max(e,o)),bc(Number(o),Math.min(n,s),n)]},xBe=({value:t,min:e,max:n})=>{const r={min:e,max:n},i=GW(Kb(t),{min:r,max:r}),a=[e,n],s=Ut(Ut({},i),{},{bounds:a});return{value:gq(Kb(t),s,t),settings:s}};var bBe=Object.freeze({__proto__:null,schema:yBe,format:Kb,sanitize:gq,normalize:xBe});const wBe=["value","bounds","onDrag"],SBe=["bounds"],_Be=Bt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function EBe(t){let{value:e,bounds:[n,r],onDrag:i}=t,a=tr(t,wBe);const s=$.useRef(null),o=$.useRef(null),u=$.useRef(null),l=$.useRef(0),c=Xu("sizes","scrubberWidth"),f=S0(({event:m,first:v,xy:[y],movement:[p],memo:x={}})=>{if(v){const{width:S,left:E}=s.current.getBoundingClientRect();l.current=S-parseFloat(c);const _=(m==null?void 0:m.target)===o.current||(m==null?void 0:m.target)===u.current;x.pos=qb((y-E)/S,n,r);const A=Math.abs(x.pos-e.min)-Math.abs(x.pos-e.max);x.key=A<0||A===0&&x.pos<=e.min?"min":"max",_&&(x.pos=e[x.key])}const g=x.pos+qb(p/l.current,0,r-n);return i({[x.key]:eFe(g,a[x.key])}),x}),d=`calc(${Wb(e.min,n,r)} * (100% - ${c} - 8px) + 4px)`,h=`calc(${1-Wb(e.max,n,r)} * (100% - ${c} - 8px) + 4px)`;return Ae.createElement(UW,Ir({ref:s},f()),Ae.createElement(BW,null,Ae.createElement(zW,{style:{left:d,right:h}})),Ae.createElement(wC,{position:"left",ref:o,style:{left:d}}),Ae.createElement(wC,{position:"right",ref:u,style:{right:h}}))}function MBe(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Oi(),i=tr(r,SBe);return Ae.createElement(Ae.Fragment,null,Ae.createElement(ws,{input:!0},Ae.createElement(no,null,t),Ae.createElement(_Be,null,Ae.createElement(EBe,Ir({value:e},r,{onDrag:n})),Ae.createElement(PS,{value:e,settings:i,onUpdate:n,innerLabelTrim:0}))))}var ABe=Ut({component:MBe},bBe);const CBe=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const i of r)i(...n)}}},TBe=["type","value"],DBe=["onChange","transient","onEditStart","onEditEnd"],yq=function(){const e=ZLe(KLe(()=>({data:{}}))),n=CBe();this.storeId=cOe(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const s=this.getData(),o=Object.keys(s),u=[];Object.entries(r).forEach(([c,f])=>{f.render&&o.some(d=>d.indexOf(c)===0)&&!f.render(this.get)&&u.push(c+".")});const l=[];return i.forEach(c=>{c in s&&s[c].__refCount>0&&u.every(f=>c.indexOf(f)===-1)&&(!s[c].render||s[c].render(this.get))&&l.push(c)}),l},this.setOrderedPaths=s=>{s.forEach(o=>i.add(o))},this.orderPaths=s=>(this.setOrderedPaths(s),s),this.disposePaths=s=>{e.setState(o=>{const u=o.data;return s.forEach(l=>{if(l in u){const c=u[l];c.__refCount--,c.__refCount===0&&c.type in qs&&delete u[l]}}),{data:u}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=s=>r[s]||{},this.getData=()=>e.getState().data,this.addData=(s,o)=>{e.setState(u=>{const l=u.data;return Object.entries(s).forEach(([c,f])=>{let d=l[c];if(d){const{type:h,value:m}=f,v=tr(f,TBe);h!==d.type?Bu(Ar.INPUT_TYPE_OVERRIDE,h):((d.__refCount===0||o)&&Object.assign(d,v),d.__refCount++)}else l[c]=Ut(Ut({},f),{},{__refCount:1})}),{data:l}})},this.setValueAtPath=(s,o,u)=>{e.setState(l=>{const c=l.data;return Hz(c[s],o,s,this,u),{data:c}})},this.setSettingsAtPath=(s,o)=>{e.setState(u=>{const l=u.data;return l[s].settings=Ut(Ut({},l[s].settings),o),{data:l}})},this.disableInputAtPath=(s,o)=>{e.setState(u=>{const l=u.data;return l[s].disabled=o,{data:l}})},this.set=(s,o)=>{e.setState(u=>{const l=u.data;return Object.entries(s).forEach(([c,f])=>{try{Hz(l[c],f,void 0,void 0,o)}catch{}}),{data:l}})},this.getInput=s=>{try{return this.getData()[s]}catch{Bu(Ar.PATH_DOESNT_EXIST,s)}},this.get=s=>{var o;return(o=this.getInput(s))===null||o===void 0?void 0:o.value},this.emitOnEditStart=s=>{n.emit(`onEditStart:${s}`,this.get(s),s,Ut(Ut({},this.getInput(s)),{},{get:this.get}))},this.emitOnEditEnd=s=>{n.emit(`onEditEnd:${s}`,this.get(s),s,Ut(Ut({},this.getInput(s)),{},{get:this.get}))},this.subscribeToEditStart=(s,o)=>{const u=`onEditStart:${s}`;return n.on(u,o),()=>n.off(u,o)},this.subscribeToEditEnd=(s,o)=>{const u=`onEditEnd:${s}`;return n.on(u,o),()=>n.off(u,o)};const a=(s,o,u)=>{const l={};return Object.entries(s).forEach(([c,f])=>{if(c==="")return Bu(Ar.EMPTY_KEY);let d=s3(o,c);if(f.type===qs.FOLDER){const h=a(f.schema,d,u);Object.assign(l,h),d in r||(r[d]=f.settings)}else if(c in u)Bu(Ar.DUPLICATE_KEYS,c,d,u[c].path);else{const h=yOe(f,c,d,l);if(h){const{type:m,options:v,input:y}=h,{onChange:p,transient:x,onEditStart:g,onEditEnd:S}=v,E=tr(v,DBe);l[d]=Ut(Ut(Ut({type:m},E),y),{},{fromPanel:!0}),u[c]={path:d,onChange:p,transient:x,onEditStart:g,onEditEnd:S}}else Bu(Ar.UNKNOWN_INPUT,d,f)}}),l};this.getDataFromSchema=s=>{const o={};return[a(s,"",o),o]}},xq=new yq;function pd(){return $.useMemo(()=>new yq,[])}const NBe={collapsed:!1};function Vr(t,e){return{type:qs.FOLDER,schema:t,settings:Ut(Ut({},NBe),e)}}const RBe={disabled:!1};function bq(t,e){return{type:qs.BUTTON,onClick:t,settings:Ut(Ut({},RBe),e)}}const b5=t=>"__levaInput"in t,PBe=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(i=>{const[a,s]=I4e(i);(!r||a.toLowerCase().indexOf(r)>-1)&&P4e(n,s,{[a]:{__levaInput:!0,path:i}})}),n},IBe=["type","label","path","valueKey","value","settings","setValue","disabled"];function OBe(t){let{type:e,label:n,path:r,valueKey:i,value:a,settings:s,setValue:o,disabled:u}=t,l=tr(t,IBe);const{displayValue:c,onChange:f,onUpdate:d}=FW({type:e,value:a,settings:s,setValue:o}),h=xc[e].component;return h?Ae.createElement(CW.Provider,{value:Ut({key:i,path:r,id:""+r,label:n,displayValue:c,value:a,onChange:f,onUpdate:d,settings:s,setValue:o,disabled:u},l)},Ae.createElement(UOe,{disabled:u},Ae.createElement(h,null))):(Bu(Ar.NO_COMPONENT_FOR_TYPE,e,r),null)}const FBe=Bt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function LBe({onClick:t,settings:e,label:n}){const r=Kp();return Ae.createElement(ws,null,Ae.createElement(FBe,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const BBe=Bt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),UBe=Bt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),zBe=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function kBe(t){const{label:e,opts:n}=zBe(t),r=Kp();return Ae.createElement(ws,{input:!!e},e&&Ae.createElement(no,null,e),Ae.createElement(BBe,null,Object.entries(n).map(([i,a])=>Ae.createElement(UBe,{key:i,onClick:()=>a(r.get)},i))))}const $Be=Bt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),wq=100;function HBe(t,e){t.push(e),t.length>wq&&t.shift()}const GBe=$.forwardRef(function({initialValue:t},e){const n=Xu("colors","highlight3"),r=Xu("colors","elevation2"),i=Xu("colors","highlight1"),[a,s]=$.useMemo(()=>[pa(i).alpha(.4).toRgbString(),pa(i).alpha(.1).toRgbString()],[i]),o=$.useRef([t]),u=$.useRef(t),l=$.useRef(t),c=$.useRef(),f=$.useCallback((m,v)=>{if(!m)return;const{width:y,height:p}=m,x=new Path2D,g=y/wq,S=p*.05;for(let A=0;A<o.current.length;A++){const T=Wb(o.current[A],u.current,l.current),M=g*A,C=p-T*(p-S*2)-S;x.lineTo(M,C)}v.clearRect(0,0,y,p);const E=new Path2D(x);E.lineTo(g*(o.current.length+1),p),E.lineTo(0,p),E.lineTo(0,0);const _=v.createLinearGradient(0,0,0,p);_.addColorStop(0,a),_.addColorStop(1,s),v.fillStyle=_,v.fill(E),v.strokeStyle=r,v.lineJoin="round",v.lineWidth=14,v.stroke(x),v.strokeStyle=n,v.lineWidth=2,v.stroke(x)},[n,r,a,s]),[d,h]=jOe(f);return $.useImperativeHandle(e,()=>({frame:m=>{(u.current===void 0||m<u.current)&&(u.current=m),(l.current===void 0||m>l.current)&&(l.current=m),HBe(o.current,m),c.current=requestAnimationFrame(()=>f(d.current,h.current))}}),[d,h,f]),$.useEffect(()=>()=>cancelAnimationFrame(c.current),[]),Ae.createElement($Be,{ref:d})}),w5=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),VBe=$.forwardRef(function({initialValue:t},e){const[n,r]=$.useState(w5(t));return $.useImperativeHandle(e,()=>({frame:i=>r(w5(i))}),[]),Ae.createElement("div",null,n)});function S5(t){return typeof t=="function"?t():t.current}function WBe({label:t,objectOrFn:e,settings:n}){const r=$.useRef(),i=$.useRef(S5(e));return $.useEffect(()=>{const a=window.setInterval(()=>{var s;document.hidden||(s=r.current)===null||s===void 0||s.frame(S5(e))},n.interval);return()=>window.clearInterval(a)},[e,n.interval]),Ae.createElement(ws,{input:!0},Ae.createElement(no,{align:"top"},t),n.graph?Ae.createElement(GBe,{ref:r,initialValue:i.current}):Ae.createElement(VBe,{ref:r,initialValue:i.current}))}const qBe=["type","label","key"],jBe={[qs.BUTTON]:LBe,[qs.BUTTON_GROUP]:kBe,[qs.MONITOR]:WBe},XBe=Ae.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:i,storeId:a,emitOnEditStart:s,emitOnEditEnd:o}]=YOe(t);if(!e)return null;const{type:u,label:l,key:c}=e,f=tr(e,qBe);if(u in qs){const d=jBe[u];return Ae.createElement(d,Ir({label:l,path:t},f))}return u in xc?Ae.createElement(OBe,Ir({key:a+t,type:u,label:l,storeId:a,path:t,valueKey:c,setValue:n,setSettings:r,disable:i,emitOnEditStart:s,emitOnEditEnd:o},f)):(eOe(Ar.UNSUPPORTED_INPUT,u,t),null)});function YBe({toggle:t,toggled:e,name:n}){return Ae.createElement(FOe,{onClick:()=>t()},Ae.createElement(QN,{toggled:e}),Ae.createElement("div",null,n))}const ZBe=({name:t,path:e,tree:n})=>{const r=Kp(),i=s3(e,t),{collapsed:a,color:s}=r.getFolderSettings(i),[o,u]=$.useState(!a),l=$.useRef(null),c=Xu("colors","folderWidgetColor"),f=Xu("colors","folderTextColor");return $.useLayoutEffect(()=>{l.current.style.setProperty("--leva-colors-folderWidgetColor",s||c),l.current.style.setProperty("--leva-colors-folderTextColor",s||f)},[s,c,f]),Ae.createElement(jb,{ref:l},Ae.createElement(YBe,{name:t,toggled:o,toggle:()=>u(d=>!d)}),Ae.createElement(Sq,{parent:i,tree:n,toggled:o}))},Sq=Ae.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:i,toggled:a})=>{const{wrapperRef:s,contentRef:o}=L4e(a),u=Kp(),l=([f,d])=>{var h;return(b5(d)?(h=u.getInput(d.path))===null||h===void 0?void 0:h.order:u.getFolderSettings(s3(r,f)).order)||0},c=Object.entries(i).sort((f,d)=>l(f)-l(d));return Ae.createElement(xC,{ref:s,isRoot:t,fill:e,flat:n},Ae.createElement(PW,{ref:o,isRoot:t,toggled:a},c.map(([f,d])=>b5(d)?Ae.createElement(XBe,{key:d.path,valueKey:d.valueKey,path:d.path}):Ae.createElement(ZBe,{key:f,name:f,path:r,tree:d}))))}),KBe=Bt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${OW}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),_q=40,Qb=Bt("i",{$flexCenter:"",width:_q,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),QBe=Bt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),JBe=Bt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${Qb}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),eUe=Bt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),tUe=Bt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:_q}}}}),nUe=Ae.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,i]=$.useState(""),a=$.useMemo(()=>wW(t,250),[t]),s=()=>{t(""),i("")},o=u=>{const l=u.currentTarget.value;e(!0),i(l)};return $.useEffect(()=>{a(r)},[r,a]),Ae.createElement(Ae.Fragment,null,Ae.createElement(eUe,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:u=>u.stopPropagation(),onChange:o}),Ae.createElement(Qb,{onClick:()=>s(),style:{visibility:r?"visible":"hidden"}},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function rUe({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:i,toggled:a,title:s,drag:o,filterEnabled:u,from:l}){const[c,f]=$.useState(!1),d=$.useRef(null);$.useEffect(()=>{var m,v;c?(m=d.current)===null||m===void 0||m.focus():(v=d.current)===null||v===void 0||v.blur()},[c]);const h=S0(({offset:[m,v],first:y,last:p})=>{e({x:m,y:v}),y&&n({x:m,y:v}),p&&r({x:m,y:v})},{filterTaps:!0,from:({offset:[m,v]})=>[(l==null?void 0:l.x)||m,(l==null?void 0:l.y)||v]});return $.useEffect(()=>{const m=v=>{v.key==="L"&&v.shiftKey&&v.metaKey&&f(y=>!y)};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[]),Ae.createElement(Ae.Fragment,null,Ae.createElement(QBe,{mode:o?"drag":void 0},Ae.createElement(Qb,{active:!a,onClick:()=>i()},Ae.createElement(QN,{toggled:a,width:12,height:8})),Ae.createElement(tUe,Ir({},o?h():{},{drag:o,filterEnabled:u}),s===void 0&&o?Ae.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Ae.createElement("circle",{cx:"2",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"2",r:"2"}),Ae.createElement("circle",{cx:"2",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"14",cy:"12",r:"2"}),Ae.createElement("circle",{cx:"26",cy:"12",r:"2"})):s),u&&Ae.createElement(Qb,{active:c,onClick:()=>f(m=>!m)},Ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Ae.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Ae.createElement(JBe,{toggled:c},Ae.createElement(nUe,{ref:d,setFilter:t,toggle:i})))}const iUe=["store","hidden","theme","collapsed"];function Eq(t){let{store:e,hidden:n=!1,theme:r,collapsed:i=!1}=t,a=tr(t,iUe);const s=dq(()=>DOe(r),[r]),[o,u]=$.useState(!i),l=typeof i=="object"?!i.collapsed:o,c=$.useMemo(()=>typeof i=="object"?f=>{typeof f=="function"?i.onChange(!f(!i.collapsed)):i.onChange(!f)}:u,[i]);return!e||n?null:Ae.createElement(XN.Provider,{value:s},Ae.createElement(aUe,Ir({store:e},a,{toggled:l,setToggle:c,rootClass:s.className})))}const aUe=Ae.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:a=!1,titleBar:s={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:o=!1,toggled:u,setToggle:l})=>{var c,f;const d=B4e(t),[h,m]=$.useState(""),v=$.useMemo(()=>PBe(d,h),[d,h]),[y,p]=LW(),x=i||d.length>0,g=typeof s=="object"&&s.title||void 0,S=typeof s=="object"&&(c=s.drag)!==null&&c!==void 0?c:!0,E=typeof s=="object"&&(f=s.filter)!==null&&f!==void 0?f:!0,_=typeof s=="object"&&s.position||void 0,A=typeof s=="object"&&s.onDrag||void 0,T=typeof s=="object"&&s.onDragStart||void 0,M=typeof s=="object"&&s.onDragEnd||void 0;return Ae.useEffect(()=>{p({x:_==null?void 0:_.x,y:_==null?void 0:_.y})},[_,p]),TOe(),Ae.createElement(DW.Provider,{value:{hideCopyButton:o}},Ae.createElement(KBe,{ref:y,className:e,fill:n,flat:r,oneLineLabels:a,hideTitleBar:!s,style:{display:x?"block":"none"}},s&&Ae.createElement(rUe,{onDrag:C=>{p(C),A==null||A(C)},onDragStart:C=>T==null?void 0:T(C),onDragEnd:C=>M==null?void 0:M(C),setFilter:m,toggle:C=>l(N=>C??!N),toggled:u,title:g,drag:S,filterEnabled:E,from:_}),x&&Ae.createElement(TW.Provider,{value:t},Ae.createElement(Sq,{isRoot:!0,fill:n,flat:r,tree:v,toggled:u}))))}),sUe=["isRoot"];let Jb=!1,_f=null;function oUe(t){let{isRoot:e=!1}=t,n=tr(t,sUe);return $.useEffect(()=>(Jb=!0,!e&&_f&&(_f.remove(),_f=null),()=>{e||(Jb=!1)}),[e]),Ae.createElement(Eq,Ir({store:xq},n))}function uUe(t){$.useEffect(()=>{t&&!Jb&&(_f||(_f=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(_f),bOe(Ae.createElement(oUe,{isRoot:!0}),_f))),Jb=!0)},[t])}const lUe=["store"];function md(t){let{store:e}=t,n=tr(t,lUe);const r=Kp(),i=e===void 0?r:e;return Ae.createElement(Eq,Ir({store:i},n))}function cUe(t,e,n,r,i){let a,s,o,u,l;return typeof t=="string"?(s=t,a=e,Array.isArray(n)?l=n:n&&("store"in n?(u=n,l=r):(o=n,Array.isArray(r)?l=r:(u=r,l=i)))):(a=t,Array.isArray(e)?l=e:(u=e,l=n)),{schema:a,folderName:s,folderSettings:o,hookSettings:u,deps:l||[]}}function vd(t,e,n,r,i){const{folderName:a,schema:s,folderSettings:o,hookSettings:u,deps:l}=cUe(t,e,n,r,i),c=typeof s=="function",f=$.useRef(!1),d=$.useRef(!0),h=dq(()=>{f.current=!0;const N=typeof s=="function"?s():s;return a?{[a]:Vr(N,o)}:N},l),m=!(u!=null&&u.store);uUe(m);const[v]=$.useState(()=>(u==null?void 0:u.store)||xq),[y,p]=$.useMemo(()=>v.getDataFromSchema(h),[v,h]),[x,g,S,E,_]=$.useMemo(()=>{const N=[],P=[],H={},L={},z={};return Object.values(p).forEach(({path:O,onChange:F,onEditStart:U,onEditEnd:I,transient:j})=>{N.push(O),F?(H[O]=F,j||P.push(O)):P.push(O),U&&(L[O]=U),I&&(z[O]=I)}),[N,P,H,L,z]},[p]),A=$.useMemo(()=>v.orderPaths(x),[x,v]),T=U4e(v,g,y),M=$.useCallback(N=>{const P=Object.entries(N).reduce((H,[L,z])=>Object.assign(H,{[p[L].path]:z}),{});v.set(P,!1)},[v,p]),C=$.useCallback(N=>v.get(p[N].path),[v,p]);return $.useEffect(()=>{const N=!d.current&&f.current;return v.addData(y,N),d.current=!1,f.current=!1,()=>v.disposePaths(A)},[v,A,y]),$.useEffect(()=>{const N=[];return Object.entries(S).forEach(([P,H])=>{H(v.get(P),P,Ut({initial:!0,get:v.get},v.getInput(P)));const L=v.useStore.subscribe(z=>{const O=z.data[P];return[O.disabled?void 0:O.value,O]},([z,O])=>H(z,P,Ut({initial:!1,get:v.get},O)),{equalityFn:b0});N.push(L)}),()=>N.forEach(P=>P())},[v,S]),$.useEffect(()=>{const N=[];return Object.entries(E).forEach(([P,H])=>N.push(v.subscribeToEditStart(P,H))),Object.entries(_).forEach(([P,H])=>N.push(v.subscribeToEditEnd(P,H))),()=>N.forEach(P=>P())},[E,_,v]),c?[T,M,C]:T}dl(ps.SELECT,fFe);dl(ps.IMAGE,gBe);dl(ps.NUMBER,nFe);dl(ps.COLOR,Y4e);dl(ps.STRING,xFe);dl(ps.BOOLEAN,MFe);dl(ps.INTERVAL,ABe);dl(ps.VECTOR3D,K4e);dl(ps.VECTOR2D,aBe);function fUe(){const[t]=$.useState(pd()),e=vt(l=>l.t),n=Kn(l=>l.currentPlot),r=n.calculationType,i=n.curveTRange;$.useEffect(()=>{vt.setState(l=>{l.levaStores.animation=t})},[t]);const a=()=>r==="Fixed Interval"?!0:r!=="Endless",s=()=>r!=="Fixed Interval",o=l=>{r==="Fixed Interval"&&vt.setState({t:l})},[,u]=vd(()=>({animate:{label:"Animate",value:!0},speed:{label:"Speed",value:1,min:.1,max:20},fixedIntervalT:{label:"fixed interval t",value:e,min:i[0],max:i[1],onChange:l=>o(l),onEditStart:()=>vt.setState({scrubbing:!0}),onEditEnd:()=>vt.setState({scrubbing:!1}),render:a},endlessT:{label:"endless t",value:e,disabled:!0,render:s},setEndlessTTo:{label:'Set "t" to:',value:3,disabled:!0,render:s}}),{store:t},[e,i]);return $.useEffect(()=>{e&&(r==="Fixed Interval"?u({fixedIntervalT:e}):r==="Endless"&&u({endlessT:e}))},[e,u,r]),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Animation",drag:!1,filter:!1},collapsed:!1})}function dUe(){const[t]=$.useState(pd());return $.useEffect(()=>{vt.setState(e=>{e.levaStores.camera=t})},[t]),vd(()=>({autoRotate:{label:"Auto Rotate",value:!0,onChange:e=>vt.setState({autoRotate:e})},speed:{label:"Speed",value:1,min:-30,max:30,step:.5,onChange:e=>vt.setState({autoRotateSpeed:e})},autoZoom:{label:"Auto Zoom to Fit",value:!0,onChange:e=>vt.setState({autoZoomToFit:e})}}),{store:t}),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Camera",drag:!1,filter:!1},collapsed:!1})}const hUe={Row:ws,Label:no,Portal:RS,Overlay:KN,String:$W,Number:JN,Boolean:HW,Select:kW,Vector:PS,InnerLabel:YN},{Row:pUe}=hUe,mUe=()=>{const{value:t}=Oi();return Je.jsx(pUe,{style:{flexWrap:"wrap",color:"white"},children:Je.jsx("div",{style:{whiteSpace:"pre-line"},children:t.text})})},vUe=t=>({value:t}),ns=aOe({normalize:vUe,component:mUe});function gUe(){const[t]=$.useState(pd());$.useEffect(()=>{vt.setState(h=>{h.levaStores.input=t})},[t]);const e=h=>{h==="Sphere"?t.getInput("innerGeometryRadius1").label="R (Radius)":h==="Torus"&&(t.getInput("innerGeometryRadius1").label="R1 (Radius 1)")},n=()=>{const h=d("innerGeometryShape");return h!=="Sphere"},r=h=>{t.disableInputAtPath("dLineRadius",h),h&&f({dLineRadius:d("outerGeometryRadius")})},[i,a]=$.useState([0,0]),s=h=>{if(h[1]-h[0]>=Ol)return;let v;if(h[0]>i[0]||h[1]>i[1])h[0]+Ol>Ev?v=[Ev-Ol,Ev]:v=[h[0],h[0]+Ol];else if(h[0]<i[0]||h[1]<i[1])h[1]-Ol<_v?v=[_v,_v+Ol]:v=[h[1]-Ol,h[1]];else return;f({curveTRange:v})},o=h=>{a(h)},u=()=>{const h=d("calculationType");return h==="Fixed Interval"?!0:h!=="Endless"},l=()=>{const h=d("calculationType");return h!=="Fixed Interval"},c=()=>{vt.getState().calculationState==="ready"&&vt.setState({calculationState:"calculate input"})};$.useEffect(()=>{const h=vt.subscribe(m=>m.calculationState,m=>{m==="calculating"?t.setSettingsAtPath("Update Plot",{disabled:!0}):m==="ready"&&t.setSettingsAtPath("Update Plot",{disabled:!1})});return()=>{h()}});const[,f,d]=vd(()=>({calculationType:{label:"Calculation Type",value:vi.calculationType,options:["Fixed Interval","Endless"]},stepSize:{label:"Step Size",value:vi.stepSize,min:Ia.stepSizeRange[0],max:Ia.stepSizeRange[1]},innerGeometryLabel:ns({text:"Inner Geometry"}),innerGeometryShape:{label:"Shape",value:vi.innerGeometryShape,options:["Sphere","Torus"],onChange:e},innerGeometryRadius1:{label:"R1 (Radius 1)",value:vi.innerGeometryRadius1,min:Ia.innerGeometryRadius1Range[0],max:Ia.innerGeometryRadius1Range[1]},innerGeometryRadius2:{label:"R2 (Radius 2)",value:vi.innerGeometryRadius2,min:Ia.innerGeometryRadius2Range[0],max:Ia.innerGeometryRadius2Range[1],render:n},outerGeometryLabel:ns({text:"Outer Geometry"}),outerGeometryShape:{label:"Shape",value:vi.outerGeometryShape,options:["Circle","Sphere"]},outerGeometryRadius:{label:"r (Radius)",value:vi.outerGeometryRadius,min:Ia.outerGeometryRadiusRange[0],max:Ia.outerGeometryRadiusRange[1],onChange:h=>{if(d("dEqualsOuterGeometryRadius"))return f({dLineRadius:h})}},dLineLabel:ns({text:"d Line"}),dEqualsOuterGeometryRadius:{label:"d = r",value:vi.dEqualsOuterGeometryRadius,onChange:r},dLineRadius:{label:"d (Radius)",value:vi.dLineRadius,min:Ia.dLineRadiusRange[0],max:Ia.dLineRadiusRange[1]},curveLabel:ns({text:"Curve"}),curveTheta:{label:"Theta",value:vi.curveTheta,type:ps.STRING},curvePhi:{label:"Phi",value:vi.curvePhi,type:ps.STRING},curveTRange:{label:"t Range",value:vi.curveTRange,min:Ia.curveTRangeRange[0],max:Ia.curveTRangeRange[1],onChange:s,onEditStart:o,render:u},curveTStart:{label:"t Start",value:vi.curveTStart,min:Ia.curveTStartRange[0],max:Ia.curveTStartRange[1],render:l},"Update Plot":bq(c,{disabled:!0})}),{store:t});return Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Input",drag:!1,filter:!1},collapsed:!1})}function yUe(){const[t]=$.useState(pd());return $.useEffect(()=>{vt.setState(e=>{e.levaStores.lights=t})},[t]),vd(()=>({Ambient:Vr({ambientEnabled:{label:"Enabled",value:dr.ambientEnabled},ambientIntensity:{label:"Intensity",value:dr.ambientIntensity,min:.01,max:10},ambientColor:{label:"Color",value:dr.ambientColor}},{collapsed:!1}),"Directional Light":Vr({directionalLightEnabled:{label:"Enabled",value:dr.directionalLightEnabled},directionalLightIntensity:{label:"Intensity",value:dr.directionalLightIntensity,min:.01,max:20},directionalLightColor:{label:"Color",value:dr.directionalLightColor},directionalLightPosition:{label:"Position",value:dr.directionalLightPosition}},{collapsed:!1}),"Lightformer 1":Vr({lightformer1Enabled:{label:"Enabled",value:dr.lightformer1Enabled},lightformer1Form:{label:"Form",value:dr.lightformer1Form,options:["ring","rect","circle"]},lightformer1Intensity:{label:"Intensity",value:dr.lightformer1Intensity,min:.01,max:10},lightformer1Color:{label:"Color",value:dr.lightformer1Color},lightformer1Scale:{label:"Scale",value:dr.lightformer1Scale,min:1,max:100},lightformer1Position:{label:"Position",value:dr.lightformer1Position}},{collapsed:!1}),"Lightformer 2":Vr({lightformer2Enabled:{label:"Enabled",value:dr.lightformer2Enabled},lightformer2Form:{label:"Form",value:dr.lightformer2Form,options:["ring","rect","circle"]},lightformer2Intensity:{label:"Intensity",value:dr.lightformer2Intensity,min:.01,max:10},lightformer2Color:{label:"Color",value:dr.lightformer2Color},lightformer2Scale:{label:"Scale",value:dr.lightformer2Scale,min:1,max:100},lightformer2Position:{label:"Position",value:dr.lightformer2Position}},{collapsed:!1}),"Lightformer 3":Vr({lightformer3Enabled:{label:"Enabled",value:dr.lightformer3Enabled},lightformer3Form:{label:"Form",value:dr.lightformer3Form,options:["ring","rect","circle"]},lightformer3Intensity:{label:"Intensity",value:dr.lightformer3Intensity,min:.01,max:10},lightformer3Color:{label:"Color",value:dr.lightformer3Color},lightformer3Scale:{label:"Scale",value:dr.lightformer3Scale,min:1,max:100},lightformer3Position:{label:"Position",value:dr.lightformer3Position}},{collapsed:!0})}),{store:t}),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Lights",drag:!1,filter:!1},collapsed:!1})}const xUe=["Sphere","Torus"],bUe=["Sphere","Circle"],sv=["calculationType","stepSize","innerGeometryShape","innerGeometryRadius1","innerGeometryRadius2","outerGeometryShape","outerGeometryRadius","dEqualsOuterGeometryRadius","dLineRadius","curveTheta","curvePhi","curveTRange","curveTStart"],wUe=["autoRandomize","autoRandomizeType","randomizeAtTValue","randomizeEveryNSeconds","randomizingInSeconds","innerGeometryRandomize","innerGeometryRandomizeShape","innerGeometryRandomizeRadius1","innerGeometryRadius1Range","innerGeometryRandomizeRadius2","innerGeometryRadius2Range","outerGeometryRandomize","outerGeometryRandomizeShape","outerGeometryRandomizeRadius","outerGeometryRadiusRange","dLineRandomize","dLineEqualsOuterGeometryRadius","dLineRandomizeRadius","dLineRadiusRange","curveRandomize","curveRandomizeTheta","curveRandomizePhi","curveRandomizeTStart","curveTStartRange","curveRandomizeTInterval","curveTIntervalRange"],SUe=()=>{var n;const t=(n=vt.getState().levaStores.input)==null?void 0:n.getData(),e={};if(t)return Object.keys(t).forEach(r=>{const i=t[r].key;if(!sv.includes(i))return;const a=t[r].value;e[i]=a}),e},_Ue=(t,e,n,r)=>({outerCenter:[`( ( ${n} ) + ( ${r} ) ) * cos( ${t} ) * cos( ${e} )`,`( ( ${n} ) + ( ${r} ) ) * sin( ${t} ) * cos( ${e} )`,`( ( ${n} ) + ( ${r} ) ) * sin( ${e} )`],contactPoint:[`( ${n} ) * cos( ${t} ) * cos( ${e} )`,`( ${n} ) * sin( ${t} ) * cos( ${e} )`,`( ${n} ) * sin( ${e} )`],basisX:[`cos( ${t} ) * cos( ${e} )`,`sin( ${t} ) * cos( ${e} )`,`sin( ${e} )`]}),EUe=(t,e,n,r,i)=>({outerCenter:[`( ${n} + ( ${r} + ${i} ) * cos( ${e} ) ) * cos( ${t} )`,`( ${n} + ( ${r} + ${i} ) * cos( ${e} ) ) * sin( ${t} )`,`( ${r} + ${i} ) * sin(${e})`],contactPoint:[`( ${n} + ${r} * cos( ${e} ) ) * cos( ${t} )`,`( ${n} + ${r} * cos( ${e} ) ) * sin( ${t} )`,`${r} * sin(${e})`],basisX:[`cos( ${t} ) * cos( ${e} )`,`sin( ${t} ) * cos( ${e} )`,`sin( ${e} )`]}),MUe=t=>{let e=null;if(t.shape==="Sphere")e=_Ue(t.theta,t.phi,t.R1,t.r);else if(t.shape==="Torus")e=EUe(t.theta,t.phi,t.R1,t.R2,t.r);else return;const{outerCenter:n,contactPoint:r,basisX:i}=e,a=n.map(u=>Cx(u,"t")),s=r.map(u=>Cx(u,"t")),o=i.map(u=>Cx(u,"t"));return{outerCenter:n,outerCenterDt:a,contactPoint:r,contactPointDt:s,basisX:i,basisXDt:o}},AUe=()=>{var n;const t=(n=vt.getState().levaStores.randomization)==null?void 0:n.getData(),e={};if(t)return Object.keys(t).forEach(r=>{const i=t[r],a=i.key;if(!wUe.includes(a))return;const s=i.value,o=i.disabled;let u=!0;i.render&&(u=i.render()),e[a]={value:s,disabled:o,render:u}}),e},CUe=t=>{const e=bN();try{e.evaluate(`theta = typed({'number': theta(t) = ${t.curveTheta}})`),e.evaluate(`phi = typed({'number': phi(t) = ${t.curvePhi}})`),e.evaluate(`R1 = ${t.innerGeometryRadius1}`),e.evaluate(`R2 = ${t.innerGeometryRadius2}`),e.evaluate(`r = ${t.outerGeometryRadius}`),e.evaluate(`d = ${t.dLineRadius}`),e.evaluate(`stepSize = ${t.stepSize}`)}catch(l){console.log(l);return}const n=MUe({shape:t.innerGeometryShape,theta:t.curveTheta,phi:t.curvePhi,R1:t.innerGeometryRadius1,R2:t.innerGeometryRadius2,r:t.outerGeometryRadius});if(!n)return;const{outerCenter:r,outerCenterDt:i,contactPoint:a,contactPointDt:s,basisX:o,basisXDt:u}=n;if(e.evaluate(`outerCenter(t) = [${String(r)}]`),e.evaluate(`outerCenterDt(t) = [${String(i)}]`),e.evaluate(`contactPoint(t) = [${String(a)}]`),e.evaluate(`contactPointDt(t) = [${String(s)}]`),e.evaluate(`basisX(t) = [${String(o)}]`),e.evaluate(`basisXDt(t) = [${String(u)}]`),e.evaluate("outerCenterBasisY(t) = outerCenterDt(t) ./ norm(outerCenterDt(t))"),e.evaluate("outerCenterBasisX(t) = basisX(t)"),e.evaluate("outerCenterBasisZ(t) = cross(outerCenterBasisX(t), outerCenterBasisY(t))"),e.evaluate("outerCenterBasis(t) = matrixFromColumns(            outerCenterBasisX(t),            outerCenterBasisY(t),            outerCenterBasisZ(t)        )"),t.outerGeometryShape==="Circle")e.evaluate("L = 0"),e.evaluate("alpha = L / r"),e.evaluate("outerRotationMatrix(t) = resize(                rotationMatrix(alpha, outerCenterBasisZ(t)) * outerCenterBasis(t),                [4, 4]            ).subset(index(4, 4), 1)"),e.evaluate("transformMatrix(t) = outerRotationMatrix(t)                .subset(                    index([1, 2, 3], 4),                    outerCenter(t)                )"),e.evaluate("curveVec(t) = outerCenter(t)                + resize(column(outerRotationMatrix(t), 1), [3]) .* -d");else if(t.outerGeometryShape==="Sphere")e.evaluate("dAlpha = 0"),e.evaluate("outerRotationMatrix = identity(3, 3)"),e.evaluate("transformMatrix(t) = resize(                outerRotationMatrix,                [4, 4]            ).subset(                index([1, 2, 3], 4),                outerCenter(t)            )"),e.evaluate("curveVec(t) = outerCenter(t)                + resize(column(outerRotationMatrix, 1), [3]) .* -d");else return;return e};function TUe(){const[t]=$.useState(pd());$.useEffect(()=>{vt.setState(n=>{n.levaStores.parameterHistory=t})},[t]);const[,e]=vd(()=>({"Current Plot":Vr({currentPlot:ns({text:new Array(sv.length+1).fill("").join(`
`)})},{collapsed:!1}),History:Vr({plotHistory1:ns({text:new Array(sv.length+1).fill("").join(`
`)}),plotHistory2:ns({text:new Array(sv.length+1).fill("").join(`
`)}),plotHistory3:ns({text:new Array(sv.length+1).fill("").join(`
`)})},{collapsed:!0})}),{store:t});return $.useEffect(()=>{const n=Kn.subscribe(r=>r.currentPlot,r=>{e({currentPlot:{text:Object.keys(r).map(i=>`${i}: ${r[i]}`).join(`
`)},plotHistory1:{text:Object.keys(Kn.getState().plotHistory[1]).map(i=>`${i}: ${Kn.getState().plotHistory[1][i]}`).join(`
`)},plotHistory2:{text:Object.keys(Kn.getState().plotHistory[2]).map(i=>`${i}: ${Kn.getState().plotHistory[2][i]}`).join(`
`)},plotHistory3:{text:Object.keys(Kn.getState().plotHistory[3]).map(i=>`${i}: ${Kn.getState().plotHistory[3][i]}`).join(`
`)}})});return()=>{n()}}),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Parameter History",drag:!1,filter:!1},collapsed:!1})}function DUe(){const[t]=$.useState(pd()),e=vt(m=>m.randomizeIn);$.useEffect(()=>{vt.setState(m=>{m.levaStores.randomization=t})},[t]);const n=()=>{vt.getState().calculationState==="ready"&&vt.setState({calculationState:"calculate random"})};$.useEffect(()=>{const m=vt.subscribe(v=>v.calculationState,v=>{v==="calculating"?t.setSettingsAtPath("Randomize Plot",{disabled:!0}):v==="ready"&&t.setSettingsAtPath("Randomize Plot",{disabled:!1})});return()=>{m()}});const[r,i]=$.useState(["At t Max","Every n Seconds"]),[a,s]=$.useState("At t Max");$.useEffect(()=>{const m=Kn.subscribe(v=>v.currentPlot.calculationType,v=>{v==="Fixed Interval"?(t.setSettingsAtPath("autoRandomizeType",{keys:["At t Max","Every n Seconds"],values:["At t Max","Every n Seconds"]}),i(["At t Max","Every n Seconds"]),h("autoRandomizeType")==="At t Value"&&d({autoRandomizeType:"At t Max"})):v==="Endless"&&(t.setSettingsAtPath("autoRandomizeType",{keys:["At t Value","Every n Seconds"],values:["At t Value","Every n Seconds"]}),i(["At t Value","Every n Seconds"]),h("autoRandomizeType")==="At t Max"&&d({autoRandomizeType:"At t Value"})),s(h("autoRandomizeType"))});return()=>{m()}});const o=m=>{const v="Inner Geometry.innerGeometry";["RandomizeShape","RandomizeRadius1","RandomizeRadius2"].forEach(p=>t.disableInputAtPath(`${v}${p}`,!m))},u=m=>{const v="Outer Geometry.outerGeometry";["RandomizeShape","RandomizeRadius"].forEach(p=>t.disableInputAtPath(`${v}${p}`,!m))},l=m=>{const v="d Line.dLine";["EqualsOuterGeometryRadius","RandomizeRadius"].forEach(p=>t.disableInputAtPath(`${v}${p}`,!m))},c=m=>{const v="Curve.curve";["RandomizeTheta","RandomizePhi","RandomizeTStart","RandomizeTInterval"].forEach(p=>t.disableInputAtPath(`${v}${p}`,!m))},[{autoRandomizeType:f},d,h]=vd(()=>({autoRandomize:{label:"Auto Randomize",value:!0},autoRandomizeType:{label:"Auto Randomize Type",value:a,options:r,render:()=>h("autoRandomize")},randomizeAtTValue:{label:"Randomize @ t",value:40,render:()=>h("autoRandomize")&&h("autoRandomizeType")==="At t Value"},randomizeEveryNSeconds:{label:"Randomize every",value:"30s",min:5,render:()=>h("autoRandomize")&&h("autoRandomizeType")==="Every n Seconds"},randomizingInSeconds:{label:"Randomizing in",value:"0s",disabled:!0,render:()=>h("autoRandomize")&&h("autoRandomizeType")==="Every n Seconds"},"Inner Geometry":Vr({innerGeometryRandomize:{label:"Randomize Enabled",value:!0,onChange:o},innerGeometryRandomizeShape:{label:"Randomize Shape",value:!0},innerGeometryRandomizeRadius1:{label:"Randomize Radius 1",value:!0,onChange:m=>t.disableInputAtPath("Inner Geometry.innerGeometryRadius1Range",!m)},innerGeometryRadius1Range:{label:"R1 Rand. Range",value:[2,4],min:.25,max:6},innerGeometryRandomizeRadius2:{label:"Randomize Radius 2",value:!0,onChange:m=>t.disableInputAtPath("Inner Geometry.innerGeometryRadius2Range",!m)},innerGeometryRadius2Range:{label:"R2 Rand. Range",value:[.25,2],min:.25,max:3}},{collapsed:!0}),"Outer Geometry":Vr({outerGeometryRandomize:{label:"Randomize Enabled",value:!0,onChange:u},outerGeometryRandomizeShape:{label:"Randomize Shape",value:!0},outerGeometryRandomizeRadius:{label:"Randomize Radius",value:!0,onChange:m=>t.disableInputAtPath("Outer Geometry.outerGeometryRadiusRange",!m)},outerGeometryRadiusRange:{label:"Radius Range",value:[.25,4],min:.05,max:6}},{collapsed:!0}),"d Line":Vr({dLineRandomize:{label:"Randomize Enabled",value:!0,onChange:l},dLineEqualsOuterGeometryRadius:{label:"d = r",value:!0},dLineRandomizeRadius:{label:"Randomize Radius",value:!0,onChange:m=>t.disableInputAtPath("d Line.dLineRadiusRange",!m),render:()=>!h("dLineEqualsOuterGeometryRadius")},dLineRadiusRange:{label:"Radius Range",value:[.25,4],min:.05,max:6,render:()=>!h("dLineEqualsOuterGeometryRadius")}},{collapsed:!0}),Curve:Vr({curveRandomize:{label:"Randomize Enabled",value:!0,onChange:c},curveRandomizeTheta:{label:"Randomize Theta",value:!0},curveRandomizePhi:{label:"Randomize Phi",value:!0},curveRandomizeTStart:{label:"Randomize t Start",value:!1,onChange:m=>t.disableInputAtPath("Curve.curveTStartRange",!m)},curveTStartRange:{label:"t Start Range",value:[-50,50],min:-200,max:180},curveRandomizeTInterval:{label:"Rand. t Interval",value:!1,onChange:m=>t.disableInputAtPath("Curve.curveTIntervalRange",!m),render:()=>Kn.getState().currentPlot.calculationType==="Fixed Interval"},curveTIntervalRange:{label:"t Interval Range",value:[20,200],min:20,max:400,render:()=>Kn.getState().currentPlot.calculationType==="Fixed Interval"}},{collapsed:!0}),"Randomize Plot":bq(n,{disabled:!0})}),{store:t},[e,r,a]);return $.useEffect(()=>{e&&f==="Every n Seconds"&&d({randomizingInSeconds:e+"s"})}),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Curve Randomization",drag:!1,filter:!1},collapsed:!1})}function NUe(){const[t]=$.useState(pd());$.useEffect(()=>{vt.setState(E=>{E.levaStores.style=t})},[t]);const e=["MeshBasicMaterial","MeshStandardMaterial","MeshNormalMaterial"],[n,r]=$.useState(""),[i,a]=$.useState(""),[s,o]=$.useState(""),[u,l]=$.useState(""),c={MeshBasicMaterial:"Note: Selected material not affected by lights.",MeshNormalMaterial:"Note: Selected material not affected by lights."},f=E=>E in c?c[E]:"",d=["MeshBasicMaterial","MeshStandardMaterial"],h=["MeshStandardMaterial"],m=["MeshStandardMaterial"],v=["MeshStandardMaterial"],y=["MeshStandardMaterial","MeshNormalMaterial"],p={"Inner Geometry":"Inner Geometry.innerGeometryMaterial","Outer Geometry":"Outer Geometry.outerGeometryMaterial","d Line":"d Line.dLineMaterial","d Point":"d Point.dPointMaterial"},x=Kn(E=>E.currentPlot.calculationType),[{backgroundColor:g},S]=vd(()=>({Background:Vr({backgroundColor:{label:"Color",value:wt.backgroundColor}},{collapsed:!0}),"Inner Geometry":Vr({innerGeometryVisible:{label:"Visible",value:wt.innerGeometryVisible},innerGeometryMaterial:{label:"Material",value:wt.innerGeometryMaterial,options:e,onChange:E=>r(f(E))},innerGeometryMaterialNote:ns({text:n,render:E=>E(p["Inner Geometry"])in c}),innerGeometryColor:{label:"Color",value:wt.innerGeometryColor,render:E=>d.includes(E(p["Inner Geometry"]))},innerGeometryEmissive:{label:"Emissive",value:wt.innerGeometryEmissive,render:E=>h.includes(E(p["Inner Geometry"]))},innerGeometryEmissiveIntensity:{label:"Emissive Intensity",value:wt.innerGeometryEmissiveIntensity,min:.1,max:10,render:E=>h.includes(E(p["Inner Geometry"]))},innerGeometryMetalness:{label:"Metalness",value:wt.innerGeometryMetalness,min:.01,max:1,render:E=>m.includes(E(p["Inner Geometry"]))},innerGeometryRoughness:{label:"Roughness",value:wt.innerGeometryRoughness,min:.01,max:1,render:E=>v.includes(E(p["Inner Geometry"]))},innerGeometryFlatShading:{label:"Flat Shading",value:wt.innerGeometryFlatShading,render:E=>y.includes(E(p["Inner Geometry"]))},innerGeometryWireframe:{label:"Wireframe",value:wt.innerGeometryWireframe}},{collapsed:!0}),"Outer Geometry":Vr({outerGeometryVisible:{label:"Visible",value:wt.outerGeometryVisible},outerGeometryMaterial:{label:"Material",value:wt.outerGeometryMaterial,options:e,onChange:E=>a(f(E))},outerGeometryMaterialNote:ns({text:i,render:E=>E(p["Outer Geometry"])in c}),outerGeometryColor:{label:"Color",value:wt.outerGeometryColor,render:E=>d.includes(E(p["Outer Geometry"]))},outerGeometryEmissive:{label:"Emissive",value:wt.outerGeometryEmissive,render:E=>h.includes(E(p["Outer Geometry"]))},outerGeometryEmissiveIntensity:{label:"Emissive Intensity",value:wt.outerGeometryEmissiveIntensity,min:.1,max:10,render:E=>h.includes(E(p["Outer Geometry"]))},outerGeometryMetalness:{label:"Metalness",value:wt.outerGeometryMetalness,min:.01,max:1,render:E=>m.includes(E(p["Outer Geometry"]))},outerGeometryRoughness:{label:"Roughness",value:wt.outerGeometryRoughness,min:.01,max:1,render:E=>v.includes(E(p["Outer Geometry"]))},outerGeometryFlatShading:{label:"Flat Shading",value:wt.outerGeometryFlatShading,render:E=>y.includes(E(p["Outer Geometry"]))},outerGeometryWireframe:{label:"Wireframe",value:wt.outerGeometryWireframe}},{collapsed:!0}),"d Line":Vr({dLineVisible:{label:"Visible",value:wt.dLineVisible},dLineWidth:{label:"Width",value:wt.dLineWidth,min:.001,max:1},dLineMaterial:{label:"Material",value:wt.dLineMaterial,options:e,onChange:E=>o(f(E))},dLineMaterialNote:ns({text:s,render:E=>E(p["d Line"])in c}),dLineColor:{label:"Color",value:wt.dLineColor,render:E=>d.includes(E(p["d Line"]))},dLineEmissive:{label:"Emissive",value:wt.dLineEmissive,render:E=>h.includes(E(p["d Line"]))},dLineEmissiveIntensity:{label:"Emissive Intensity",value:wt.dLineEmissiveIntensity,min:.1,max:10,render:E=>h.includes(E(p["d Line"]))},dLineMetalness:{label:"Metalness",value:wt.dLineMetalness,min:.01,max:1,render:E=>m.includes(E(p["d Line"]))},dLineRoughness:{label:"Roughness",value:wt.dLineRoughness,min:.01,max:1,render:E=>v.includes(E(p["d Line"]))},dLineFlatShading:{label:"Flat Shading",value:wt.dLineFlatShading,render:E=>y.includes(E(p["d Line"]))},dLineWireframe:{label:"Wireframe",value:wt.dLineWireframe}},{collapsed:!0}),"d Point":Vr({dPointVisible:{label:"Visible",value:wt.dPointVisible},dPointRadius:{label:"Radius",value:wt.dPointRadius,min:.001,max:1},dPointMaterial:{label:"Material",value:wt.dPointMaterial,options:e,onChange:E=>l(f(E))},dPointMaterialNote:ns({text:u,render:E=>E(p["d Point"])in c}),dPointColor:{label:"Color",value:wt.dPointColor,render:E=>d.includes(E(p["d Point"]))},dPointEmissive:{label:"Emissive",value:wt.dPointEmissive,render:E=>h.includes(E(p["d Point"]))},dPointEmissiveIntensity:{label:"Emissive Intensity",value:wt.dPointEmissiveIntensity,min:.1,max:10,render:E=>h.includes(E(p["d Point"]))},dPointMetalness:{label:"Metalness",value:wt.dPointMetalness,min:.01,max:1,render:E=>m.includes(E(p["d Point"]))},dPointRoughness:{label:"Roughness",value:wt.dPointRoughness,min:.01,max:1,render:E=>v.includes(E(p["d Point"]))},dPointFlatShading:{label:"Flat Shading",value:wt.dPointFlatShading,render:E=>y.includes(E(p["d Point"]))},dPointWireframe:{label:"Wireframe",value:wt.dPointWireframe}},{collapsed:!0}),Curve:Vr({curveVisible:{label:"Visible",value:wt.curveVisible},curveDrawType:{label:"Curve Draw Type",value:wt.curveDrawType,options:["From Start Point","Trail"],disabled:x==="Endless"},curveDrawTypeNote:ns({text:'Just a heads-up: the "Trail" curve type is a bit... buggy at the moment. Especially for fast-moving curves. Sorry about that!',render:E=>E("Curve.curveDrawType")==="Trail"}),curveColor:{label:"Color",value:wt.curveColor},curveWidth:{label:"Width",value:wt.curveWidth,min:.01,max:5},curveTrailLength:{label:"Trail Length",value:wt.curveTrailLength,min:.1,max:1e3,render:E=>E("Curve.curveDrawType")==="Trail"},curveTrailDecay:{label:"Trail Decay",value:wt.curveTrailDecay,min:.01,max:1,render:E=>E("Curve.curveDrawType")==="Trail"}},{collapsed:!0}),Effects:Vr({Bloom:Vr({effectsBloomEnabled:{label:"Enabled",value:!0},effectsBloomIntensity:{label:"Intensity",value:.5,min:0,max:10},effectsBloomLuminanceThreshold:{label:"Luminance Threshold",value:.47,min:0,max:1},effectsBloomLuminanceSmoothing:{label:"Luminance Smoothing",value:.68,min:0,max:1},effectsBloomMipmapBlur:{label:"Mipmap Blur",value:!0}}),"Chromatic Abberation":Vr({effectsChromaticAbberationEnabled:{label:"Enabled",value:!0},effectsChromaticAbberationOffset:{label:"Offset",value:[.11,0]}})},{collapsed:!0})}),{store:t});return $.useEffect(()=>{n&&S({innerGeometryMaterialNote:{text:n}}),i&&S({outerGeometryMaterialNote:{text:i}}),s&&S({dLineMaterialNote:{text:s}}),u&&S({dPointMaterialNote:{text:u}})},[S,n,i,s,u]),$.useEffect(()=>{x==="Endless"?(S({curveDrawType:"Trail"}),t.disableInputAtPath("Curve.curveDrawType",!0)):x==="Fixed Interval"&&t.disableInputAtPath("Curve.curveDrawType",!1)},[S,x,t]),$.useEffect(()=>{document.body.style.backgroundColor=g},[g]),Je.jsx(md,{store:t,fill:!0,flat:!0,theme:{colors:{highlight1:"#ffffff"}},titleBar:{title:"Style",drag:!1,filter:!1},collapsed:!1})}function RUe(){return Je.jsxs(Je.Fragment,{children:[Je.jsx(dUe,{}),Je.jsx(fUe,{}),Je.jsx(TUe,{}),Je.jsx(gUe,{}),Je.jsx(DUe,{}),Je.jsx(NUe,{}),Je.jsx(yUe,{})]})}function _5(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}function PUe(){const[t,e]=$.useState(_5());return $.useEffect(()=>{function n(){e(_5())}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t}function IUe(){const[t,e]=$.useState(!1),[n]=Aae(),{height:r,width:i}=PUe(),a=UV({right:t?0:i>700?-350:0,top:i<=700?t?r-300:r-50:0,opacity:t?1:0,rotateX:t?"180deg":"0deg",rotate:i<=700?"0deg":"270deg"});return $.useEffect(()=>{const s=n(u=>u.escape,u=>{u&&e(!1)}),o=n(u=>u.toggleDrawer,u=>{u&&e(!t)});return()=>{s(),o()}},[t,n]),$.useEffect(()=>{const s=setTimeout(()=>(window.scrollTo(0,0),()=>clearTimeout(s)),1e3)},[]),Je.jsx(Je.Fragment,{children:Je.jsxs(Dv.div,{style:{right:a.right,top:a.top},className:"control-panel-container",children:[Je.jsx("div",{className:"control-panel-button-holder",onClick:()=>e(!t),children:Je.jsx("div",{className:"control-panel-display-toggle",children:Je.jsx(Dv.svg,{width:30,height:30,className:"arrow",style:{rotate:a.rotate,rotateX:a.rotateX},children:Je.jsx("polygon",{points:"0,30 15,0, 30,30 25,28 15,8 5,28",style:{fill:"white"}})})})}),Je.jsx("div",{className:"leva-controls-container",children:Je.jsx(RUe,{})})]})})}function OUe(){return Je.jsxs(Je.Fragment,{children:[Je.jsx(xRe,{}),Je.jsx(IUe,{}),Je.jsxs("div",{className:"top-menu-container",children:[Je.jsx("a",{href:"https://github.com/ClaytonMain/spherical-trochoids",target:"_blank",rel:"noreferrer",children:Je.jsx("div",{className:"top-menu-inner-container",children:Je.jsx("img",{style:{border:"0px",height:"80%"},src:GNe,alt:"View the source on GitHub"})})}),Je.jsx("a",{href:"https://ko-fi.com/Y8Y1EATSL",target:"_blank",rel:"noreferrer",children:Je.jsx("div",{className:"top-menu-inner-container",children:Je.jsx("img",{style:{border:"0px",height:"80%"},src:VNe,alt:"Buy Me a Coffee at ko-fi.com"})})}),Je.jsx("a",{href:"https://www.linkedin.com/in/clayton-main/",target:"_blank",rel:"noreferrer",children:Je.jsx("div",{className:"top-menu-inner-container",children:Je.jsx("img",{style:{border:"0px",height:"80%"},src:WNe,alt:"Check out my LinkedIn profile"})})})]})]})}const FUe=()=>{const t=vt(g=>g.levaStores.lights),e=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Enabled"].value),n=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Form"].value),r=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Intensity"].value),i=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Color"].value),a=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Scale"].value),s=t==null?void 0:t.useStore(g=>g.data["Lightformer 1.lightformer1Position"].value),o=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Enabled"].value),u=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Form"].value),l=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Intensity"].value),c=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Color"].value),f=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Scale"].value),d=t==null?void 0:t.useStore(g=>g.data["Lightformer 2.lightformer2Position"].value),h=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Enabled"].value),m=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Form"].value),v=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Intensity"].value),y=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Color"].value),p=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Scale"].value),x=t==null?void 0:t.useStore(g=>g.data["Lightformer 3.lightformer3Position"].value);return Je.jsxs(Je.Fragment,{children:[Je.jsx(oM,{visible:e,form:n,intensity:r,color:i,scale:a,position:s,target:[0,0,0]}),Je.jsx(oM,{visible:o,form:u,intensity:l,color:c,scale:f,position:d,target:[0,0,0]}),Je.jsx(oM,{visible:h,form:m,intensity:v,color:y,scale:p,position:x,target:[0,0,0]})]})},LUe=()=>{const t=vt(u=>u.levaStores.lights),e=t==null?void 0:t.useStore(u=>u.data["Ambient.ambientEnabled"].value),n=t==null?void 0:t.useStore(u=>u.data["Ambient.ambientIntensity"].value),r=t==null?void 0:t.useStore(u=>u.data["Ambient.ambientColor"].value),i=t==null?void 0:t.useStore(u=>u.data["Directional Light.directionalLightEnabled"].value),a=t==null?void 0:t.useStore(u=>u.data["Directional Light.directionalLightIntensity"].value),s=t==null?void 0:t.useStore(u=>u.data["Directional Light.directionalLightColor"].value),o=t==null?void 0:t.useStore(u=>u.data["Directional Light.directionalLightPosition"].value);return Je.jsxs(Je.Fragment,{children:[Je.jsx("ambientLight",{visible:e,intensity:n,color:r}),Je.jsx("directionalLight",{visible:i,intensity:a,color:s,position:o})]})};var OC=(t=>(t.escape="escape",t.toggleDrawer="toggleDrawer",t))(OC||{});const BUe=({children:t})=>Je.jsx(Mae,{map:[{name:OC.escape,keys:["Escape"]},{name:OC.toggleDrawer,keys:["KeyD"]}],children:t}),UUe=t=>t.value&&!t.disabled&&t.render,E5=t=>t[Math.floor(Math.random()*t.length)],Zo=(t,e=4)=>{const n=t[1]-t[0];return Math.round(Math.random()*n*e)/e+t[0]},M5=()=>{const t=Math.random()<=.6666666666666666?1:2;if(t==1)return Math.random()<=.5?`${Zo([1,5])}t`:`${Zo([0,1],16)}t`;if(t==2){const e=Math.random()<=.5?"sin":"cos",n=Zo([0,1],16),r=Zo([1,10]);return`${n}${e}(${r}t)`}return"0"},zUe=()=>{const t={...Kn.getState().currentPlot},e=AUe();if(!(t&&e))return;const n=Object.fromEntries(Object.keys(e).map(r=>[r,UUe(e[r])]));if(n.innerGeometryRandomize&&(n.innerGeometryRandomizeShape&&(t.innerGeometryShape=E5(xUe)),n.innerGeometryRandomizeRadius1&&(t.innerGeometryRadius1=Zo(e.innerGeometryRadius1Range.value)),n.innerGeometryRandomizeRadius2&&(t.innerGeometryRadius2=Zo(e.innerGeometryRadius2Range.value))),n.outerGeometryRandomize&&(n.outerGeometryRandomizeShape&&(t.outerGeometryShape=E5(bUe)),n.outerGeometryRandomizeRadius&&(t.outerGeometryRadius=Zo(e.outerGeometryRadiusRange.value))),n.dLineRandomize&&(n.dLineEqualsOuterGeometryRadius?t.dLineRadius=t.outerGeometryRadius:n.dLineRandomizeRadius&&(t.dLineRadius=Zo(e.dLineRadiusRange.value))),n.curveRandomize){if(n.curveRandomizeTheta&&(t.curveTheta=M5()),n.curveRandomizePhi&&(t.curvePhi=M5()),n.curveRandomizeTStart){const r=Zo(e.curveTStartRange.value,1);if(t.calculationType==="Fixed Interval"){const i=Math.min(r+t.curveTRange[1]-t.curveTRange[0],200);t.curveTRange=[r,i]}else t.calculationType==="Endless"&&(t.curveTStart=r)}n.curveRandomizeTInterval&&(t.curveTRange=[t.curveTRange[0],Math.min(t.curveTRange[0]+Zo(e.curveTIntervalRange.value,1),200)])}return t},kUe=t=>{let e;if(t==="calculate input"?e=SUe():t==="calculate random"&&(e=zUe()),!!e)return e},$Ue=()=>{const t=$.useMemo(()=>new Worker(new URL("/spherical-trochoids/assets/calculationsWorker-Or18IydA.js",import.meta.url),{type:"module"}),[]);return $.useEffect(()=>{t.onmessage=e=>{e.data.calculationStatus==="success"&&vt.setState({parser:CUe(e.data.inputs),fixedIntervalCurvePoints:e.data.curvePoints,lValues:e.data.lValues,transformMatrixValues:e.data.transformMatrixValues,repositionCamera:!0}),Kn.getState().addToPlotHistory(e.data.inputs),vt.setState({calculationState:"ready"})}},[t]),$.useEffect(()=>{const e=vt.subscribe(n=>n.calculationState,n=>{if(n==="calculate input"||n==="calculate random"){const r=kUe(n);vt.setState({calculationState:"calculating"}),t.postMessage(r)}});return()=>{e()}}),$.useEffect(()=>{vt.setState({calculationState:"calculate input"})},[]),Je.jsx(Je.Fragment,{})},HUe=()=>{const t=vt(g=>g.fixedIntervalCurvePoints),e=vt(g=>g.levaStores.animation),n=vt(g=>g.levaStores.randomization),r=vt(g=>g.scrubbing),i=Kn(g=>g.currentPlot.curveTRange),a=i[1]-i[0],s=vt(g=>g.t),o=vt(g=>g.randomizeIn),u=vt(g=>g.calculationState),l=Kn(g=>g.currentPlot.calculationType),c=Kn(g=>g.currentPlot.curveTStart),f=n==null?void 0:n.useStore(g=>g.data.autoRandomize.value),d=n==null?void 0:n.useStore(g=>g.data.autoRandomizeType.value),h=n==null?void 0:n.useStore(g=>g.data.randomizeAtTValue.value),m=n==null?void 0:n.useStore(g=>g.data.randomizeEveryNSeconds.value),v=(e==null?void 0:e.useStore(g=>g.data.speed.value))||1,y=e==null?void 0:e.useStore(g=>g.data.animate.value),p=(g,S)=>(g%S+S)%S;$.useEffect(()=>{const g=vt.subscribe(S=>S.calculationState,S=>{S==="ready"&&(l==="Endless"?vt.setState({t:c}):l==="Fixed Interval"&&vt.setState({t:i[0]}))});return()=>{g()}});const x=$.useRef(0);return Ro((g,S)=>{x.current=s+S*v*.5,y&&!r&&u==="ready"&&(l==="Fixed Interval"?(vt.setState({t:p(x.current-i[0],a)+i[0]}),f&&d==="At t Max"&&x.current>=i[1]&&vt.setState({calculationState:"calculate random"})):l==="Endless"&&(vt.setState({t:x.current}),f&&d==="At t Value"&&x.current>=h&&vt.setState({calculationState:"calculate random"})),f&&d==="Every n Seconds"&&(o>0?vt.setState({randomizeIn:Math.max(o-S,0)}):(console.log(o),vt.setState({calculationState:"calculate random",randomizeIn:parseFloat((m==null?void 0:m.replace("s",""))||"30")})))),l==="Fixed Interval"&&vt.setState({ind:(s-i[0])/(i[1]-i[0])*(t.length/3)})}),null};t0({MeshLineGeometry:R9,MeshLineMaterial:P9});const GUe=()=>{const t=Kn(S=>S.currentPlot.innerGeometryShape),e=$.useRef(null),n=Kn(S=>S.currentPlot.innerGeometryRadius1),r=Kn(S=>S.currentPlot.innerGeometryRadius2),i=vt(S=>S.levaStores.style),a="Inner Geometry.innerGeometry",s=i==null?void 0:i.useStore(S=>S.data[`${a}Visible`].value),o=(i==null?void 0:i.useStore(S=>S.data[`${a}Material`].value))||"MeshStandardMaterial",u=i==null?void 0:i.useStore(S=>S.data[`${a}Color`].value),l=i==null?void 0:i.useStore(S=>S.data[`${a}Emissive`].value),c=i==null?void 0:i.useStore(S=>S.data[`${a}EmissiveIntensity`].value),f=i==null?void 0:i.useStore(S=>S.data[`${a}Metalness`].value),d=i==null?void 0:i.useStore(S=>S.data[`${a}Roughness`].value),h=i==null?void 0:i.useStore(S=>S.data[`${a}FlatShading`].value),m=i==null?void 0:i.useStore(S=>S.data[`${a}Wireframe`].value),v=$.useRef(null),y=$.useRef(null),p=$.useRef(null),x=$.useMemo(()=>({MeshBasicMaterial:Je.jsx("meshBasicMaterial",{ref:v}),MeshStandardMaterial:Je.jsx("meshStandardMaterial",{ref:y}),MeshNormalMaterial:Je.jsx("meshNormalMaterial",{ref:p})}),[]);$.useEffect(()=>{v.current&&(v.current.color=new ft(u||wt.innerGeometryColor),m!==void 0&&(v.current.wireframe=m)),y.current&&(y.current.color=new ft(u||wt.innerGeometryColor),y.current.emissive=new ft(l||wt.innerGeometryEmissive),y.current.emissiveIntensity=c||wt.innerGeometryEmissiveIntensity,y.current.metalness=f||wt.innerGeometryMetalness,y.current.roughness=d||wt.innerGeometryRoughness,h!==void 0&&(y.current.flatShading=h,y.current.needsUpdate=!0),m!==void 0&&(y.current.wireframe=m)),p.current&&(h!==void 0&&(p.current.flatShading=h,p.current.needsUpdate=!0),m!==void 0&&(p.current.wireframe=m))},[u,l,c,f,d,h,m,o]);const g=$.useMemo(()=>({Sphere:Je.jsx("icosahedronGeometry",{args:[1,5]}),Torus:Je.jsx("torusGeometry",{args:[n,r,48,64]})}),[n,r]);return Je.jsx(Je.Fragment,{children:Je.jsxs("mesh",{ref:e,scale:t==="Sphere"?n:1,visible:s,children:[g[t],x[o]]})})},VUe=()=>{const t=vt(I=>I.lValues),e=vt(I=>I.transformMatrixValues),n=vt(I=>I.parser),r=vt(I=>I.ind),i=vt(I=>I.t),a=$.useRef(null),s=vt(I=>I.levaStores.animation),o=(s==null?void 0:s.useStore(I=>I.data.speed.value))||1,u=Kn(I=>I.currentPlot.calculationType),l=Kn(I=>I.currentPlot.outerGeometryRadius),c=Kn(I=>I.currentPlot.outerGeometryShape),f=new Ht,d=new fe,h=new Ni,m=new fe;$.useEffect(()=>{const I=vt.subscribe(j=>j.calculationState,j=>{u==="Endless"&&j==="ready"&&(n.set("L",0),n.set("tDelta",0),n.set("dAlpha",0))});return()=>{I()}});const v=vt(I=>I.calculationState);let y,p;Ro((I,j)=>{v==="ready"&&(y=r%1,p=r>>0,n.set("t",i),n.set("tDelta",j*o*.5),u==="Fixed Interval"?c==="Circle"?(n.set("L",t[p]*(1-y)+t[p+1]*y),n.evaluate("alpha = L / r"),f.fromArray(n.evaluate("flatten(transpose(transformMatrix(t)))").toArray())):c==="Sphere"&&f.fromArray(e.slice(p*16,(p+1)*16)):u==="Endless"&&(c==="Circle"?(n.evaluate("alpha = L / r"),f.fromArray(n.evaluate("flatten(transpose(transformMatrix(t)))").toArray()),n.evaluate("L = L + norm(contactPointDt(t)) * tDelta"),n.set("prevT",i)):c==="Sphere"&&(n.evaluate("outerRotationMatrix = rotationMatrix(dAlpha, outerCenterBasisZ(t))                        * outerRotationMatrix"),f.fromArray(n.evaluate("flatten(transpose(transformMatrix(t)))").toArray()),n.evaluate("dAlpha = norm(outerCenterDt(t)) / r * tDelta"))),f.decompose(d,h,m),a.current.position.lerp(d,1),a.current.quaternion.slerp(h,1))});const x=vt(I=>I.levaStores.style),g="Outer Geometry.outerGeometry",S=x==null?void 0:x.useStore(I=>I.data[`${g}Visible`].value),E=(x==null?void 0:x.useStore(I=>I.data[`${g}Material`].value))||"MeshStandardMaterial",_=x==null?void 0:x.useStore(I=>I.data[`${g}Color`].value),A=x==null?void 0:x.useStore(I=>I.data[`${g}Emissive`].value),T=x==null?void 0:x.useStore(I=>I.data[`${g}EmissiveIntensity`].value),M=x==null?void 0:x.useStore(I=>I.data[`${g}Metalness`].value),C=x==null?void 0:x.useStore(I=>I.data[`${g}Roughness`].value),N=x==null?void 0:x.useStore(I=>I.data[`${g}FlatShading`].value),P=x==null?void 0:x.useStore(I=>I.data[`${g}Wireframe`].value),H=$.useRef(null),L=$.useRef(null),z=$.useRef(null),O=$.useRef(null),F=$.useMemo(()=>({MeshBasicMaterial:Je.jsx("meshBasicMaterial",{ref:L}),MeshStandardMaterial:Je.jsx("meshStandardMaterial",{ref:z}),MeshNormalMaterial:Je.jsx("meshNormalMaterial",{ref:O})}),[]);$.useEffect(()=>{L.current&&(L.current.color=new ft(_||wt.outerGeometryColor),P!==void 0&&(L.current.wireframe=P),c==="Circle"?L.current.side=ri:L.current.side=ss),z.current&&(z.current.color=new ft(_||wt.outerGeometryColor),z.current.emissive=new ft(A||wt.outerGeometryEmissive),z.current.emissiveIntensity=T||wt.outerGeometryEmissiveIntensity,z.current.metalness=M||wt.outerGeometryMetalness,z.current.roughness=C||wt.outerGeometryRoughness,N!==void 0&&(z.current.flatShading=N,z.current.needsUpdate=!0),P!==void 0&&(z.current.wireframe=P),c==="Circle"?z.current.side=ri:z.current.side=ss),O.current&&(N!==void 0&&(O.current.flatShading=N,O.current.needsUpdate=!0),P!==void 0&&(O.current.wireframe=P),c==="Circle"?O.current.side=ri:O.current.side=ss)},[_,A,T,M,C,N,P,E,c]);const U=$.useMemo(()=>({Circle:Je.jsx("circleGeometry",{}),Sphere:Je.jsx("icosahedronGeometry",{args:[1,5]})}),[]);return Je.jsx(Je.Fragment,{children:Je.jsxs("group",{ref:a,children:[Je.jsxs("mesh",{ref:H,scale:l,visible:S,children:[F[E],U[c]]}),Je.jsx(WUe,{}),Je.jsx(qUe,{})]})})},WUe=()=>{const t=Kn(x=>x.currentPlot.dLineRadius),e=vt(x=>x.levaStores.style),n="d Line.dLine",r=e==null?void 0:e.useStore(x=>x.data[`${n}Visible`].value),i=(e==null?void 0:e.useStore(x=>x.data[`${n}Width`].value))||.05,a=(e==null?void 0:e.useStore(x=>x.data[`${n}Material`].value))||"MeshStandardMaterial",s=e==null?void 0:e.useStore(x=>x.data[`${n}Color`].value),o=e==null?void 0:e.useStore(x=>x.data[`${n}Emissive`].value),u=e==null?void 0:e.useStore(x=>x.data[`${n}EmissiveIntensity`].value),l=e==null?void 0:e.useStore(x=>x.data[`${n}Metalness`].value),c=e==null?void 0:e.useStore(x=>x.data[`${n}Roughness`].value),f=e==null?void 0:e.useStore(x=>x.data[`${n}FlatShading`].value),d=e==null?void 0:e.useStore(x=>x.data[`${n}Wireframe`].value),h=$.useRef(null),m=$.useRef(null),v=$.useRef(null),y=$.useRef(null),p=$.useMemo(()=>({MeshBasicMaterial:Je.jsx("meshBasicMaterial",{ref:m}),MeshStandardMaterial:Je.jsx("meshStandardMaterial",{ref:v}),MeshNormalMaterial:Je.jsx("meshNormalMaterial",{ref:y})}),[]);return $.useEffect(()=>{m.current&&(m.current.color=new ft(s||wt.dLineColor),d!==void 0&&(m.current.wireframe=d)),v.current&&(v.current.color=new ft(s||wt.dLineColor),v.current.emissive=new ft(o||wt.dLineEmissive),v.current.emissiveIntensity=u||wt.dLineEmissiveIntensity,v.current.metalness=l||wt.dLineMetalness,v.current.roughness=c||wt.dLineRoughness,f!==void 0&&(v.current.flatShading=f,v.current.needsUpdate=!0),d!==void 0&&(v.current.wireframe=d)),y.current&&(f!==void 0&&(y.current.flatShading=f,y.current.needsUpdate=!0),d!==void 0&&(y.current.wireframe=d))},[s,o,u,l,c,f,d,a]),Je.jsxs("mesh",{ref:h,scale:[t,i,i],visible:r,position:[-t/2,0,0],children:[p[a],Je.jsx("boxGeometry",{})]})},qUe=()=>{const t=Kn(L=>L.currentPlot.dLineRadius),e=vt(L=>L.levaStores.style),n="d Point.dPoint",r=e==null?void 0:e.useStore(L=>L.data[`${n}Visible`].value),i=(e==null?void 0:e.useStore(L=>L.data[`${n}Radius`].value))||.1,a=(e==null?void 0:e.useStore(L=>L.data[`${n}Material`].value))||"MeshStandardMaterial",s=e==null?void 0:e.useStore(L=>L.data[`${n}Color`].value),o=e==null?void 0:e.useStore(L=>L.data[`${n}Emissive`].value),u=e==null?void 0:e.useStore(L=>L.data[`${n}EmissiveIntensity`].value),l=e==null?void 0:e.useStore(L=>L.data[`${n}Metalness`].value),c=e==null?void 0:e.useStore(L=>L.data[`${n}Roughness`].value),f=e==null?void 0:e.useStore(L=>L.data[`${n}FlatShading`].value),d=e==null?void 0:e.useStore(L=>L.data[`${n}Wireframe`].value),h=$.useRef(null),m=$.useRef(null),v=$.useRef(null),y=$.useRef(null),p=$.useMemo(()=>({MeshBasicMaterial:Je.jsx("meshBasicMaterial",{ref:m}),MeshStandardMaterial:Je.jsx("meshStandardMaterial",{ref:v}),MeshNormalMaterial:Je.jsx("meshNormalMaterial",{ref:y})}),[]);$.useEffect(()=>{m.current&&(m.current.color=new ft(s||wt.dPointColor),d!==void 0&&(m.current.wireframe=d)),v.current&&(v.current.color=new ft(s||wt.dPointColor),v.current.emissive=new ft(o||wt.dPointEmissive),v.current.emissiveIntensity=u||wt.dPointEmissiveIntensity,v.current.metalness=l||wt.dPointMetalness,v.current.roughness=c||wt.dPointRoughness,f!==void 0&&(v.current.flatShading=f,v.current.needsUpdate=!0),d!==void 0&&(v.current.wireframe=d)),y.current&&(f!==void 0&&(y.current.flatShading=f,y.current.needsUpdate=!0),d!==void 0&&(y.current.wireframe=d))},[s,o,u,l,c,f,d,a]);const x=vt(L=>L.levaStores.style),g="Curve.curve",S=x==null?void 0:x.useStore(L=>L.data[`${g}Visible`].value),E=x==null?void 0:x.useStore(L=>L.data[`${g}DrawType`].value),_=x==null?void 0:x.useStore(L=>L.data[`${g}Color`].value),A=x==null?void 0:x.useStore(L=>L.data[`${g}Width`].value),T=x==null?void 0:x.useStore(L=>L.data[`${g}TrailLength`].value),M=x==null?void 0:x.useStore(L=>L.data[`${g}TrailDecay`].value),C=$.useRef(null);Ro(()=>{C.current&&h.current&&C.current.position.set(...h.current.position.toArray())});const[N,P]=$.useState(!1);$.useEffect(()=>{const L=vt.subscribe(z=>z.calculationState,z=>{if(E==="Trail"){if(z==="calculating")P(!0);else if(z==="ready"){const O=setTimeout(()=>{P(!1),clearInterval(O)},100)}}});return()=>{L()}});const H=vt(L=>L.calculationState);return Je.jsxs(Je.Fragment,{children:[Je.jsxs("mesh",{ref:h,scale:i,visible:r,position:[-t,0,0],children:[p[a],Je.jsx("icosahedronGeometry",{args:[1,5]})]}),S&&E==="Trail"&&H==="ready"&&!N&&Je.jsx(ase,{color:_,width:A*20,length:T,decay:M,stride:1e-4,interval:1,children:Je.jsx("mesh",{ref:C})})]})},jUe=()=>{const t=vt(l=>l.ind),e=vt(l=>l.fixedIntervalCurvePoints),n=$.useRef(null),r="Curve.curve",i=vt(l=>l.levaStores.style),a=i==null?void 0:i.useStore(l=>l.data[`${r}Visible`].value),s=i==null?void 0:i.useStore(l=>l.data[`${r}DrawType`].value),o=i==null?void 0:i.useStore(l=>l.data[`${r}Color`].value),u=i==null?void 0:i.useStore(l=>l.data[`${r}Width`].value);return Ro(()=>{s==="From Start Point"&&(n.current.drawRange.count=t*6)}),Je.jsxs("mesh",{visible:a&&s==="From Start Point",children:[Je.jsx("meshLineGeometry",{ref:n,points:e}),Je.jsx("meshLineMaterial",{color:o||"red",lineWidth:u})]})},UM=new ft,XUe=Yae({uColor:new ft(0,0,0),uAlpha:1},`
    void main() {
        gl_Position = vec4(position, 1.0);
    }`,`
    uniform vec3 uColor;
    uniform float uAlpha;

    void main() {
        gl_FragColor = vec4(uColor, uAlpha);
    }`);t0({OverlayMaterial:XUe});const YUe=()=>{const[t,e]=$.useState(!0),n=$.useRef(null),r=vt(i=>{var a;return(a=i.levaStores.style)==null?void 0:a.get("Background.backgroundColor")});return $.useEffect(()=>{UM.set(r),n.current.uColor=UM},[r]),$.useEffect(()=>{const i=vt.subscribe(a=>a.calculationState,a=>{a==="calculating"?e(!0):a==="ready"&&e(!1)});return()=>{i()}}),Ro(()=>{n.current.uAlpha=t?sb.lerp(n.current.uAlpha,1,.25):sb.lerp(n.current.uAlpha,0,.025)}),Je.jsxs("mesh",{children:[Je.jsx("planeGeometry",{args:[2,2,1,1]}),Je.jsx("overlayMaterial",{ref:n,uColor:UM,uAlpha:1,transparent:!0})]})},ZUe=()=>Je.jsxs("group",{children:[Je.jsx(YUe,{}),Je.jsx(HUe,{}),Je.jsx($Ue,{}),Je.jsx(GUe,{}),Je.jsx(VUe,{}),Je.jsx(jUe,{})]});function KUe(){On.DEFAULT_UP.set(0,0,1);const t=vt(r=>r.autoRotate),e=vt(r=>r.autoRotateSpeed),n=vt(r=>{var i;return(i=r.levaStores.style)==null?void 0:i.get("Background.backgroundColor")});return Je.jsx($.Suspense,{fallback:Je.jsx(Die,{}),children:Je.jsxs(BUe,{children:[Je.jsxs(Eie,{shadows:!0,camera:{position:[8,-11,5],near:.1,far:100},style:{background:n},children:[Je.jsx(sse,{makeDefault:!0,enableDamping:!0,enablePan:!1,autoRotate:t,autoRotateSpeed:e,minDistance:3,maxDistance:70}),Je.jsx(mDe,{}),Je.jsx(LUe,{}),Je.jsx(ZUe,{}),Je.jsx(gse,{frames:1/0,resolution:256,children:Je.jsx(FUe,{})}),Je.jsx(HNe,{})]}),Je.jsx(OUe,{})]})})}zM.createRoot(document.getElementById("root")).render(Je.jsx(Ae.StrictMode,{children:Je.jsx(KUe,{})}));
